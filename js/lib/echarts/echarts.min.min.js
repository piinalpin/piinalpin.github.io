!function(b,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports):"function"==typeof define&&define.amd?define(["exports"],a):a(b.echarts={})}(this,function(o){"use strict";var afO=2311,zb=function(){return afO++},t="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:function(b){var a={},c=b.match(/Firefox\/([\d.]+)/),d=b.match(/MSIE\s([\d.]+)/)||b.match(/Trident\/.+?rv:(([\d.]+))/),e=b.match(/Edge\/([\d.]+)/),f=/micromessenger/i.test(b);return c&&(a.firefox=!0,a.version=c[1]),d&&(a.ie=!0,a.version=d[1]),e&&(a.edge=!0,a.version=e[1]),f&&(a.weChat=!0),{browser:a,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!a.ie&&!a.edge,pointerEventsSupported:"onpointerdown"in window&&(a.edge||a.ie&&11<=a.version),domSupported:"undefined"!=typeof document}}(navigator.userAgent),y_={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},yY={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},gf=Object.prototype.toString,gd=Array.prototype,afN=gd.forEach,afM=gd.filter,fS=gd.slice,afL=gd.map,afK=gd.reduce,oW={},oT,yL,afJ,yG,afI,afH,du,cC,afG,yq,Z,afF,oC,afE,ym,oz,cw,om,xZ,afA,afy,afw,nY,bs,bh,di,eh,nX,gU,gj,xL,nT,xK,xJ,je,afv,afu,aft,nI,xi,hl,afn,cm,bW,bO,bP,bR,ci,hx,hy,hz,e,w$,fv,afl,nr,cL,np,io,cO,nn,nm,nl,nj,ni,iD,nc,afe,oy,iI,nb,mR,afb,afa,ws,wr,wq,mu,dH,mt,ms,jk,mp,ae_,wc,aO,vX,aeZ,h$,dv,l$,aeY,es,et,aeU,vT,vR,aeS,aeR,dc,aeQ,aeN,aeM,aeL,aeK,ik,cM,ii,vH,vG,id,bF,aS,eO,az,aA,lI,lH,cU,hI,hH,hG,vv,vu,P,bv,co,bw,br,vs,vq,fM,fN,ho,eq,lz,aB,vm,fX,cn,ei,aeF,at,a$,vg,lt,aeB,eb,aeA,vc,aez,aex,lr,gO,gM,gK,lq,va,aew,aev,q,bI,cs,bC,gH,aF,aZ,dZ,dg,y,gn,av,aD,gX,lg,uR,aeu,hc,hd,he,f_,uN,uM,uL,uK,uJ,lb,bS,hu,uB,uy,bY,aep,aeo,aen,aek,il,t$,aej,tV,ke,aei,aeg,dJ,aef,aed,pd,tN,aec,jb,tM,dL,dM,jL,jm,tJ,aeb,x,tE,aea,jA,jz,ad$,dO,gy,jt,js,tw,jq,tt,jF,dY,jM,jN,ad_,jS,iZ,dK,iT,tg,adZ,bc,fr,te,adS,adQ,sZ,kq,adN,adM,sP,adL,kD,cz,kH,cy,hK,hJ,kL,sB,sA,fC,M,by,k$,sl,adA,le,adw,gJ,r_,rZ,adv,bM,afP,gV,aU,rV,ado,hP,fq,rQ,rO,adm,ai,lQ,rK,adl,ct,adk,adj,eu,adi,adh,ri,pt,jx,adg,ade,ac,add,fF,mm,bz,bE,cK,qZ,A,cQ,adc,jo,jj,mN,qO,qL,ji,qG,mS,dw,iY,adb,ada,mX,ac_,qs,ib,fh,acZ,acY,acW,acV,acT,acR,ab,h,ed,pV,n$,oa,ob,og,bA,oi,pL,acM,acL,pz,py,px,Y,oA,oB,hM,hN,acK,acJ,acI,acH,it,bx,ix,dI,acG,acF,acE,acD,acC,oZ,acB,acz,acy,acx,fO,ps,Q,act,pw,rX,bf,acs,acq,acp,aco,acm,ex,pQ,pR,pS,hs,nZ,aY,aT,acj,p$,ace,qq,cE,acc,eR,qw,an,acb,cF,qH,qI,qJ,qK,ee,mJ,aE,qY,ab$,ab_,mh,rb,abZ,abY,abX,abW,jc,rj,rk,rl,rm,rp,abU,rt,mb,iW,rA,abS,iE,rJ,lR,ck,fo,abP,abO,lx,cZ,c$,dR,abN,abM,abL,sa,abI,d_,se,gg,si,abz,kM,sC,sG,sO,gF,fc,ih,jI,jr,tx,ty,bp,abn,abm,abl,abk,abi,jD,abg,tI,jH,gm,tL,ie,B,fQ,abf,abe,kk,abd,fd,ia,uj,kA,ul,aa$,aaZ,aaY,aaX,aM,fH,uC,kU,aaT,k_,cv,dk,lh,lj,lk,dU,lo,uY,dV,dX,dd,gR,vj,lu,aaS,ej,aaR,aaQ,vr,vt,aaO,lM,vA,vB,vC,aaN,vE,aaL,vI,cp,bD,aaK,fm,eB,aaJ,aaH,aaG,aaF,vS,aaD,aaC,sI,aaB,aay,iU,aax,aaw,aav,aau,aas,bZ,eS,aap,xb,aag,aaf,aae,xh,fR,xj,aac,xl,aaa,xq,z_,zZ,zY,zW,zV,zU,zT,da,zS,zQ,zi,cD,gP,ha,xO,dm,xR,xT,zO,zN,zM,xY,oh,zJ,yu,zC,yw,bt,yz,yA,cd,zu,yM,dN,yO,oP,zs,zn,zf,zm,zk,zj,zl,zd,zo,zp,zq,zr,dC,yH,yD,yC,yv,zD,zE,zF,zG,zH,zI,zX,nF,z$,aad,aah,aai,aaj,aak,wW,aaq,aar,wN,aat,wE,aaA,vU,aaE,vQ,vP,aaI,vO,iG,eN,lC,cj,hp,hr,kJ,aaV,eF,aa_,um,ug,kp,ua,tH,jG,abj,jB,gz,tB,tA,tu,dG,tb,dA,dx,ks,kP,abA,sq,ew,abE,abG,sb,abJ,abK,rS,fz,rG,abR,abV,rh,mk,qC,no,nB,ql,aci,ack,acn,hE,pB,acu,cH,oS,pc,pi,o_,i$,pj,oU,oH,n_,qr,qy,ac$,qF,dW,q$,jf,adf,rD,rM,lG,lE,lD,hA,cX,lA,bT,ly,gv,r$,adx,li,sk,adG,st,adI,kC,sQ,sY,km,adR,s_,adT,adU,kj,adW,adX,iK,tf,tm,tD,bQ,aee,iQ,fx,aeh,ael,aem,kr,uf,uv,uw,aR,uQ,de,z,gq,aey,vb,ve,ls,S,lv,_,aw,lw,vo,bB,fD,lN,vJ,vK,ir,aP,cW,lO,lP,lU,aeT,l_,aeV,aeW,aeX,vV,md,mo,dr,afd,eM,ne,wO,wR,wS,cP,afk,wV,ga,xC,g_,nL,gk,cf,afx,hm,afC;function yQ(a,b){"createCanvas"===a&&(oT=null),oW[a]=b}function i(a){var c,d,b,e,g,f;if(null==a||"object"!=typeof a)return a;if(c=a,d=gf.call(a),"[object Array]"===d){if(!eT(a)){c=[];for(b=0,e=a.length;b<e;b++)c[b]=i(a[b])}}else if(yY[d]){if(!eT(a))if(g=a.constructor,a.constructor.from)c=g.from(a);else{c=new g(a.length);for(b=0,e=a.length;b<e;b++)c[b]=i(a[b])}}else if(!y_[d]&&!eT(a)&&!fi(a))for(f in c={},a)a.hasOwnProperty(f)&&(c[f]=i(a[f]));return c}function l(e,f,g){var a,c,d;if(!m(f)||!m(e))return g?i(f):e;for(a in f)f.hasOwnProperty(a)&&(c=e[a],d=f[a],!m(d)||!m(c)||b(d)||b(c)||fi(d)||fi(c)||oO(d)||oO(c)||eT(d)||eT(c)?!g&&a in e||(e[a]=i(f[a])):l(c,d,g));return e}function fJ(a,d){for(var b=a[0],c=1,e=a.length;c<e;c++)b=l(b,a[c],d);return b}function f(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c}function g(c,b,d){for(var a in b)b.hasOwnProperty(a)&&(d?null!=b[a]:null==c[a])&&(c[a]=b[a]);return c}function eA(){return oW.createCanvas()}function yP(){return oT=oT||eA().getContext("2d")}function v(a,c){if(a){if(a.indexOf)return a.indexOf(c);for(var b=0,d=a.length;b<d;b++)if(a[b]===c)return b}return-1}function D(a,d){var b=a.prototype,c;function e(){}for(c in e.prototype=d.prototype,a.prototype=new e,b)b.hasOwnProperty(c)&&(a.prototype[c]=b[c]);(a.prototype.constructor=a).superClass=d}function C(a,b,c){g(a="prototype"in a?a.prototype:a,b="prototype"in b?b.prototype:b,c)}function bL(a){if(a)return"string"!=typeof a&&"number"==typeof a.length}function a(a,c,e){var b,f,d;if(a&&c)if(a.forEach&&a.forEach===afN)a.forEach(c,e);else if(a.length===+a.length)for(b=0,f=a.length;b<f;b++)c.call(e,a[b],b,a);else for(d in a)a.hasOwnProperty(d)&&c.call(e,a[d],d,a)}function c(a,c,d){if(a&&c){if(a.map&&a.map===afL)return a.map(c,d);for(var e=[],b=0,f=a.length;b<f;b++)e.push(c.call(d,a[b],b,a));return e}}function eD(a,d,b,e){if(a&&d){if(a.reduce&&a.reduce===afK)return a.reduce(d,b,e);for(var c=0,f=a.length;c<f;c++)b=d.call(e,b,a[c],c,a);return b}}function W(a,c,d){if(a&&c){if(a.filter&&a.filter===afM)return a.filter(c,d);for(var e=[],b=0,f=a.length;b<f;b++)c.call(d,a[b],b,a)&&e.push(a[b]);return e}}function yN(a,c,d){if(a&&c)for(var b=0,e=a.length;b<e;b++)if(c.call(d,a[b],b,a))return a[b]}function k(a,b){var c=fS.call(arguments,2);return function(){return a.apply(b,c.concat(fS.call(arguments)))}}function j(a){var b=fS.call(arguments,1);return function(){return a.apply(this,b.concat(fS.call(arguments)))}}function b(a){return"[object Array]"===gf.call(a)}function ag(a){return"function"==typeof a}function E(a){return"[object String]"===gf.call(a)}function m(a){var b=typeof a;return"function"==b||!!a&&"object"==b}function oO(a){return!!y_[gf.call(a)]}function bu(a){return!!yY[gf.call(a)]}function fi(a){return"object"==typeof a&&"number"==typeof a.nodeType&&"object"==typeof a.ownerDocument}function eY(a){return a!=a}function af(c){for(var a=0,b=arguments.length;a<b;a++)if(null!=arguments[a])return arguments[a]}function R(a,b){return null!=a?a:b}function dF(a,b,c){return null!=a?a:null!=b?b:c}function oN(){return Function.call.apply(fS,arguments)}function oM(a){if("number"==typeof a)return[a,a,a,a];var b=a.length;return 2===b?[a[0],a[1],a[0],a[1]]:3===b?[a[0],a[1],a[2],a[1]]:a}function cg(a,b){if(!a)throw new Error(b)}function aV(a){return null==a?null:"function"==typeof a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}oW.createCanvas=function(){return document.createElement("canvas")},yL="__ec_primitive__";function oK(a){a[yL]=!0}function eT(a){return a[yL]}function iv(c){var f=b(c),d;this.data={},d=this;function e(a,b){f?d.set(a,b):d.set(b,a)}c instanceof iv?c.each(e):c&&a(c,e)}function n(a){return new iv(a)}function oJ(b,c){for(var d=new b.constructor(b.length+c.length),a=0,e;a<b.length;a++)d[a]=b[a];e=b.length;for(a=0;a<c.length;a++)d[a+e]=c[a];return d}function aa(){}iv.prototype={constructor:iv,get:function(a){return this.data.hasOwnProperty(a)?this.data[a]:null},set:function(a,b){return this.data[a]=b},each:function(a,c){for(var b in void 0!==c&&(a=k(a,c)),this.data)this.data.hasOwnProperty(b)&&a(this.data[b],b)},removeKey:function(a){delete this.data[a]}},afJ=(Object.freeze||Object)({$override:yQ,clone:i,merge:l,mergeAll:fJ,extend:f,defaults:g,createCanvas:eA,getContext:yP,indexOf:v,inherits:D,mixin:C,isArrayLike:bL,each:a,map:c,reduce:eD,filter:W,find:yN,bind:k,curry:j,isArray:b,isFunction:ag,isString:E,isObject:m,isBuiltInObject:oO,isTypedArray:bu,isDom:fi,eqNaN:eY,retrieve:af,retrieve2:R,retrieve3:dF,slice:oN,normalizeCssArray:oM,assert:cg,trim:aV,setAsPrimitive:oK,isPrimitive:eT,createHashMap:n,concatArray:oJ,noop:aa}),yG="undefined"==typeof Float32Array?Array:Float32Array;function cG(a,b){var c=new yG(2);return null==a&&(a=0),null==b&&(b=0),c[0]=a,c[1]=b,c}function ah(a,b){return a[0]=b[0],a[1]=b[1],a}function bi(b){var a=new yG(2);return a[0]=b[0],a[1]=b[1],a}function yF(a,b,c){return a[0]=b,a[1]=c,a}function oI(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a}function eW(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a}function ce(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a}function eZ(a){return Math.sqrt(oG(a))}afI=eZ;function oG(a){return a[0]*a[0]+a[1]*a[1]}afH=oG;function ij(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a}function ef(a,b){var c=eZ(b);return 0===c?(a[0]=0,a[1]=0):(a[0]=b[0]/c,a[1]=b[1]/c),a}function fb(a,b){return Math.sqrt((a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1]))}du=fb;function ys(a,b){return(a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1])}cC=ys;function yr(b,a,c,d){return b[0]=a[0]+d*(c[0]-a[0]),b[1]=a[1]+d*(c[1]-a[1]),b}function F(b,c,a){var d=c[0],e=c[1];return b[0]=a[0]*d+a[2]*e+a[4],b[1]=a[1]*d+a[3]*e+a[5],b}function bV(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a}function ch(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a}afG=(Object.freeze||Object)({create:cG,copy:ah,clone:bi,set:yF,add:oI,scaleAndAdd:eW,sub:ce,len:eZ,length:afI,lenSquare:oG,lengthSquare:afH,mul:function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},div:function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},scale:ij,normalize:ef,distance:fb,dist:du,distanceSquare:ys,distSquare:cC,negate:function(a,b){return a[0]=-b[0],a[1]=-b[1],a},lerp:yr,applyTransform:F,min:bV,max:ch});function hX(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this),this.on("globalout",this._dragEnd,this)}function eK(b,a){return{target:b,topTarget:a&&a.topTarget}}hX.prototype={constructor:hX,_dragStart:function(a){var b=a.target;b&&b.draggable&&((this._draggingTarget=b).dragging=!0,this._x=a.offsetX,this._y=a.offsetY,this.dispatchToElement(eK(b,a),"dragstart",a.event))},_drag:function(a){var b=this._draggingTarget,e,f,g,h,c,d;b&&(e=a.offsetX,f=a.offsetY,g=e-this._x,h=f-this._y,this._x=e,this._y=f,b.drift(g,h,a),this.dispatchToElement(eK(b,a),"drag",a.event),c=this.findHover(e,f,b).target,d=this._dropTarget,b!==(this._dropTarget=c)&&(d&&c!==d&&this.dispatchToElement(eK(d,a),"dragleave",a.event),c&&c!==d&&this.dispatchToElement(eK(c,a),"dragenter",a.event)))},_dragEnd:function(a){var b=this._draggingTarget;b&&(b.dragging=!1),this.dispatchToElement(eK(b,a),"dragend",a.event),this._dropTarget&&this.dispatchToElement(eK(this._dropTarget,a),"drop",a.event),this._draggingTarget=null,this._dropTarget=null}},yq=Array.prototype.slice,Z=function(a){this._$handlers={},this._$eventProcessor=a};function yn(e,a,c,d,g,k){var b=e._$handlers,f,h,i,j;if("function"==typeof c&&(g=d,d=c,c=null),!d||!a)return e;c=function(c,a){var b=c._$eventProcessor;return null!=a&&b&&b.normalizeQuery&&(a=b.normalizeQuery(a)),a}(e,c),b[a]||(b[a]=[]);for(f=0;f<b[a].length;f++)if(b[a][f].h===d)return e;return h={h:d,one:k,query:c,ctx:g||e,callAtLast:d.zrEventfulCallAtLast},i=b[a].length-1,j=b[a][i],j&&j.callAtLast?b[a].splice(i,0,h):b[a].push(h),e}Z.prototype={constructor:Z,one:function(a,b,c,d){return yn(this,a,b,c,d,!0)},on:function(a,b,c,d){return yn(this,a,b,c,d,!1)},isSilent:function(a){var b=this._$handlers;return!b[a]||!b[a].length},off:function(a,d){var b=this._$handlers,e,c,f;if(!a)return this._$handlers={},this;if(d){if(b[a]){for(e=[],c=0,f=b[a].length;c<f;c++)b[a][c].h!==d&&e.push(b[a][c]);b[a]=e}b[a]&&0===b[a].length&&delete b[a]}else delete b[a];return this},trigger:function(f){var e=this._$handlers[f],c=this._$eventProcessor,b,g,h,d,a;if(e){b=arguments,g=b.length,3<g&&(b=yq.call(b,1));for(h=e.length,d=0;d<h;)if(a=e[d],c&&c.filter&&null!=a.query&&!c.filter(f,a.query))d++;else{switch(g){case 1:a.h.call(a.ctx);break;case 2:a.h.call(a.ctx,b[1]);break;case 3:a.h.call(a.ctx,b[1],b[2]);break;default:a.h.apply(a.ctx,b)}a.one?(e.splice(d,1),h--):d++}}return c&&c.afterTrigger&&c.afterTrigger(f),this},triggerWithContext:function(g){var f=this._$handlers[g],c=this._$eventProcessor,a,h,e,i,d,b;if(f){a=arguments,h=a.length,4<h&&(a=yq.call(a,1,a.length-1));for(e=a[a.length-1],i=f.length,d=0;d<i;)if(b=f[d],c&&c.filter&&null!=b.query&&!c.filter(g,b.query))d++;else{switch(h){case 1:b.h.call(e);break;case 2:b.h.call(e,a[1]);break;case 3:b.h.call(e,a[1],a[2]);break;default:b.h.apply(e,a)}b.one?(f.splice(d,1),i--):d++}}return c&&c.afterTrigger&&c.afterTrigger(g),this}},afF=Math.log(2);function oD(b,k,c,f,d,e){var g=f+"-"+d,i=b.length,o,n,h,l,a,j,m;if(e.hasOwnProperty(g))return e[g];if(1===k)return o=Math.round(Math.log((1<<i)-1&~d)/afF),b[c][o];for(n=f|1<<c,h=c+1;f&1<<h;)h++;for(l=0,a=0,j=0;a<i;a++)m=1<<a,m&d||(l+=(j%2?-1:1)*b[c][a]*oD(b,k-1,h,n,d|m,e),j++);return e[g]=l}oC="undefined"!=typeof window&&!!window.addEventListener,afE=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ym="___zrEVENTSAVED",oz=[];function ox(c,a,b,d){return b=b||{},d||!t.canvasSupported?yi(c,a,b):t.browser.firefox&&null!=a.layerX&&a.layerX!==a.offsetX?(b.zrX=a.layerX,b.zrY=a.layerY):null!=a.offsetX?(b.zrX=a.offsetX,b.zrY=a.offsetY):yi(c,a,b),b}function yi(a,h,b){var d,e,f,g,c;if(a.getBoundingClientRect&&t.domSupported){if(d=h.clientX,e=h.clientY,"CANVAS"===a.nodeName.toUpperCase())return f=a.getBoundingClientRect(),b.zrX=d-f.left,void(b.zrY=e-f.top);if(g=a[ym]||(a[ym]={}),c=function(c,b){for(var l=b.transformer,d=b.srcCoords,g=!0,e=[],h=[],a=0,f,i,j,k;a<4;a++)f=c[a].getBoundingClientRect(),i=2*a,j=f.left,k=f.top,e.push(j,k),g&=d&&j===d[i]&&k===d[1+i],h.push(c[a].offsetLeft,c[a].offsetTop);return g?l:(b.srcCoords=e,b.transformer=function(a,b){var f=[[a[0],a[1],1,0,0,0,-b[0]*a[0],-b[0]*a[1]],[0,0,0,a[0],a[1],1,-b[1]*a[0],-b[1]*a[1]],[a[2],a[3],1,0,0,0,-b[2]*a[2],-b[2]*a[3]],[0,0,0,a[2],a[3],1,-b[3]*a[2],-b[3]*a[3]],[a[4],a[5],1,0,0,0,-b[4]*a[4],-b[4]*a[5]],[0,0,0,a[4],a[5],1,-b[5]*a[4],-b[5]*a[5]],[a[6],a[7],1,0,0,0,-b[6]*a[6],-b[6]*a[7]],[0,0,0,a[6],a[7],1,-b[7]*a[6],-b[7]*a[7]]],g={},h=oD(f,8,0,0,0,g),c,e,d;if(0!==h){for(c=[],e=0;e<8;e++)for(d=0;d<8;d++)null==c[d]&&(c[d]=0),c[d]+=((e+d)%2?-1:1)*oD(f,7,0===e?1:0,1<<e,1<<d,g)/h*b[e];return function(d,a,b){var e=a*c[6]+b*c[7]+1;d[0]=(a*c[0]+b*c[1]+c[2])/e,d[1]=(a*c[3]+b*c[4]+c[5])/e}}}(e,h))}(function(i,d){var a=d.markers,e,f,b,c,j,g,h;if(a)return a;a=d.markers=[];for(e=["left","right"],f=["top","bottom"],b=0;b<4;b++)c=document.createElement("div"),j=c.style,g=b%2,h=(b>>1)%2,j.cssText=["position:absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","width:0","height:0",e[g]+":0",f[h]+":0",e[1-g]+":auto",f[1-h]+":auto",""].join("!important;"),i.appendChild(c),a.push(c);return a}(a,g),g),c)return c(oz,d,e),b.zrX=oz[0],void(b.zrY=oz[1])}b.zrX=b.zrY=0}function dp(e,a,f){var c,d,b;return null!=(a=a||window.event).zrX?a:(c=a.type,c&&0<=c.indexOf("touch")?(d="touchend"!==c?a.targetTouches[0]:a.changedTouches[0],d&&ox(e,d,a,f)):(ox(e,a,a,f),a.zrDelta=a.wheelDelta?a.wheelDelta/120:-(a.detail||0)/3),b=a.button,null==a.which&&void 0!==b&&afE.test(a.type)&&(a.which=1&b?1:2&b?3:4&b?2:0),a)}function ov(a,b,c){oC?a.addEventListener(b,c):a.attachEvent("on"+b,c)}cw=oC?function(a){a.preventDefault(),a.stopPropagation(),a.cancelBubble=!0}:function(a){a.returnValue=!1,a.cancelBubble=!0};function yg(a){return 2===a.which||3===a.which}function os(){this._track=[]}function x$(a){var b=a[1][0]-a[0][0],c=a[1][1]-a[0][1];return Math.sqrt(b*b+c*c)}os.prototype={constructor:os,recognize:function(a,b,c){return this._doTrack(a,b,c),this._recognize(a)},clear:function(){return this._track.length=0,this},_doTrack:function(d,h,i){var a=d.touches,b,c,g,e,f;if(a){for(b={points:[],touches:[],target:h,event:d},c=0,g=a.length;c<g;c++)e=a[c],f=ox(i,e,{}),b.points.push([f.zrX,f.zrY]),b.touches.push(e);this._track.push(b)}},_recognize:function(c){var a,b;for(a in om)if(om.hasOwnProperty(a))if(b=om[a](this._track,c),b)return b}},om={pinch:function(b,c){var d=b.length,a,e,f,g;if(d)if(a=(b[d-1]||{}).points,e=(b[d-2]||{}).points||a,e&&1<e.length&&a&&1<a.length)return f=x$(a)/x$(e),isFinite(f)||(f=1),c.pinchScale=f,g=function(a){return[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]}(a),c.pinchX=g[0],c.pinchY=g[1],{type:"pinch",target:b[0].target,event:c}}},xZ="silent";function afD(a){cw(this.event)}function xX(){}xX.prototype.dispose=function(){};function ev(b,c,a,d){Z.call(this),this.storage=b,this.painter=c,this.painterRoot=d,a=a||new xX,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,this._gestureMgr,hX.call(this),this.setHandlerProxy(a)}afA=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];function afz(b,c,d){if(b[b.rectHover?"rectContain":"contain"](c,d)){for(var e,a=b;a;){if(a.clipPath&&!a.clipPath.contain(c,d))return!1;a.silent&&(e=!0),a=a.parent}return!e||xZ}return!1}ev.prototype={constructor:ev,setHandlerProxy:function(b){this.proxy&&this.proxy.dispose(),b&&(a(afA,function(a){b.on&&b.on(a,this[a],this)},this),b.handler=this),this.proxy=b},mousemove:function(b){var h=b.zrX,g=b.zrY,c=this._hovered,a=c.target,e,d,f;a&&!a.__zr&&(a=(c=this.findHover(c.x,c.y)).target),e=this._hovered=this.findHover(h,g),d=e.target,f=this.proxy,f.setCursor&&f.setCursor(d?d.cursor:"default"),a&&d!==a&&this.dispatchToElement(c,"mouseout",b),this.dispatchToElement(e,"mousemove",b),d&&d!==a&&this.dispatchToElement(e,"mouseover",b)},mouseout:function(b){this.dispatchToElement(this._hovered,"mouseout",b);for(var c,a=b.toElement||b.relatedTarget;(a=a&&a.parentNode)&&9!==a.nodeType&&!(c=a===this.painterRoot););c||this.trigger("globalout",{event:b})},resize:function(a){this._hovered={}},dispatch:function(b,c){var a=this[b];a&&a.call(this,c)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(b){var a=this.proxy;a.setCursor&&a.setCursor(b)},dispatchToElement:function(e,c,f){var a=(e=e||{}).target,d,b;if(!a||!a.silent){for(d="on"+c,b=function(c,b,a){return{type:c,event:a,target:b.target,topTarget:b.topTarget,cancelBubble:!1,offsetX:a.zrX,offsetY:a.zrY,gestureEvent:a.gestureEvent,pinchX:a.pinchX,pinchY:a.pinchY,pinchScale:a.pinchScale,wheelDelta:a.zrDelta,zrByTouch:a.zrByTouch,which:a.which,stop:afD}}(c,e,f);a&&(a[d]&&(b.cancelBubble=a[d].call(a,b)),a.trigger(c,b),a=a.parent,!b.cancelBubble););b.cancelBubble||(this.trigger(c,b),this.painter&&this.painter.eachOtherLayer(function(a){"function"==typeof a[d]&&a[d].call(a,b),a.trigger&&a.trigger(c,b)}))}},findHover:function(d,e,g){for(var b=this.storage.getDisplayList(),c={x:d,y:e},a=b.length-1,f;0<=a;a--)if(b[a]!==g&&!b[a].ignore&&(f=afz(b[a],d,e))&&(c.topTarget||(c.topTarget=b[a]),f!==xZ)){c.target=b[a];break}return c},processGesture:function(b,e){var c,a,d;this._gestureMgr||(this._gestureMgr=new os),c=this._gestureMgr,"start"===e&&c.clear(),a=c.recognize(b,this.findHover(b.zrX,b.zrY,null).target,this.proxy.dom),("end"===e&&c.clear(),a)&&(d=a.type,b.gestureEvent=d,this.dispatchToElement({target:a.target},d,a.event))}},a(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(a){ev.prototype[a]=function(b){var d=this.findHover(b.zrX,b.zrY),c=d.target;if("mousedown"===a)this._downEl=c,this._downPoint=[b.zrX,b.zrY],this._upEl=c;else if("mouseup"===a)this._upEl=c;else if("click"===a){if(this._downEl!==this._upEl||!this._downPoint||4<du(this._downPoint,[b.zrX,b.zrY]))return;this._downPoint=null}this.dispatchToElement(d,a,b)}}),C(ev,Z),C(ev,hX),afy="undefined"==typeof Float32Array?Array:Float32Array;function aL(){var a=new afy(6);return el(a),a}function el(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a}function fY(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a}function cu(c,a,b){var d=a[0]*b[0]+a[2]*b[1],e=a[1]*b[0]+a[3]*b[1],f=a[0]*b[2]+a[2]*b[3],g=a[1]*b[2]+a[3]*b[3],h=a[0]*b[4]+a[2]*b[5]+a[4],i=a[1]*b[4]+a[3]*b[5]+a[5];return c[0]=d,c[1]=e,c[2]=f,c[3]=g,c[4]=h,c[5]=i,c}function be(a,b,c){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4]+c[0],a[5]=b[5]+c[1],a}function cc(a,b,e){var j=b[0],k=b[2],f=b[4],g=b[1],h=b[3],i=b[5],c=Math.sin(e),d=Math.cos(e);return a[0]=j*d+g*c,a[1]=-j*c+g*d,a[2]=k*d+h*c,a[3]=-k*c+d*h,a[4]=d*f+c*i,a[5]=d*i-c*f,a}function fZ(a,b,e){var c=e[0],d=e[1];return a[0]=b[0]*c,a[1]=b[1]*d,a[2]=b[2]*c,a[3]=b[3]*d,a[4]=b[4]*c,a[5]=b[5]*d,a}function hb(b,c){var g=c[0],d=c[2],h=c[4],e=c[1],f=c[3],i=c[5],a=g*f-e*d;return a?(a=1/a,b[0]=f*a,b[1]=-e*a,b[2]=-d*a,b[3]=g*a,b[4]=(d*i-f*h)*a,b[5]=(e*h-g*i)*a,b):null}function xN(b){var a=aL();return fY(a,b),a}afw=(Object.freeze||Object)({create:aL,identity:el,copy:fY,mul:cu,translate:be,rotate:cc,scale:fZ,invert:hb,clone:xN}),nY=el;function dj(a){return 5e-5<a||a<-5e-5}bs=function(a){(a=a||{}).position||(this.position=[0,0]),null==a.rotation&&(this.rotation=0),a.scale||(this.scale=[1,1]),this.origin=this.origin||null},bh=bs.prototype,bh.transform=null,bh.needLocalTransform=function(){return dj(this.rotation)||dj(this.position[0])||dj(this.position[1])||dj(this.scale[0]-1)||dj(this.scale[1]-1)},di=[],bh.updateTransform=function(){var b=this.parent,e=b&&b.transform,d=this.needLocalTransform(),a=this.transform,c,f,g,h,i;d||e?(a=a||aL(),d?this.getLocalTransform(a):nY(a),e&&(d?cu(a,b.transform,a):fY(a,b.transform)),this.transform=a,c=this.globalScaleRatio,null!=c&&1!==c&&(this.getGlobalScale(di),f=di[0]<0?-1:1,g=di[1]<0?-1:1,h=((di[0]-f)*c+f)/di[0]||0,i=((di[1]-g)*c+g)/di[1]||0,a[0]*=h,a[1]*=h,a[2]*=i,a[3]*=i),this.invTransform=this.invTransform||aL(),hb(this.invTransform,a)):a&&nY(a)},bh.getLocalTransform=function(a){return bs.getLocalTransform(this,a)},bh.setTransform=function(c){var b=this.transform,a=c.dpr||1;b?c.setTransform(a*b[0],a*b[1],a*b[2],a*b[3],a*b[4],a*b[5]):c.setTransform(a,0,0,a,0,0)},bh.restoreTransform=function(a){var b=a.dpr||1;a.setTransform(b,0,0,b,0,0)},eh=[],nX=aL(),bh.setLocalTransform=function(a){if(a){var b=a[0]*a[0]+a[1]*a[1],c=a[2]*a[2]+a[3]*a[3],d=this.position,e=this.scale;dj(b-1)&&(b=Math.sqrt(b)),dj(c-1)&&(c=Math.sqrt(c)),a[0]<0&&(b=-b),a[3]<0&&(c=-c),d[0]=a[4],d[1]=a[5],e[0]=b,e[1]=c,this.rotation=Math.atan2(-a[1]/c,a[0]/b)}},bh.decomposeTransform=function(){var c,b,a;this.transform&&(c=this.parent,b=this.transform,c&&c.transform&&(cu(eh,c.invTransform,b),b=eh),a=this.origin,a&&(a[0]||a[1])&&(nX[4]=a[0],nX[5]=a[1],cu(eh,b,nX),eh[4]-=a[0],eh[5]-=a[1],b=eh),this.setLocalTransform(b))},bh.getGlobalScale=function(a){var b=this.transform;return a=a||[],b?(a[0]=Math.sqrt(b[0]*b[0]+b[1]*b[1]),a[1]=Math.sqrt(b[2]*b[2]+b[3]*b[3]),b[0]<0&&(a[0]=-a[0]),b[3]<0&&(a[1]=-a[1])):(a[0]=1,a[1]=1),a},bh.transformCoordToLocal=function(c,d){var a=[c,d],b=this.invTransform;return b&&F(a,a,b),a},bh.transformCoordToGlobal=function(c,d){var a=[c,d],b=this.transform;return b&&F(a,a,b),a},bs.getLocalTransform=function(c,a){nY(a=a||[]);var b=c.origin,f=c.scale||[1,1],d=c.rotation||0,e=c.position||[0,0];return b&&(a[4]-=b[0],a[5]-=b[1]),fZ(a,a,f),d&&cc(a,a,d),b&&(a[4]+=b[0],a[5]+=b[1]),a[4]+=e[0],a[5]+=e[1],a},gU={linear:function(a){return a},quadraticIn:function(a){return a*a},quadraticOut:function(a){return a*(2-a)},quadraticInOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)},cubicIn:function(a){return a*a*a},cubicOut:function(a){return--a*a*a+1},cubicInOut:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},quarticIn:function(a){return a*a*a*a},quarticOut:function(a){return 1- --a*a*a*a},quarticInOut:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},quinticIn:function(a){return a*a*a*a*a},quinticOut:function(a){return--a*a*a*a*a+1},quinticInOut:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},sinusoidalIn:function(a){return 1-Math.cos(a*Math.PI/2)},sinusoidalOut:function(a){return Math.sin(a*Math.PI/2)},sinusoidalInOut:function(a){return.5*(1-Math.cos(Math.PI*a))},exponentialIn:function(a){return 0===a?0:Math.pow(1024,a-1)},exponentialOut:function(a){return 1===a?1:1-Math.pow(2,-10*a)},exponentialInOut:function(a){return 0===a?0:1===a?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(2-Math.pow(2,-10*(a-1)))},circularIn:function(a){return 1-Math.sqrt(1-a*a)},circularOut:function(a){return Math.sqrt(1- --a*a)},circularInOut:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},elasticIn:function(b){var c,a=.1;return 0===b?0:1===b?1:(c=!a||a<1?(a=1,.1):.4*Math.asin(1/a)/(2*Math.PI),-a*Math.pow(2,10*(b-=1))*Math.sin((b-c)*(2*Math.PI)/.4))},elasticOut:function(b){var c,a=.1;return 0===b?0:1===b?1:(c=!a||a<1?(a=1,.1):.4*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*b)*Math.sin((b-c)*(2*Math.PI)/.4)+1)},elasticInOut:function(a){var c,b=.1;return 0===a?0:1===a?1:(c=!b||b<1?(b=1,.1):.4*Math.asin(1/b)/(2*Math.PI),(a*=2)<1?b*Math.pow(2,10*(a-=1))*Math.sin((a-c)*(2*Math.PI)/.4)*-.5:b*Math.pow(2,-10*(a-=1))*Math.sin((a-c)*(2*Math.PI)/.4)*.5+1)},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){return--a*a*(2.70158*a+1.70158)+1},backInOut:function(a){var b=2.5949095;return(a*=2)<1?a*a*((1+b)*a-b)*.5:.5*((a-=2)*a*((1+b)*a+b)+2)},bounceIn:function(a){return 1-gU.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},bounceInOut:function(a){return a<.5?.5*gU.bounceIn(2*a):.5*gU.bounceOut(2*a-1)+.5}};function nW(a){this._target=a.target,this._life=a.life||1e3,this._delay=a.delay||0,this._initialized=!1,this.loop=null!=a.loop&&a.loop,this.gap=a.gap||0,this.easing=a.easing||"Linear",this.onframe=a.onframe,this.ondestroy=a.ondestroy,this.onrestart=a.onrestart,this._pausedTime=0,this._paused=!1}nW.prototype={constructor:nW,step:function(c,f){var a,b,d,e;if(this._initialized||(this._startTime=c+this._delay,this._initialized=!0),this._paused)this._pausedTime+=f;else if(a=(c-this._startTime-this._pausedTime)/this._life,!(a<0))return a=Math.min(a,1),b=this.easing,d="string"==typeof b?gU[b]:b,e="function"==typeof d?d(a):a,this.fire("frame",e),1===a?this.loop?(this.restart(c),"restart"):(this._needsRemove=!0,"destroy"):null},restart:function(a){var b=(a-this._startTime-this._pausedTime)%this._life;this._startTime=a-b+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(a,b){this[a="on"+a]&&this[a](this._target,b)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};function xM(){this.head=null,this.tail=null,this._len=0}gj=xM.prototype,gj.insert=function(b){var a=new xL(b);return this.insertEntry(a),a},gj.insertEntry=function(a){this.head?((this.tail.next=a).prev=this.tail,a.next=null,this.tail=a):this.head=this.tail=a,this._len++},gj.remove=function(a){var b=a.prev,c=a.next;b?b.next=c:this.head=c,c?c.prev=b:this.tail=b,a.next=a.prev=null,this._len--},gj.len=function(){return this._len},gj.clear=function(){this.head=this.tail=null,this._len=0};function nU(a){this._list=new xM,this._map={},this._maxSize=a||10,this._lastRemovedEntry=null}xL=function(a){this.value=a,this.next,this.prev},nT=nU.prototype,nT.put=function(e,h){var c=this._list,d=this._map,f=null,g,a,b;return null==d[e]&&(g=c.len(),a=this._lastRemovedEntry,g>=this._maxSize&&0<g&&(b=c.head,c.remove(b),delete d[b.key],f=b.value,this._lastRemovedEntry=b),a?a.value=h:a=new xL(h),a.key=e,c.insertEntry(a),d[e]=a),f},nT.get=function(c){var a=this._map[c],b=this._list;if(null!=a)return a!==b.tail&&(b.remove(a),b.insertEntry(a)),a.value},nT.clear=function(){this._list.clear(),this._map={}},xK={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function bb(a){return(a=Math.round(a))<0?0:255<a?255:a}function gu(a){return a<0?0:1<a?1:a}function nS(a){return a.length&&"%"===a.charAt(a.length-1)?bb(parseFloat(a)/100*255):bb(parseInt(a,10))}function dQ(a){return a.length&&"%"===a.charAt(a.length-1)?gu(parseFloat(a)/100):gu(parseFloat(a))}function nR(b,c,a){return a<0?a+=1:1<a&&(a-=1),6*a<1?b+(c-b)*a*6:2*a<1?c:3*a<2?b+(c-b)*(2/3-a)*6:b}function cr(a,b,c){return a+(b-a)*c}function bg(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a}function nQ(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a}xJ=new nU(20),je=null;function dT(b,a){je&&nQ(je,a),je=xJ.put(b,je||a.slice())}function aG(e,a){var h,b,d,f,g,j,c,i;if(e){if(a=a||[],h=xJ.get(e),h)return nQ(a,h);if(d=(e+="").replace(/ /g,"").toLowerCase(),d in xK)return nQ(a,xK[d]),dT(e,a),a;if("#"===d.charAt(0))return 4===d.length?0<=(b=parseInt(d.substr(1),16))&&b<=4095?(bg(a,(3840&b)>>4|(3840&b)>>8,240&b|(240&b)>>4,15&b|(15&b)<<4,1),dT(e,a),a):void bg(a,0,0,0,1):7===d.length?0<=(b=parseInt(d.substr(1),16))&&b<=16777215?(bg(a,(16711680&b)>>16,(65280&b)>>8,255&b,1),dT(e,a),a):void bg(a,0,0,0,1):void 0;if(f=d.indexOf("("),g=d.indexOf(")"),-1!==f&&g+1===d.length)switch(j=d.substr(0,f),c=d.substr(f+1,g-(f+1)).split(","),i=1,j){case"rgba":if(4!==c.length)return void bg(a,0,0,0,1);i=dQ(c.pop());case"rgb":return 3!==c.length?void bg(a,0,0,0,1):(bg(a,nS(c[0]),nS(c[1]),nS(c[2]),i),dT(e,a),a);case"hsla":return 4!==c.length?void bg(a,0,0,0,1):(c[3]=dQ(c[3]),nN(c,a),dT(e,a),a);case"hsl":return 3!==c.length?void bg(a,0,0,0,1):(nN(c,a),dT(e,a),a);default:return}bg(a,0,0,0,1)}}function nN(a,c){var e=(parseFloat(a[0])%360+360)%360/360,f=dQ(a[1]),b=dQ(a[2]),d=b<=.5?b*(f+1):b+f-b*f,g=2*b-d;return bg(c=c||[],bb(255*nR(g,d,e+1/3)),bb(255*nR(g,d,e)),bb(255*nR(g,d,e-1/3)),1),4===a.length&&(c[3]=a[3]),c}function xI(d,c){var a=aG(d),b;if(a){for(b=0;b<3;b++)a[b]=c<0?a[b]*(1-c)|0:(255-a[b])*c+a[b]|0,255<a[b]?a[b]=255:d[b]<0&&(a[b]=0);return bU(a,4===a.length?"rgba":"rgb")}}function nM(b){var a=aG(b);if(a)return((1<<24)+(a[0]<<16)+(a[1]<<8)+ +a[2]).toString(16).slice(1)}function gD(g,b,a){if(b&&b.length&&0<=g&&g<=1){a=a||[];var f=g*(b.length-1),h=Math.floor(f),i=Math.ceil(f),c=b[h],d=b[i],e=f-h;return a[0]=bb(cr(c[0],d[0],e)),a[1]=bb(cr(c[1],d[1],e)),a[2]=bb(cr(c[2],d[2],e)),a[3]=gu(cr(c[3],d[3],e)),a}}afv=gD;function xD(g,a,j){if(a&&a.length&&0<=g&&g<=1){var d=g*(a.length-1),f=Math.floor(d),h=Math.ceil(d),b=aG(a[f]),e=aG(a[h]),c=d-f,i=bU([bb(cr(b[0],e[0],c)),bb(cr(b[1],e[1],c)),bb(cr(b[2],e[2],c)),gu(cr(b[3],e[3],c))],"rgba");return j?{color:i,leftIndex:f,rightIndex:h,value:d}:i}}afu=xD;function eg(a,b,c,d){if(a=aG(a))return a=function(d){var b,i,h,e,f,g,a,c,j,k,l,m,n;if(d)return h=d[0]/255,e=d[1]/255,f=d[2]/255,g=Math.min(h,e,f),a=Math.max(h,e,f),c=a-g,j=(a+g)/2,0==c?i=b=0:(i=j<.5?c/(a+g):c/(2-a-g),k=((a-h)/6+c/2)/c,l=((a-e)/6+c/2)/c,m=((a-f)/6+c/2)/c,h===a?b=m-l:e===a?b=1/3+k-m:f===a&&(b=2/3+l-k),b<0&&(b+=1),1<b&&(b-=1)),n=[360*b,i,j],null!=d[3]&&n.push(d[3]),n}(a),null!=b&&(a[0]=function(a){return(a=Math.round(a))<0?0:360<a?360:a}(b)),null!=c&&(a[1]=dQ(c)),null!=d&&(a[2]=dQ(d)),bU(nN(a),"rgba")}function gZ(a,b){if((a=aG(a))&&null!=b)return a[3]=gu(b),bU(a,"rgba")}function bU(a,b){if(a&&a.length){var c=a[0]+","+a[1]+","+a[2];return"rgba"!==b&&"hsva"!==b&&"hsla"!==b||(c+=","+a[3]),b+"("+c+")"}}aft=(Object.freeze||Object)({parse:aG,lift:xI,toHex:nM,fastLerp:gD,fastMapToColor:afv,lerp:xD,mapToColor:afu,modifyHSL:eg,modifyAlpha:gZ,stringify:bU}),nI=Array.prototype.slice;function afs(a,b){return a[b]}function afr(a,b,c){a[b]=c}function nG(a,b,c){return(b-a)*c+a}function xw(a,b,c){return.5<c?b:a}function xv(c,e,g,f,h){var d=c.length,a,i,b;if(1===h)for(a=0;a<d;a++)f[a]=nG(c[a],e[a],g);else{i=d&&c[0].length;for(a=0;a<d;a++)for(b=0;b<i;b++)f[a][b]=nG(c[a][b],e[a][b],g)}}function xu(b,c,g){var f=b.length,e=c.length,a,h,d;if(f!==e)if(e<f)b.length=e;else for(a=f;a<e;a++)b.push(1===g?c[a]:nI.call(c[a]));h=b[0]&&b[0].length;for(a=0;a<b.length;a++)if(1===g)isNaN(b[a])&&(b[a]=c[a]);else for(d=0;d<h;d++)isNaN(b[a][d])&&(b[a][d]=c[a][d])}function afq(b,d,g){var e,a,f,c;if(b===d)return!0;if(e=b.length,e!==d.length)return!1;if(1===g){for(a=0;a<e;a++)if(b[a]!==d[a])return!1}else{f=b[0].length;for(a=0;a<e;a++)for(c=0;c<f;c++)if(b[a][c]!==d[a][c])return!1}return!0}function xp(c,j,g,d,e,f,k,h,l){var i=c.length,a,m,b;if(1===l)for(a=0;a<i;a++)h[a]=nD(c[a],j[a],g[a],d[a],e,f,k);else{m=c[0].length;for(a=0;a<i;a++)for(b=0;b<m;b++)h[a][b]=nD(c[a][b],j[a][b],g[a][b],d[a][b],e,f,k)}}function nD(e,a,b,f,g,h,i){var c=.5*(b-e),d=.5*(f-a);return(2*(a-b)+c+d)*i+(-3*(a-b)-2*c-d)*h+c*g+a}function afp(a){var d,c,b;if(bL(a)){if(d=a.length,bL(a[0])){for(c=[],b=0;b<d;b++)c.push(nI.call(a[b]));return c}return nI.call(a)}return a}function xn(a){return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.floor(a[2]),"rgba("+a.join(",")+")"}function afo(i,o,D,e,l,E){var v=i._getter,B=i._setter,F="spline"===o,c=e.length,w,f,m,p,j,h,b,u,A,d,g,y,t,a,s,n,k,r,x,C,q,z;if(c){f=bL(e[0].value),m=!1,p=!1,j=f?function(a){var b=a[a.length-1].value;return bL(b&&b[0])?2:1}(e):0,e.sort(function(a,b){return a.time-b.time}),w=e[c-1].time;for(h=[],b=[],u=e[0].value,A=!0,d=0;d<c;d++)h.push(e[d].time/w),g=e[d].value,(f&&afq(g,u,j)||!f&&g===u||(A=!1),"string"==typeof(u=g))&&(y=aG(g),y?(g=y,m=!0):p=!0),b.push(g);if(E||!A){t=b[c-1];for(d=0;d<c-1;d++)f?xu(b[d],t,j):!isNaN(b[d])||isNaN(t)||p||m||(b[d]=t);return f&&xu(v(i._target,l),t,j),x=0,C=0,m&&(q=[0,0,0,0]),z=new nW({target:i._target,life:w,loop:i._loop,delay:i._delay,onframe:function(i,g){var d,o,e;if(g<0)d=0;else if(g<C){for(d=Math.min(x+1,c-1);0<=d&&!(h[d]<=g);d--);d=Math.min(d,c-2)}else{for(d=x;d<c&&!(h[d]>g);d++);d=Math.min(d-1,c-2)}if(C=g,o=h[(x=d)+1]-h[d],0!=o)if(a=(g-h[d])/o,F)if(n=b[d],s=b[0===d?d:d-1],k=b[c-2<d?c-1:d+1],r=b[c-3<d?c-1:d+2],f)xp(s,n,k,r,a,a*a,a*a*a,v(i,l),j);else{if(m)e=xp(s,n,k,r,a,a*a,a*a*a,q,1),e=xn(q);else{if(p)return xw(n,k,a);e=nD(s,n,k,r,a,a*a,a*a*a)}B(i,l,e)}else if(f)xv(b[d],b[d+1],a,v(i,l),j);else{if(m)xv(b[d],b[d+1],a,q,1),e=xn(q);else{if(p)return xw(b[d],b[d+1],a);e=nG(b[d],b[d+1],a)}B(i,l,e)}},ondestroy:D}),o&&"spline"!==o&&(z.easing=o),z}}}function ny(a,b,c,d){this._tracks={},this._target=a,this._loop=b||!1,this._getter=c||afs,this._setter=d||afr,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]}ny.prototype={when:function(d,c){var b=this._tracks,a,e;for(a in c)if(c.hasOwnProperty(a)){if(!b[a]){if(b[a]=[],e=this._getter(this._target,a),null==e)continue;0!==d&&b[a].push({time:0,value:afp(e)})}b[a].push({time:d,value:c[a]})}return this},during:function(a){return this._onframeList.push(a),this},pause:function(){for(var a=0;a<this._clipList.length;a++)this._clipList[a].pause();this._paused=!0},resume:function(){for(var a=0;a<this._clipList.length;a++)this._clipList[a].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var b=this._doneList,c=b.length,a=0;a<c;a++)b[a].call(this)},start:function(g,h){var b,d,e,c,a,f;function i(){--e||d._doneCallback()}d=this,e=0;for(c in this._tracks)this._tracks.hasOwnProperty(c)&&(a=afo(this,g,i,this._tracks[c],c,h),a&&(this._clipList.push(a),e++,this.animation&&this.animation.addClip(a),b=a));return b&&(f=b.onframe,b.onframe=function(b,c){f(b,c);for(var a=0;a<d._onframeList.length;a++)d._onframeList[a](b,c)}),e||this._doneCallback(),this},stop:function(e){for(var a=this._clipList,c=this.animation,b=0,d;b<a.length;b++)d=a[b],e&&d.onframe(this._target,1),c&&c.removeClip(d);a.length=0},delay:function(a){return this._delay=a,this},done:function(a){return a&&this._doneList.push(a),this},getClips:function(){return this._clipList}},xi=1,"undefined"!=typeof window&&(xi=Math.max(window.devicePixelRatio||1,1)),hl=xi,afn=function(){};function ht(){this.animators=[]}cm=afn;function xa(e,i,d,a,c,b,j,k){var f,h,g;E(a)?(b=c,c=a,a=0):ag(c)?(b=c,c="linear",a=0):ag(a)?(b=a,a=0):d=ag(d)?(b=d,500):d||500,e.stopAnimation(),function k(d,c,e,b,f,i,g){var h={},j=0,a;for(a in b)b.hasOwnProperty(a)&&(null!=e[a]?m(b[a])&&!bL(b[a])?k(d,c?c+"."+a:a,e[a],b[a],f,i,g):(g?(h[a]=e[a],zh(d,c,a,b[a])):h[a]=b[a],j++):null==b[a]||g||zh(d,c,a,b[a]));0<j&&d.animate(c,!1).when(null==f?500:f,h).delay(i||0)}(e,"",e,i,d,a,k),f=e.animators.slice(),h=f.length;function l(){--h||b&&b()}h||b&&b();for(g=0;g<f.length;g++)f[g].done(l).start(c,j)}function zh(c,a,d,e){if(a){var b={};b[a]={},b[a][d]=e,c.attr(b)}else c.attr(d,e)}ht.prototype={constructor:ht,animate:function(e,k){var d,i=!1,b=this,j=this.__zr,f,a,g,l,h,c;if(e){f=e.split("."),a=b,i="shape"===f[0];for(g=0,l=f.length;g<l;g++)a=a&&a[f[g]];a&&(d=a)}else d=b;if(d)return h=b.animators,c=new ny(d,k),c.during(function(a){b.dirty(i)}).done(function(){h.splice(v(h,c),1)}),h.push(c),j&&j.animation.addAnimator(c),c;cm('Property "'+e+'" is not existed in element '+b.id)},stopAnimation:function(c){for(var a=this.animators,d=a.length,b=0;b<d;b++)a[b].stop(c);return a.length=0,this},animateTo:function(a,b,c,d,e,f){xa(this,a,b,c,d,e,f)},animateFrom:function(a,b,c,d,e,f){xa(this,a,b,c,d,e,f,!0)}},bW=function(a){bs.call(this,a),Z.call(this,a),ht.call(this,a),this.id=a.id||zb()},bW.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(b,c){switch(this.draggable){case"horizontal":c=0;break;case"vertical":b=0}var a=this.transform;(a=a||(this.transform=[1,0,0,1,0,0]))[4]+=b,a[5]+=c,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(a,b){},attrKV:function(a,b){if("position"===a||"scale"===a||"origin"===a){if(b){var c=this[a];(c=c||(this[a]=[]))[0]=b[0],c[1]=b[1]}}else this[a]=b},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(a,c){if("string"==typeof a)this.attrKV(a,c);else if(m(a))for(var b in a)a.hasOwnProperty(b)&&this.attrKV(b,a[b]);return this.dirty(!1),this},setClipPath:function(a){var b=this.__zr;b&&a.addSelfToZr(b),this.clipPath&&this.clipPath!==a&&this.removeClipPath(),(this.clipPath=a).__zr=b,(a.__clipTarget=this).dirty(!1)},removeClipPath:function(){var a=this.clipPath;a&&(a.__zr&&a.removeSelfFromZr(a.__zr),a.__zr=null,a.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(c){var a,b;if(this.__zr=c,a=this.animators,a)for(b=0;b<a.length;b++)c.animation.addAnimator(a[b]);this.clipPath&&this.clipPath.addSelfToZr(c)},removeSelfFromZr:function(c){var a,b;if(this.__zr=null,a=this.animators,a)for(b=0;b<a.length;b++)c.animation.removeAnimator(a[b]);this.clipPath&&this.clipPath.removeSelfFromZr(c)}},C(bW,ht),C(bW,bs),C(bW,Z),hx=F,hy=Math.min,hz=Math.max;function r(c,d,a,b){a<0&&(c+=a,a=-a),b<0&&(d+=b,b=-b),this.x=c,this.y=d,this.width=a,this.height=b}r.prototype={constructor:r,union:function(a){var b=hy(a.x,this.x),c=hy(a.y,this.y);this.width=hz(a.x+a.width,this.x+this.width)-b,this.height=hz(a.y+a.height,this.y+this.height)-c,this.x=b,this.y=c},applyTransform:(bO=[],bP=[],bR=[],ci=[],function(a){if(a){bO[0]=bR[0]=this.x,bO[1]=ci[1]=this.y,bP[0]=ci[0]=this.x+this.width,bP[1]=bR[1]=this.y+this.height,hx(bO,bO,a),hx(bP,bP,a),hx(bR,bR,a),hx(ci,ci,a),this.x=hy(bO[0],bP[0],bR[0],ci[0]),this.y=hy(bO[1],bP[1],bR[1],ci[1]);var b=hz(bO[0],bP[0],bR[0],ci[0]),c=hz(bO[1],bP[1],bR[1],ci[1]);this.width=b-this.x,this.height=c-this.y}}),calculateTransform:function(b){var c=b.width/this.width,d=b.height/this.height,a=aL();return be(a,a,[-this.x,-this.y]),fZ(a,a,[c,d]),be(a,a,[b.x,b.y]),a},intersect:function(a){if(!a)return!1;a instanceof r||(a=r.create(a));var b=this,c=b.x,d=b.x+b.width,e=b.y,f=b.y+b.height,g=a.x,h=a.x+a.width,i=a.y,j=a.y+a.height;return!(d<g||h<c||f<i||j<e)},contain:function(b,c){var a=this;return b>=a.x&&b<=a.x+a.width&&c>=a.y&&c<=a.y+a.height},clone:function(){return new r(this.x,this.y,this.width,this.height)},copy:function(a){this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},r.create=function(a){return new r(a.x,a.y,a.width,a.height)},e=function(a){for(var b in a=a||{},bW.call(this,a),a)a.hasOwnProperty(b)&&(this[b]=a[b]);this._children=[],this.__storage=null,this.__dirty=!0},e.prototype={constructor:e,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(a){return this._children[a]},childOfName:function(c){for(var b=this._children,a=0;a<b.length;a++)if(b[a].name===c)return b[a]},childCount:function(){return this._children.length},add:function(a){return a&&a!==this&&a.parent!==this&&(this._children.push(a),this._doAdd(a)),this},addBefore:function(a,b){if(a&&a!==this&&a.parent!==this&&b&&b.parent===this){var c=this._children,d=c.indexOf(b);0<=d&&(c.splice(d,0,a),this._doAdd(a))}return this},_doAdd:function(a){a.parent&&a.parent.remove(a);var b=(a.parent=this).__storage,c=this.__zr;b&&b!==a.__storage&&(b.addToStorage(a),a instanceof e&&a.addChildrenToStorage(b)),c&&c.refresh()},remove:function(a){var c=this.__zr,b=this.__storage,d=this._children,f=v(d,a);return f<0||(d.splice(f,1),a.parent=null,b&&(b.delFromStorage(a),a instanceof e&&a.delChildrenFromStorage(b)),c&&c.refresh()),this},removeAll:function(){var a,b,c=this._children,d=this.__storage;for(b=0;b<c.length;b++)a=c[b],d&&(d.delFromStorage(a),a instanceof e&&a.delChildrenFromStorage(d)),a.parent=null;return c.length=0,this},eachChild:function(c,d){for(var b=this._children,a=0,e;a<b.length;a++)e=b[a],c.call(d,e,a);return this},traverse:function(c,d){for(var a=0,b;a<this._children.length;a++)b=this._children[a],c.call(d,b),"group"===b.type&&b.traverse(c,d);return this},addChildrenToStorage:function(c){for(var a=0,b;a<this._children.length;a++)b=this._children[a],c.addToStorage(b),b instanceof e&&b.addChildrenToStorage(c)},delChildrenFromStorage:function(c){for(var a=0,b;a<this._children.length;a++)b=this._children[a],c.delFromStorage(b),b instanceof e&&b.delChildrenFromStorage(c)},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(i){for(var a=null,b=new r(0,0,0,0),f=i||this._children,h=[],d=0,c,e,g;d<f.length;d++)c=f[d],!c.ignore&&!c.invisible&&(e=c.getBoundingRect(),g=c.getLocalTransform(h),g?(b.copy(e),b.applyTransform(g),(a=a||b.clone()).union(b)):(a=a||e.clone()).union(e));return a||b}},D(e,bW),w$=32,fv=7;function w_(b,c,d,e){var a=c+1;if(a===d)return 1;if(e(b[a++],b[c])<0){for(;a<d&&e(b[a],b[a-1])<0;)a++;!function(a,c,b){for(b--;c<b;){var d=a[c];a[c++]=a[b],a[b--]=d}}(b,c,a)}else for(;a<d&&0<=e(b[a],b[a-1]);)a++;return a-c}function wZ(b,h,j,c,i){var f,g,a,e,d;for(c===h&&c++;c<j;c++){for(f,g=b[c],a=h,e=c;a<e;)i(g,b[f=a+e>>>1])<0?e=f:a=1+f;switch(d=c-a,d){case 3:b[a+3]=b[a+2];case 2:b[a+2]=b[a+1];case 1:b[a+1]=b[a];break;default:for(;0<d;)b[a+d]=b[a+d-1],d--}b[a]=g}}function nv(f,g,h,j,d,e){var b=0,c=0,a=1,k,i;if(0<e(f,g[h+d])){for(c=j-d;a<c&&0<e(f,g[h+d+a]);)(a=1+((b=a)<<1))<=0&&(a=c);c<a&&(a=c),b+=d,a+=d}else{for(c=d+1;a<c&&e(f,g[h+d-a])<=0;)(a=1+((b=a)<<1))<=0&&(a=c);c<a&&(a=c),k=b,b=d-a,a=d-k}for(b++;b<a;)i=b+(a-b>>>1),0<e(f,g[h+i])?b=i+1:a=i;return a}function nu(f,g,h,j,d,e){var b=0,c=0,a=1,k,i;if(e(f,g[h+d])<0){for(c=d+1;a<c&&e(f,g[h+d-a])<0;)(a=1+((b=a)<<1))<=0&&(a=c);c<a&&(a=c),k=b,b=d-a,a=d-k}else{for(c=j-d;a<c&&0<=e(f,g[h+d+a]);)(a=1+((b=a)<<1))<=0&&(a=c);c<a&&(a=c),b+=d,a+=d}for(b++;b<a;)i=b+(a-b>>>1),e(f,g[h+i])<0?a=i:b=i+1;return a}function afm(a,e){var f,c,g=fv,d=0,b=[];function h(h){var k=f[h],i=c[h],l=f[h+1],j=c[h+1],m;c[h]=i+j,h===d-3&&(f[h+1]=f[h+2],c[h+1]=c[h+2]),d--,m=nu(a[l],a,k,i,0,e),k+=m,0!==(i-=m)&&0!==(j=nv(a[k+i-1],a,l,j,j-1,e))&&(i<=j?function(o,k,p,l){var c=0,f,h,d,i,j,m,n;for(c=0;c<k;c++)b[c]=a[o+c];if(f=0,h=p,d=o,a[d++]=a[h++],0==--l){for(c=0;c<k;c++)a[d+c]=b[f+c];return}if(1===k){for(c=0;c<l;c++)a[d+c]=a[h+c];return a[d+l]=b[f]}for(i,j,m,n=g;;){j=i=0,m=!1;do if(e(a[h],b[f])<0){if(a[d++]=a[h++],j++,(i=0)==--l){m=!0;break}}else if(a[d++]=b[f++],i++,j=0,1==--k){m=!0;break}while((i|j)<n)if(m)break;do{if(0!==(i=nu(a[h],b,f,k,0,e))){for(c=0;c<i;c++)a[d+c]=b[f+c];if(d+=i,f+=i,(k-=i)<=1){m=!0;break}}if(a[d++]=a[h++],0==--l){m=!0;break}if(0!==(j=nv(b[f],a,h,l,0,e))){for(c=0;c<j;c++)a[d+c]=a[h+c];if(d+=j,h+=j,0===(l-=j)){m=!0;break}}if(a[d++]=b[f++],1==--k){m=!0;break}n--}while(fv<=i||fv<=j)if(m)break;n<0&&(n=0),n+=2}if((g=n)<1&&(g=1),1===k){for(c=0;c<l;c++)a[d+c]=a[h+c];a[d+l]=b[f]}else{if(0===k)throw new Error;for(c=0;c<k;c++)a[d+c]=b[f+c]}}(k,i,l,j):function(r,f,q,d){var c=0,m,o,h,i,n,p,k,j,l;for(c=0;c<d;c++)b[c]=a[q+c];if(m=r+f-1,o=d-1,h=q+d-1,i=0,n=0,a[h--]=a[m--],0==--f){for(i=h-(d-1),c=0;c<d;c++)a[i+c]=b[c];return}if(1===d){for(n=(h-=f)+1,i=(m-=f)+1,c=f-1;0<=c;c--)a[n+c]=a[i+c];return a[h]=b[o]}for(p=g;;){k=0,j=0,l=!1;do if(e(b[o],a[m])<0){if(a[h--]=a[m--],k++,(j=0)==--f){l=!0;break}}else if(a[h--]=b[o--],j++,k=0,1==--d){l=!0;break}while((k|j)<p)if(l)break;do{if(0!==(k=f-nu(b[o],a,r,f,f-1,e))){for(f-=k,n=(h-=k)+1,i=(m-=k)+1,c=k-1;0<=c;c--)a[n+c]=a[i+c];if(0===f){l=!0;break}}if(a[h--]=b[o--],1==--d){l=!0;break}if(0!==(j=d-nv(a[m],b,0,d,d-1,e))){for(d-=j,n=(h-=j)+1,i=(o-=j)+1,c=0;c<j;c++)a[n+c]=b[i+c];if(d<=1){l=!0;break}}if(a[h--]=a[m--],0==--f){l=!0;break}p--}while(fv<=k||fv<=j)if(l)break;p<0&&(p=0),p+=2}if((g=p)<1&&(g=1),1===d){for(n=(h-=f)+1,i=(m-=f)+1,c=f-1;0<=c;c--)a[n+c]=a[i+c];a[h]=b[o]}else{if(0===d)throw new Error;for(i=h-(d-1),c=0;c<d;c++)a[i+c]=b[c]}}(k,i,l,j))}f=[],c=[],this.mergeRuns=function(){for(;1<d;){var a=d-2;if(1<=a&&c[a-1]<=c[a]+c[a+1]||2<=a&&c[a-2]<=c[a]+c[a-1])c[a-1]<c[a+1]&&a--;else if(c[a]>c[a+1])break;h(a)}},this.forceMergeRuns=function(){for(;1<d;){var a=d-2;0<a&&c[a-1]<c[a+1]&&a--,h(a)}},this.pushRun=function(a,b){f[d]=a,c[d]=b,d+=1}}function h_(d,e,a,f){var c,b,h,i,g;if(a=a||0,c=(f=f||d.length)-a,!(c<2))if(b=0,c<w$)wZ(d,a,f,a+(b=w_(d,a,f,e)),e);else{h=new afm(d,e),i=function(a){for(var b=0;w$<=a;)b|=1&a,a>>=1;return a+b}(c);do(b=w_(d,a,f,e))<i&&(g=c,i<g&&(g=i),wZ(d,a,a+g,a+b,e),b=g),h.pushRun(a,b),h.mergeRuns(),c-=b,a+=b;while(0!==c)h.forceMergeRuns()}}function wY(a,b){return a.zlevel===b.zlevel?a.z===b.z?a.z2-b.z2:a.z-b.z:a.zlevel-b.zlevel}function nt(){this._roots=[],this._displayList=[],this._displayListLen=0}nt.prototype={constructor:nt,traverse:function(b,c){for(var a=0;a<this._roots.length;a++)this._roots[a].traverse(b,c)},getDisplayList:function(b,a){return a=a||!1,b&&this.updateDisplayList(a),this._displayList},updateDisplayList:function(d){this._displayListLen=0;for(var b=this._roots,c=this._displayList,a=0,e=b.length;a<e;a++)this._updateAndAddDisplayable(b[a],null,d);c.length=this._displayListLen,t.canvasSupported&&h_(c,wY)},_updateAndAddDisplayable:function(a,c,i){var f,b,g,h,d,e;if(!a.ignore||i){if(a.beforeUpdate(),a.__dirty&&a.update(),a.afterUpdate(),f=a.clipPath,f){c=c?c.slice():[];for(b=f,g=a;b;)b.parent=g,b.updateTransform(),c.push(b),b=(g=b).clipPath}if(a.isGroup){for(h=a._children,d=0;d<h.length;d++)e=h[d],a.__dirty&&(e.__dirty=!0),this._updateAndAddDisplayable(e,c,i);a.__dirty=!1}else a.__clipPaths=c,this._displayList[this._displayListLen++]=a}},addRoot:function(a){a.__storage!==this&&(a instanceof e&&a.addChildrenToStorage(this),this.addToStorage(a),this._roots.push(a))},delRoot:function(a){var b,c,f,d;if(null==a){for(b=0;b<this._roots.length;b++)c=this._roots[b],c instanceof e&&c.delChildrenFromStorage(this);return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(a instanceof Array){b=0;for(f=a.length;b<f;b++)this.delRoot(a[b])}else d=v(this._roots,a),0<=d&&(this.delFromStorage(a),this._roots.splice(d,1),a instanceof e&&a.delChildrenFromStorage(this))},addToStorage:function(a){return a&&(a.__storage=this,a.dirty(!1)),this},delFromStorage:function(a){return a&&(a.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:wY},afl={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},nr=function(b,c,a){return afl.hasOwnProperty(c)?a*b.dpr:a},cL={NONE:0,STYLE_BIND:1,PLAIN_TEXT:2},np=9,io=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],cO=function(a){this.extendFrom(a,!1)};function afj(g,a,b){var d=null==a.x?0:a.x,e=null==a.x2?1:a.x2,f=null==a.y?0:a.y,c=null==a.y2?0:a.y2;return a.global||(d=d*b.width+b.x,e=e*b.width+b.x,f=f*b.height+b.y,c=c*b.height+b.y),d=isNaN(d)?0:d,e=isNaN(e)?1:e,f=isNaN(f)?0:f,c=isNaN(c)?0:c,g.createLinearGradient(d,f,e,c)}function afi(i,a,c){var e=c.width,f=c.height,h=Math.min(e,f),b=null==a.x?.5:a.x,d=null==a.y?.5:a.y,g=null==a.r?.5:a.r;return a.global||(b=b*e+c.x,d=d*f+c.y,g*=h),i.createRadialGradient(b,d,0,b,d,g)}cO.prototype={constructor:cO,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(b,f,i){var a=this,c=i&&i.style,e=!c||b.__attrCachedBy!==cL.STYLE_BIND,g,h,d,j;b.__attrCachedBy=cL.STYLE_BIND;for(g=0;g<io.length;g++)h=io[g],d=h[0],!e&&a[d]===c[d]||(b[d]=nr(b,d,a[d]||h[1]));!e&&a.fill===c.fill||(b.fillStyle=a.fill),!e&&a.stroke===c.stroke||(b.strokeStyle=a.stroke),!e&&a.opacity===c.opacity||(b.globalAlpha=null==a.opacity?1:a.opacity),!e&&a.blend===c.blend||(b.globalCompositeOperation=a.blend||"source-over"),this.hasStroke()&&(j=a.lineWidth,b.lineWidth=j/(this.strokeNoScale&&f&&f.getLineScale?f.getLineScale():1))},hasFill:function(){var a=this.fill;return null!=a&&"none"!==a},hasStroke:function(){var a=this.stroke;return null!=a&&"none"!==a&&0<this.lineWidth},extendFrom:function(a,c){if(a)for(var b in a)!a.hasOwnProperty(b)||!0!==c&&(!1===c?this.hasOwnProperty(b):null==a[b])||(this[b]=a[b])},set:function(a,b){"string"==typeof a?this[a]=b:this.extendFrom(a,!0)},clone:function(){var a=new this.constructor;return a.extendFrom(this,!0),a},getGradient:function(e,b,f){for(var d=("radial"===b.type?afi:afj)(e,b,f),c=b.colorStops,a=0;a<c.length;a++)d.addColorStop(c[a].offset,c[a].color);return d}};for(nn=cO.prototype,nm=0;nm<io.length;nm++)nl=io[nm],nl[0]in nn||(nn[nl[0]]=nl[1]);cO.getGradient=nn.getGradient;function nk(a,b){this.image=a,this.repeat=b,this.type="pattern"}function afh(){return!1}function wP(g,c,d){var b=eA(),e=c.getWidth(),f=c.getHeight(),a=b.style;return a&&(a.position="absolute",a.left=0,a.top=0,a.width=e+"px",a.height=f+"px",b.setAttribute("data-zr-dom-id",g)),b.width=e*d,b.height=f*d,b}function e$(b,e,c){var d,a;c=c||hl,"string"==typeof b?d=wP(b,e,c):m(b)&&(b=(d=b).id),this.id=b,a=(this.dom=d).style,a&&(d.onselectstart=afh,a["-webkit-user-select"]="none",a["user-select"]="none",a["-webkit-touch-callout"]="none",a["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",a.padding=0,a.margin=0,a["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=c}e$.prototype={constructor:e$,__dirty:!0,__used:!(nk.prototype.getCanvasPattern=function(a){return a.createPattern(this.image,this.repeat||"repeat")}),__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var a=this.dpr;this.domBack=wP("back-"+this.id,this.painter,a),this.ctxBack=this.domBack.getContext("2d"),1!==a&&this.ctxBack.scale(a,a)},resize:function(b,c){var a=this.dpr,d=this.dom,e=d.style,f=this.domBack;e&&(e.width=b+"px",e.height=c+"px"),d.width=b*a,d.height=c*a,f&&(f.width=b*a,f.height=c*a,1!==a&&this.ctxBack.scale(a,a))},clear:function(i,a){var e,f=this.dom,b=this.ctx,d=f.width,c=f.height,g=(a=a||this.clearColor,this.motionBlur&&!i),j=this.lastFrameAlpha,h=this.dpr,k;g&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(f,0,0,d/h,c/h)),b.clearRect(0,0,d,c),a&&"transparent"!==a&&(a.colorStops?(e=a.__canvasGradient||cO.getGradient(b,a,{x:0,y:0,width:d,height:c}),a.__canvasGradient=e):a.image&&(e=nk.prototype.getCanvasPattern.call(a,b)),b.save(),b.fillStyle=e||a,b.fillRect(0,0,d,c),b.restore()),g&&(k=this.domBack,b.save(),b.globalAlpha=j,b.drawImage(k,0,0,d,c),b.restore())}},nj="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(a){setTimeout(a,16)},ni=new nU(50);function afg(a){if("string"!=typeof a)return a;var b=ni.get(a);return b&&b.image}function wL(b,a,d,f,g){if(b){if("string"!=typeof b)return b;if(a&&a.__zrImageSrc===b||!d)return a;var c=ni.get(b),e={hostEl:d,cb:f,cbPayload:g};return c?iC(a=c.image)||c.pending.push(e):((a=new Image).onload=a.onerror=aff,ni.put(b,a.__cachedImgObj={image:a,pending:[e]}),a.src=a.__zrImageSrc=b),a}return a}function aff(){var a=this.__cachedImgObj,b,c,d;this.onload=this.onerror=this.__cachedImgObj=null;for(b=0;b<a.pending.length;b++)c=a.pending[b],d=c.cb,d&&d(this,c.cbPayload),c.hostEl.dirty();a.pending.length=0}function iC(a){return a&&a.width&&a.height}iD={},nc=0,afe=5e3,oy=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,iI="12px sans-serif",nb={};function bo(h,b){var c=h+":"+(b=b||iI),e,f,g,a,d,i;if(iD[c])return iD[c];for(e,f,g=(h+"").split("\n"),a=0,d=0,i=g.length;d<i;d++)a=Math.max((e=g[d],f=b,nb.measureText(e,f)).width,a);return afe<nc&&(nc=0,iD={}),nc++,iD[c]=a}function bn(a,b,c,d,e,f,g,h){return g?function(e,k,c,j,i,f,g,h){var a=mV(e,{rich:g,truncate:h,font:k,textAlign:c,textPadding:i,textLineHeight:f}),d=a.outerWidth,b=a.outerHeight,l=ft(0,d,c),m=ey(0,b,j);return new r(l,m,d,b)}(a,b,c,d,e,f,g,h):function(c,d,j,i,a,h,m){var f=mW(c,d,a,h,m),b=bo(c,d),e,k,l,g;return a&&(b+=a[1]+a[3]),e=f.outerHeight,k=ft(0,b,j),l=ey(0,e,i),g=new r(k,l,b,e),g.lineHeight=f.lineHeight,g}(a,b,c,d,e,f,h)}function ft(a,b,c){return"right"===c?a-=b:"center"===c&&(a-=b/2),a}function ey(a,b,c){return"middle"===c?a-=b/2:"bottom"===c&&(a-=b),a}function na(g,k,j){var l=k.textPosition,a=k.textDistance,c=j.x,b=j.y,h,f,i,d,e;switch(a=a||0,h=j.height,f=j.width,i=h/2,d="left",e="top",l){case"left":c-=a,b+=i,d="right",e="middle";break;case"right":c+=a+f,b+=i,e="middle";break;case"top":c+=f/2,b-=a,d="center",e="bottom";break;case"bottom":c+=f/2,b+=h+a,d="center";break;case"inside":c+=f/2,b+=i,d="center",e="middle";break;case"insideLeft":c+=a,b+=i,e="middle";break;case"insideRight":c+=f-a,b+=i,d="right",e="middle";break;case"insideTop":c+=f/2,b+=a,d="center";break;case"insideBottom":c+=f/2,b+=h-a,d="center",e="bottom";break;case"insideTopLeft":c+=a,b+=a;break;case"insideTopRight":c+=f-a,b+=a,d="right";break;case"insideBottomLeft":c+=a,b+=h-a,e="bottom";break;case"insideBottomRight":c+=f-a,b+=h-a,d="right",e="bottom"}return(g=g||{}).x=c,g.y=b,g.textAlign=d,g.textVerticalAlign=e,g}function wH(h,d,f,g,c){var b,a,e;if(!d)return"";b=(h+"").split("\n"),c=wG(d,f,g,c);for(a=0,e=b.length;a<e;a++)b[a]=wD(b[a],c);return b.join("\n")}function wG(g,e,c,a){var j,h,b,i,d;(a=f({},a)).font=e,c=R(c,"..."),a.maxIterations=R(a.maxIterations,2),j=a.minChar=R(a.minChar,0),a.cnCharWidth=bo("",e),h=a.ascCharWidth=bo("a",e),a.placeholder=R(a.placeholder,"");for(b=g=Math.max(0,g-1),i=0;i<j&&h<=b;i++)b-=h;return d=bo(c,e),b<d&&(c="",d=0),b=g-d,a.ellipsis=c,a.ellipsisWidth=d,a.contentWidth=b,a.containerWidth=g,a}function wD(a,b){var f=b.containerWidth,g=b.font,d=b.contentWidth,c,e,h;if(!f)return"";if(c=bo(a,g),c<=f)return a;for(e=0;;e++){if(c<=d||e>=b.maxIterations){a+=b.ellipsis;break}h=0===e?afc(a,d,b.ascCharWidth,b.cnCharWidth):0<c?Math.floor(a.length*d/c):0,c=bo(a=a.substr(0,h),g)}return""===a&&(a=b.placeholder),a}function afc(b,h,e,f){for(var d=0,a=0,g=b.length,c;a<g&&d<h;a++)c=b.charCodeAt(a),d+=0<=c&&c<=127?e:f;return a}function wy(a){return bo("",a)}function mW(d,m,b,o,c){var h,a,g,f,j,k,i,l,e,n;if(null!=d&&(d+=""),h=R(o,wy(m)),a=d?d.split("\n"):[],g=a.length*h,f=g,j=!0,b&&(f+=b[0]+b[2]),d&&c)if(j=!1,k=c.outerHeight,i=c.outerWidth,null!=k&&k<f)d="",a=[];else if(null!=i)for(l=wG(i-(b?b[1]+b[3]:0),m,c.ellipsis,{minChar:c.minChar,placeholder:c.placeholder}),e=0,n=a.length;e<n;e++)a[e]=wD(a[e],l);return{lines:a,height:g,outerHeight:f,lineHeight:h,canCacheByTextString:j}}function mV(g,f){var c={lines:[],width:0,height:0},t,l,D,C,z,m,y,e,i,n,o,h,v,x,r,w,d,j,u,s,b,A,B,k,p,q,a,E;if(null!=g&&(g+=""),!g)return c;for(t,l=oy.lastIndex=0;null!=(t=oy.exec(g));)D=t.index,l<D&&mU(c,g.substring(l,D)),mU(c,t[2],t[1]),l=oy.lastIndex;l<g.length&&mU(c,g.substring(l,g.length)),C=c.lines,z=0,m=0,y=[],e=f.textPadding,i=f.truncate,n=i&&i.outerWidth,o=i&&i.outerHeight,e&&(null!=n&&(n-=e[1]+e[3]),null!=o&&(o-=e[0]+e[2]));for(h=0;h<C.length;h++){for(v=C[h],x=0,r=0,w=0;w<v.tokens.length;w++){if(d=(a=v.tokens[w]).styleName&&f.rich[a.styleName]||{},j=a.textPadding=d.textPadding,u=a.font=d.font||f.font,s=a.textHeight=R(d.textHeight,wy(u)),j&&(s+=j[0]+j[2]),a.height=s,a.lineHeight=dF(d.textLineHeight,f.textLineHeight,s),a.textAlign=d&&d.textAlign||f.textAlign,a.textVerticalAlign=d&&d.textVerticalAlign||"middle",null!=o&&z+a.lineHeight>o)return{lines:[],width:0,height:0};a.textWidth=bo(a.text,u),b=d.textWidth,A=null==b||"auto"===b,"string"==typeof b&&"%"===b.charAt(b.length-1)?(a.percentWidth=b,y.push(a),b=0):(A&&(b=a.textWidth,B=d.textBackgroundColor,k=B&&B.image,k&&iC(k=afg(k))&&(b=Math.max(b,k.width*s/k.height))),p=j?j[1]+j[3]:0,b+=p,q=null!=n?n-r:null,null!=q&&q<b&&(!A||q<p?(a.text="",a.textWidth=b=0):(a.text=wH(a.text,q-p,u,i.ellipsis,{minChar:i.minChar}),a.textWidth=bo(a.text,u),b=a.textWidth+p))),r+=a.width=b,d&&(x=Math.max(x,a.lineHeight))}v.width=r,z+=v.lineHeight=x,m=Math.max(m,r)}c.outerWidth=c.width=R(f.textWidth,m),c.outerHeight=c.height=R(f.textHeight,z),e&&(c.outerWidth+=e[1]+e[3],c.outerHeight+=e[0]+e[2]);for(h=0;h<y.length;h++)E=(a=y[h]).percentWidth,a.width=parseInt(E,10)/100*m;return c}function mU(j,g,k){for(var h=""===g,f=g.split("\n"),c=j.lines,a=0,d,e,b,i;a<f.length;a++)d=f[a],e={styleName:k,text:d,isLineHolder:!d&&!h},a?c.push({tokens:[e]}):(b=(c[c.length-1]||(c[0]={tokens:[]})).tokens,i=b.length,1===i&&b[0].isLineHolder?b[0]=e:!d&&i&&!h||b.push(e))}function ww(a){var b=(a.fontSize||a.fontFamily)&&[a.fontStyle,a.fontWeight,(a.fontSize||12)+"px",a.fontFamily||"sans-serif"].join(" ");return b&&aV(b)||a.textFont||a.font}function wv(j,l){var a,b,c,d,k,h=l.x,i=l.y,f=l.width,g=l.height,e=l.r;f<0&&(h+=f,f=-f),g<0&&(i+=g,g=-g),"number"==typeof e?a=b=c=d=e:e instanceof Array?1===e.length?a=b=c=d=e[0]:2===e.length?(a=c=e[0],b=d=e[1]):3===e.length?(a=e[0],b=d=e[1],c=e[2]):(a=e[0],b=e[1],c=e[2],d=e[3]):a=b=c=d=0,f<a+b&&(a*=f/(k=a+b),b*=f/k),f<c+d&&(c*=f/(k=c+d),d*=f/k),g<b+c&&(b*=g/(k=b+c),c*=g/k),g<a+d&&(a*=g/(k=a+d),d*=g/k),j.moveTo(h+a,i),j.lineTo(h+f-b,i),0!==b&&j.arc(h+f-b,i+b,b,-Math.PI/2,0),j.lineTo(h+f,i+g-c),0!==c&&j.arc(h+f-c,i+g-c,c,0,Math.PI/2),j.lineTo(h+d,i+g),0!==d&&j.arc(h+d,i+g-d,d,Math.PI/2,Math.PI),j.lineTo(h,i+a),0!==a&&j.arc(h+a,i+a,a,Math.PI,1.5*Math.PI)}nb.measureText=function(b,c){var a=yP();return a.font=c||iI,a.measureText(b)},mR=iI,afb={left:1,right:1,center:1},afa={top:1,bottom:1,middle:1},ws=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],wr={},wq={};function gl(b){return wl(b),a(b.rich,wl),b}function wl(a){var b,c;a&&(a.font=ww(a),b=a.textAlign,"middle"===b&&(b="center"),a.textAlign=null==b||afb[b]?b:"left",c=a.textVerticalAlign||a.textBaseline,"center"===c&&(c="middle"),a.textVerticalAlign=null==c||afa[c]?c:"top",a.textPadding&&(a.textPadding=oM(a.textPadding)))}function wk(b,c,d,a,e,f){a.rich?function(a,c,e,d,f,g){g!==np&&(c.__attrCachedBy=cL.NONE);var b=a.__textCotentBlock;b&&!a.__dirtyText||(b=a.__textCotentBlock=mV(e,d)),!function(e,f,g,b,B){var A=g.width,y=g.outerWidth,w=g.outerHeight,r=b.textPadding,k=mB(wq,e,b,B),u=k.baseX,v=k.baseY,C=k.textAlign,D=k.textVerticalAlign,z,s,l,h,t,n,a,q,j,x,i,o,d,c,p,m;wj(f,b,B,u,v),z=ft(u,y,C),s=ey(v,w,D),l=z,h=s,r&&(l+=r[3],h+=r[0]),t=l+A,mF(b)&&mC(e,f,b,z,s,y,w);for(n=0;n<g.lines.length;n++){for(a,q=g.lines[n],j=q.tokens,x=j.length,i=q.lineHeight,o=q.width,d=0,c=l,p=t,m=x-1;d<x&&(!(a=j[d]).textAlign||"left"===a.textAlign);)mI(e,f,a,b,i,h,c,"left"),o-=a.width,c+=a.width,d++;for(;0<=m&&"right"===(a=j[m]).textAlign;)mI(e,f,a,b,i,h,p,"right"),o-=a.width,p-=a.width,m--;for(c+=(A-(c-l)-(t-p)-o)/2;d<=m;)a=j[d],mI(e,f,a,b,i,h,c+a.width/2,"center"),c+=a.width,d++;h+=i}}(a,c,b,d,f)}(b,c,d,a,e,f):function(c,a,B,b,C,w){var g,o=mF(b),h=!1,x=a.__attrCachedBy===cL.PLAIN_TEXT,l,t,d,L,j,H,i,D,n,p,A,v,J,y,k,f,u,M,e,s,E,F,G,r,I,z,K,m,q;w!==np?(w&&(g=w.style,h=!o&&x&&g),a.__attrCachedBy=o?cL.NONE:cL.PLAIN_TEXT):x&&(a.__attrCachedBy=cL.NONE),l=b.font||mR,h&&l===(g.font||mR)||(a.font=l),t=c.__computedFont,c.__styleFont!==l&&(c.__styleFont=l,t=c.__computedFont=a.font),d=b.textPadding,L=b.textLineHeight,j=c.__textCotentBlock,j&&!c.__dirtyText||(j=c.__textCotentBlock=mW(B,t,d,L,b.truncate)),H=j.outerHeight,i=j.lines,D=j.lineHeight,n=mB(wq,c,b,C),p=n.baseX,A=n.baseY,v=n.textAlign||"left",J=n.textVerticalAlign,wj(a,b,C,p,A),y=ey(A,H,J),k=p,f=y,(o||d)&&(u=bo(B,t),d&&(u+=d[1]+d[3]),M=ft(p,u,v),o&&mC(c,a,b,M,y,u,H),d&&(k=we(p,v,d),f+=d[0])),a.textAlign=v,a.textBaseline="middle",a.globalAlpha=b.opacity||1;for(e=0;e<ws.length;e++)s=ws[e],E=s[0],F=s[1],G=b[E],h&&G===g[E]||(a[F]=nr(a,F,G||s[2]));if(f+=D/2,r=b.textStrokeWidth,I=h?g.textStrokeWidth:null,z=!h||r!==I,K=!h||z||b.textStroke!==g.textStroke,m=my(b.textStroke,r),q=wf(b.textFill),m&&(z&&(a.lineWidth=r),K&&(a.strokeStyle=m)),q&&(h&&b.textFill===g.textFill||(a.fillStyle=q)),1===i.length)m&&a.strokeText(i[0],k,f),q&&a.fillText(i[0],k,f);else for(e=0;e<i.length;e++)m&&a.strokeText(i[e],k,f),q&&a.fillText(i[e],k,f),f+=D}(b,c,d,a,e,f)}function wj(e,f,a,b,c){if(a&&f.textRotation){var d=f.textOrigin;"center"===d?(b=a.width/2+a.x,c=a.height/2+a.y):d&&(b=d[0]+a.x,c=d[1]+a.y),e.translate(b,c),e.rotate(-f.textRotation),e.translate(-b,-c)}}function mI(o,b,a,d,l,i,e,g){var c=d.rich[a.styleName]||{},k,f,h,m,n,j;c.text=a.text,k=a.textVerticalAlign,f=i+l/2,"top"===k?f=i+a.height/2:"bottom"===k&&(f=i+l-a.height/2),!a.isLineHolder&&mF(c)&&mC(o,b,c,"right"===g?e-a.width:"center"===g?e-a.width/2:e,f-a.height/2,a.width,a.height),h=a.textPadding,h&&(e=we(e,g,h),f-=a.height/2-h[2]-a.textHeight/2),ak(b,"shadowBlur",dF(c.textShadowBlur,d.textShadowBlur,0)),ak(b,"shadowColor",c.textShadowColor||d.textShadowColor||"transparent"),ak(b,"shadowOffsetX",dF(c.textShadowOffsetX,d.textShadowOffsetX,0)),ak(b,"shadowOffsetY",dF(c.textShadowOffsetY,d.textShadowOffsetY,0)),ak(b,"textAlign",g),ak(b,"textBaseline","middle"),ak(b,"font",a.font||mR),m=my(c.textStroke||d.textStroke,j),n=wf(c.textFill||d.textFill),j=R(c.textStrokeWidth,d.textStrokeWidth),m&&(ak(b,"lineWidth",j),ak(b,"strokeStyle",m),b.strokeText(a.text,e,f)),n&&(ak(b,"fillStyle",n),b.fillText(a.text,e,f))}function mF(a){return!!(a.textBackgroundColor||a.textBorderWidth&&a.textBorderColor)}function mC(o,a,b,h,e,f,g){var c=b.textBackgroundColor,i=b.textBorderWidth,j=b.textBorderColor,l=E(c),n,k,d;(ak(a,"shadowBlur",b.textBoxShadowBlur||0),ak(a,"shadowColor",b.textBoxShadowColor||"transparent"),ak(a,"shadowOffsetX",b.textBoxShadowOffsetX||0),ak(a,"shadowOffsetY",b.textBoxShadowOffsetY||0),l||i&&j)&&(a.beginPath(),n=b.textBorderRadius,n?wv(a,{x:h,y:e,width:f,height:g,r:n}):a.rect(h,e,f,g),a.closePath()),l?(ak(a,"fillStyle",c),null!=b.fillOpacity)?(k=a.globalAlpha,a.globalAlpha=b.fillOpacity*b.opacity,a.fill(),a.globalAlpha=k):a.fill():m(c)&&(d=c.image,(d=wL(d,null,o,ae$,c))&&iC(d)&&a.drawImage(d,h,e,f,g)),i&&j&&(ak(a,"lineWidth",i),ak(a,"strokeStyle",j),null!=b.strokeOpacity?(k=a.globalAlpha,a.globalAlpha=b.strokeOpacity*b.opacity,a.stroke(),a.globalAlpha=k):a.stroke())}function ae$(a,b){b.image=a}function mB(c,g,a,b){var d=a.x||0,e=a.y||0,h=a.textAlign,i=a.textVerticalAlign,j,f,k;return b&&(j=a.textPosition,j instanceof Array?(d=b.x+mx(j[0],b.width),e=b.y+mx(j[1],b.height)):(f=g&&g.calculateTextPosition?g.calculateTextPosition(wr,a,b):na(wr,a,b),d=f.x,e=f.y,h=h||f.textAlign,i=i||f.textVerticalAlign),k=a.textOffset,k&&(d+=k[0],e+=k[1])),(c=c||{}).baseX=d,c.baseY=e,c.textAlign=h,c.textVerticalAlign=i,c}function ak(a,b,c){return a[b]=nr(a,b,c),a[b]}function my(a,b){return null==a||b<=0||"transparent"===a||"none"===a?null:a.image||a.colorStops?"#000":a}function wf(a){return null==a||"none"===a?null:a.image||a.colorStops?"#000":a}function mx(a,b){return"string"==typeof a?0<=a.lastIndexOf("%")?parseFloat(a)/100*b:parseFloat(a):a}function we(b,c,a){return"right"===c?b-a[1]:"center"===c?b+a[3]/2-a[1]/2:b+a[3]}function mv(b,a){return null!=b&&(b||a.textBackgroundColor||a.textBorderWidth&&a.textBorderColor||a.textPadding)}function jv(){}mu=new r;function aC(a){for(var b in a=a||{},bW.call(this,a),a)a.hasOwnProperty(b)&&"style"!==b&&(this[b]=a[b]);this.style=new cO(a.style,this),this._rect=null,this.__clipPaths=null}function ad(a){aC.call(this,a)}aC.prototype={constructor:aC,type:"displayable",__dirty:!0,invisible:!(jv.prototype={constructor:jv,drawRectText:function(c,b){var a=this.style,d,e;b=a.textRect||b,this.__dirty&&gl(a),d=a.text,(null!=d&&(d+=""),mv(d,a))&&(c.save(),e=this.transform,a.transformText?this.setTransform(c):e&&(mu.copy(b),mu.applyTransform(e),b=mu),wk(this,c,d,a,b,np),c.restore())}}),z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(a){},afterBrush:function(a){},brush:function(a,b){},getBoundingRect:function(){},contain:function(a,b){return this.rectContain(a,b)},traverse:function(a,b){a.call(b,this)},rectContain:function(b,c){var a=this.transformCoordToLocal(b,c);return this.getBoundingRect().contain(a[0],a[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(a){return this.animate("style",a)},attrKV:function(a,b){"style"!==a?bW.prototype.attrKV.call(this,a,b):this.style.set(b)},setStyle:function(a,b){return this.style.set(a,b),this.dirty(!1),this},useStyle:function(a){return this.style=new cO(a,this),this.dirty(!1),this},calculateTextPosition:null},D(aC,bW),C(aC,jv),ad.prototype={constructor:ad,type:"image",brush:function(e,l){var a=this.style,k=a.image,d,f,g,c,b,j,h,i,m,n;a.bind(e,this,l),d=this._image=wL(k,this._image,this,this.onload),d&&iC(d)&&(f=a.x||0,g=a.y||0,c=a.width,b=a.height,j=d.width/d.height,(null==c&&null!=b?c=b*j:null==b&&null!=c?b=c/j:null==c&&null==b&&(c=d.width,b=d.height),this.setTransform(e),a.sWidth&&a.sHeight)?(h=a.sx||0,i=a.sy||0,e.drawImage(d,h,i,a.sWidth,a.sHeight,f,g,c,b)):a.sx&&a.sy?(m=c-(h=a.sx),n=b-(i=a.sy),e.drawImage(d,h,i,m,n,f,g,c,b)):e.drawImage(d,f,g,c,b),null!=a.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect())))},getBoundingRect:function(){var a=this.style;return this._rect||(this._rect=new r(a.x||0,a.y||0,a.width||0,a.height||0)),this._rect}},D(ad,aC),dH=314159;function jn(a){return parseInt(a,10)}mt=new r(0,0,0,0),ms=new r(0,0,0,0);function mr(a,l,b){var h,c,i,j,d,g,e,k;this.type="canvas",h=!a.nodeName||"CANVAS"===a.nodeName.toUpperCase(),this._opts=b=f({},b||{}),this.dpr=b.devicePixelRatio||hl,this._singleCanvas=h,c=(this.root=a).style,c&&(c["-webkit-tap-highlight-color"]="transparent",c["-webkit-user-select"]=c["user-select"]=c["-webkit-touch-callout"]="none",a.innerHTML=""),this.storage=l,i=this._zlevelList=[],j=this._layers={},(this._layerConfig={},this._needsManuallyCompositing=!1,h)?(d=a.width,g=a.height,null!=b.width&&(d=b.width),null!=b.height&&(g=b.height),this.dpr=b.devicePixelRatio||1,a.width=d*this.dpr,a.height=g*this.dpr,this._width=d,this._height=g,e=new e$(a,this,this.dpr),e.__builtin__=!0,e.initContext(),(j[dH]=e).zlevel=dH,i.push(dH),this._domRoot=a):(this._width=this._getSize(0),this._height=this._getSize(1),k=this._domRoot=function(b,c){var a=document.createElement("div");return a.style.cssText=["position:relative","width:"+b+"px","height:"+c+"px","padding:0","margin:0","border-width:0"].join(";")+";",a}(this._width,this._height),a.appendChild(k)),this._hoverlayer=null,this._hoverElements=[]}mr.prototype={constructor:mr,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var a=this.getViewportRoot();if(a)return{offsetLeft:a.offsetLeft||0,offsetTop:a.offsetTop||0}},refresh:function(d){var e=this.storage.getDisplayList(!0),c=this._zlevelList,a,f,b,g;this._redrawId=Math.random(),this._paintList(e,d,this._redrawId);for(a=0;a<c.length;a++)f=c[a],b=this._layers[f],!b.__builtin__&&b.refresh&&(g=0===a?this._backgroundColor:null,b.refresh(g));return this.refreshHover(),this},addHover:function(a,c){if(!a.__hoverMir){var b=new a.constructor({style:a.style,shape:a.shape,z:a.z,z2:a.z2,silent:a.silent});return(b.__from=a).__hoverMir=b,c&&b.setStyle(c),this._hoverElements.push(b),b}},removeHover:function(a){var d=a.__hoverMir,b=this._hoverElements,c=v(b,d);0<=c&&b.splice(c,1),a.__hoverMir=null},clearHover:function(d){for(var a=this._hoverElements,b=0,c;b<a.length;b++)c=a[b].__from,c&&(c.__hoverMir=null);a.length=0},refreshHover:function(){var e=this._hoverElements,f=e.length,b=this._hoverlayer,g,d,c,a;if(b&&b.clear(),f){h_(e,this.storage.displayableSortFunc),g={},(b=b||(this._hoverlayer=this.getLayer(1e5))).ctx.save();for(d=0;d<f;)c=e[d],a=c.__from,a&&a.__zr?(d++,a.invisible||(c.transform=a.transform,c.invTransform=a.invTransform,c.__clipPaths=a.__clipPaths,this._doPaintEl(c,b,!0,g))):(e.splice(d,1),a.__hoverMir=null,f--);b.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(b,a,c){var d,e;this._redrawId===c&&(a=a||!1,this._updateLayerStatus(b),d=this._doPaintList(b,a),(this._needsManuallyCompositing&&this._compositeManually(),!d)&&(e=this,nj(function(){e._paintList(b,a,c)})))},_compositeManually:function(){var a=this.getLayer(dH).ctx,b=this._domRoot.width,c=this._domRoot.height;a.clearRect(0,0,b,c),this.eachBuiltinLayer(function(d){d.virtual&&a.drawImage(d.dom,0,0,b,c)})},_doPaintList:function(p,d){for(var g=[],h=0,r,l,i,b,f,k,c,m,q,n,o,e,j;h<this._zlevelList.length;h++)r=this._zlevelList[h],(b=this._layers[r]).__builtin__&&b!==this._hoverlayer&&(b.__dirty||d)&&g.push(b);for(l=!0,i=0;i<g.length;i++){f=(b=g[i]).ctx,k={},f.save(),c=d?b.__startIndex:b.__drawIndex,m=!d&&b.incremental&&Date.now,q=m&&Date.now(),n=b.zlevel===this._zlevelList[0]?this._backgroundColor:null,b.__startIndex===b.__endIndex?b.clear(!1,n):c===b.__startIndex&&(o=p[c],o.incremental&&o.notClear&&!d||b.clear(!1,n)),-1===c&&(console.error("For some unknown reason. drawIndex is -1"),c=b.__startIndex);for(e=c;e<b.__endIndex;e++)if(j=p[e],this._doPaintEl(j,b,d,k),j.__dirty=j.__dirtyText=!1,m)if(15<Date.now()-q)break;b.__drawIndex=e,b.__drawIndex<b.__endIndex&&(l=!1),k.prevElClipPaths&&f.restore(),f.restore()}return t.wxa&&a(this._layers,function(a){a&&a.ctx&&a.ctx.draw&&a.ctx.draw()}),l},_doPaintEl:function(a,g,h,b){var c=g.ctx,f=a.transform,d,e;(g.__dirty||h)&&!a.invisible&&0!==a.style.opacity&&(!f||f[0]||f[3])&&(!a.culling||!function(a,b,c){return mt.copy(a.getBoundingRect()),a.transform&&mt.applyTransform(a.transform),ms.width=b,ms.height=c,!mt.intersect(ms)}(a,this._width,this._height))&&(d=a.__clipPaths,e=b.prevElClipPaths,e&&!function(a,b){if(a===b)return!1;if(!a||!b||a.length!==b.length)return!0;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!0;return!1}(d,e)||(e&&(c.restore(),b.prevElClipPaths=null,b.prevEl=null),d&&(c.save(),function(d,a){for(var c=0,b;c<d.length;c++)b=d[c],b.setTransform(a),a.beginPath(),b.buildPath(a,b.shape),a.clip(),b.restoreTransform(a)}(d,c),b.prevElClipPaths=d)),a.beforeBrush&&a.beforeBrush(c),a.brush(c,b.prevEl||null),(b.prevEl=a).afterBrush&&a.afterBrush(c))},getLayer:function(b,c){this._singleCanvas&&!this._needsManuallyCompositing&&(b=dH);var a=this._layers[b];return a||((a=new e$("zr_"+b,this,this.dpr)).zlevel=b,a.__builtin__=!0,this._layerConfig[b]&&l(a,this._layerConfig[b],!0),c&&(a.virtual=c),this.insertLayer(b,a),a.initContext()),a},insertLayer:function(a,c){var f=this._layers,d=this._zlevelList,h=d.length,g=null,b=-1,e=this._domRoot,i;if(f[a])cm("ZLevel "+a+" has been used already");else if(function(a){return!!a&&(!!a.__builtin__||"function"==typeof a.resize&&"function"==typeof a.refresh)}(c)){if(0<h&&a>d[0]){for(b=0;b<h-1&&!(d[b]<a&&d[b+1]>a);b++);g=f[d[b]]}d.splice(b+1,0,a),!(f[a]=c).virtual&&(g?(i=g.dom,i.nextSibling?e.insertBefore(c.dom,i.nextSibling):e.appendChild(c.dom)):e.firstChild?e.insertBefore(c.dom,e.firstChild):e.appendChild(c.dom))}else cm("Layer of zlevel "+a+" is not valid")},eachLayer:function(d,e){var b,a,c=this._zlevelList;for(a=0;a<c.length;a++)b=c[a],d.call(e,this._layers[b],b)},eachBuiltinLayer:function(e,f){var c,b,a,d=this._zlevelList;for(a=0;a<d.length;a++)b=d[a],(c=this._layers[b]).__builtin__&&e.call(f,c,b)},eachOtherLayer:function(e,f){var c,b,a,d=this._zlevelList;for(a=0;a<d.length;a++)b=d[a],(c=this._layers[b]).__builtin__||e.call(f,c,b)},getLayers:function(){return this._layers},_updateLayerStatus:function(e){var b,c,g,d,a,f;function h(a){c&&(c.__endIndex!==a&&(c.__dirty=!0),c.__endIndex=a)}if(this.eachBuiltinLayer(function(a,b){a.__dirty=a.__used=!1}),this._singleCanvas)for(b=1;b<e.length;b++)if((d=e[b]).zlevel!==e[b-1].zlevel||d.incremental){this._needsManuallyCompositing=!0;break}c=null,g=0;for(b=0;b<e.length;b++)f=(d=e[b]).zlevel,d.incremental?((a=this.getLayer(f+.001,this._needsManuallyCompositing)).incremental=!0,g=1):a=this.getLayer(f+(0<g?.01:0),this._needsManuallyCompositing),a.__builtin__||cm("ZLevel "+f+" has been used by unkown layer "+a.id),a!==c&&(a.__used=!0,a.__startIndex!==b&&(a.__dirty=!0),a.__startIndex=b,a.incremental?a.__drawIndex=-1:a.__drawIndex=b,h(b),c=a),d.__dirty&&(a.__dirty=!0,a.incremental&&a.__drawIndex<0&&(a.__drawIndex=b));h(b),this.eachBuiltinLayer(function(a,b){!a.__used&&0<a.getElementCount()&&(a.__dirty=!0,a.__startIndex=a.__endIndex=a.__drawIndex=0),a.__dirty&&a.__drawIndex<0&&(a.__drawIndex=a.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(a){a.clear()},setBackgroundColor:function(a){this._backgroundColor=a},configLayer:function(a,e){var b,c,d;if(e){b=this._layerConfig,b[a]?l(b[a],e,!0):b[a]=e;for(c=0;c<this._zlevelList.length;c++)d=this._zlevelList[c],(d===a||d===a+.01)&&l(this._layers[d],b[a],!0)}},delLayer:function(a){var c=this._layers,d=this._zlevelList,b=c[a];b&&(b.dom.parentNode.removeChild(b.dom),delete c[a],d.splice(v(d,a),1))},resize:function(b,c){var d,e,f;if(this._domRoot.style){if(d=this._domRoot,d.style.display="none",e=this._opts,null!=b&&(e.width=b),null!=c&&(e.height=c),b=this._getSize(0),c=this._getSize(1),d.style.display="",this._width!==b||c!==this._height){for(f in d.style.width=b+"px",d.style.height=c+"px",this._layers)this._layers.hasOwnProperty(f)&&this._layers[f].resize(b,c);a(this._progressiveLayers,function(a){a.resize(b,c)}),this.refresh(!0)}this._width=b,this._height=c}else{if(null==b||null==c)return;this._width=b,this._height=c,this.getLayer(dH).resize(b,c)}return this},clearLayer:function(b){var a=this._layers[b];a&&a.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(b){var a,e,f,g,h,d,c,i;if(b=b||{},this._singleCanvas&&!this._compositeManually)return this._layers[dH].dom;if(a=new e$("image",this,b.pixelRatio||this.dpr),a.initContext(),a.clear(!1,b.backgroundColor||this._backgroundColor),b.pixelRatio<=this.dpr)this.refresh(),e=a.dom.width,f=a.dom.height,g=a.ctx,this.eachLayer(function(b){b.__builtin__?g.drawImage(b.dom,0,0,e,f):b.renderToCanvas&&(a.ctx.save(),b.renderToCanvas(a.ctx),a.ctx.restore())});else for(h={},d=this.storage.getDisplayList(!0),c=0;c<d.length;c++)i=d[c],this._doPaintEl(i,a,!0,h);return a.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(b){var c=this._opts,a=["width","height"][b],f=["clientWidth","clientHeight"][b],g=["paddingLeft","paddingTop"][b],h=["paddingRight","paddingBottom"][b],d,e;return null!=c[a]&&"auto"!==c[a]?parseFloat(c[a]):(d=this.root,e=document.defaultView.getComputedStyle(d),(d[f]||jn(e[a])||jn(d.style[a]))-(jn(e[g])||0)-(jn(e[h])||0)|0)},pathToImage:function(a,b){var e,f,g,d,h,p,k,i,l,r,m,q,n,o,c,j;return b=b||this.dpr,e=document.createElement("canvas"),f=e.getContext("2d"),g=a.getBoundingRect(),d=a.style,h=d.shadowBlur*b,p=d.shadowOffsetX*b,k=d.shadowOffsetY*b,i=d.hasStroke()?d.lineWidth:0,l=Math.max(i/2,h-p),r=Math.max(i/2,p+h),m=Math.max(i/2,h-k),q=Math.max(i/2,k+h),n=g.width+l+r,o=g.height+m+q,e.width=n*b,e.height=o*b,f.scale(b,b),f.clearRect(0,0,n,o),f.dpr=b,c={position:a.position,rotation:a.rotation,scale:a.scale},a.position=[l-g.x,m-g.y],a.rotation=0,a.scale=[1,1],a.updateTransform(),a&&a.brush(f),j=new ad({style:{x:0,y:0,image:e}}),null!=c.position&&(j.position=a.position=c.position),null!=c.rotation&&(j.rotation=a.rotation=c.rotation),null!=c.scale&&(j.scale=a.scale=c.scale),j}};function jl(a){a=a||{},this.stage=a.stage||{},this.onframe=a.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,Z.call(this)}jl.prototype={constructor:jl,addClip:function(a){this._clips.push(a)},addAnimator:function(b){b.animation=this;for(var c=b.getClips(),a=0;a<c.length;a++)this.addClip(c[a])},removeClip:function(b){var a=v(this._clips,b);0<=a&&this._clips.splice(a,1)},removeAnimator:function(b){for(var c=b.getClips(),a=0;a<c.length;a++)this.removeClip(c[a]);b.animation=null},_update:function(){for(var f=(new Date).getTime()-this._pausedTime,d=f-this._time,b=this._clips,c=b.length,e=[],g=[],a=0,h,i;a<c;a++)h=b[a],i=h.step(f,d),i&&(e.push(i),g.push(h));for(a=0;a<c;)b[a]._needsRemove?(b[a]=b[c-1],b.pop(),c--):a++;c=e.length;for(a=0;a<c;a++)g[a].fire(e[a]);this._time=f,this.onframe(d),this.trigger("frame",d),this.stage.update&&this.stage.update()},_startLoop:function(){var a=this;this._running=!0,nj(function b(){a._running&&(nj(b),a._paused||a._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(c,a){var b=new ny(c,(a=a||{}).loop,a.getter,a.setter);return this.addAnimator(b),b}},C(jl,Z),jk=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],mp=["touchstart","touchend","touchmove"],ae_={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},wc=c(jk,function(a){var b=a.replace("mouse","pointer");return ae_[b]?b:a});function wb(a){return"mousewheel"===a&&t.browser.firefox?"DOMMouseScroll":a}function mj(a){a._touching=!0,clearTimeout(a._touchTimer),a._touchTimer=setTimeout(function(){a._touching=!1},700)}aO={mousemove:function(a){a=dp(this.dom,a),this.trigger("mousemove",a)},mouseout:function(b){var a=(b=dp(this.dom,b)).toElement||b.relatedTarget;if(a!==this.dom)for(;a&&9!==a.nodeType;){if(a===this.dom)return;a=a.parentNode}this.trigger("mouseout",b)},touchstart:function(a){(a=dp(this.dom,a)).zrByTouch=!0,this._lastTouchMoment=new Date,this.handler.processGesture(a,"start"),aO.mousemove.call(this,a),aO.mousedown.call(this,a),mj(this)},touchmove:function(a){(a=dp(this.dom,a)).zrByTouch=!0,this.handler.processGesture(a,"change"),aO.mousemove.call(this,a),mj(this)},touchend:function(a){(a=dp(this.dom,a)).zrByTouch=!0,this.handler.processGesture(a,"end"),aO.mouseup.call(this,a),+new Date-this._lastTouchMoment<300&&aO.click.call(this,a),mj(this)},pointerdown:function(a){aO.mousedown.call(this,a)},pointermove:function(a){wa(a)||aO.mousemove.call(this,a)},pointerup:function(a){aO.mouseup.call(this,a)},pointerout:function(a){wa(a)||aO.mouseout.call(this,a)}};function wa(b){var a=b.pointerType;return"pen"===a||"touch"===a}function mg(c){function b(d,b){a(d,function(a){ov(c,wb(a),b._handlers[a])},b)}Z.call(this),this.dom=c,this._touching=!1,this._touchTimer,this._handlers={},function(b){a(mp,function(a){b._handlers[a]=k(aO[a],b)}),a(wc,function(a){b._handlers[a]=k(aO[a],b)}),a(jk,function(a){b._handlers[a]=function(b,a){return function(){if(!a._touching)return b.apply(a,arguments)}}(aO[a],b)})}(this),t.pointerEventsSupported?b(wc,this):(t.touchEventsSupported&&b(mp,this),b(jk,this))}a(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(a){aO[a]=function(b){b=dp(this.dom,b),this.trigger(a,b)}}),vX=mg.prototype,vX.dispose=function(){for(var a,b,c,e=jk.concat(mp),d=0,f;d<e.length;d++)f=e[d],a=this.dom,b=wb(f),c=this._handlers[f],oC?a.removeEventListener(b,c):a.detachEvent("on"+b,c)},vX.setCursor=function(a){this.dom.style&&(this.dom.style.cursor=a||"default")},C(mg,Z),aeZ=!t.canvasSupported,h$={canvas:mr},dv={};function mc(b,c){var a=new l$(zb(),b,c);return dv[a.id]=a}function ma(a,b){h$[a]=b}l$=function(g,f,d){var e,a,b,c,h,i,j;if(d=d||{},this.dom=f,this.id=g,e=this,a=new nt,b=d.renderer,aeZ){if(!h$.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");b="vml"}else b&&h$[b]||(b="canvas");c=new h$[b](f,a,d,g),this.storage=a,this.painter=c,h=t.node||t.worker?null:new mg(c.getViewportRoot()),this.handler=new ev(a,c,h,c.root),this.animation=new jl({stage:{update:k(this.flush,this)}}),this.animation.start(),this._needsRefresh,i=a.delFromStorage,j=a.addToStorage,a.delFromStorage=function(b){i.call(a,b),b&&b.removeSelfFromZr(e)},a.addToStorage=function(b){j.call(a,b),b.addSelfToZr(e)}},l$.prototype={constructor:l$,getId:function(){return this.id},add:function(a){this.storage.addRoot(a),this._needsRefresh=!0},remove:function(a){this.storage.delRoot(a),this._needsRefresh=!0},configLayer:function(a,b){this.painter.configLayer&&this.painter.configLayer(a,b),this._needsRefresh=!0},setBackgroundColor:function(a){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(a),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var a;this._needsRefresh&&(a=!0,this.refreshImmediately()),this._needsRefreshHover&&(a=!0,this.refreshHoverImmediately()),a&&this.trigger("rendered")},addHover:function(a,b){if(this.painter.addHover){var c=this.painter.addHover(a,b);return this.refreshHover(),c}},removeHover:function(a){this.painter.removeHover&&(this.painter.removeHover(a),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(a){a=a||{},this.painter.resize(a.width,a.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(a,b){return this.painter.pathToImage(a,b)},setCursorStyle:function(a){this.handler.setCursorStyle(a)},findHover:function(a,b){return this.handler.findHover(a,b)},on:function(a,b,c){this.handler.on(a,b,c)},off:function(a,b){this.handler.off(a,b)},trigger:function(a,b){this.handler.trigger(a,b)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function(a){delete dv[a]}(this.id)}},aeY=(Object.freeze||Object)({version:"4.1.2",init:mc,dispose:function(a){if(a)a.dispose();else{for(var b in dv)dv.hasOwnProperty(b)&&dv[b].dispose();dv={}}return this},getInstance:function(a){return dv[a]},registerPainter:ma}),es=a,et=m,aeU=b,vT="series\0";function al(a){return a instanceof Array?a:null==a?[]:[a]}function dn(a,b,e){var d,f,c;if(a){a[b]=a[b]||{},a.emphasis=a.emphasis||{},a.emphasis[b]=a.emphasis[b]||{};for(d=0,f=e.length;d<f;d++)c=e[d],!a.emphasis[b].hasOwnProperty(c)&&a[b].hasOwnProperty(c)&&(a.emphasis[b][c]=a[b][c])}}vR=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function fE(a){return!et(a)||aeU(a)||a instanceof Date?a:a.value}function lX(d,b){b=(b||[]).slice();var a=c(d||[],function(a,b){return{exist:a}});return es(b,function(d,f){var c,e;if(et(d)){for(c=0;c<a.length;c++)if(!a[c].option&&null!=d.id&&a[c].exist.id===d.id+"")return a[c].option=d,void(b[f]=null);for(c=0;c<a.length;c++)if(e=a[c].exist,!(a[c].option||null!=e.id&&null!=d.id||null==d.name||iN(d)||iN(e)||e.name!==d.name+""))return a[c].option=d,void(b[f]=null)}}),es(b,function(c,e){var b,d;if(et(c)){for(b=0;b<a.length;b++)if(d=a[b].exist,!a[b].option&&!iN(d)&&null==c.id){a[b].option=c;break}b>=a.length&&a.push({option:c})}}),a}function vN(b){var a=n();es(b,function(b,d){var c=b.exist;c&&a.set(c.id,b)}),es(b,function(c,d){var b=c.option;cg(!b||null==b.id||!a.get(b.id)||a.get(b.id)===c,"id duplicates: "+(b&&b.id)),b&&null!=b.id&&a.set(b.id,c),c.keyInfo||(c.keyInfo={})}),es(b,function(d,f){var e=d.exist,c=d.option,b=d.keyInfo,g;if(et(c)){if(b.name=null!=c.name?c.name+"":e?e.name:vT+f,e)b.id=e.id;else if(null!=c.id)b.id=c.id+"";else for(g=0;b.id="\0"+b.name+"\0"+g++,a.get(b.id););a.set(b.id,d)}})}function lV(b){var a=b.name;return!(!a||!a.indexOf(vT))}function iN(a){return et(a)&&a.id&&0===(a.id+"").indexOf("\0_ec_\0")}function iM(d,a){return null!=a.dataIndexInside?a.dataIndexInside:null!=a.dataIndex?b(a.dataIndex)?c(a.dataIndex,function(a){return d.indexOfRawIndex(a)}):d.indexOfRawIndex(a.dataIndex):null!=a.name?b(a.name)?c(a.name,function(a){return d.indexOfName(a)}):d.indexOfName(a.name):void 0}function au(){var a="__\0ec_inner_"+aeS+++"_"+Math.random().toFixed(5);return function(b){return b[a]||(b[a]={})}}aeS=0;function iJ(f,a,c){var e,b,d;return E(a)&&(e={},e[a+"Index"]=0,a=e),b=c&&c.defaultMainType,!b||lT(a,b+"Index")||lT(a,b+"Id")||lT(a,b+"Name")||(a[b+"Index"]=0),d={},es(a,function(b,g){var i,e,h,j,k;b=a[g],"dataIndex"!==g&&"dataIndexInside"!==g?(i=g.match(/^(\w+)(Index|Id|Name)$/)||[],e=i[1],h=(i[2]||"").toLowerCase(),!e||!h||null==b||"index"===h&&"none"===b||c&&c.includeMainTypes&&v(c.includeMainTypes,e)<0||(j={mainType:e},"index"===h&&"all"===b||(j[h]=b),k=f.queryComponents(j),d[e+"Models"]=k,d[e+"Model"]=k[0])):d[g]=b}),d}function lT(a,b){return a&&a.hasOwnProperty(b)}function vM(a,b,c){a.setAttribute?a.setAttribute(b,c):a[b]=c}function vL(a){return"auto"===a?t.domSupported?"html":"richText":a||"html"}function lS(d,e){var b=n(),c=[];return a(d,function(d){var a=e(d);(b.get(a)||(c.push(a),b.set(a,[]))).push(d)}),{keys:c,buckets:b}}aeR=".",dc="___EC__COMPONENT__CONTAINER___";function cq(a){var b={main:"",sub:""};return a&&(a=a.split(aeR),b.main=a[0]||"",b.sub=a[1]||""),b}function fa(a){(a.$constructor=a).extend=function(b){function a(){b.$constructor?b.$constructor.apply(this,arguments):c.apply(this,arguments)}var c=this;return f(a.prototype,b),a.extend=this.extend,a.superCall=aeP,a.superApply=aeO,D(a,this),a.superClass=c,a}}aeQ=0;function iA(a){var b=["__\0is_clz",aeQ++,Math.random().toFixed(3)].join("_");a.prototype[b]=!0,a.isInstance=function(a){return!(!a||!a[b])}}function aeP(a,b){var c=oN(arguments,2);return this.superClass.prototype[b].apply(a,c)}function aeO(a,b,c){return this.superClass.prototype[b].apply(a,c)}function is(b,d){var c,e;return d=d||{},c={},(b.registerClass=function(b,a){return a&&(function(a){cg(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(a),'componentType "'+a+'" illegal')}(a),(a=cq(a)).sub?a.sub!==dc&&(function(b){var a=c[b.main];return a&&a[dc]||((a=c[b.main]={})[dc]=!0),a}(a)[a.sub]=b):c[a.main]=b),b},b.getClass=function(d,b,e){var a=c[d];if(a&&a[dc]&&(a=b?a[b]:null),e&&!a)throw new Error(b?"Component "+d+"."+(b||"")+" not exists. Load it first.":d+".type should be specified.");return a},b.getClassesByMainType=function(d){d=cq(d);var e=[],b=c[d.main];return b&&b[dc]?a(b,function(a,b){b!==dc&&e.push(a)}):e.push(b),e},b.hasClass=function(a){return a=cq(a),!!c[a.main]},b.getAllClassMainTypes=function(){var b=[];return a(c,function(c,a){b.push(a)}),b},b.hasSubTypes=function(a){a=cq(a);var b=c[a.main];return b&&b[dc]},b.parseClassType=cq,d.registerWhenExtend)&&(e=b.extend,e&&(b.extend=function(a){var c=e.call(this,a);return b.registerClass(c,a.type)})),b}function dP(a){for(var b=0;b<a.length;b++)a[b][1]||(a[b][1]=a[b][0]);return function(h,e,f){for(var g={},b=0,c,d;b<a.length;b++)c=a[b][1],e&&0<=v(e,c)||f&&v(f,c)<0||(d=h.getShallow(c),null!=d&&(g[a[b][0]]=d));return g}}aeN=dP([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),aeM={getLineStyle:function(b){var a=aeN(this,b);return a.lineDash=this.getLineDash(a.lineWidth),a},getLineDash:function(a){null==a&&(a=1);var b=this.get("type"),c=Math.max(a,2),d=4*a;return"solid"!==b&&null!=b&&("dashed"===b?[d,d]:[c,c])}},aeL=dP([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),aeK={getAreaStyle:function(a,b){return aeL(this,a,b)}},ik=Math.pow,cM=Math.sqrt,ii=1e-8,vH=1e-4,vG=cM(3),id=1/3,bF=cG(),aS=cG(),eO=cG();function cI(a){return-ii<a&&a<ii}function vF(a){return ii<a||a<-ii}function ar(c,d,e,f,a){var b=1-a;return b*b*(b*c+3*a*d)+a*a*(a*f+3*b*e)}function vD(e,b,c,f,a){var d=1-a;return 3*(((b-e)*d+2*(c-b)*a)*d+(f-c)*a*a)}function vz(h,f,k,m,d){var a=6*k-12*f+6*h,c=9*f+3*m-3*h-9*k,j=3*f-3*h,e=0,g,b,l,i;return cI(c)?vF(a)&&0<=(b=-j/a)&&b<=1&&(d[e++]=b):(g=a*a-4*c*j,cI(g)?d[0]=-a/(2*c):0<g&&(l=cM(g),i=(-a-l)/(2*c),0<=(b=(-a+l)/(2*c))&&b<=1&&(d[e++]=b),0<=i&&i<=1&&(d[e++]=i))),e}function vy(c,d,e,j,b,a){var g=(d-c)*b+c,h=(e-d)*b+d,i=(j-e)*b+e,f=(h-g)*b+g,k=(i-h)*b+h,l=(k-f)*b+f;a[0]=c,a[1]=g,a[2]=f,a[3]=l,a[4]=l,a[5]=k,a[6]=i,a[7]=j}function am(c,d,e,a){var b=1-a;return b*(b*c+2*a*d)+a*a*e}function lL(c,a,d,b){return 2*((1-b)*(a-c)+b*(d-a))}function vx(a,b,d){var c=a+d-2*b;return 0==c?.5:(a-b)/c}function lJ(b,c,f,d,a){var e=(c-b)*d+b,g=(f-c)*d+c,h=(g-e)*d+e;a[0]=b,a[1]=e,a[2]=h,a[3]=h,a[4]=g,a[5]=f}az=Math.min,aA=Math.max,lI=Math.sin,lH=Math.cos,cU=2*Math.PI,hI=cG(),hH=cG(),hG=cG();function lF(b,h,i){if(0!==b.length){var c,a=b[0],f=a[0],g=a[0],d=a[1],e=a[1];for(c=1;c<b.length;c++)a=b[c],f=az(f,a[0]),g=aA(g,a[0]),d=az(d,a[1]),e=aA(e,a[1]);h[0]=f,h[1]=d,i[0]=g,i[1]=e}}function vw(a,b,c,d,e,f){e[0]=az(a,c),e[1]=az(b,d),f[0]=aA(a,c),f[1]=aA(b,d)}vv=[],vu=[];function aeJ(g,e,k,j,i,n,d,f,b,a){var c,l=vz,m=ar,h=l(g,k,i,d,vv),o,p;for(b[0]=1/0,b[1]=1/0,a[0]=-1/0,a[1]=-1/0,c=0;c<h;c++)o=m(g,k,i,d,vv[c]),b[0]=az(o,b[0]),a[0]=aA(o,a[0]);for(h=l(e,j,n,f,vu),c=0;c<h;c++)p=m(e,j,n,f,vu[c]),b[1]=az(p,b[1]),a[1]=aA(p,a[1]);b[0]=az(g,b[0]),a[0]=aA(g,a[0]),b[0]=az(d,b[0]),a[0]=aA(d,a[0]),b[1]=az(e,b[1]),a[1]=aA(e,a[1]),b[1]=az(f,b[1]),a[1]=aA(f,a[1])}function aeI(h,d,e,f,a,b,j,c,g){var k=bV,l=ch,m=Math.abs(a-b),n,i;if(m%cU<1e-4&&1e-4<m)return c[0]=h-e,c[1]=d-f,g[0]=h+e,void(g[1]=d+f);hI[0]=lH(a)*e+h,hI[1]=lI(a)*f+d,hH[0]=lH(b)*e+h,hH[1]=lI(b)*f+d,k(c,hI,hH),l(g,hI,hH),(a%=cU)<0&&(a+=cU),(b%=cU)<0&&(b+=cU),b<a&&!j?b+=cU:a<b&&j&&(a+=cU),j&&(n=b,b=a,a=n);for(i=0;i<b;i+=Math.PI/2)a<i&&(hG[0]=lH(i)*e+h,hG[1]=lI(i)*f+d,k(c,hG,c),l(g,hG,g))}P={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},bv=[],co=[],bw=[],br=[],vs=Math.min,vq=Math.max,fM=Math.cos,fN=Math.sin,ho=Math.sqrt,eq=Math.abs,lz="undefined"!=typeof Float32Array,aB=function(a){this._saveData=!a,this._saveData&&(this.data=[]),this._ctx=null};function cS(b,g,c,f,j,d,e){var a,h,i;return 0!==j&&(!(a=j,h=0,g+a<e&&f+a<e||e<g-a&&e<f-a||b+a<d&&c+a<d||d<b-a&&d<c-a)&&(b===c?Math.abs(d-b)<=a/2:(i=(h=(g-f)/(b-c))*d-e+(b*f-c*g)/(b-c),i*i/(h*h+1)<=a/2*a/2)))}function aeH(d,e,f,i,j,k,g,h,l,b,c){if(0===l)return!1;var a=l;return!(e+a<c&&i+a<c&&k+a<c&&h+a<c||c<e-a&&c<i-a&&c<k-a&&c<h-a||d+a<b&&f+a<b&&j+a<b&&g+a<b||b<d-a&&b<f-a&&b<j-a&&b<g-a)&&function(k,n,m,l,j,i,h,g,t,s,p){var b,e,d,c,q,o=.005,a=1/0,f,r;bF[0]=t,bF[1]=s;for(f=0;f<1;f+=.05)aS[0]=ar(k,m,j,h,f),aS[1]=ar(n,l,i,g,f),(c=cC(bF,aS))<a&&(b=f,a=c);a=1/0;for(r=0;r<32&&!(o<vH);r++)e=b-o,d=b+o,aS[0]=ar(k,m,j,h,e),aS[1]=ar(n,l,i,g,e),c=cC(aS,bF),0<=e&&c<a?(b=e,a=c):(eO[0]=ar(k,m,j,h,d),eO[1]=ar(n,l,i,g,d),q=cC(eO,bF),d<=1&&q<a?(b=d,a=q):o*=.5);return p&&(p[0]=ar(k,m,j,h,b),p[1]=ar(n,l,i,g,b)),cM(a)}(d,e,f,i,j,k,g,h,b,c,null)<=a/2}function vn(d,g,h,i,e,f,j,b,c){if(0===j)return!1;var a=j;return!(g+a<c&&i+a<c&&f+a<c||c<g-a&&c<i-a&&c<f-a||d+a<b&&h+a<b&&e+a<b||b<d-a&&b<h-a&&b<e-a)&&function(m,d,e,j,f,l,r,q,n){var b,k=.005,a=1/0,c,o,i,h,g,p;bF[0]=r,bF[1]=q;for(c=0;c<1;c+=.05)aS[0]=am(m,e,f,c),aS[1]=am(d,j,l,c),(g=cC(bF,aS))<a&&(b=c,a=g);a=1/0;for(o=0;o<32&&!(k<vH);o++)i=b-k,h=b+k,aS[0]=am(m,e,f,i),aS[1]=am(d,j,l,i),g=cC(aS,bF),0<=i&&g<a?(b=i,a=g):(eO[0]=am(m,e,f,h),eO[1]=am(d,j,l,h),p=cC(eO,bF),h<=1&&p<a?(b=h,a=p):k*=.5);return n&&(n[0]=am(m,e,f,b),n[1]=am(d,j,l,b)),cM(a)}(d,g,h,i,e,f,b,c,null)<=a/2}aB.prototype={constructor:aB,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(b,c,a){a=a||0,this._ux=eq(a/hl/b)||0,this._uy=eq(a/hl/c)||0},getContext:function(){return this._ctx},beginPath:function(a){return(this._ctx=a)&&a.beginPath(),a&&(this.dpr=a.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(a,b){return this.addData(P.M,a,b),this._ctx&&this._ctx.moveTo(a,b),this._x0=a,this._y0=b,this._xi=a,this._yi=b,this},lineTo:function(a,b){var c=eq(a-this._xi)>this._ux||eq(b-this._yi)>this._uy||this._len<5;return this.addData(P.L,a,b),this._ctx&&c&&(this._needsDash()?this._dashedLineTo(a,b):this._ctx.lineTo(a,b)),c&&(this._xi=a,this._yi=b),this},bezierCurveTo:function(c,d,e,f,a,b){return this.addData(P.C,c,d,e,f,a,b),this._ctx&&(this._needsDash()?this._dashedBezierTo(c,d,e,f,a,b):this._ctx.bezierCurveTo(c,d,e,f,a,b)),this._xi=a,this._yi=b,this},quadraticCurveTo:function(c,d,a,b){return this.addData(P.Q,c,d,a,b),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(c,d,a,b):this._ctx.quadraticCurveTo(c,d,a,b)),this._xi=a,this._yi=b,this},arc:function(c,d,a,e,b,f){return this.addData(P.A,c,d,a,a,e,b-e,0,f?0:1),this._ctx&&this._ctx.arc(c,d,a,e,b,f),this._xi=fM(b)*a+c,this._yi=fN(b)*a+d,this},arcTo:function(a,b,c,d,e){return this._ctx&&this._ctx.arcTo(a,b,c,d,e),this},rect:function(a,b,c,d){return this._ctx&&this._ctx.rect(a,b,c,d),this.addData(P.R,a,b,c,d),this},closePath:function(){this.addData(P.Z);var a=this._ctx,b=this._x0,c=this._y0;return a&&(this._needsDash()&&this._dashedLineTo(b,c),a.closePath()),this._xi=b,this._yi=c,this},fill:function(a){a&&a.fill(),this.toStatic()},stroke:function(a){a&&a.stroke(),this.toStatic()},setLineDash:function(a){if(a instanceof Array){this._lineDash=a;for(var c=this._dashIdx=0,b=0;b<a.length;b++)c+=a[b];this._dashSum=c}return this},setLineDashOffset:function(a){return this._dashOffset=a,this},len:function(){return this._len},setData:function(c){var a=c.length,b;this.data&&this.data.length===a||!lz||(this.data=new Float32Array(a));for(b=0;b<a;b++)this.data[b]=c[b];this._len=a},appendPath:function(b){var e,f,c,a,g,d;b instanceof Array||(b=[b]);for(e=b.length,f=0,c=this._len,a=0;a<e;a++)f+=b[a].len();lz&&this.data instanceof Float32Array&&(this.data=new Float32Array(c+f));for(a=0;a<e;a++)for(g=b[a].data,d=0;d<g.length;d++)this.data[c++]=g[d];this._len=c},addData:function(c){var a,b;if(this._saveData){a=this.data,this._len+arguments.length>a.length&&(this._expandData(),a=this.data);for(b=0;b<arguments.length;b++)a[this._len++]=arguments[b];this._prevCmd=c}},_expandData:function(){if(!(this.data instanceof Array)){for(var b=[],a=0;a<this._len;a++)b[a]=this.data[a];this.data=b}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(f,e){var n,j,l=this._dashSum,g=this._dashOffset,k=this._lineDash,o=this._ctx,i=this._xi,h=this._yi,a=f-i,b=e-h,m=ho(a*a+b*b),d=i,c=h,p=k.length;for(g<0&&(g=l+g),d-=(g%=l)*(a/=m),c-=g*(b/=m);0<a&&d<=f||a<0&&f<=d||0===a&&(0<b&&c<=e||b<0&&e<=c);)d+=a*(n=k[j=this._dashIdx]),c+=b*n,this._dashIdx=(j+1)%p,0<a&&d<i||a<0&&i<d||0<b&&c<h||b<0&&h<c||o[j%2?"moveTo":"lineTo"](0<=a?vs(d,f):vq(d,f),0<=b?vs(c,e):vq(c,e));a=d-f,b=c-e,this._dashOffset=-ho(a*a+b*b)},_dashedBezierTo:function(l,r,m,k,g,h){var a,e,f,j,i,t=this._dashSum,d=this._dashOffset,n=this._lineDash,o=this._ctx,p=this._xi,q=this._yi,c=ar,s=0,b=this._dashIdx,u=n.length,v=0;for(d<0&&(d=t+d),d%=t,a=0;a<1;a+=.1)e=c(p,l,m,g,a+.1)-c(p,l,m,g,a),f=c(q,r,k,h,a+.1)-c(q,r,k,h,a),s+=ho(e*e+f*f);for(;b<u&&!(d<(v+=n[b]));b++);for(a=(v-d)/s;a<=1;)j=c(p,l,m,g,a),i=c(q,r,k,h,a),b%2?o.moveTo(j,i):o.lineTo(j,i),a+=n[b]/s,b=(b+1)%u;b%2!=0&&o.lineTo(g,h),e=g-j,f=h-i,this._dashOffset=-ho(e*e+f*f)},_dashedQuadraticTo:function(a,b,c,d){var e=c,f=d;c=(c+2*a)/3,d=(d+2*b)/3,a=(this._xi+2*a)/3,b=(this._yi+2*b)/3,this._dashedBezierTo(a,b,c,d,e,f)},toStatic:function(){var a=this.data;a instanceof Array&&(a.length=this._len,lz&&(this.data=new Float32Array(a)))},getBoundingRect:function(){var j,i,u,t,g,h,s,q,p,k,z,A,o,n,b,d,c,f,e,a,B,w,x,y,m,l,v,C;bv[0]=bv[1]=bw[0]=bw[1]=Number.MAX_VALUE,co[0]=co[1]=br[0]=br[1]=-Number.MAX_VALUE;for(j,i,u,t,g,h,s,q,p,k,z,A,o,n,b=this.data,d=0,c=0,f=0,e=0,a=0;a<b.length;){switch(B=b[a++],1===a&&(f=d=b[a],e=c=b[a+1]),B){case P.M:d=f=b[a++],c=e=b[a++],bw[0]=f,bw[1]=e,br[0]=f,br[1]=e;break;case P.L:vw(d,c,b[a],b[a+1],bw,br),d=b[a++],c=b[a++];break;case P.C:aeJ(d,c,b[a++],b[a++],b[a++],b[a++],b[a],b[a+1],bw,br),d=b[a++],c=b[a++];break;case P.Q:j=d,i=c,u=b[a++],t=b[a++],g=b[a],h=b[a+1],s=bw,q=br,k=p=void 0,k=am,z=aA(az((p=vx)(j,u,g),1),0),A=aA(az(p(i,t,h),1),0),o=k(j,u,g,z),n=k(i,t,h,A),s[0]=az(j,g,o),s[1]=az(i,h,n),q[0]=aA(j,g,o),q[1]=aA(i,h,n),d=b[a++],c=b[a++];break;case P.A:w=b[a++],x=b[a++],y=b[a++],m=b[a++],l=b[a++],v=b[a++]+l,a+=1,C=1-b[a++],1===a&&(f=fM(l)*y+w,e=fN(l)*m+x),aeI(w,x,y,m,l,v,C,bw,br),d=fM(v)*y+w,c=fN(v)*m+x;break;case P.R:vw(f=d=b[a++],e=c=b[a++],f+b[a++],e+b[a++],bw,br);break;case P.Z:d=f,c=e}bV(bv,bv,bw),ch(co,co,br)}return 0===a&&(bv[0]=bv[1]=co[0]=co[1]=0),new r(bv[0],bv[1],co[0]-bv[0],co[1]-bv[1])},rebuildPath:function(c){for(var k,j,d,e,n,m,b=this.data,x=this._ux,w=this._uy,p=this._len,a=0,y,l,h,f,g,i,v,s,t,u,q,r,o;a<p;)switch(y=b[a++],1===a&&(k=d=b[a],j=e=b[a+1]),y){case P.M:k=d=b[a++],j=e=b[a++],c.moveTo(d,e);break;case P.L:n=b[a++],m=b[a++],(eq(n-d)>x||eq(m-e)>w||a===p-1)&&(c.lineTo(n,m),d=n,e=m);break;case P.C:c.bezierCurveTo(b[a++],b[a++],b[a++],b[a++],b[a++],b[a++]),d=b[a-2],e=b[a-1];break;case P.Q:c.quadraticCurveTo(b[a++],b[a++],b[a++],b[a++]),d=b[a-2],e=b[a-1];break;case P.A:l=b[a++],h=b[a++],f=b[a++],g=b[a++],i=b[a++],v=b[a++],s=b[a++],t=b[a++],u=g<f?f:g,q=g<f?1:f/g,r=g<f?g/f:1,o=i+v,.001<Math.abs(f-g)?(c.translate(l,h),c.rotate(s),c.scale(q,r),c.arc(0,0,u,i,o,1-t),c.scale(1/q,1/r),c.rotate(-s),c.translate(-l,-h)):c.arc(l,h,u,i,o,1-t),1===a&&(k=fM(i)*f+l,j=fN(i)*g+h),d=fM(o)*f+l,e=fN(o)*g+h;break;case P.R:k=d=b[a],j=e=b[a+1],c.rect(b[a++],b[a++],b[a++],b[a++]);break;case P.Z:c.closePath(),d=k,e=j}}},aB.CMD=P,vm=2*Math.PI;function cl(a){return(a%=vm)<0&&(a+=vm),a}fX=2*Math.PI;function aeG(m,l,i,b,a,k,h,e,d){var f,g,j,c;return 0!==h&&(!(f=h,e-=m,d-=l,g=Math.sqrt(e*e+d*d),i<g-f||g+f<i)&&(Math.abs(b-a)%fX<1e-4||(k?(j=b,b=cl(a),a=cl(j)):(b=cl(b),a=cl(a)),a<b&&(a+=fX),c=Math.atan2(d,e),c<0&&(c+=fX),b<=c&&c<=a||b<=c+fX&&c+fX<=a)))}function b$(h,a,i,b,g,c){var e,d,f;return a<c&&b<c||c<a&&c<b?0:b===a?0:(e=b<a?1:-1,d=(c-a)/(b-a),1!=d&&0!=d||(e=b<a?.5:-.5),f=d*(i-h)+h,f===g?1/0:g<f?e:0)}cn=aB.CMD,ei=2*Math.PI,aeF=1e-4,at=[-1,-1,-1],a$=[-1,-1];function aeE(s,c,o,j,r,g,q,d,p,b){var m,n,h,l,e,i,k,f,a;if(c<b&&j<b&&g<b&&d<b||b<c&&b<j&&b<g&&b<d)return 0;if(n=function(l,q,s,x,y,f){var c=x+3*(q-s)-l,a=3*(s-2*q+l),i=3*(q-l),v=l-y,d=a*a-3*c*i,g=a*i-9*c*v,z=i*i-3*a*v,e=0,o,u,h,t,k,j,w,n,p,m,b,r;return cI(d)&&cI(g)?cI(a)?f[0]=0:0<=(b=-i/a)&&b<=1&&(f[e++]=b):(o=g*g-4*d*z,cI(o)?(u=g/d,h=-u/2,0<=(b=-a/c+u)&&b<=1&&(f[e++]=b),0<=h&&h<=1&&(f[e++]=h)):0<o?(t=cM(o),k=d*a+1.5*c*(-g+t),j=d*a+1.5*c*(-g-t),0<=(b=(-a-((k=k<0?-ik(-k,id):ik(k,id))+(j=j<0?-ik(-j,id):ik(j,id))))/(3*c))&&b<=1&&(f[e++]=b)):(w=(2*d*a-3*c*g)/(2*cM(d*d*d)),n=Math.acos(w)/3,p=cM(d),m=Math.cos(n),b=(-a-2*p*m)/(3*c),r=(h=(-a+p*(m+vG*Math.sin(n)))/(3*c),(-a+p*(m-vG*Math.sin(n)))/(3*c)),0<=b&&b<=1&&(f[e++]=b),0<=h&&h<=1&&(f[e++]=h),0<=r&&r<=1&&(f[e++]=r))),e}(c,j,g,d,b,at),0===n)return 0;for(h,l,e=0,i=-1,k=0;k<n;k++)f=at[k],a=0===f||1===f?.5:1,ar(s,o,r,q,f)<p||(i<0&&(i=vz(c,j,g,d,a$),a$[1]<a$[0]&&1<i&&(void 0,m=a$[0],a$[0]=a$[1],a$[1]=m),h=ar(c,j,g,d,a$[0]),1<i&&(l=ar(c,j,g,d,a$[1]))),2===i?f<a$[0]?e+=h<c?a:-a:f<a$[1]?e+=l<h?a:-a:e+=d<l?a:-a:f<a$[0]?e+=h<c?a:-a:e+=d<h?a:-a);return e}function aeD(n,c,m,f,l,b,k,e){var j,g,h,i,d,a;if(c<e&&f<e&&b<e||e<c&&e<f&&e<b)return 0;if(j=function(g,j,m,l,e){var d=g-2*j+m,b=2*(j-g),i=g-l,c=0,f,a,k,h;return cI(d)?vF(b)&&0<=(a=-i/b)&&a<=1&&(e[c++]=a):(f=b*b-4*d*i,cI(f)?0<=(a=-b/(2*d))&&a<=1&&(e[c++]=a):0<f&&(k=cM(f),h=(-b-k)/(2*d),0<=(a=(-b+k)/(2*d))&&a<=1&&(e[c++]=a),0<=h&&h<=1&&(e[c++]=h))),c}(c,f,b,e,at),0===j)return 0;if(g=vx(c,f,b),0<=g&&g<=1){for(h=0,i=am(c,f,b,g),d=0;d<j;d++)a=0===at[d]||1===at[d]?.5:1,am(n,m,l,at[d])<k||(at[d]<g?h+=i<c?a:-a:h+=b<i?a:-a);return h}return a=0===at[0]||1===at[0]?.5:1,am(n,m,l,at[0])<k?0:b<c?a:-a}function aeC(n,o,h,c,b,i,l,f){var e,j,d,k,g,m,a;if(h<(f-=o)||f<-h)return 0;if(e=Math.sqrt(h*h-f*f),at[0]=-e,at[1]=e,j=Math.abs(c-b),j<1e-4)return 0;if(j%ei<1e-4)return b=ei,d=i?1:-1,l>=at[c=0]+n&&l<=at[1]+n?d:0;i?(e=c,c=cl(b),b=cl(e)):(c=cl(c),b=cl(b)),b<c&&(b+=ei);for(k=0,g=0;g<2;g++)m=at[g],l<m+n&&(a=Math.atan2(f,m),d=i?1:-1,a<0&&(a=ei+a),(c<=a&&a<=b||c<=a+ei&&a+ei<=b)&&(a>Math.PI/2&&a<1.5*Math.PI&&(d=-d),k+=d));return k}function vk(b,j,m,f,d){for(var i=0,e=0,c=0,h=0,g=0,a=0,t,o,q,s,p,n,r,u,k,l,v;a<b.length;)switch(t=b[a++],t===cn.M&&1<a&&(m||(i+=b$(e,c,h,g,f,d))),1===a&&(h=e=b[a],g=c=b[a+1]),t){case cn.M:e=h=b[a++],c=g=b[a++];break;case cn.L:if(m){if(cS(e,c,b[a],b[a+1],j,f,d))return!0}else i+=b$(e,c,b[a],b[a+1],f,d)||0;e=b[a++],c=b[a++];break;case cn.C:if(m){if(aeH(e,c,b[a++],b[a++],b[a++],b[a++],b[a],b[a+1],j,f,d))return!0}else i+=aeE(e,c,b[a++],b[a++],b[a++],b[a++],b[a],b[a+1],f,d)||0;e=b[a++],c=b[a++];break;case cn.Q:if(m){if(vn(e,c,b[a++],b[a++],b[a],b[a+1],j,f,d))return!0}else i+=aeD(e,c,b[a++],b[a++],b[a],b[a+1],f,d)||0;e=b[a++],c=b[a++];break;case cn.A:if(o=b[a++],q=b[a++],s=b[a++],p=b[a++],n=b[a++],r=b[a++],a+=1,u=1-b[a++],k=Math.cos(n)*s+o,l=Math.sin(n)*p+q,1<a?i+=b$(e,c,k,l,f,d):(h=k,g=l),v=(f-o)*p/s+o,m){if(aeG(o,q,p,n,n+r,u,j,v,d))return!0}else i+=aeC(o,q,p,n,n+r,u,v,d);e=Math.cos(n+r)*s+o,c=Math.sin(n+r)*p+q;break;case cn.R:if(h=e=b[a++],g=c=b[a++],k=h+b[a++],l=g+b[a++],m){if(cS(h,g,k,g,j,f,d)||cS(k,g,k,l,j,f,d)||cS(k,l,h,l,j,f,d)||cS(h,l,h,g,j,f,d))return!0}else i+=b$(k,g,k,l,f,d),i+=b$(h,l,h,g,f,d);break;case cn.Z:if(m){if(cS(e,c,h,g,j,f,d))return!0}else i+=b$(e,c,h,g,f,d);e=h,c=g}return m||function(a,b){return Math.abs(a-b)<aeF}(c,g)||(i+=b$(e,c,h,g,f,d)||0),0!==i}vg=nk.prototype.getCanvasPattern,lt=Math.abs,aeB=new aB(!0);function s(a){aC.call(this,a),this.path=null}s.prototype={constructor:s,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(a,q){var e,b=this.style,c=this.path||aeB,g=b.hasStroke(),j=b.hasFill(),h=b.fill,i=b.stroke,l=j&&!!h.colorStops,m=g&&!!i.colorStops,r=j&&!!h.image,p=g&&!!i.image,d,n,f,o,k;b.bind(a,this,q),this.setTransform(a),this.__dirty&&(l&&(e=e||this.getBoundingRect(),this._fillGradient=b.getGradient(a,h,e)),m&&(e=e||this.getBoundingRect(),this._strokeGradient=b.getGradient(a,i,e))),l?a.fillStyle=this._fillGradient:r&&(a.fillStyle=vg.call(h,a)),m?a.strokeStyle=this._strokeGradient:p&&(a.strokeStyle=vg.call(i,a)),d=b.lineDash,n=b.lineDashOffset,f=!!a.setLineDash,o=this.getGlobalScale(),(c.setScale(o[0],o[1],this.segmentIgnoreThreshold),this.__dirtyPath||d&&!f&&g?(c.beginPath(a),d&&!f&&(c.setLineDash(d),c.setLineDashOffset(n)),this.buildPath(c,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(a.beginPath(),this.path.rebuildPath(a)),j)&&(null!=b.fillOpacity?(k=a.globalAlpha,a.globalAlpha=b.fillOpacity*b.opacity,c.fill(a),a.globalAlpha=k):c.fill(a)),(d&&f&&(a.setLineDash(d),a.lineDashOffset=n),g)&&(null!=b.strokeOpacity?(k=a.globalAlpha,a.globalAlpha=b.strokeOpacity*b.opacity,c.stroke(a),a.globalAlpha=k):c.stroke(a)),d&&f&&a.setLineDash([]),null!=b.text&&(this.restoreTransform(a),this.drawRectText(a,this.getBoundingRect()))},buildPath:function(a,b,c){},createPathProxy:function(){this.path=new aB},getBoundingRect:function(){var a=this._rect,f=this.style,g=!a,d,b,c,e;return(g&&(d=this.path,d=d||(this.path=new aB),this.__dirtyPath&&(d.beginPath(),this.buildPath(d,this.shape,!1)),a=d.getBoundingRect()),this._rect=a,f.hasStroke())?(b=this._rectWithStroke||(this._rectWithStroke=a.clone()),(this.__dirty||g)&&(b.copy(a),c=f.lineWidth,e=f.strokeNoScale?this.getLineScale():1,f.hasFill()||(c=Math.max(c,this.strokeContainThreshold||4)),1e-10<e&&(b.width+=c/e,b.height+=c/e,b.x-=c/e/2,b.y-=c/e/2)),b):a},contain:function(a,b){var e=this.transformCoordToLocal(a,b),h=this.getBoundingRect(),c=this.style,f,d,g;if(a=e[0],b=e[1],h.contain(a,b)){if(f=this.path.data,c.hasStroke())if(d=c.lineWidth,g=c.strokeNoScale?this.getLineScale():1,1e-10<g&&(c.hasFill()||(d=Math.max(d,this.strokeContainThreshold)),function(a,b,c,d){return vk(a,b,!0,c,d)}(f,d/g,a,b)))return!0;if(c.hasFill())return function(a,b,c){return vk(a,0,!1,b,c)}(f,a,b)}return!1},dirty:function(a){null==a&&(a=!0),a&&(this.__dirtyPath=a,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(a){return this.animate("shape",a)},attrKV:function(a,b){"shape"===a?(this.setShape(b),this.__dirtyPath=!0,this._rect=null):aC.prototype.attrKV.call(this,a,b)},setShape:function(a,d){var b=this.shape,c;if(b){if(m(a))for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);else b[a]=d;this.dirty(!0)}return this},getLineScale:function(){var a=this.transform;return a&&1e-10<lt(a[0]-1)&&1e-10<lt(a[3]-1)?Math.sqrt(lt(a[0]*a[3]-a[2]*a[1])):1}},s.extend=function(a){function c(e){var b,d,c;if(s.call(this,e),a.style&&this.style.extendFrom(a.style,!1),b=a.shape,b){this.shape=this.shape||{},d=this.shape;for(c in b)!d.hasOwnProperty(c)&&b.hasOwnProperty(c)&&(d[c]=b[c])}a.init&&a.init.call(this,e)}for(var b in D(c,s),a)"style"!==b&&"shape"!==b&&(c.prototype[b]=a[b]);return c},D(s,aC);function vf(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}eb=aB.CMD,aeA=[[],[],[]],vc=Math.sqrt,aez=Math.atan2,aex=function(t,d){var j,f,b,e,g,a=t.data,s=eb.M,r=eb.C,l=eb.L,q=eb.R,m=eb.A,n=eb.Q,o,p,h,i,k,c;for(e=b=0;b<a.length;){switch(j=a[b++],e=b,f=0,j){case s:case l:f=1;break;case r:f=3;break;case n:f=2;break;case m:o=d[4],p=d[5],h=vc(d[0]*d[0]+d[1]*d[1]),i=vc(d[2]*d[2]+d[3]*d[3]),k=aez(-d[1]/i,d[0]/h),a[b]*=h,a[b++]+=o,a[b]*=i,a[b++]+=p,a[b++]*=h,a[b++]*=i,a[b++]+=k,a[b++]+=k,e=b+=2;break;case q:c[0]=a[b++],c[1]=a[b++],F(c,c,d),a[e++]=c[0],a[e++]=c[1],c[0]+=a[b++],c[1]+=a[b++],F(c,c,d),a[e++]=c[0],a[e++]=c[1]}for(g=0;g<f;g++)(c=aeA[g])[0]=a[b++],c[1]=a[b++],F(c,c,d),a[e++]=c[0],a[e++]=c[1]}},lr=Math.sqrt,gO=Math.sin,gM=Math.cos,gK=Math.PI,lq=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(vf(a)*vf(b))},va=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(lq(a,b))};function u$(p,n,m,l,w,i,a,b,v,x,r){var e=v*(gK/180),d=gM(e)*(p-m)/2+gO(e)*(n-l)/2,c=-1*gO(e)*(p-m)/2+gM(e)*(n-l)/2,o=d*d/(a*a)+c*c/(b*b),q,h,g,s,t,u,k,j,f;1<o&&(a*=lr(o),b*=lr(o)),q=(w===i?-1:1)*lr((a*a*(b*b)-a*a*(c*c)-b*b*(d*d))/(a*a*(c*c)+b*b*(d*d)))||0,h=q*a*c/b,g=q*-b*d/a,s=(p+m)/2+gM(e)*h-gO(e)*g,t=(n+l)/2+gO(e)*h+gM(e)*g,u=va([1,0],[(d-h)/a,(c-g)/b]),k=[(d-h)/a,(c-g)/b],j=[(-1*d-h)/a,(-1*c-g)/b],f=va(k,j),lq(k,j)<=-1&&(f=gK),1<=lq(k,j)&&(f=0),0===i&&0<f&&(f-=2*gK),1===i&&f<0&&(f+=2*gK),r.addData(x,s,t,a,b,u,f,e,i)}aew=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,aev=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function u_(c,a){var b=function(B){var n,c,d,v,x,f,g,A,w,e,z,o,a,y,p,b,h,i,s,t,u,q,r,m,l,j,k;if(!B)return new aB;for(n,c=0,d=0,v=c,x=d,f=new aB,g=aB.CMD,A=B.match(aew),w=0;w<A.length;w++){for(e,z=A[w],o=z.charAt(0),a=z.match(aev)||[],y=a.length,p=0;p<y;p++)a[p]=parseFloat(a[p]);for(b=0;b<y;)switch(m=c,l=d,o){case"l":c+=a[b++],d+=a[b++],e=g.L,f.addData(e,c,d);break;case"L":c=a[b++],d=a[b++],e=g.L,f.addData(e,c,d);break;case"m":c+=a[b++],d+=a[b++],e=g.M,f.addData(e,c,d),v=c,x=d,o="l";break;case"M":c=a[b++],d=a[b++],e=g.M,f.addData(e,c,d),v=c,x=d,o="L";break;case"h":c+=a[b++],e=g.L,f.addData(e,c,d);break;case"H":c=a[b++],e=g.L,f.addData(e,c,d);break;case"v":d+=a[b++],e=g.L,f.addData(e,c,d);break;case"V":d=a[b++],e=g.L,f.addData(e,c,d);break;case"C":e=g.C,f.addData(e,a[b++],a[b++],a[b++],a[b++],a[b++],a[b++]),c=a[b-2],d=a[b-1];break;case"c":e=g.C,f.addData(e,a[b++]+c,a[b++]+d,a[b++]+c,a[b++]+d,a[b++]+c,a[b++]+d),c+=a[b-2],d+=a[b-1];break;case"S":h=c,i=d,j=f.len(),k=f.data,n===g.C&&(h+=c-k[j-4],i+=d-k[j-3]),e=g.C,m=a[b++],l=a[b++],c=a[b++],d=a[b++],f.addData(e,h,i,m,l,c,d);break;case"s":h=c,i=d,j=f.len(),k=f.data,n===g.C&&(h+=c-k[j-4],i+=d-k[j-3]),e=g.C,m=c+a[b++],l=d+a[b++],c+=a[b++],d+=a[b++],f.addData(e,h,i,m,l,c,d);break;case"Q":m=a[b++],l=a[b++],c=a[b++],d=a[b++],e=g.Q,f.addData(e,m,l,c,d);break;case"q":m=a[b++]+c,l=a[b++]+d,c+=a[b++],d+=a[b++],e=g.Q,f.addData(e,m,l,c,d);break;case"T":h=c,i=d,j=f.len(),k=f.data,n===g.Q&&(h+=c-k[j-4],i+=d-k[j-3]),c=a[b++],d=a[b++],e=g.Q,f.addData(e,h,i,c,d);break;case"t":h=c,i=d,j=f.len(),k=f.data,n===g.Q&&(h+=c-k[j-4],i+=d-k[j-3]),c+=a[b++],d+=a[b++],e=g.Q,f.addData(e,h,i,c,d);break;case"A":s=a[b++],t=a[b++],u=a[b++],q=a[b++],r=a[b++],u$(m=c,l=d,c=a[b++],d=a[b++],q,r,s,t,u,e=g.A,f);break;case"a":s=a[b++],t=a[b++],u=a[b++],q=a[b++],r=a[b++],u$(m=c,l=d,c+=a[b++],d+=a[b++],q,r,s,t,u,e=g.A,f)}"z"!==o&&"Z"!==o||(e=g.Z,f.addData(e),c=v,d=x),n=e}return f.toStatic(),f}(c);return(a=a||{}).buildPath=function(a){if(a.setData)a.setData(b.data),(c=a.getContext())&&a.rebuildPath(c);else{var c=a;b.rebuildPath(c)}},a.applyTransform=function(a){aex(b,a),this.dirty(!0)},a}function uX(a,b){return new s(u_(a,b))}q=function(a){aC.call(this,a)},q.prototype={constructor:q,type:"text",brush:function(b,d){var a=this.style,c;this.__dirty&&gl(a),a.fill=a.stroke=a.shadowBlur=a.shadowColor=a.shadowOffsetX=a.shadowOffsetY=null,c=a.text,null!=c&&(c+=""),mv(c,a)?(this.setTransform(b),wk(this,b,c,a,null,d),this.restoreTransform(b)):b.__attrCachedBy=cL.NONE},getBoundingRect:function(){var a=this.style,d,b,c;return this.__dirty&&gl(a),!this._rect&&(d=a.text,null!=d?d+="":d="",b=bn(a.text+"",a.font,a.textAlign,a.textVerticalAlign,a.textPadding,a.textLineHeight,a.rich),(b.x+=a.x||0,b.y+=a.y||0,my(a.textStroke,a.textStrokeWidth))&&(c=a.textStrokeWidth,b.x-=c/2,b.y-=c/2,b.width+=c,b.height+=c),this._rect=b),this._rect}},D(q,aC);function ln(a){return t.browser.ie&&11<=t.browser.version?function(){var h,g=this.__clipPaths,e=this.style,f,d,c,i,b;if(g)for(f=0;f<g.length;f++)if(d=g[f],c=d&&d.shape,i=d&&d.type,c&&("sector"===i&&c.startAngle===c.endAngle||"rect"===i&&(!c.width||!c.height))){for(b=0;b<cs.length;b++)cs[b][2]=e[cs[b][0]],e[cs[b][0]]=cs[b][1];h=!0;break}if(a.apply(this,arguments),h)for(b=0;b<cs.length;b++)e[cs[b][0]]=cs[b][2]}:a}bI=s.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(b,a,c){c&&b.moveTo(a.cx+a.r,a.cy),b.arc(a.cx,a.cy,a.r,0,2*Math.PI,!0)}}),cs=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],bC=s.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:ln(s.prototype.brush),buildPath:function(b,a){var d=a.cx,e=a.cy,c=Math.max(a.r0||0,0),h=Math.max(a.r,0),f=a.startAngle,g=a.endAngle,i=a.clockwise,j=Math.cos(f),k=Math.sin(f);b.moveTo(j*c+d,k*c+e),b.lineTo(j*h+d,k*h+e),b.arc(d,e,h,f,g,!i),b.lineTo(Math.cos(g)*c+d,Math.sin(g)*c+e),0!==c&&b.arc(d,e,c,g,f,i),b.closePath()}}),gH=s.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(b,a){var c=a.cx,d=a.cy,e=2*Math.PI;b.moveTo(c+a.r,d),b.arc(c,d,a.r,0,e,!1),b.moveTo(c+a.r0,d),b.arc(c,d,a.r0,0,e,!0)}});function uW(e,a,b,f,g,h,i){var c=.5*(b-e),d=.5*(f-a);return(2*(a-b)+c+d)*i+(-3*(a-b)-2*c-d)*h+c*g+a}function uV(c,g,d){var a=g.points,e=g.smooth,h,f,b,i,j,k,l;if(a&&2<=a.length){if(e&&"spline"!==e){h=function(b,t,q,l){var k,j,c,d,f=[],g=[],s=[],r=[],a,e,m,o,p,n,h,i;if(l){c=[1/0,1/0],d=[-1/0,-1/0];for(a=0,e=b.length;a<e;a++)bV(c,c,b[a]),ch(d,d,b[a]);bV(c,c,l[0]),ch(d,d,l[1])}for(a=0,e=b.length;a<e;a++){if(m=b[a],q)k=b[a?a-1:e-1],j=b[(a+1)%e];else{if(0===a||a===e-1){f.push(bi(b[a]));continue}k=b[a-1],j=b[a+1]}ce(g,j,k),ij(g,g,t),o=fb(m,k),p=fb(m,j),n=o+p,0!==n&&(o/=n,p/=n),ij(s,g,-o),ij(r,g,p),h=oI([],m,s),i=oI([],m,r),l&&(ch(h,h,c),bV(h,h,d),ch(i,i,c),bV(i,i,d)),f.push(h),f.push(i)}return q&&f.push(f.shift()),f}(a,e,d,g.smoothConstraint),c.moveTo(a[0][0],a[0][1]);for(f=a.length,b=0;b<(d?f:f-1);b++)i=h[2*b],j=h[2*b+1],k=a[(b+1)%f],c.bezierCurveTo(i[0],i[1],j[0],j[1],k[0],k[1])}else{"spline"===e&&(a=function(c,m){for(var a=c.length,l=[],o=0,d=1,e,g,h,j,k,b,f,n,i,p;d<a;d++)o+=fb(c[d-1],c[d]);e=o/2,e=e<a?a:e;for(d=0;d<e;d++)k=d/(e-1)*(m?a:a-1),b=Math.floor(k),f=k-b,n=c[b%a],j=m?(g=c[(b-1+a)%a],h=c[(b+1)%a],c[(b+2)%a]):(g=c[0===b?b:b-1],h=c[a-2<b?a-1:b+1],c[a-3<b?a-1:b+2]),i=f*f,p=f*i,l.push([uW(g[0],n[0],h[0],j[0],f,i,p),uW(g[1],n[1],h[1],j[1],f,i,p)]);return l}(a,d)),c.moveTo(a[0][0],a[0][1]),b=1;for(l=a.length;b<l;b++)c.lineTo(a[b][0],a[b][1])}d&&c.closePath()}}aF=s.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(a,b){uV(a,b,!0)}}),aZ=s.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(a,b){uV(a,b,!1)}}),dZ=Math.round;function uU(a,b,f){var c=f&&f.lineWidth,d,g,e,h;b&&c&&(d=b.x1,g=b.x2,e=b.y1,h=b.y2,dZ(2*d)===dZ(2*g)?a.x1=a.x2=df(d,c,!0):(a.x1=d,a.x2=g),dZ(2*e)===dZ(2*h)?a.y1=a.y2=df(e,c,!0):(a.y1=e,a.y2=h))}function uT(a,b,d){var c=d&&d.lineWidth,e,f,g,h;b&&c&&(e=b.x,f=b.y,g=b.width,h=b.height,a.x=df(e,c,!0),a.y=df(f,c,!0),a.width=Math.max(df(e+g,c,!1)-a.x,0===g?0:1),a.height=Math.max(df(f+h,c,!1)-a.y,0===h?0:1))}function df(b,c,d){var a=dZ(2*b);return(a+dZ(c))%2==0?a/2:(a+(d?1:-1))/2}dg={},y=s.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(b,a){var c,d,e,f;this.subPixelOptimize?(uT(dg,a,this.style),c=dg.x,d=dg.y,e=dg.width,f=dg.height,dg.r=a.r,a=dg):(c=a.x,d=a.y,e=a.width,f=a.height),a.r?wv(b,a):b.rect(c,d,e,f),b.closePath()}}),gn={},av=s.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(g,b){var f=this.subPixelOptimize?(uU(gn,b,this.style),d=gn.x1,e=gn.y1,c=gn.x2,gn.y2):(d=b.x1,e=b.y1,c=b.x2,b.y2),a=b.percent,c,d,e;0!==a&&(g.moveTo(d,e),a<1&&(c=d*(1-a)+c*a,f=e*(1-a)+f*a),g.lineTo(c,f))},pointAt:function(a){var b=this.shape;return[b.x1*(1-a)+b.x2*a,b.y1*(1-a)+b.y2*a]}}),aD=[];function uS(a,b,c){var d=a.cpx2,e=a.cpy2;return null===d||null===e?[(c?vD:ar)(a.x1,a.cpx1,a.cpx2,a.x2,b),(c?vD:ar)(a.y1,a.cpy1,a.cpy2,a.y2,b)]:[(c?lL:am)(a.x1,a.cpx1,a.x2,b),(c?lL:am)(a.y1,a.cpy1,a.y2,b)]}function bq(a){this.colorStops=a||[]}gX=s.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(i,a){var j=a.x1,k=a.y1,f=a.x2,d=a.y2,c=a.cpx1,e=a.cpy1,g=a.cpx2,h=a.cpy2,b=a.percent;0!==b&&(i.moveTo(j,k),null==g||null==h?(b<1&&(lJ(j,c,f,b,aD),c=aD[1],f=aD[2],lJ(k,e,d,b,aD),e=aD[1],d=aD[2]),i.quadraticCurveTo(c,e,f,d)):(b<1&&(vy(j,c,g,f,b,aD),c=aD[1],g=aD[2],f=aD[3],vy(k,e,h,d,b,aD),e=aD[1],h=aD[2],d=aD[3]),i.bezierCurveTo(c,e,g,h,f,d)))},pointAt:function(a){return uS(this.shape,a,!1)},tangentAt:function(b){var a=uS(this.shape,b,!0);return ef(a,a)}}),lg=s.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(d,a){var e=a.cx,f=a.cy,b=Math.max(a.r,0),c=a.startAngle,g=a.endAngle,h=a.clockwise,i=Math.cos(c),j=Math.sin(c);d.moveTo(i*b+e,j*b+f),d.arc(e,f,b,c,g,!h)}}),uR=s.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var a=this.__dirtyPath,c=this.shape.paths,b=0;b<c.length;b++)a=a||c[b].__dirtyPath;this.__dirtyPath=a,this.__dirty=this.__dirty||a},beforeBrush:function(){this._updatePathDirty();for(var b=this.shape.paths||[],c=this.getGlobalScale(),a=0;a<b.length;a++)b[a].path||b[a].createPathProxy(),b[a].path.setScale(c[0],c[1],b[a].segmentIgnoreThreshold)},buildPath:function(c,d){for(var b=d.paths||[],a=0;a<b.length;a++)b[a].buildPath(c,b[a].shape,!0)},afterBrush:function(){for(var b=this.shape.paths||[],a=0;a<b.length;a++)b[a].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),s.prototype.getBoundingRect.call(this)}}),bq.prototype={constructor:bq,addColorStop:function(a,b){this.colorStops.push({offset:a,color:b})}};function dh(a,b,c,d,e,f){this.x=null==a?0:a,this.y=null==b?0:b,this.x2=null==c?1:c,this.y2=null==d?0:d,this.type="linear",this.global=f||!1,bq.call(this,e)}dh.prototype={constructor:dh},D(dh,bq);function g$(a,b,c,d,e){this.x=null==a?.5:a,this.y=null==b?.5:b,this.r=null==c?.5:c,this.type="radial",this.global=e||!1,bq.call(this,d)}function aJ(a){aC.call(this,a),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}g$.prototype={constructor:g$},D(g$,bq),aJ.prototype.incremental=!0,aJ.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},aJ.prototype.addDisplayable=function(a,b){b?this._temporaryDisplayables.push(a):this._displayables.push(a),this.dirty()},aJ.prototype.addDisplayables=function(c,a){a=a||!1;for(var b=0;b<c.length;b++)this.addDisplayable(c[b],a)},aJ.prototype.eachPendingDisplayable=function(b){for(var a=this._cursor;a<this._displayables.length;a++)b&&b(this._displayables[a]);for(a=0;a<this._temporaryDisplayables.length;a++)b&&b(this._temporaryDisplayables[a])},aJ.prototype.update=function(){var a,b;this.updateTransform();for(a=this._cursor;a<this._displayables.length;a++)(b=this._displayables[a]).parent=this,b.update(),b.parent=null;for(a=0;a<this._temporaryDisplayables.length;a++)(b=this._temporaryDisplayables[a]).parent=this,b.update(),b.parent=null},aJ.prototype.brush=function(c,d){for(var a=this._cursor,b;a<this._displayables.length;a++)(b=this._displayables[a]).beforeBrush&&b.beforeBrush(c),b.brush(c,a===this._cursor?null:this._displayables[a-1]),b.afterBrush&&b.afterBrush(c);this._cursor=a;for(a=0;a<this._temporaryDisplayables.length;a++)(b=this._temporaryDisplayables[a]).beforeBrush&&b.beforeBrush(c),b.brush(c,0===a?null:this._temporaryDisplayables[a-1]),b.afterBrush&&b.afterBrush(c);this._temporaryDisplayables=[],this.notClear=!0},aeu=[],aJ.prototype.getBoundingRect=function(){var c,a,b,d;if(!this._rect){for(c=new r(1/0,1/0,-1/0,-1/0),a=0;a<this._displayables.length;a++)b=this._displayables[a],d=b.getBoundingRect().clone(),b.needLocalTransform()&&d.applyTransform(b.getLocalTransform(aeu)),c.union(d);this._rect=c}return this._rect},aJ.prototype.contain=function(b,c){var d=this.transformCoordToLocal(b,c),a;if(this.getBoundingRect().contain(d[0],d[1]))for(a=0;a<this._displayables.length;a++)if(this._displayables[a].contain(b,c))return!0;return!1},D(aJ,aC),hc=Math.max,hd=Math.min,he={},f_=1,uN={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},uM="emphasis",uL="normal",uK=1,uJ={},lb={};function ba(a){return s.extend(a)}function bG(a,b){lb[a]=b}function la(a){if(lb.hasOwnProperty(a))return lb[a]}function fV(c,d,a,e){var b=uX(c,d);return a&&("center"===e&&(a=uF(a,b.getBoundingRect())),uE(b,a)),b}function uG(c,a,d){var b=new ad({style:{image:c,x:a.x,y:a.y,width:a.width,height:a.height},onload:function(c){if("center"===d){var e={width:c.width,height:c.height};b.setStyle(uF(a,e))}}});return b}function uF(a,d){var c,e=d.width/d.height,b=a.height*e;return c=b<=a.width?a.height:(b=a.width)/e,{x:a.x+a.width/2-b/2,y:a.y+a.height/2-c/2,width:b,height:c}}bS=function(e,f){for(var d=[],g=e.length,c=0,a,b;c<g;c++)a=e[c],a.path||a.createPathProxy(),a.__dirtyPath&&a.buildPath(a.path,a.shape,!0),d.push(a.path);return b=new s(f),b.createPathProxy(),b.buildPath=function(a){a.appendPath(d);var b=a.getContext();b&&a.rebuildPath(b)},b};function uE(a,b){if(a.applyTransform){var c=a.getBoundingRect().calculateTransform(b);a.applyTransform(c)}}hu=df;function uD(a){return null!=a&&"none"!==a}uB=n(),uy=0;function kS(a){var c=a.__hoverStl,d,e,f,b;c&&!a.__highlighted&&(d=a.__zr,e=a.useHoverLayer&&d&&"canvas"===d.painter.type,(a.__highlighted=e?"layer":"plain",!(a.isGroup||!d&&a.useHoverLayer))&&(f=a,b=a.style,e&&(b=(f=d.addHover(a)).style),hT(b),e||function(a){var b,c,d,e;if(a.__hoverStlDirty)if(a.__hoverStlDirty=!1,b=a.__hoverStl,b){c=a.__cachedNormalStl={},a.__cachedNormalZ2=a.z2,d=a.style;for(e in b)null!=b[e]&&(c[e]=d[e]);c.fill=d.fill,c.stroke=d.stroke}else a.__cachedNormalStl=a.__cachedNormalZ2=null}(f),b.extendFrom(c),ux(b,c,"fill"),ux(b,c,"stroke"),fp(b),e||(a.dirty(!1),a.z2+=f_)))}function ux(b,c,a){!uD(c[a])&&uD(b[a])&&(b[a]=function(a){if("string"!=typeof a)return a;var b=uB.get(a);return b||(b=xI(a,-.1),uy<1e4&&(uB.set(a,b),uy++)),b}(b[a]))}function kR(a){var c=a.__highlighted,d,e,b;c&&(a.__highlighted=!1,!a.isGroup)&&("layer"===c?a.__zr&&a.__zr.removeHover(a):(d=a.style,e=a.__cachedNormalStl,e&&(hT(d),a.setStyle(e),fp(d)),b=a.__cachedNormalZ2,null!=b&&a.z2-b===f_&&(a.z2=b)))}function fB(a,c,d){var b,e=uL,f=uL;a.__highlighted&&(e=uM,b=!0),c(a,d),a.__highlighted&&(f=uM,b=!0),a.isGroup&&a.traverse(function(a){a.isGroup||c(a,d)}),b&&a.__highDownOnUpdate&&a.__highDownOnUpdate(e,f)}function kO(a,b){b=a.__hoverStl=!1!==b&&(a.hoverStyle||b||{}),a.__hoverStlDirty=!0,a.__highlighted&&(a.__cachedNormalStl=null,kR(a),kS(a))}function aet(a){uu(this,a)||this.__highByOuter||fB(this,kS)}function aes(a){uu(this,a)||this.__highByOuter||fB(this,kR)}function aer(a){this.__highByOuter|=1<<(a||0),fB(this,kS)}function aeq(a){(this.__highByOuter&=~(1<<(a||0)))||fB(this,kR)}function uu(a,b){return a.__highDownSilentOnTouch&&b.zrByTouch}function G(a,b){kK(a,!0),fB(a,kO,b)}function kK(a,d){var c=!1===d,b;(a.__highDownSilentOnTouch=a.highDownSilentOnTouch,a.__highDownOnUpdate=a.highDownOnUpdate,!c||a.__highDownDispatcher)&&(b=c?"off":"on",a[b]("mouseover",aet)[b]("mouseout",aes),a[b]("emphasis",aer)[b]("normal",aeq),a.__highByOuter=a.__highByOuter||0,a.__highDownDispatcher=!c)}function ur(a){return!(!a||!a.__highDownDispatcher)}function uq(b){var a=uJ[b];return null==a&&uK<=32&&(a=uJ[b]=uK++),a}function aI(e,j,i,h,a,o,n){var b,c=(a=a||he).labelFetcher,d=a.labelDataIndex,k=a.labelDimIndex,l=i.getShallow("show"),g=h.getShallow("show"),f,m;(l||g)&&(c&&(b=c.getFormattedLabel(d,"normal",null,k)),null==b&&(b=ag(a.defaultText)?a.defaultText(d,a):a.defaultText)),f=l?b:null,m=g?R(c?c.getFormattedLabel(d,"emphasis",null,k):null,b):null,null==f&&null==m||(O(e,i,o,a),O(j,h,n,a,!0)),e.text=f,j.text=m}function kI(b,c,d){var a=b.style;c&&(hT(a),b.setStyle(c),fp(a)),a=b.__hoverStl,d&&a&&(hT(a),f(a,d),fp(a))}function O(a,c,b,d,e){return up(a,c,d,e),b&&f(a,b),a}function up(c,a,b,d){var e,f,g,j,k,h,i,l;if((b=b||he).isRectText&&(b.getTextPosition?e=b.getTextPosition(a,d):"outside"===(e=a.getShallow("position")||(d?null:"inside"))&&(e="top"),c.textPosition=e,c.textOffset=a.getShallow("offset"),f=a.getShallow("rotate"),null!=f&&(f*=Math.PI/180),c.textRotation=f,c.textDistance=R(a.getShallow("distance"),d?null:5)),j=a.ecModel,k=j&&j.option.textStyle,h=function(a){for(var b,c,d;a&&a!==a.ecModel;){if(c=(a.option||he).rich,c)for(d in b=b||{},c)c.hasOwnProperty(d)&&(b[d]=1);a=a.parentModel}return b}(a),h)for(i in g={},h)h.hasOwnProperty(i)&&(l=a.getModel(["rich",i]),uo(g[i]={},l,k,b,d));return c.rich=g,uo(c,a,k,b,d,!0),b.forceRich&&!b.textStyle&&(b.textStyle={}),c}function uo(a,b,c,d,e,f){c=!e&&c||he,a.textFill=hR(b.getShallow("color"),d)||c.color,a.textStroke=hR(b.getShallow("textBorderColor"),d)||c.textBorderColor,a.textStrokeWidth=R(b.getShallow("textBorderWidth"),c.textBorderWidth),e||(f&&(a.insideRollbackOpt=d,fp(a)),null==a.textFill&&(a.textFill=d.autoColor)),a.fontStyle=b.getShallow("fontStyle")||c.fontStyle,a.fontWeight=b.getShallow("fontWeight")||c.fontWeight,a.fontSize=b.getShallow("fontSize")||c.fontSize,a.fontFamily=b.getShallow("fontFamily")||c.fontFamily,a.textAlign=b.getShallow("align"),a.textVerticalAlign=b.getShallow("verticalAlign")||b.getShallow("baseline"),a.textLineHeight=b.getShallow("lineHeight"),a.textWidth=b.getShallow("width"),a.textHeight=b.getShallow("height"),a.textTag=b.getShallow("tag"),f&&d.disableBox||(a.textBackgroundColor=hR(b.getShallow("backgroundColor"),d),a.textPadding=b.getShallow("padding"),a.textBorderColor=hR(b.getShallow("borderColor"),d),a.textBorderWidth=b.getShallow("borderWidth"),a.textBorderRadius=b.getShallow("borderRadius"),a.textBoxShadowColor=b.getShallow("shadowColor"),a.textBoxShadowBlur=b.getShallow("shadowBlur"),a.textBoxShadowOffsetX=b.getShallow("shadowOffsetX"),a.textBoxShadowOffsetY=b.getShallow("shadowOffsetY")),a.textShadowColor=b.getShallow("textShadowColor")||c.textShadowColor,a.textShadowBlur=b.getShallow("textShadowBlur")||c.textShadowBlur,a.textShadowOffsetX=b.getShallow("textShadowOffsetX")||c.textShadowOffsetX,a.textShadowOffsetY=b.getShallow("textShadowOffsetY")||c.textShadowOffsetY}function hR(b,a){return"auto"!==b?b:a&&a.autoColor?a.autoColor:null}function fp(a){var g,d=a.textPosition,b=a.insideRollbackOpt,e,i,f,c,h;b&&null==a.textFill&&(e=b.autoColor,i=b.isRectText,f=b.useInsideStyle,c=!1!==f&&(!0===f||i&&d&&"string"==typeof d&&0<=d.indexOf("inside")),h=!c&&null!=e,(c||h)&&(g={textFill:a.textFill,textStroke:a.textStroke,textStrokeWidth:a.textStrokeWidth}),c&&(a.textFill="#fff",null==a.textStroke&&(a.textStroke=e,null==a.textStrokeWidth&&(a.textStrokeWidth=2))),h&&(a.textFill=e)),a.insideRollback=g}function hT(a){var b=a.insideRollback;b&&(a.textFill=b.textFill,a.textStroke=b.textStroke,a.textStrokeWidth=b.textStrokeWidth,a.insideRollback=null)}function kE(b,c){var a=c||c.getModel("textStyle");return aV([b.fontStyle||a&&a.getShallow("fontStyle")||"",b.fontWeight||a&&a.getShallow("fontWeight")||"",(b.fontSize||a&&a.getShallow("fontSize")||12)+"px",b.fontFamily||a&&a.getShallow("fontFamily")||"sans-serif"].join(" "))}function uk(i,c,h,a,d,b){if("function"==typeof d&&(b=d,d=null),a&&a.isAnimationEnabled()){var g=i?"Update":"",e=a.getShallow("animationDuration"+g),j=a.getShallow("animationEasing"+g),f=a.getShallow("animationDelay"+g);"function"==typeof f&&(f=f(d,a.getAnimationDelayParams?a.getAnimationDelayParams(c,d):null)),"function"==typeof e&&(e=e(d)),0<e?c.animateTo(h,e,f||0,j,b,!!b):(c.stopAnimation(),c.attr(h),b&&b())}else c.stopAnimation(),c.attr(h),b&&b()}function p(a,b,c,d,e){uk(!0,a,b,c,d,e)}function ao(a,b,c,d,e){uk(!1,a,b,c,d,e)}function dt(a,c){for(var b=el([]);a&&a!==c;)cu(b,a.getLocalTransform(),b),a=a.parent;return b}function bH(b,a,c){return a&&!bL(a)&&(a=bs.getLocalTransform(a)),c&&(a=hb([],a)),F([],b,a)}function ky(c,a,f){var d=0===a[4]||0===a[5]||0===a[0]?1:Math.abs(2*a[4]/a[0]),e=0===a[4]||0===a[5]||0===a[2]?1:Math.abs(2*a[4]/a[2]),b=["left"===c?-d:"right"===c?d:0,"top"===c?-e:"bottom"===c?e:0];return b=bH(b,a,f),Math.abs(b[0])>Math.abs(b[1])?0<b[0]?"right":"left":0<b[1]?"bottom":"top"}function kx(b,c,e,h){if(b&&c){var a,g=(a={},b.traverse(function(b){!b.isGroup&&b.anid&&(a[b.anid]=b)}),a);c.traverse(function(a){var b,c;!a.isGroup&&a.anid&&(b=g[a.anid],b&&(c=d(a),a.attr(d(b)),p(a,c,e,a.dataIndex)))})}function d(a){var b={position:bi(a.position),rotation:a.rotation};return a.shape&&(b.shape=f({},a.shape)),b}}function ui(b,a){return c(b,function(d){var b=d[0],c;return b=hc(b,a.x),b=hd(b,a.x+a.width),c=d[1],c=hc(c,a.y),[b,c=hd(c,a.y+a.height)]})}function ff(a,b,c){var d=(b=f({rectHover:!0},b)).style={strokeNoScale:!0};if(c=c||{x:-1,y:-1,width:2,height:2},a)return 0===a.indexOf("image://")?(d.image=a.slice(8),g(d,c),new ad(b)):fV(a.replace("path://",""),b,c,"center")}function fe(g,h,e,f,a){for(var d=0,b=a[a.length-1],c;d<a.length;d++){if(c=a[d],uh(g,h,e,f,c[0],c[1],b[0],b[1]))return!0;b=c}}function uh(l,h,q,p,e,f,o,n){var i=q-l,j=p-h,k=o-e,b=n-f,a=kv(k,b,i,j),g,d,c,m;return!function(a){return a<=1e-6&&-1e-6<=a}(a)&&(!(g=l-e,d=h-f,c=kv(g,d,i,j)/a,c<0||1<c)&&(m=kv(g,d,k,b)/a,!(m<0||1<m)))}function kv(a,b,c,d){return a*d-c*b}bG("circle",bI),bG("sector",bC),bG("ring",gH),bG("polygon",aF),bG("polyline",aZ),bG("rect",y),bG("line",av),bG("bezierCurve",gX),bG("arc",lg),bY=(Object.freeze||Object)({Z2_EMPHASIS_LIFT:f_,CACHED_LABEL_STYLE_PROPERTIES:uN,extendShape:ba,extendPath:function(a,b){return function(a,b){return s.extend(u_(a,b))}(a,b)},registerShape:bG,getShapeClass:la,makePath:fV,makeImage:uG,mergePath:bS,resizePath:uE,subPixelOptimizeLine:function(a){return uU(a.shape,a.shape,a.style),a},subPixelOptimizeRect:function(a){return uT(a.shape,a.shape,a.style),a},subPixelOptimize:hu,setElementHoverStyle:kO,setHoverStyle:G,setAsHighDownDispatcher:kK,isHighDownDispatcher:ur,getHighlightDigit:uq,setLabelStyle:aI,modifyLabelStyle:kI,setTextStyle:O,setText:function(d,e,a){var b,c={isRectText:!0};!1===a?b=!0:c.autoColor=a,up(d,e,c,b)},getFont:kE,updateProps:p,initProps:ao,getTransform:dt,applyTransform:bH,transformDirection:ky,groupTransition:kx,clipPointsByRect:ui,clipRectByRect:function(a,b){var c=hc(a.x,b.x),e=hd(a.x+a.width,b.x+b.width),d=hc(a.y,b.y),f=hd(a.y+a.height,b.y+b.height);if(c<=e&&d<=f)return{x:c,y:d,width:e-c,height:f-d}},createIcon:ff,linePolygonIntersect:fe,lineLineIntersect:uh,Group:e,Image:ad,Text:q,Circle:bI,Sector:bC,Ring:gH,Polygon:aF,Polyline:aZ,Rect:y,Line:av,BezierCurve:gX,Arc:lg,IncrementalDisplayable:aJ,CompoundPath:uR,LinearGradient:dh,RadialGradient:g$,BoundingRect:r}),aep=["textStyle","color"],aeo={getTextColor:function(b){var a=this.ecModel;return this.getShallow("color")||(!b&&a?a.get(aep):null)},getFont:function(){return kE({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(a){return bn(a,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}},aen=dP([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),aek={getItemStyle:function(c,d){var a=aen(this,c,d),b=this.getBorderLineDash();return b&&(a.lineDash=b),a},getBorderLineDash:function(){var a=this.get("borderType");return"solid"===a||null==a?null:"dashed"===a?[5,5]:[1,1]}},il=C,t$=au();function w(a,b,c){this.parentModel=b,this.ecModel=c,this.option=a}function tZ(a,b,d){for(var c=0;c<b.length&&(!b[c]||null!=(a=a&&"object"==typeof a?a[b[c]]:null));c++);return null==a&&d&&(a=d.get(b)),a}function ki(a,c){var b=t$(a).getParent;return b?b.call(a,c):a.parentModel}w.prototype={constructor:w,init:null,mergeOption:function(a){l(this.option,a,!0)},get:function(a,b){return null==a?this.option:tZ(this.option,this.parsePath(a),!b&&ki(this,a))},getShallow:function(a,e){var b=this.option,c=null==b?b:b[a],d=!e&&ki(this,a);return null==c&&d&&(c=d.getShallow(a)),c},getModel:function(a,b){var c;return new w(null==a?this.option:tZ(this.option,a=this.parsePath(a)),b=b||(c=ki(this,a))&&c.getModel(a),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new this.constructor(i(this.option))},setReadOnly:function(a){},parsePath:function(a){return"string"==typeof a&&(a=a.split(".")),a},customizeGetParent:function(a){t$(this).getParent=a},isAnimationEnabled:function(){if(!t.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},fa(w),iA(w),il(w,aeM),il(w,aeK),il(w,aeo),il(w,aek),aej=0;function eV(a){return[a||"",aej++,Math.random().toFixed(5)].join("_")}tV=1e-4;function J(c,b,a,f){var d=b[1]-b[0],e=a[1]-a[0];if(0==d)return 0==e?a[0]:(a[0]+a[1])/2;if(f){if(0<d){{if(c<=b[0])return a[0];if(c>=b[1])return a[1]}}else{if(c>=b[0])return a[0];if(c<=b[1])return a[1]}}else{if(c===b[0])return a[0];if(c===b[1])return a[1]}return(c-b[0])/d*e+a[0]}function d(a,b){switch(a){case"center":case"middle":a="50%";break;case"left":case"top":a="0%";break;case"right":case"bottom":a="100%"}return"string"==typeof a?function(a){return a.replace(/^\s+|\s+$/g,"")}(a).match(/%$/)?parseFloat(a)/100*b:parseFloat(a):null==a?NaN:+a}function X(b,a,c){return null==a&&(a=10),a=Math.min(Math.max(0,a),20),b=(+b).toFixed(a),c?b:+b}function dD(a){return a.sort(function(a,b){return a-b}),a}function tU(a){if(a=+a,isNaN(a))return 0;for(var b=1,c=0;Math.round(a*b)/b!==a;)b*=10,c++;return c}function iz(e){var a=e.toString(),b=a.indexOf("e"),c,d;return 0<b?(c=+a.slice(b+1),c<0?-c:0):(d=a.indexOf("."),d<0?0:a.length-1-d)}function kf(a,b){var c=Math.log,d=Math.LN10,f=Math.floor(c(a[1]-a[0])/d),g=Math.round(c(Math.abs(b[1]-b[0]))/d),e=Math.min(Math.max(-f+g,0),20);return isFinite(e)?e:20}function tT(g,m,o){var k,f,i,l,b,j,d,h,e,a,n;if(!g[m])return 0;if(k=eD(g,function(b,a){return b+(isNaN(a)?0:a)},0),0===k)return 0;for(f=Math.pow(10,o),i=c(g,function(a){return(isNaN(a)?0:a)/k*f*100}),l=100*f,b=c(i,function(a){return Math.floor(a)}),j=eD(b,function(a,b){return a+b},0),d=c(i,function(a,c){return a-b[c]});j<l;){for(h=Number.NEGATIVE_INFINITY,e=null,a=0,n=d.length;a<n;++a)d[a]>h&&(h=d[a],e=a);++b[e],d[e]=0,++j}return b[m]/f}ke=9007199254740991;function kd(b){var a=2*Math.PI;return(b%a+a)%a}function fj(a){return-tV<a&&a<tV}aei=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function fl(b){var a,c;return b instanceof Date?b:"string"!=typeof b?null==b?new Date(NaN):new Date(Math.round(b)):(a=aei.exec(b),!a)?new Date(NaN):a[8]?(c=+a[4]||0,"Z"!==a[8].toUpperCase()&&(c-=a[8].slice(0,3)),new Date(Date.UTC(+a[1],+(a[2]||1)-1,+a[3]||1,c,+(a[5]||0),+a[6]||0,+a[7]||0))):new Date(+a[1],+(a[2]||1)-1,+a[3]||1,+a[4]||0,+(a[5]||0),+a[6]||0,+a[7]||0)}function tS(a){return Math.pow(10,ka(a))}function ka(a){if(0===a)return 0;var b=Math.floor(Math.log(a)/Math.LN10);return 10<=a/Math.pow(10,b)&&b++,b}function j$(b,e){var c=ka(b),d=Math.pow(10,c),a=b/d;return b=(e?a<1.5?1:a<2.5?2:a<4?3:a<7?5:10:a<1?1:a<2?2:a<3?3:a<5?5:10)*d,-20<=c?+b.toFixed(c<0?-c:0):b}function j_(d){var f,g,b,c,e,a;d.sort(function(a,b){return function d(b,c,a){return b.interval[a]<c.interval[a]||b.interval[a]===c.interval[a]&&(b.close[a]-c.close[a]==(a?-1:1)||!a&&d(b,c,1))}(a,b,0)?-1:1});for(f=-1/0,g=1,b=0;b<d.length;){for(c=d[b].interval,e=d[b].close,a=0;a<2;a++)c[a]<=f&&(c[a]=f,e[a]=a?1:1-g),f=c[a],g=e[a];c[0]===c[1]&&e[0]*e[1]!=1?d.splice(b,1):b++}return d}function tQ(a){return 0<=a-parseFloat(a)}aeg=(Object.freeze||Object)({linearMap:J,parsePercent:d,round:X,asc:dD,getPrecision:tU,getPrecisionSafe:iz,getPixelPrecision:kf,getPercentWithPrecision:tT,MAX_SAFE_INTEGER:ke,remRadian:kd,isRadianAroundZero:fj,parseDate:fl,quantity:tS,quantityExponent:ka,nice:j$,quantile:function(a,f){var d=(a.length-1)*f+1,b=Math.floor(d),c=+a[b-1],e=d-b;return e?c+e*(a[b]-c):c},reformIntervals:j_,isNumeric:tQ});function cN(a){return isNaN(a)?"-":(a=(a+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(1<a.length?"."+a[1]:"")}function tP(a,b){return a=(a||"").toLowerCase().replace(/-(.)/g,function(b,a){return a.toUpperCase()}),b&&a&&(a=a.charAt(0).toUpperCase()+a.slice(1)),a}dJ=oM,aef=/([&<>"'])/g,aed={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function K(a){return null==a?"":(a+"").replace(aef,function(b,a){return aed[a]})}function jW(b,a){return"{"+b+(null==a?"":a)+"}"}pd=["a","b","c","d","e","f","g"];function jV(c,a,k){var h,f,g,i,e,d,j;if(b(a)||(a=[a]),h=a.length,!h)return"";for(f=a[0].$vars||[],g=0;g<f.length;g++)i=pd[g],c=c.replace(jW(i),jW(i,0));for(e=0;e<h;e++)for(d=0;d<f.length;d++)j=a[e][f[d]],c=c.replace(jW(pd[d],e),k?K(j):j);return c}function tO(b,c,d){return a(c,function(a,c){b=b.replace("{"+c+"}",d?K(a):a)}),b}function iX(a,b){var c=(a=E(a)?{color:a,extraCssText:b}:a||{}).color,e=a.type,d=(b=a.extraCssText,a.renderMode||"html"),f=a.markerId||"X";return c?"html"===d?"subItem"===e?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+K(c)+";"+(b||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+K(c)+";"+(b||"")+'"></span>':{renderMode:d,content:"{marker"+f+"|}  ",style:{color:c}}:""}function en(a,b){return"0000".substr(0,b-(a+="").length)+a}function jU(a,j,k){"week"!==a&&"month"!==a&&"quarter"!==a&&"half-year"!==a&&"year"!==a||(a="MM-dd\nyyyy");var b=fl(j),c=k?"UTC":"",f=b["get"+c+"FullYear"](),g=b["get"+c+"Month"]()+1,d=b["get"+c+"Date"](),e=b["get"+c+"Hours"](),h=b["get"+c+"Minutes"](),i=b["get"+c+"Seconds"](),l=b["get"+c+"Milliseconds"]();return a=a.replace("MM",en(g,2)).replace("M",g).replace("yyyy",f).replace("yy",f%100).replace("dd",en(d,2)).replace("d",d).replace("hh",en(e,2)).replace("h",e).replace("mm",en(h,2)).replace("m",h).replace("ss",en(i,2)).replace("s",i).replace("SSS",en(l,3))}function i_(a){return a&&a.charAt(0).toUpperCase()+a.substr(1)}tN=wH,aec=(Object.freeze||Object)({addCommas:cN,toCamelCase:tP,normalizeCssArray:dJ,encodeHTML:K,formatTpl:jV,formatTplSimple:tO,getTooltipMarker:iX,formatTime:jU,capitalFirst:i_,truncateText:tN,getTextBoundingRect:function(a){return bn(a.text,a.font,a.textAlign,a.textVerticalAlign,a.textPadding,a.textLineHeight,a.rich,a.truncate)},getTextRect:function(a,b,c,d,e,f,g,h){return bn(a,b,c,d,e,h,f,g)}}),jb=a,tM=["left","right","top","bottom","width","height"],dL=[["width","left","right"],["height","top","bottom"]];function jP(g,h,d,e,f){var c=0,b=0,a;null==e&&(e=1/0),null==f&&(f=1/0),a=0,h.eachChild(function(j,r){var l,m,n=j.position,i=j.getBoundingRect(),o=h.childAt(r+1),k=o&&o.getBoundingRect(),p,q;"horizontal"===g?(p=i.width+(k?-k.x+i.x:0),a=e<(l=c+p)||j.newline?(c=0,l=p,b+=a+d,i.height):Math.max(a,i.height)):(q=i.height+(k?-k.y+i.y:0),a=f<(m=b+q)||j.newline?(c+=a+d,b=0,m=q,i.width):Math.max(a,i.width)),j.newline||(n[0]=c,n[1]=b,"horizontal"===g?c=l+d:b=m+d)})}dM=jP,j(jP,"vertical"),j(jP,"horizontal");function V(c,p,e){var f,g,i,h,m,n,a,b,j,l,k,o;switch(e=dJ(e||0),f=p.width,g=p.height,i=d(c.left,f),h=d(c.top,g),m=d(c.right,f),n=d(c.bottom,g),a=d(c.width,f),b=d(c.height,g),j=e[2]+e[0],l=e[1]+e[3],k=c.aspect,isNaN(a)&&(a=f-m-l-i),isNaN(b)&&(b=g-n-j-h),null!=k&&(isNaN(a)&&isNaN(b)&&(f/g<k?a=.8*f:b=.8*g),isNaN(a)&&(a=k*b),isNaN(b)&&(b=a/k)),isNaN(i)&&(i=f-m-a-l),isNaN(h)&&(h=g-n-b-j),c.left||c.right){case"center":i=f/2-a/2-e[3];break;case"right":i=f-a-l}switch(c.top||c.bottom){case"middle":case"center":h=g/2-b/2-e[0];break;case"bottom":h=g-b-j}return i=i||0,h=h||0,isNaN(a)&&(a=f-l-i-(m||0)),isNaN(b)&&(b=g-j-h-(n||0)),o=new r(i+e[3],h+e[0],a,b),o.margin=e,o}function jh(c,d,n,m,a){var f=!a||!a.hv||a.hv[0],e=!a||!a.hv||a.hv[1],i=a&&a.boundingMode||"all",b,l,h,j,k;(f||e)&&("raw"===i?b="group"===c.type?new r(0,0,+d.width||0,+d.height||0):c.getBoundingRect():(b=c.getBoundingRect(),c.needLocalTransform())&&(l=c.getLocalTransform(),(b=b.clone()).applyTransform(l)),d=V(g({width:b.width,height:b.height},d),n,m),h=c.position,j=f?d.x-b.x:0,k=e?d.y-b.y:0,c.attr("position","raw"===i?[j,k]:[h[0]+j,h[1]+k]))}function cR(c,d,g){var a,h,i;m(g)||(g={}),a=g.ignoreSize,b(a)||(a=[a,a]),h=j(dL[0],0),i=j(dL[1],1);function j(b,m){var h={},j=0,g={},l=0,k,i;if(jb(b,function(a){g[a]=c[a]}),jb(b,function(a){f(d,a)&&(h[a]=g[a]=d[a]),e(h,a)&&j++,e(g,a)&&l++}),a[m])return e(d,b[1])?g[b[2]]=null:e(d,b[2])&&(g[b[1]]=null),g;if(2!==l&&j){if(2<=j)return h;for(k=0;k<b.length;k++)if(i=b[k],!f(h,i)&&f(c,i)){h[i]=c[i];break}return h}return g}function f(a,b){return a.hasOwnProperty(b)}function e(a,b){return null!=a[b]&&"auto"!==a[b]}function k(a,b,c){jb(a,function(a){b[a]=c[a]})}k(dL[0],c,h),k(dL[1],c,i)}function ec(a){return tK({},a)}function tK(a,b){return b&&a&&jb(tM,function(c){b.hasOwnProperty(c)&&(a[c]=b[c])}),a}aeb=au(),x=w.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(a,b,c,d){w.call(this,a,b,c,d),this.uid=eV("ec_cpt_model")},init:function(a,c,b,d){this.mergeDefaultAndTheme(a,b)},mergeDefaultAndTheme:function(a,c){var b=this.layoutMode,d=b?ec(a):{};l(a,c.getTheme().get(this.mainType)),l(a,this.getDefaultOption()),b&&cR(a,d,b)},mergeOption:function(a,c){l(this.option,a,!0);var b=this.layoutMode;b&&cR(this.option,a,b)},optionUpdated:function(a,b){},getDefaultOption:function(){var b=aeb(this),c,a,f,d,e;if(!b.defaultOption){for(c=[],a=this.constructor;a;)f=a.prototype.defaultOption,f&&c.push(f),a=a.superClass;for(d={},e=c.length-1;0<=e;e--)d=l(d,c[e],!0);b.defaultOption=d}return b.defaultOption},getReferringComponents:function(a){return this.ecModel.queryComponents({mainType:a,index:this.get(a+"Index",!0),id:this.get(a+"Id",!0)})}});function tF(a,b){return a[b]||(a[b]={predecessor:[],successor:[]}),a[b]}is(x,{registerWhenExtend:!0}),jm={},(jL=x).registerSubTypeDefaulter=function(a,b){a=cq(a),jm[a.main]=b},jL.determineSubType=function(b,c){var a=c.type,d;return a||(d=cq(b).main,jL.hasSubTypes(b)&&jm[d]&&(a=jm[d](c))),a},tJ=function(d){var b=[];return a(x.getClassesByMainType(d),function(a){b=b.concat(a.prototype.dependencies||[])}),b=c(b,function(a){return cq(a).main}),"dataset"!==d&&v(b,"dataset")<=0&&b.unshift("dataset"),b},x.topologicalTravel=function(i,m,l,k){var h,d,e,b,c,g,f;if(i.length){h=function(c){var b={},d=[];return a(c,function(f){var e=tF(b,f),g=function(c,d){var b=[];return a(c,function(a){0<=v(d,a)&&b.push(a)}),b}(e.originalDeps=tJ(f),c);e.entryCount=g.length,0===e.entryCount&&d.push(f),a(g,function(a){v(e.predecessor,a)<0&&e.predecessor.push(a);var c=tF(b,a);v(c.successor,a)<0&&c.successor.push(f)})}),{graph:b,noEntryList:d}}(m),d=h.graph,e=h.noEntryList,b={};for(a(i,function(a){b[a]=!0});e.length;)c=e.pop(),g=d[c],f=!!b[c],f&&(l.call(k,c,g.originalDeps.slice()),delete b[c]),a(g.successor,f?n:j);a(b,function(){throw new Error("Circle dependency may exists")})}function j(a){d[a].entryCount--,0===d[a].entryCount&&e.push(a)}function n(a){b[a]=!0,j(a)}},C(x,{getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}}),tE="","undefined"!=typeof navigator&&(tE=navigator.platform||""),aea={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:tE.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},jA=au(),jz={clearColorPalette:function(){jA(this).colorIdx=0,jA(this).colorNameMap={}},getColorFromPalette:function(b,e,i){var c=jA(e=e||this),f=c.colorIdx||0,d=c.colorNameMap=c.colorNameMap||{},g,h,a,j;if(d.hasOwnProperty(b))return d[b];if(g=al(this.get("color",!0)),h=this.get("colorLayer",!0),a=null!=i&&h?function(a,d){for(var c=a.length,b=0;b<c;b++)if(a[b].length>d)return a[b];return a[c-1]}(h,i):g,(a=a||g)&&a.length)return j=a[f],b&&(d[b]=j),c.colorIdx=(f+1)%a.length,j}};function tC(b){var c=b.get("coordinateSystem"),a={coordSysName:c,coordSysDims:[],axisMap:n(),categoryAxisMap:n()},d=ad$[c];if(d)return d(b,a,a.axisMap,a.categoryAxisMap),a}ad$={cartesian2d:function(d,a,e,f){var b=d.getReferringComponents("xAxis")[0],c=d.getReferringComponents("yAxis")[0];a.coordSysDims=["x","y"],e.set("x",b),e.set("y",c),ea(b)&&(f.set("x",b),a.firstCategoryDimIndex=0),ea(c)&&(f.set("y",c),a.firstCategoryDimIndex=1)},singleAxis:function(c,b,d,e){var a=c.getReferringComponents("singleAxis")[0];b.coordSysDims=["single"],d.set("single",a),ea(a)&&(e.set("single",a),b.firstCategoryDimIndex=0)},polar:function(g,b,d,e){var f=g.getReferringComponents("polar")[0],c=f.findAxisModel("radiusAxis"),a=f.findAxisModel("angleAxis");b.coordSysDims=["radius","angle"],d.set("radius",c),d.set("angle",a),ea(c)&&(e.set("radius",c),b.firstCategoryDimIndex=0),ea(a)&&(e.set("angle",a),b.firstCategoryDimIndex=1)},geo:function(b,a,c,d){a.coordSysDims=["lng","lat"]},parallel:function(c,b,f,g){var d=c.ecModel,e=d.getComponent("parallel",c.get("parallelIndex")),h=b.coordSysDims=e.dimensions.slice();a(e.parallelAxisIndex,function(i,c){var a=d.getComponent("parallelAxis",i),e=h[c];f.set(e,a),ea(a)&&null==b.firstCategoryDimIndex&&(g.set(e,a),b.firstCategoryDimIndex=c)})}};function ea(a){return"category"===a.get("type")}dO="original",gy="arrayRows",jt="objectRows",js="keyedColumns",tw="unknown",jq="typedArray",tt="column",jF="row";function bj(a){this.fromDataset=a.fromDataset,this.data=a.data||(a.sourceFormat===js?{}:[]),this.sourceFormat=a.sourceFormat||tw,this.seriesLayoutBy=a.seriesLayoutBy||tt,this.dimensionsDefine=a.dimensionsDefine,this.encodeDefine=a.encodeDefine&&n(a.encodeDefine),this.startIndex=a.startIndex||0,this.dimensionsDetectCount=a.dimensionsDetectCount}bj.seriesDataToSource=function(a){return new bj({data:a,sourceFormat:bu(a)?jq:dO,fromDataset:!1})},iA(bj),dY=au();function ts(g){var c=g.option,d=c.data,h=bu(d)?jq:dO,p=!1,e=c.seriesLayoutBy,k=c.sourceHeader,l=c.dimensions,f=function(a){var b=a.option;if(!b.data)return a.ecModel.getComponent("dataset",b.datasetIndex||0)}(g),j,i,o;f&&(j=f.option,d=j.source,h=dY(f).sourceFormat,p=!0,e=e||j.seriesLayoutBy,null==k&&(k=j.sourceHeader),l=l||j.dimensions),i=function(d,f,i,j,c){var g,e,h,k,l;return d?(f===gy?("auto"===j||null==j?tq(function(a){null!=a&&"-"!==a&&(E(a)?null==e&&(e=1):e=0)},i,d,10):e=j?1:0,c||1!==e||(c=[],tq(function(a,b){c[b]=null!=a?a:""},i,d)),g=c?c.length:i===jF?d.length:d[0]?d[0].length:null):f===jt?c||(c=function(c){for(var b,d=0,e;d<c.length&&!(b=c[d++]););if(b)return e=[],a(b,function(b,a){e.push(a)}),e}(d),h=!0):f===js?c||(c=[],h=!0,a(d,function(b,a){c.push(a)})):f===dO&&(l=fE(d[0]),g=b(l)&&l.length||1),h&&a(c,function(a,b){"name"===(m(a)?a.name:a)&&(k=b)}),{startIndex:e,dimensionsDefine:tr(c),dimensionsDetectCount:g,potentialNameDimIndex:k}):{dimensionsDefine:tr(c)}}(d,h,e,k,l),o=c.encode,!o&&f&&(o=function(h,u,t,s,l,i){var e=tC(h),b={},g=[],d=[],o=h.subType,r=n(["pie","map","funnel"]),q=n(["line","bar","pictorialBar","scatter","effectScatter","candlestick","boxplot"]),v,j,m,k,c,f,p;if(e&&null!=q.get(o))v=h.ecModel,j=dY(v).datasetMap,m=u.uid+"_"+l,k=j.get(m)||j.set(m,{categoryWayDim:1,valueWayDim:0}),a(e.coordSysDims,function(c){if(null==e.firstCategoryDimIndex){var a=k.valueWayDim++;b[c]=a,d.push(a)}else e.categoryAxisMap.get(c)?(b[c]=0,g.push(0)):(a=k.categoryWayDim++,b[c]=a,d.push(a))});else if(null!=r.get(o)){for(c,f=0;f<5&&null==c;f++)to(t,s,l,i.dimensionsDefine,i.startIndex,f)||(c=f);null!=c&&(b.value=c,p=i.potentialNameDimIndex||Math.max(c-1,0),d.push(p),g.push(p))}return g.length&&(b.itemName=g),d.length&&(b.seriesName=d),b}(g,f,d,h,e,i)),dY(g).source=new bj({data:d,fromDataset:p,seriesLayoutBy:e,sourceFormat:h,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectCount:i.dimensionsDetectCount,encodeDefine:o})}function tr(a){if(a){var b=n();return c(a,function(a,d){if(null==(a=f({},m(a)?a:{name:a})).name)return a;a.name+="",null==a.displayName&&(a.displayName=a.name);var c=b.get(a.name);return c?a.name+="-"+c.count++:b.set(a.name,{count:1}),a})}}function tq(e,f,b,c){var a,d;if(null==c&&(c=1/0),f===jF)for(a=0;a<b.length&&a<c;a++)e(b[a]?b[a][0]:null,a);else{d=b[0]||[];for(a=0;a<d.length&&a<c;a++)e(d[a],a)}}function to(d,i,p,l,k,h){var c,e,f,a,n,j,o;if(bu(d))return!1;if(l&&(e=m(e=l[h])?e.name:e),i===gy){if(p===jF){for(f=d[h],a=0;a<(f||[]).length&&a<5;a++)if(null!=(c=g(f[k+a])))return c}else for(a=0;a<d.length&&a<5;a++)if(n=d[k+a],n&&null!=(c=g(n[h])))return c}else if(i===jt){{if(!e)return;for(a=0;a<d.length&&a<5;a++)if((j=d[a])&&null!=(c=g(j[e])))return c}}else if(i===js){{if(!e)return;if(!(f=d[e])||bu(f))return!1;for(a=0;a<f.length&&a<5;a++)if(null!=(c=g(f[a])))return c}}else if(i===dO)for(a=0;a<d.length&&a<5;a++){if(o=fE(j=d[a]),!b(o))return!1;if(null!=(c=g(o[h])))return c}function g(a){return(null==a||!isFinite(a)||""===a)&&(!(!E(a)||"-"===a)||void 0)}return!1}jM="\0_ec_inner",jN=w.extend({init:function(c,d,a,b){a=a||{},this.option=null,this._theme=new w(a),this._optionManager=b},setOption:function(a,b){cg(!(jM in a),"please use chart.getOption()"),this._optionManager.setOption(a,b),this.resetOption(null)},resetOption:function(b){var c=!1,d=this._optionManager,e,f,g;return(!b||"recreate"===b)&&(e=d.mountOption("recreate"===b),this.option&&"recreate"!==b?(this.restoreData(),this.mergeOption(e)):function(b){b=b,this.option={},this.option[jM]=1,this._componentsMap=n({series:[]}),this._seriesIndices,this._seriesIndicesMap,function(b,c){var d=b.color&&!b.colorLayer;a(c,function(c,a){"colorLayer"===a&&d||x.hasClass(a)||("object"==typeof c?b[a]=b[a]?l(b[a],c,!1):i(c):null==b[a]&&(b[a]=c))})}(b,this._theme.option),l(b,aea,!1),this.mergeOption(b)}.call(this,e),c=!0),("timeline"!==b&&"media"!==b||this.restoreData(),!b||"recreate"===b||"timeline"===b)&&(f=d.getTimelineOption(this),f&&(this.mergeOption(f),c=!0)),(!b||"recreate"===b||"media"===b)&&(g=d.getMediaOption(this,this._api),g.length&&a(g,function(a){this.mergeOption(a,c=!0)},this)),c},mergeOption:function(e){var c=this.option,d=this._componentsMap,g=[];!function(a){dY(a).datasetMap=n()}(this),a(e,function(b,a){null!=b&&(x.hasClass(a)?a&&g.push(a):c[a]=null==c[a]?i(b):l(c[a],b,!0))}),x.topologicalTravel(g,x.getAllClassMainTypes(),function(g,i){var j=al(e[g]),h=lX(d.get(g),j),k;vN(h),a(h,function(a,c){var b=a.option;m(b)&&(a.keyInfo.mainType=g,a.keyInfo.subType=function(c,a,b){return a.type?a.type:b?b.subType:x.determineSubType(c,a)}(g,b,a.exist))}),k=function(e,c){b(c)||(c=c?[c]:[]);var d={};return a(c,function(a){d[a]=(e.get(a)||[]).slice()}),d}(d,i),c[g]=[],d.set(g,[]),a(h,function(e,h){var a=e.exist,b=e.option,j,i;cg(m(b)||a,"Empty component definition"),b?(j=x.getClass(g,e.keyInfo.subType,!0),a&&a.constructor===j?(a.name=e.keyInfo.name,a.mergeOption(b,this),a.optionUpdated(b,!1)):(i=f({dependentModels:k,componentIndex:h},e.keyInfo),f(a=new j(b,this,this,i),i),a.init(b,this,this,i),a.optionUpdated(null,!0))):(a.mergeOption({},this),a.optionUpdated({},!1)),d.get(g)[h]=a,c[g][h]=a.option},this),"series"===g&&jO(this,d.get("series"))},this),this._seriesIndicesMap=n(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var b=i(this.option);return a(b,function(a,d){if(x.hasClass(d)){for(var c=(a=al(a)).length-1;0<=c;c--)iN(a[c])&&a.splice(c,1);b[d]=a}}),delete b[jM],b},getTheme:function(){return this._theme},getComponent:function(b,c){var a=this._componentsMap.get(b);if(a)return a[c||0]},queryComponents:function(f){var i=f.mainType,d,e,g,h,a,j,k;return i?(e=f.index,g=f.id,h=f.name,a=this._componentsMap.get(i),!a||!a.length)?[]:(null!=e?(b(e)||(e=[e]),d=W(c(e,function(b){return a[b]}),function(a){return!!a})):null!=g?(j=b(g),d=W(a,function(a){return j&&0<=v(g,a.id)||!j&&a.id===g})):null!=h?(k=b(h),d=W(a,function(a){return k&&0<=v(h,a.name)||!k&&a.name===h})):d=a.slice(),tn(d,f)):[]},findComponents:function(b){var a,d,e,f,g,i=b.query,c=b.mainType,h=(d=c+"Index",e=c+"Id",f=c+"Name",!(a=i)||null==a[d]&&null==a[e]&&null==a[f]?null:{mainType:c,index:a[d],id:a[e],name:a[f]}),j=h?this.queryComponents(h):this._componentsMap.get(c);return g=tn(j,b),b.filter?W(g,b.filter):g},eachComponent:function(b,c,d){var e=this._componentsMap;"function"==typeof b?(d=c,c=b,e.each(function(b,e){a(b,function(a,b){c.call(d,e,a,b)})})):E(b)?a(e.get(b),c,d):m(b)&&a(this.findComponents(b),c,d)},getSeriesByName:function(a){return W(this._componentsMap.get("series"),function(b){return b.name===a})},getSeriesByIndex:function(a){return this._componentsMap.get("series")[a]},getSeriesByType:function(a){return W(this._componentsMap.get("series"),function(b){return b.subType===a})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(b,c){a(this._seriesIndices,function(a){var d=this._componentsMap.get("series")[a];b.call(c,d,a)},this)},eachRawSeries:function(b,c){a(this._componentsMap.get("series"),b,c)},eachSeriesByType:function(b,c,d){a(this._seriesIndices,function(a){var e=this._componentsMap.get("series")[a];e.subType===b&&c.call(d,e,a)},this)},eachRawSeriesByType:function(b,c,d){return a(this.getSeriesByType(b),c,d)},isSeriesFiltered:function(a){return null==this._seriesIndicesMap.get(a.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(a,b){var c=W(this._componentsMap.get("series"),a,b);jO(this,c)},restoreData:function(d){var b=this._componentsMap,c;jO(this,b.get("series")),c=[],b.each(function(b,a){c.push(a)}),x.topologicalTravel(c,x.getAllClassMainTypes(),function(c,e){a(b.get(c),function(a){"series"===c&&function(b,a){if(a){var c=a.seiresIndex,d=a.seriesId,e=a.seriesName;return null!=c&&b.componentIndex!==c||null!=d&&b.id!==d||null!=e&&b.name!==e}}(a,d)||a.restoreData()})})}});function jO(a,b){a._seriesIndicesMap=n(a._seriesIndices=c(b,function(a){return a.componentIndex})||[])}function tn(a,b){return b.hasOwnProperty("subType")?W(a,function(a){return a.subType===b.subType}):a}C(jN,jz),ad_=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function th(b){a(ad_,function(a){this[a]=k(b[a],b)},this)}jS={};function aq(){this._coordinateSystems=[]}aq.prototype={constructor:aq,create:function(c,d){var b=[];a(jS,function(a,f){var e=a.create(c,d);b=b.concat(e||[])}),this._coordinateSystems=b},update:function(b,c){a(this._coordinateSystems,function(a){a.update&&a.update(b,c)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},aq.register=function(a,b){jS[a]=b},aq.get=function(a){return jS[a]},iZ=a,dK=i,iT=c,tg=l,adZ=/^(min|max)?(.+)$/;function jZ(a){this._api=a,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}function adY(e,b,c){var f={width:b,height:c,aspectratio:b/c},d=!0;return a(e,function(b,c){var a=c.match(adZ),e,g;a&&a[1]&&a[2]&&(e=a[1],g=a[2].toLowerCase(),!function(a,b,c){return"min"===c?b<=a:"max"===c?a<=b:a===b}(f[g],b,e)&&(d=!1))}),d}jZ.prototype={constructor:jZ,setOption:function(e,f){e&&a(al(e.series),function(a){a&&a.data&&bu(a.data)&&oK(a.data)}),e=dK(e);var d=this._optionBackup,b=function(b,i,h){var d,a,e=[],f=[],g=b.timeline,j;return b.baseOption&&(a=b.baseOption),(g||b.options)&&(a=a||{},e=(b.options||[]).slice()),b.media&&(a=a||{},j=b.media,iZ(j,function(a){a&&a.option&&(a.query?f.push(a):d=d||a)})),a=a||b,a.timeline||(a.timeline=g),iZ([a].concat(e).concat(c(f,function(a){return a.option})),function(a){iZ(i,function(b){b(a,h)})}),{baseOption:a,timelineOptions:e,mediaDefault:d,mediaList:f}}.call(this,e,f,!d);this._newBaseOption=b.baseOption,d?(function(a,b){iZ(b=b||{},function(b,c){var d,e;null!=b&&(d=a[c],x.hasClass(c)?(b=al(b),e=lX(d=al(d),b),a[c]=iT(e,function(a){return a.option&&a.exist?tg(a.exist,a.option,!0):a.exist||a.option})):a[c]=tg(d,b,!0))})}(d.baseOption,b.baseOption),b.timelineOptions.length&&(d.timelineOptions=b.timelineOptions),b.mediaList.length&&(d.mediaList=b.mediaList),b.mediaDefault&&(d.mediaDefault=b.mediaDefault)):this._optionBackup=b},mountOption:function(b){var a=this._optionBackup;return this._timelineOptions=iT(a.timelineOptions,dK),this._mediaList=iT(a.mediaList,dK),this._mediaDefault=dK(a.mediaDefault),this._currentMediaIndices=[],dK(b?a.baseOption:this._newBaseOption)},getTimelineOption:function(d){var a,b=this._timelineOptions,c;return b.length&&(c=d.getComponent("timeline"),c&&(a=dK(b[c.getCurrentIndex()],!0))),a},getMediaOption:function(i){var g=this._api.getWidth(),f=this._api.getHeight(),c=this._mediaList,e=this._mediaDefault,a=[],d=[],b,h;if(!c.length&&!e)return d;for(b=0,h=c.length;b<h;b++)adY(c[b].query,g,f)&&a.push(b);return!a.length&&e&&(a=[-1]),a.length&&!function(a,b){return a.join(",")===b.join(",")}(a,this._currentMediaIndices)&&(d=iT(a,function(a){return dK(-1===a?e.option:c[a].option)})),this._currentMediaIndices=a,d}},bc=a,fr=m,te=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function kc(b){var e=b&&b.itemStyle,f,g,a,c,d;if(e)for(f=0,g=te.length;f<g;f++)a=te[f],c=e.normal,d=e.emphasis,c&&c[a]&&(b[a]=b[a]||{},b[a].normal?l(b[a].normal,c[a]):b[a].normal=c[a],c[a]=null),d&&d[a]&&(b[a]=b[a]||{},b[a].emphasis?l(b[a].emphasis,d[a]):b[a].emphasis=d[a],d[a]=null)}function ap(a,b,e){if(a&&a[b]&&(a[b].normal||a[b].emphasis)){var c=a[b].normal,d=a[b].emphasis;c&&(e?(a[b].normal=a[b].emphasis=null,g(a[b],c)):a[b]=c),d&&(a.emphasis=a.emphasis||{},a.emphasis[b]=d)}}function fg(a){ap(a,"itemStyle"),ap(a,"lineStyle"),ap(a,"areaStyle"),ap(a,"label"),ap(a,"labelLine"),ap(a,"upperLabel"),ap(a,"edgeLabel")}function T(e,a){var b=fr(e)&&e[a],c=fr(b)&&b.textStyle,d,f;if(c)for(d=0,f=vR.length;d<f;d++)a=vR[d],c.hasOwnProperty(a)&&(b[a]=c[a])}function a_(a){a&&(fg(a),T(a,"label"),a.emphasis&&T(a.emphasis,"label"))}function b_(a){return b(a)?a:a?[a]:[]}function td(a){return(b(a)?a[0]:a)||{}}function adV(c,e){bc(b_(c.series),function(c){fr(c)&&function(c){var j,e,f,g,i,d,k,h;if(fr(c)){if(kc(c),fg(c),T(c,"label"),T(c,"upperLabel"),T(c,"edgeLabel"),c.emphasis&&(T(c.emphasis,"label"),T(c.emphasis,"upperLabel"),T(c.emphasis,"edgeLabel")),(e=c.markPoint)&&(kc(e),a_(e)),(f=c.markLine)&&(kc(f),a_(f)),j=c.markArea,j&&a_(j),g=c.data,"graph"===c.type){if(g=g||c.nodes,i=c.links||c.edges,i&&!bu(i))for(d=0;d<i.length;d++)a_(i[d]);a(c.categories,function(a){fg(a)})}if(g&&!bu(g))for(d=0;d<g.length;d++)a_(g[d]);if((e=c.markPoint)&&e.data){k=e.data;for(d=0;d<k.length;d++)a_(k[d])}if((f=c.markLine)&&f.data){h=f.data;for(d=0;d<h.length;d++)b(h[d])?(a_(h[d][0]),a_(h[d][1])):a_(h[d])}"gauge"===c.type?(T(c,"axisLabel"),T(c,"title"),T(c,"detail")):"treemap"===c.type?(ap(c.breadcrumb,"itemStyle"),a(c.levels,function(a){fg(a)})):"tree"===c.type&&fg(c.leaves)}}(c)});var d=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&d.push("valueAxis","categoryAxis","logAxis","timeAxis"),bc(d,function(a){bc(b_(c[a]),function(a){a&&(T(a,"axisLabel"),T(a.axisPointer,"label"))})}),bc(b_(c.parallel),function(b){var a=b&&b.parallelAxisDefault;T(a,"axisLabel"),T(a&&a.axisPointer,"label")}),bc(b_(c.calendar),function(a){ap(a,"itemStyle"),T(a,"dayLabel"),T(a,"monthLabel"),T(a,"yearLabel")}),bc(b_(c.radar),function(a){T(a,"name")}),bc(b_(c.geo),function(a){fr(a)&&(a_(a),bc(b_(a.regions),function(a){a_(a)}))}),bc(b_(c.timeline),function(c){a_(c),ap(c,"label"),ap(c,"itemStyle"),ap(c,"controlStyle",!0);var d=c.data;b(d)&&a(d,function(a){m(a)&&(ap(a,"label"),ap(a,"itemStyle"))})}),bc(b_(c.toolbox),function(a){ap(a,"iconStyle"),bc(a.feature,function(a){ap(a,"iconStyle")})}),T(td(c.axisPointer),"label"),T(td(c.tooltip).axisPointer,"label")}function s$(b){a(adS,function(a){a[0]in b&&!(a[1]in b)&&(b[a[1]]=b[a[0]])})}adS=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],adQ=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],sZ=function(c,d){adV(c,d),c.series=al(c.series),a(c.series,function(a){var b,c;m(a)&&(b=a.type,"line"===b?null!=a.clipOverflow&&(a.clip=a.clipOverflow):"pie"===b||"gauge"===b?null!=a.clockWise&&(a.clockwise=a.clockWise):"gauge"===b&&(c=function(d,a){a=a.split(",");for(var b=d,c=0;c<a.length&&null!=(b=b&&b[a[c]]);c++);return b}(a,"pointer.color"),null!=c&&function(g,a,e,f){a=a.split(",");for(var d,b=g,c=0;c<a.length-1;c++)null==b[d=a[c]]&&(b[d]={}),b=b[d];!f&&null!=b[a[c]]||(b[a[c]]=e)}(a,"itemStyle.color",c)),s$(a))}),c.dataRange&&(c.visualMap=c.dataRange),a(adQ,function(e){var d=c[e];d&&(b(d)||(d=[d]),a(d,function(a){s$(a)}))})};function adO(b){a(b,function(a,i){var d=[],g=[NaN,NaN],h=[a.stackResultDimension,a.stackedOverDimension],c=a.data,f=a.isStackedByIndex,e=c.map(h,function(p,q,m){var o,k,e=c.get(a.stackedDimension,m),n,l,h,j;if(isNaN(e))return g;f?k=c.getRawIndex(m):o=c.get(a.stackedByDimension,m);for(n=NaN,l=i-1;0<=l;l--)if(h=b[l],f||(k=h.data.rawIndexOf(h.stackedByDimension,o)),0<=k)if(j=h.data.getByRawIndex(h.stackResultDimension,k),0<=e&&0<j||e<=0&&j<0){e+=j,n=j;break}return d[0]=e,d[1]=n,d});c.hostModel.setData(e),a.data=e})}function sW(a,c){bj.isInstance(a)||(a=bj.seriesDataToSource(a)),this._source=a;var d=this._data=a.data,b=a.sourceFormat;b===jq&&(this._offset=0,this._dimSize=c,this._data=d),f(this,adN[b===gy?b+"_"+a.seriesLayoutBy:b])}kq=sW.prototype,kq.pure=!1,adN={arrayRows_column:{pure:kq.persistent=!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(a){return this._data[a+this._source.startIndex]},appendData:ku},arrayRows_row:{pure:!0,count:function(){var a=this._data[0];return a?Math.max(0,a.length-this._source.startIndex):0},getItem:function(e){var b,c,a,d;e+=this._source.startIndex;for(b=[],c=this._data,a=0;a<c.length;a++)d=c[a],b.push(d?d[e]:null);return b},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:sV,getItem:sR,appendData:ku},keyedColumns:{pure:!0,count:function(){var b=this._source.dimensionsDefine[0].name,a=this._data[b];return a?a.length:0},getItem:function(e){for(var b=[],c=this._source.dimensionsDefine,a=0,d;a<c.length;a++)d=this._data[c[a].name],b.push(d?d[e]:null);return b},appendData:function(c){var b=this._data;a(c,function(c,d){for(var e=b[d]||(b[d]=[]),a=0;a<(c||[]).length;a++)e.push(c[a])})}},original:{count:sV,getItem:sR,appendData:ku},typedArray:{persistent:!(kq.getSource=function(){return this._source}),pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(c,a){c-=this._offset,a=a||[];for(var d=this._dimSize*c,b=0;b<this._dimSize;b++)a[b]=this._data[d+b];return a},appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}}};function sV(){return this._data.length}function sR(a){return this._data[a]}function ku(b){for(var a=0;a<b.length;a++)this._data.push(b[a])}adM={arrayRows:kw,objectRows:function(a,d,b,c){return null!=b?a[c]:a},keyedColumns:kw,original:function(c,d,b,e){var a=fE(c);return null!=b&&a instanceof Array?a[b]:a},typedArray:kw};function kw(a,c,b,d){return null!=b?a[b]:a}sP={arrayRows:sK,objectRows:function(b,a,c,d){return kz(b[a],this._dimensionInfos[a])},keyedColumns:sK,original:function(a,c,e,d){var b=a&&(null==a.value?a:a.value);return!this._rawData.pure&&function(a){return et(a)&&!(a instanceof Array)}(a)&&(this.hasItemOption=!0),kz(b instanceof Array?b[d]:b,this._dimensionInfos[c])},typedArray:function(a,c,d,b){return a[b]}};function sK(a,b,d,c){return kz(a[c],this._dimensionInfos[b])}function kz(a,b){var c=b&&b.type,d;return"ordinal"!==c?("time"===c&&"number"!=typeof a&&null!=a&&"-"!==a&&(a=+fl(a)),null==a||""===a?NaN:+a):(d=b&&b.ordinalMeta,d?d.parseAndCollect(a):a)}function ds(a,g,h){var c,d,e,f,b;if(a)if(c=a.getRawDataItem(g),null!=c)return f=a.getProvider().getSource().sourceFormat,b=a.getDimensionInfo(h),b&&(d=b.name,e=b.index),adM[f](c,g,e,d)}function sH(c,d,e){var b,a;if(c)if(b=c.getProvider().getSource().sourceFormat,b===dO||b===jt)return a=c.getRawDataItem(d),b!==dO||m(a)||(a=null),a?a[e]:void 0}adL=/\{@(.+?)\}/g,kD={getDataParams:function(b,e){var a=this.getData(e),k=this.getRawValue(b,e),i=a.getRawIndex(b),m=a.getName(b),n=a.getRawDataItem(b),h=a.getItemVisual(b,"color"),j=a.getItemVisual(b,"borderColor"),f=this.ecModel.getComponent("tooltip"),l=vL(f&&f.get("renderMode")),g=this.mainType,d="series"===g,c=a.userOutput;return{componentType:g,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:d?this.subType:null,seriesIndex:this.seriesIndex,seriesId:d?this.id:null,seriesName:d?this.name:null,name:m,dataIndex:i,data:n,dataType:e,value:k,color:h,borderColor:j,dimensionNames:c?c.dimensionNames:null,encode:c?c.encode:null,marker:iX({color:h,renderMode:l}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(d,c,i,e,g){var f,h,a,b;return c=c||"normal",f=this.getData(i),h=f.getItemModel(d),a=this.getDataParams(d,i),null!=e&&a.value instanceof Array&&(a.value=a.value[e]),b=h.get("normal"===c?[g||"label","formatter"]:[c,g||"label","formatter"]),"function"==typeof b?(a.status=c,a.dimensionIndex=e,b(a)):"string"==typeof b?jV(b,a).replace(adL,function(c,a){var b=a.length;return"["===a.charAt(0)&&"]"===a.charAt(b-1)&&(a=+a.slice(1,b-1)),ds(f,d,a)}):void 0},getRawValue:function(a,b){return ds(this.getData(b),a)},formatTooltip:function(){}};function fn(a){return new sF(a)}function sF(a){a=a||{},this._reset=a.reset,this._plan=a.plan,this._count=a.count,this._onDirty=a.onDirty,this._dirty=!0,this.context}cz=sF.prototype,cz.perform=function(a){var j,e=this._upstream,i=a&&a.skip,o,n,p,q,g,f,m,h,c,d,k,r;this._dirty&&e&&(o=this.context,o.data=o.outputData=e.context.outputData),this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!i&&(j=this._plan(this.context)),p=l(this._modBy),q=this._modDataCount||0,g=l(a&&a.modBy),f=a&&a.modDataCount||0;function l(a){return 1<=a||(a=1),a}if(p===g&&q===f||(j="reset"),!this._dirty&&"reset"!==j||(this._dirty=!1,n=function(a,f){var c,d,e;return a._dueIndex=a._outputDueEnd=a._dueEnd=0,a._settedOutputEnd=null,!f&&a._reset&&((c=a._reset(a.context))&&c.progress&&(d=c.forceFirstProgress,c=c.progress),b(c)&&!c.length&&(c=null)),a._progress=c,a._modBy=a._modDataCount=null,e=a._downstream,e&&e.dirty(),d}(this,i)),this._modBy=g,this._modDataCount=f,m=a&&a.step,this._dueEnd=e?e._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){if(h=this._dueIndex,c=Math.min(null!=m?this._dueIndex+m:1/0,this._dueEnd),!i&&(n||h<c))if(d=this._progress,b(d))for(k=0;k<d.length;k++)sv(this,d[k],h,c,g,f);else sv(this,d,h,c,g,f);this._dueIndex=c,r=null!=this._settedOutputEnd?this._settedOutputEnd:c,this._outputDueEnd=r}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},sA=sB={reset:function(a,b,c,d){cy=a,kH=b,hK=c,hJ=d,kL=Math.ceil(hJ/hK),sB.next=1<hK&&0<hJ?adJ:adK}};function adK(){return cy<kH?cy++:null}function adJ(){var a=cy%kL*hK+Math.ceil(cy/kL),b=kH<=cy?null:a<hJ?a:cy;return cy++,b}function sv(a,d,b,c,e,f){sA.reset(b,c,e,f),a._callingProgress=d,a._callingProgress({start:b,end:c,count:c-b,next:sA.next},a.context)}cz.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},cz.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},cz.pipe=function(a){this._downstream===a&&!this._dirty||((this._downstream=a)._upstream=this,a.dirty())},cz.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},cz.getUpstream=function(){return this._upstream},cz.getDownstream=function(){return this._downstream},cz.setOutputEnd=function(a){this._outputDueEnd=this._settedOutputEnd=a},fC=au(),M=x.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(b,d,c,e){this.seriesIndex=this.componentIndex,this.dataTask=fn({count:adH,reset:adE}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(b,c),ts(this);var a=this.getInitialData(b,c);so(a,this),this.dataTask.context.data=a,fC(this).dataBeforeProcessed=a,su(this)},mergeDefaultAndTheme:function(a,d){var b=this.layoutMode,e=b?ec(a):{},c=this.subType;x.hasClass(c)&&(c+="Series"),l(a,d.getTheme().get(this.subType)),l(a,this.getDefaultOption()),dn(a,"label",["show"]),this.fillDataTextStyle(a.data),b&&cR(a,e,b)},mergeOption:function(a,d){var c,b;a=l(this.option,a,!0),this.fillDataTextStyle(a.data),c=this.layoutMode,c&&cR(this.option,a,c),ts(this),b=this.getInitialData(a,d),so(b,this),this.dataTask.dirty(),this.dataTask.context.data=b,fC(this).dataBeforeProcessed=b,su(this)},fillDataTextStyle:function(a){if(a&&!bu(a))for(var c=["show"],b=0;b<a.length;b++)a[b]&&a[b].label&&dn(a[b],"label",c)},getInitialData:function(){},appendData:function(a){this.getRawData().appendData(a.data)},getData:function(a){var b=kZ(this),c;return b?(c=b.context.data,null==a?c:c.getLinkedData(a)):fC(this).data},setData:function(a){var b=kZ(this),c;b&&(c=b.context,c.data!==a&&b.modifyOutputEnd&&b.setOutputEnd(a.count()),c.outputData=a,b!==this.dataTask&&(c.data=a)),fC(this).data=a},getSource:function(){return function(a){return dY(a).source}(this)},getRawData:function(){return fC(this).dataBeforeProcessed},getBaseAxis:function(){var a=this.coordinateSystem;return a&&a.getBaseAxis&&a.getBaseAxis()},formatTooltip:function(g,n,y,e){var r=this,x="html"===(e=e||"html")?"<br/>":"\n",u="richText"===e,h={},j=0,d,k,o,i,s,c,l,v,p,q,f,t;function w(a){return{renderMode:e,content:K(cN(a)),style:h}}return d=this.getData(),k=d.mapDimension("defaultedTooltip",!0),o=k.length,i=this.getRawValue(g),s=b(i),c=d.getItemVisual(g,"color"),m(c)&&c.colorStops&&(c=(c.colorStops[0]||{}).color),c=c||"transparent",l=(1<o||s&&!o?function(b){var f=eD(b,function(b,e,c){var a=d.getDimensionInfo(c);return b|(a&&!1!==a.tooltip&&null!=a.displayName)},0),i=[],m,o;function l(b,p){var a=d.getDimensionInfo(p),l,m,g,o,k;a&&!1!==a.otherDims.tooltip&&(l=a.type,m="sub"+r.seriesIndex+"at"+j,g=iX({color:c,type:"subItem",renderMode:e,markerId:m}),o="string"==typeof g?g:g.content,k=(f?o+K(a.displayName||"-")+": ":"")+K("ordinal"===l?b+"":"time"===l?n?"":jU("yyyy/MM/dd hh:mm:ss",b):cN(b)),k&&i.push(k),u&&(h[m]=c,++j))}return k.length?a(k,function(a){l(ds(d,g,a),a)}):a(b,l),m=f?u?"\n":"<br/>":"",o=m+i.join(m||", "),{renderMode:e,content:o,style:h}}(i):w(o?ds(d,g,k[0]):s?i[0]:i)).content,v=r.seriesIndex+"at"+j,p=iX({color:c,type:"item",renderMode:e,markerId:v}),h[v]=c,++j,q=d.getName(g),f=this.name,lV(this)||(f=""),f=f?K(f)+(n?": ":x):"",t="string"==typeof p?p:p.content,{html:n?t+f+l:f+t+(q?K(q)+": "+l:l),markers:h}},isAnimationEnabled:function(){if(t.node)return!1;var a=this.getShallow("animation");return a&&this.getData().count()>this.getShallow("animationThreshold")&&(a=!1),a},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(a,b,c){var e=this.ecModel,d=jz.getColorFromPalette.call(this,a,b,c);return d=d||e.getColorFromPalette(a,b,c)},coordDimToDataDim:function(a){return this.getRawData().mapDimension(a,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function su(b){var c=b.name;lV(b)||(b.name=function(d){var b=d.getRawData(),e=b.mapDimension("seriesName",!0),c=[];return a(e,function(d){var a=b.getDimensionInfo(d);a.displayName&&c.push(a.displayName)}),c.join(" ")}(b)||c)}function adH(a){return a.model.getRawData().count()}function adE(b){var a=b.model;return a.setData(a.getRawData().cloneShallow()),adD}function adD(b,a){b.end>a.outputData.count()&&a.model.getRawData().cloneShallow(a.outputData)}function so(b,c){a(b.CHANGABLE_METHODS,function(a){b.wrapMethod(a,j(adC,c))})}function adC(b){var a=kZ(b);a&&a.setOutputEnd(this.count())}function kZ(b){var c=(b.ecModel||{}).scheduler,d=c&&c.getPipeline(b.uid),a,e;if(d)return a=d.currentTask,a&&(e=a.agentStubMap,e&&(a=e.get(b.uid))),a}C(M,kD),C(M,jz),by=function(){this.group=new e,this.uid=eV("viewComponent")},by.prototype={constructor:by,init:function(a,b){},render:function(a,b,c,d){},dispose:function(){},filterForExposedEvent:null},k$=by.prototype,k$.updateView=k$.updateLayout=k$.updateVisual=function(a,b,c,d){},fa(by),is(by,{registerWhenExtend:!0});function er(){var a=au();return function(c){var b=a(c),d=c.pipelineContext,e=b.large,f=b.progressiveRender,g=b.large=d.large,h=b.progressiveRender=d.progressiveRender;return!!(e^g||f^h)&&"reset"}}sl=au(),adA=er();function ae(){this.group=new e,this.uid=eV("viewChart"),this.renderTask=fn({plan:adz,reset:ady}),this.renderTask.context={view:this}}le=ae.prototype={type:"chart",init:function(a,b){},render:function(a,b,c,d){},highlight:function(a,c,d,b){sf(a.getData(),b,"emphasis")},downplay:function(a,c,d,b){sf(a.getData(),b,"normal")},remove:function(a,b){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};function lf(a,c,d){if(a&&(a.trigger(c,d),a.isGroup&&!ur(a)))for(var b=0,e=a.childCount();b<e;b++)lf(a.childAt(b),c,d)}function sf(c,b,d){var e=iM(c,b),f=b&&null!=b.highlightKey?uq(b.highlightKey):null;null!=e?a(al(e),function(a){lf(c.getItemGraphicEl(a),d,f)}):c.eachItemGraphicEl(function(a){lf(a,d,f)})}function adz(a){return adA(a.model)}function ady(a){var f=a.model,i=a.ecModel,g=a.api,d=a.payload,h=f.pipelineContext.progressiveRender,e=a.view,b=d&&sl(d).updateMethod,c=h?"incrementalPrepareRender":b&&e[b]?b:"render";return"render"!==c&&e[c](f,i,g,d),adw[c]}le.updateView=le.updateLayout=le.updateVisual=function(a,b,c,d){this.render(a,b,c,d)},fa(ae),is(ae,{registerWhenExtend:!0}),ae.markUpdateMethod=function(a,b){sl(a).updateMethod=b},adw={incrementalPrepareRender:{progress:function(b,a){a.view.incrementalRender(b,a.model,a.ecModel,a.api,a.payload)}},render:{forceFirstProgress:!0,progress:function(b,a){a.view.render(a.model,a.ecModel,a.api,a.payload)}}},gJ="\0__throttleOriginMethod",r_="\0__throttleRate",rZ="\0__throttleType";function gG(m,c,l){var e,f,k,h,b,i=0,j=0,a=null;function d(){j=(new Date).getTime(),a=null,m.apply(k,h||[])}c=c||0;function g(){e=(new Date).getTime(),k=this,h=arguments;var g=b||c,m=b||l;b=null,f=e-(m?i:j)-g,clearTimeout(a),m?a=setTimeout(d,g):0<=f?d():a=setTimeout(d,-f),i=e}return g.clear=function(){a&&(clearTimeout(a),a=null)},g.debounceNextCall=function(a){b=a},g}function gB(d,e,b,c){var a=d[e],f,g;if(a){if(f=a[gJ]||a,g=a[rZ],a[r_]!==b||g!==c){if(null==b||!c)return d[e]=f;(a=d[e]=gG(f,b,"debounce"===c))[gJ]=f,a[rZ]=c,a[r_]=b}return a}}function rY(b,c){var a=b[c];a&&a[gJ]&&(b[c]=a[gJ])}adv={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,d){var b=a.getData(),e=(a.visualColorAccessPath||"itemStyle.color").split("."),c=a.get(e)||a.getColorFromPalette(a.name,null,d.getSeriesCount()),f,g;if(b.setVisual("color",c),f=(a.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),g=a.get(f),b.setVisual("borderColor",g),!d.isSeriesFiltered(a))return"function"!=typeof c||c instanceof bq||b.each(function(d){b.setItemVisual(d,"color",c(a.getDataParams(d)))}),{dataEach:b.hasItemOption?function(a,b){var c=a.getItemModel(b),d=c.get(e,!0),g=c.get(f,!0);null!=d&&a.setItemVisual(b,"color",d),null!=g&&a.setItemVisual(b,"borderColor",g)}:null}}},bM={legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}},afP=function(i,f){var c=f.getModel("aria"),d,g,h,l,m,j,k;c.get("show")&&(c.get("description")?i.setAttribute("aria-label",c.get("description")):(d=0,f.eachSeries(function(a,b){++d},this),h=c.get("data.maxCount")||10,l=c.get("series.maxCount")||10,m=Math.min(d,l),d<1||(j=function(){var a=f.getModel("title").option;return a&&a.length&&(a=a[0]),a&&a.text}(),g=j?e(b("general.withTitle"),{title:j}):b("general.withoutTitle"),k=[],g+=e(b(1<d?"series.multiple.prefix":"series.single.prefix"),{seriesCount:d}),f.eachSeries(function(f,p){var a,n,i,g,j,c,l,o;if(p<m){n=f.get("name"),i="series."+(1<d?"multiple":"single")+".",a=e(a=b(n?i+"withName":i+"withoutName"),{seriesId:f.seriesIndex,seriesName:f.get("name"),seriesType:function(a){return bM.series.typeNames[a]||""}(f.subType)}),g=f.getData(),(window.data=g).count()>h?a+=e(b("data.partialData"),{displayCnt:h}):a+=b("data.allData");for(j=[],c=0;c<g.count();c++)c<h&&(l=g.getName(c),o=ds(g,c),j.push(e(b(l?"data.withName":"data.withoutName"),{name:l,value:o})));a+=j.join(b("data.separator.middle"))+b("data.separator.end"),k.push(a)}}),g+=k.join(b("series.multiple.separator.middle"))+b("series.multiple.separator.end"),i.setAttribute("aria-label",g))));function e(b,d){if("string"!=typeof b)return b;var c=b;return a(d,function(a,b){c=c.replace(new RegExp("\\{\\s*"+b+"\\s*\\}","g"),a)}),c}function b(d){var e=c.get(d),f,a,b;if(null!=e)return e;for(f=d.split("."),a=bM.aria,b=0;b<f.length;++b)a=a[f[b]];return a}},gV=Math.PI;function gY(c,d,a,b){this.ecInstance=c,this.api=d,this.unfinished,a=this._dataProcessorHandlers=a.slice(),b=this._visualHandlers=b.slice(),this._allHandlers=a.concat(b),this._stageTaskMap=n()}aU=gY.prototype;function rW(c,g,h,e,b){var d;function f(a,b){return a.setDirty&&(!a.dirtyMap||a.dirtyMap.get(b.__pipeline.id))}b=b||{},a(g,function(g,n){var j,k,a,l,m,i;(!b.visualType||b.visualType===g.visualType)&&(j=c._stageTaskMap.get(g.uid),k=j.seriesTaskMap,a=j.overallTask,a?(m=a.agentStubMap,m.each(function(a){f(b,a)&&(a.dirty(),l=!0)}),l&&a.dirty(),rV(a,e),i=c.getPerformArgs(a,b.block),m.each(function(a){a.perform(i)}),d|=a.perform(i)):k&&k.each(function(a,j){f(b,a)&&a.dirty();var i=c.getPerformArgs(a,b.block);i.skip=!g.performRawSeries&&h.isSeriesFiltered(a.context.model),rV(a,e),d|=a.perform(i)}))}),c.unfinished|=d}aU.restoreData=function(a,b){a.restoreData(b),this._stageTaskMap.each(function(b){var a=b.overallTask;a&&a.dirty()})},aU.getPerformArgs=function(c,f){if(c.__pipeline){var a=this._pipelineMap.get(c.__pipeline.id),b=a.context,e=!f&&a.progressiveEnabled&&(!b||b.progressiveRender)&&c.__idxInPipeline>a.blockIndex?a.step:null,d=b&&b.modDataCount;return{step:e,modBy:null!=d?Math.ceil(d/e):null,modDataCount:d}}},aU.getPipeline=function(a){return this._pipelineMap.get(a)},aU.updateStreamModes=function(a,d){var b=this._pipelineMap.get(a.uid),c=a.getData().count(),e=b.progressiveEnabled&&d.incrementalPrepareRender&&c>=b.threshold,f=a.get("large")&&c>=a.get("largeThreshold"),g="mod"===a.get("progressiveChunkMode")?c:null;a.pipelineContext=b.context={progressiveRender:e,modDataCount:g,large:f}},aU.restorePipelines=function(b){var a=this,c=a._pipelineMap=n();b.eachSeries(function(b){var d=b.getProgressive(),e=b.uid;c.set(e,{id:e,head:null,tail:null,threshold:b.getProgressiveThreshold(),progressiveEnabled:d&&!(b.preventIncremental&&b.preventIncremental()),blockIndex:-1,step:Math.round(d||700),count:0}),hO(a,b,b.dataTask)})},aU.prepareStageTasks=function(){var b=this._stageTaskMap,c=this.ecInstance.getModel(),d=this.api;a(this._allHandlers,function(e){var f=b.get(e.uid)||b.set(e.uid,[]);e.reset&&function(d,a,i,b,f){var c=i.seriesTaskMap||(i.seriesTaskMap=n()),g=a.seriesType,h=a.getTargetSeries,j;a.createOnAllSeries?b.eachRawSeries(e):g?b.eachRawSeriesByType(g,e):h&&h(b,f).each(e);function e(e){var g=e.uid,h=c.get(g)||c.set(g,fn({plan:adq,reset:adp,count:adn}));h.context={model:e,ecModel:b,api:f,useClearVisual:a.isVisual&&!a.isLayout,plan:a.plan,reset:a.reset,scheduler:d},hO(d,e,h)}j=d._pipelineMap,c.each(function(b,a){j.get(a)||(b.dispose(),c.removeKey(a))})}(this,e,f,c,d),e.overallReset&&function(h,d,l,e,k){var b=l.overallTask=l.overallTask||fn({reset:adu}),c,i,j,g,m,o;b.context={ecModel:e,api:k,overallReset:d.overallReset,scheduler:h},c=b.agentStubMap=b.agentStubMap||n(),i=d.seriesType,j=d.getTargetSeries,g=!0,m=d.modifyOutputEnd,i?e.eachRawSeriesByType(i,f):j?j(e,k).each(f):(g=!1,a(e.getSeries(),f));function f(d){var e=d.uid,a=c.get(e);a||(a=c.set(e,fn({reset:adt,onDirty:adr})),b.dirty()),a.context={model:d,overallProgress:g,modifyOutputEnd:m},a.agent=b,a.__block=g,hO(h,d,a)}o=h._pipelineMap,c.each(function(d,a){o.get(a)||(d.dispose(),b.dirty(),c.removeKey(a))})}(this,e,f,c,d)},this)},aU.prepareView=function(c,d,e,f){var a=c.renderTask,b=a.context;b.model=d,b.ecModel=e,b.api=f,a.__block=!c.incrementalPrepareRender,hO(this,d,a)},aU.performDataProcessorTasks=function(a,b){rW(this,this._dataProcessorHandlers,a,b,{block:!0})},aU.performVisualTasks=function(a,b,c){rW(this,this._visualHandlers,a,b,c)},aU.performSeriesTasks=function(b){var a;b.eachSeries(function(b){a|=b.dataTask.perform()}),this.unfinished|=a},aU.plan=function(){this._pipelineMap.each(function(b){var a=b.tail;do{if(a.__block){b.blockIndex=a.__idxInPipeline;break}a=a.getUpstream()}while(a)})},rV=aU.updatePayload=function(b,a){"remain"!==a&&(b.context.payload=a)};function adu(a){a.overallReset(a.ecModel,a.api,a.payload)}function adt(a,b){return a.overallProgress&&ads}function ads(){this.agent.dirty(),this.getDownstream().dirty()}function adr(){this.agent&&this.agent.dirty()}function adq(a){return a.plan&&a.plan(a.model,a.ecModel,a.api,a.payload)}function adp(a){a.useClearVisual&&a.data.clearAllVisual();var b=a.resetDefines=al(a.reset(a.model,a.ecModel,a.api,a.payload));return 1<b.length?c(b,function(b,a){return rR(a)}):ado}ado=rR(0);function rR(a){return function(c,e){var f=e.data,b=e.resetDefines[a],d;if(b&&b.dataEach)for(d=c.start;d<c.end;d++)b.dataEach(f,d);else b&&b.progress&&b.progress(c,f)}}function adn(a){return a.data.count()}function hO(c,d,b){var e=d.uid,a=c._pipelineMap.get(e);a.head||(a.head=b),a.tail&&a.tail.pipe(b),(a.tail=b).__idxInPipeline=a.count++,b.__pipeline=a}gY.wrapStageHandler=function(a,b){return ag(a)&&(a={overallReset:a,seriesType:function(a){hP=null;try{a(fq,rQ)}catch(a){}return hP}(a)}),a.uid=eV("stageHandler"),b&&(a.visualType=b),a},fq={},rQ={};function rP(a,b){for(var c in b.prototype)a[c]=aa}rP(fq,jN),rP(rQ,th),fq.eachSeriesByType=fq.eachRawSeriesByType=function(a){hP=a},fq.eachComponent=function(a){"series"===a.mainType&&a.subType&&(hP=a.subType)};function hW(){return{axisLine:{lineStyle:{color:ai}},axisTick:{lineStyle:{color:ai}},axisLabel:{textStyle:{color:ai}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:ai}}}}rO=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],adm={color:rO,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],rO]},ai="#eee",lQ=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],rK={color:lQ,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:ai},crossStyle:{color:ai}}},legend:{textStyle:{color:ai}},textStyle:{color:ai},title:{textStyle:{color:ai}},toolbox:{iconStyle:{normal:{borderColor:ai}}},dataZoom:{textStyle:{color:ai}},visualMap:{textStyle:{color:ai}},timeline:{lineStyle:{color:ai},itemStyle:{normal:{color:lQ[1]}},label:{normal:{textStyle:{color:ai}}},controlStyle:{normal:{color:ai,borderColor:ai}}},timeAxis:hW(),logAxis:hW(),valueAxis:hW(),categoryAxis:hW(),line:{symbol:"circle"},graph:{color:lQ},gauge:{title:{textStyle:{color:ai}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}},rK.categoryAxis.splitLine.show=!1,x.extend({type:"dataset",defaultOption:{seriesLayoutBy:tt,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){!function(f){var a=f.option.source,c=tw,d,h,e,g;if(bu(a))c=jq;else if(b(a)){{0===a.length&&(c=gy);for(d=0,h=a.length;d<h;d++)if(e=a[d],null!=e){if(b(e)){c=gy;break}if(m(e)){c=jt;break}}}}else if(m(a)){for(g in a)if(a.hasOwnProperty(g)&&bL(a[g])){c=js;break}}else if(null!=a)throw new Error("Invalid data");dY(f).sourceFormat=c}(this)}}),by.extend({type:"dataset"}),adl=s.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(e,f){var a=f.cx,b=f.cy,c=f.rx,d=f.ry,g=.5522848*c,h=.5522848*d;e.moveTo(a-c,b),e.bezierCurveTo(a-c,b-h,a-g,b-d,a,b-d),e.bezierCurveTo(a+g,b-d,a+c,b-h,a+c,b),e.bezierCurveTo(a+c,b+h,a+g,b+d,a,b+d),e.bezierCurveTo(a-g,b+d,a-c,b+h,a-c,b),e.closePath()}}),ct=/[\s,]+/;function rH(a){E(a)&&(a=(new DOMParser).parseFromString(a,"text/xml"));for(9===a.nodeType&&(a=a.firstChild);"svg"!==a.nodeName.toLowerCase()||1!==a.nodeType;)a=a.nextSibling;return a}function iO(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}iO.prototype.parse=function(m,f){var d,b,l,c,a,h,i,j,g,k;if(f=f||{},d=rH(m),!d)throw new Error("Illegal svg");b=new e,this._root=b,l=d.getAttribute("viewBox")||"",c=parseFloat(d.getAttribute("width")||f.width),a=parseFloat(d.getAttribute("height")||f.height),isNaN(c)&&(c=null),isNaN(a)&&(a=null),aK(d,b,null,!0);for(h,i,j=d.firstChild;j;)this._parseNode(j,b),j=j.nextSibling;return l&&(g=aV(l).split(ct),4<=g.length&&(h={x:parseFloat(g[0]||0),y:parseFloat(g[1]||0),width:parseFloat(g[2]),height:parseFloat(g[3])})),h&&null!=c&&null!=a&&(i=rf(h,c,a),!f.ignoreViewBox)&&(k=b,(b=new e).add(k),k.scale=i.scale.slice(),k.position=i.position.slice()),f.ignoreRootClip||null==c||null==a||b.setClipPath(new y({shape:{x:0,y:0,width:c,height:a}})),{root:b,width:c,height:a,viewBoxRect:h,viewBoxTransform:i}},iO.prototype._parseNode=function(c,g){var d,e,b=c.nodeName.toLowerCase(),h,f,a;"defs"===b?this._isDefine=!0:"text"===b&&(this._isText=!0),this._isDefine?(e=adj[b])&&(h=e.call(this,c),f=c.getAttribute("id"),f&&(this._defs[f]=h)):(e=adk[b])&&(d=e.call(this,c,g),g.add(d));for(a=c.firstChild;a;)1===a.nodeType&&this._parseNode(a,d),3===a.nodeType&&this._isText&&this._parseText(a,d),a=a.nextSibling;"defs"===b?this._isDefine=!1:"text"===b&&(this._isText=!1)},iO.prototype._parseText=function(b,d){var e,f,a,c,g;return 1===b.nodeType&&(e=b.getAttribute("dx")||0,f=b.getAttribute("dy")||0,this._textX+=parseFloat(e),this._textY+=parseFloat(f)),a=new q({style:{text:b.textContent,transformText:!0},position:[this._textX||0,this._textY||0]}),aX(d,a),aK(b,a,this._defs),c=a.style.fontSize,c&&c<9&&(a.style.fontSize=9,a.scale=a.scale||[1,1],a.scale[0]*=c/9,a.scale[1]*=c/9),g=a.getBoundingRect(),this._textX+=g.width,d.add(a),a},adk={g:function(b,c){var a=new e;return aX(c,a),aK(b,a,this._defs),a},rect:function(a,c){var b=new y;return aX(c,b),aK(a,b,this._defs),b.setShape({x:parseFloat(a.getAttribute("x")||0),y:parseFloat(a.getAttribute("y")||0),width:parseFloat(a.getAttribute("width")||0),height:parseFloat(a.getAttribute("height")||0)}),b},circle:function(a,c){var b=new bI;return aX(c,b),aK(a,b,this._defs),b.setShape({cx:parseFloat(a.getAttribute("cx")||0),cy:parseFloat(a.getAttribute("cy")||0),r:parseFloat(a.getAttribute("r")||0)}),b},line:function(a,c){var b=new av;return aX(c,b),aK(a,b,this._defs),b.setShape({x1:parseFloat(a.getAttribute("x1")||0),y1:parseFloat(a.getAttribute("y1")||0),x2:parseFloat(a.getAttribute("x2")||0),y2:parseFloat(a.getAttribute("y2")||0)}),b},ellipse:function(a,c){var b=new adl;return aX(c,b),aK(a,b,this._defs),b.setShape({cx:parseFloat(a.getAttribute("cx")||0),cy:parseFloat(a.getAttribute("cy")||0),rx:parseFloat(a.getAttribute("rx")||0),ry:parseFloat(a.getAttribute("ry")||0)}),b},polygon:function(c,d){var a=c.getAttribute("points"),b;return a=a&&rz(a),b=new aF({shape:{points:a||[]}}),aX(d,b),aK(c,b,this._defs),b},polyline:function(b,d){var c=new s,a;return aX(d,c),aK(b,c,this._defs),a=b.getAttribute("points"),a=a&&rz(a),new aZ({shape:{points:a||[]}})},image:function(a,c){var b=new ad;return aX(c,b),aK(a,b,this._defs),b.setStyle({image:a.getAttribute("xlink:href"),x:a.getAttribute("x"),y:a.getAttribute("y"),width:a.getAttribute("width"),height:a.getAttribute("height")}),b},text:function(a,c){var d=a.getAttribute("x")||0,f=a.getAttribute("y")||0,g=a.getAttribute("dx")||0,h=a.getAttribute("dy")||0,b;return this._textX=parseFloat(d)+parseFloat(g),this._textY=parseFloat(f)+parseFloat(h),b=new e,aX(c,b),aK(a,b,this._defs),b},tspan:function(a,f){var c=a.getAttribute("x"),d=a.getAttribute("y"),g,h,b;return null!=c&&(this._textX=parseFloat(c)),null!=d&&(this._textY=parseFloat(d)),g=a.getAttribute("dx")||0,h=a.getAttribute("dy")||0,b=new e,aX(f,b),aK(a,b,this._defs),this._textX+=g,this._textY+=h,b},path:function(b,c){var a=uX(b.getAttribute("d")||"");return aX(c,a),aK(b,a,this._defs),a}},adj={lineargradient:function(a){var c=parseInt(a.getAttribute("x1")||0,10),d=parseInt(a.getAttribute("y1")||0,10),e=parseInt(a.getAttribute("x2")||10,10),f=parseInt(a.getAttribute("y2")||0,10),b=new dh(c,d,e,f);return function(c,d){for(var a=c.firstChild,b,e;a;)1===a.nodeType&&(b=a.getAttribute("offset"),b=0<b.indexOf("%")?parseInt(b,10)/100:b?parseFloat(b):0,e=a.getAttribute("stop-color")||"#000000",d.addColorStop(b,e)),a=a.nextSibling}(a,b),b},radialgradient:function(a){}};function aX(a,b){a&&a.__inheritedStyle&&(b.__inheritedStyle||(b.__inheritedStyle={}),g(b.__inheritedStyle,a.__inheritedStyle))}function rz(d){for(var b=aV(d).split(ct),c=[],a=0,e,f;a<b.length;a+=2)e=parseFloat(b[a]),f=parseFloat(b[a+1]),c.push([e,f]);return c}eu={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function aK(e,c,j,m){var b=c.__inheritedStyle||{},h="text"===c.type,i,k,l,g,d;if(1===e.nodeType&&(function(g,f){var c=g.getAttribute("transform"),b,d,e,a,h;if(c){c=c.replace(/,/g," "),b=null,d=[],c.replace(adh,function(c,a,b){d.push(a,b)});for(e=d.length-1;0<e;e-=2)switch(a=d[e],h=d[e-1],b=b||aL(),h){case"translate":a=aV(a).split(ct),be(b,b,[parseFloat(a[0]),parseFloat(a[1]||0)]);break;case"scale":a=aV(a).split(ct),fZ(b,b,[parseFloat(a[0]),parseFloat(a[1]||a[0])]);break;case"rotate":a=aV(a).split(ct),cc(b,b,parseFloat(a[0]));break;case"skew":a=aV(a).split(ct),console.warn("Skew transform is not supported yet");break;case"matrix":a=aV(a).split(ct),b[0]=parseFloat(a[0]),b[1]=parseFloat(a[1]),b[2]=parseFloat(a[2]),b[3]=parseFloat(a[3]),b[4]=parseFloat(a[4]),b[5]=parseFloat(a[5])}f.setLocalTransform(b)}}(e,c),f(b,function(f){var e=f.getAttribute("style"),b={},c,d,a;if(!e)return b;for(d={},ri.lastIndex=0;null!=(c=ri.exec(e));)d[c[1]]=c[2];for(a in eu)eu.hasOwnProperty(a)&&null!=d[a]&&(b[eu[a]]=d[a]);return b}(e)),!m))for(i in eu)eu.hasOwnProperty(i)&&(k=e.getAttribute(i),null!=k&&(b[eu[i]]=k));l=h?"textFill":"fill",g=h?"textStroke":"stroke",c.style=c.style||new cO,d=c.style,null!=b.fill&&d.set(l,rv(b.fill,j)),null!=b.stroke&&d.set(g,rv(b.stroke,j)),a(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(a){var c="lineWidth"===a&&h?"textStrokeWidth":a;null!=b[a]&&d.set(c,parseFloat(b[a]))}),b.textBaseline&&"auto"!==b.textBaseline||(b.textBaseline="alphabetic"),"alphabetic"===b.textBaseline&&(b.textBaseline="bottom"),"start"===b.textAlign&&(b.textAlign="left"),"end"===b.textAlign&&(b.textAlign="right"),a(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(a){null!=b[a]&&d.set(a,b[a])}),b.lineDash&&(c.style.lineDash=aV(b.lineDash).split(ct)),d[g]&&"none"!==d[g]&&(c[g]=!0),c.__inheritedStyle=b}adi=/url\(\s*#(.*?)\)/;function rv(a,b){var c=b&&a&&a.match(adi);return c?b[aV(c[1])]:a}adh=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g,ri=/([^\s:;]+)\s*:\s*([^:;]+)/g;function rf(a,c,d){var e=c/a.width,f=d/a.height,b=Math.min(e,f);return{scale:[b,b],position:[-(a.x+a.width/2)*b+c/2,-(a.y+a.height/2)*b+d/2]}}pt=n(),jx={registerMap:function(f,c,d){var e;return a(e=b(c)?c:c.svg?[{type:"svg",source:c.svg,specialAreas:c.specialAreas}]:(c.geoJson&&!c.features&&(d=c.specialAreas,c=c.geoJson),[{type:"geoJSON",source:c,specialAreas:d}]),function(a){var b=a.type;"geoJson"===b&&(b=a.type="geoJSON"),(0,adg[b])(a)}),pt.set(f,e)},retrieveMap:function(a){return pt.get(a)}},adg={geoJSON:function(b){var a=b.source;b.geoJSON=E(a)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(a):new Function("return ("+a+");")():a},svg:function(a){a.svgXML=rH(a.source)}},ade=cg,ac=a,add=ag,fF=m,mm=x.parseClassType,bz={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:3500,COMPONENT:4e3,BRUSH:5e3}},bE="__flagInMainProcess",cK="__optionUpdated",qZ=/^[a-zA-Z0-9_]+$/;function d$(a,b){return function(c,d,e){!b&&this._disposed||(c=c&&c.toLowerCase(),Z.prototype[a].call(this,c,d,e))}}function gs(){Z.call(this)}function gt(d,a,b){var c,e;b=b||{},"string"==typeof a&&(a=qG[a]),this.id,this.group,this._dom=d,c=this._zr=mc(d,{renderer:b.renderer||"canvas",devicePixelRatio:b.devicePixelRatio,width:b.width,height:b.height}),this._throttledZrFlush=gG(k(c.flush,c),17),(a=i(a))&&sZ(a,!0),this._theme=a,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new aq,e=this._api=function(a){var b=a._coordSysMgr;return f(new th(a),{getCoordinateSystems:k(b.getCoordinateSystems,b),getComponentByElement:function(b){for(;b;){var c=b.__ecComponentInfo;if(null!=c)return a._model.getComponent(c.mainType,c.index);b=b.parent}}})}(this);function g(a,b){return a.__prio-b.__prio}h_(ji,g),h_(mN,g),this._scheduler=new gY(this,e,mN,ji),Z.call(this,this._ecEventProcessor=new mK),this._messageCenter=new gs,this._initEvents(),this.resize=k(this.resize,this),this._pendingActions=[],c.animation.on("frame",this._onframe,this),function(b,a){b.on("rendered",function(){a.trigger("rendered"),!b.animation.isFinished()||a[cK]||a._scheduler.unfinished||a._pendingActions.length||a.trigger("finished")})}(c,this),oK(this)}gs.prototype.on=d$("on",!0),gs.prototype.off=d$("off",!0),gs.prototype.one=d$("one",!0),C(gs,Z),A=gt.prototype;function qV(g,b,h){var c,d,e,a,f;if(!this._disposed){d=this._model,e=this._coordSysMgr.getCoordinateSystems(),b=iJ(d,b);for(a=0;a<e.length;a++)if(f=e[a],f[g]&&null!=(c=f[g](d,b,h)))return c}}A._onframe=function(){var a,c,d,b,e,f;if(!this._disposed)if(a=this._scheduler,this[cK])c=this[cK].silent,this[bE]=!0,gC(this),cQ.update.call(this),this[bE]=!1,this[cK]=!1,jw.call(this,c),ju.call(this,c);else if(a.unfinished){d=1,b=this._model,e=this._api,a.unfinished=!1;do f=+new Date,a.performSeriesTasks(b),a.performDataProcessorTasks(b),qT(this,b),a.performVisualTasks(b),mG(this,this._model,e,"remain"),d-=+new Date-f;while(0<d&&a.unfinished)a.unfinished||this._zr.flush()}},A.getDom=function(){return this._dom},A.getZr=function(){return this._zr},A.setOption=function(g,a,d){var b,e,f,c;this._disposed||((fF(a)&&(d=a.lazyUpdate,b=a.silent,a=a.notMerge),this[bE]=!0,!this._model||a)&&(e=new jZ(this._api),f=this._theme,c=this._model=new jN,c.scheduler=this._scheduler,c.init(null,null,f,e)),this._model.setOption(g,qO),d?(this[cK]={silent:b},this[bE]=!1):(gC(this),cQ.update.call(this),this._zr.flush(),this[cK]=!1,this[bE]=!1,jw.call(this,b),ju.call(this,b)))},A.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},A.getModel=function(){return this._model},A.getOption=function(){return this._model&&this._model.getOption()},A.getWidth=function(){return this._zr.getWidth()},A.getHeight=function(){return this._zr.getHeight()},A.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},A.getRenderedCanvas=function(a){if(t.canvasSupported)return(a=a||{}).pixelRatio=a.pixelRatio||1,a.backgroundColor=a.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(a)},A.getSvgDataUrl=function(){if(t.svgSupported){var b=this._zr;return a(b.storage.getDisplayList(),function(a){a.stopAnimation(!0)}),b.painter.pathToDataUrl()}},A.getDataURL=function(a){var c,d,b,e,f;if(!this._disposed)return c=(a=a||{}).excludeComponents,d=this._model,b=[],e=this,ac(c,function(a){d.eachComponent({mainType:a},function(c){var a=e._componentsMap[c.__viewId];a.group.ignore||(b.push(a),a.group.ignore=!0)})}),f="svg"===this._zr.painter.getType()?this.getSvgDataUrl():this.getRenderedCanvas(a).toDataURL("image/"+(a&&a.type||"png")),ac(b,function(a){a.group.ignore=!1}),f},A.getConnectedDataURL=function(b){var o,l,p,e,f,g,h,k,c,m,n,d,j;if(!this._disposed&&t.canvasSupported)return o=this.group,l=Math.min,p=Math.max,iY[o]?(e=1/0,f=1/0,g=-1/0,h=-1/0,k=[],c=b&&b.pixelRatio||1,a(dw,function(c,j){if(c.group===o){var d=c.getRenderedCanvas(i(b)),a=c.getDom().getBoundingClientRect();e=l(a.left,e),f=l(a.top,f),g=p(a.right,g),h=p(a.bottom,h),k.push({dom:d,left:a.left,top:a.top})}}),m=(g*=c)-(e*=c),n=(h*=c)-(f*=c),d=eA(),d.width=m,d.height=n,j=mc(d),b.connectedBackgroundColor&&j.add(new y({shape:{x:0,y:0,width:m,height:n},style:{fill:b.connectedBackgroundColor}})),ac(k,function(a){var b=new ad({style:{x:a.left*c-e,y:a.top*c-f,image:a.dom}});j.add(b)}),j.refreshImmediately(),d.toDataURL("image/"+(b&&b.type||"png"))):this.getDataURL(b)},A.convertToPixel=j(qV,"convertToPixel"),A.convertFromPixel=j(qV,"convertFromPixel"),A.containPixel=function(c,d){var b;if(!this._disposed)return a(c=iJ(this._model,c),function(e,c){0<=c.indexOf("Models")&&a(e,function(a){var e=a.coordinateSystem,f;e&&e.containPoint?b|=!!e.containPoint(d):"seriesModels"===c&&(f=this._chartsMap[a.__viewId],f&&f.containPoint&&(b|=f.containPoint(d,a)))},this)},this),!!b},A.getVisual=function(a,c){var b=(a=iJ(this._model,a,{defaultMainType:"series"})).seriesModel.getData(),d=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?b.indexOfRawIndex(a.dataIndex):null;return null!=d?b.getItemVisual(d,c):b.getVisual(c)},A.getViewOfComponentModel=function(a){return this._componentsMap[a.__viewId]},A.getViewOfSeriesModel=function(a){return this._chartsMap[a.__viewId]},cQ={prepareAndUpdate:function(a){gC(this),cQ.update.call(this,a)},update:function(b){var a=this._model,c=this._api,h=this._zr,f=this._coordSysMgr,d=this._scheduler,e,g;a&&(d.restoreData(a,b),d.performSeriesTasks(a),f.create(a,c),d.performDataProcessorTasks(a,b),qT(this,a),f.update(a,c),mE(a),d.performVisualTasks(a,b),qQ(this,a,c,b),e=a.get("backgroundColor")||"transparent",t.canvasSupported?h.setBackgroundColor(e):(g=aG(e),e=bU(g,"rgb"),0===g[3]&&(e="transparent")),mH(a,c))},updateTransform:function(b){var a=this._model,d=this,e=this._api,f,c;a&&(f=[],a.eachComponent(function(i,g){var c=d.getViewOfComponentModel(g),h;c&&c.__alive&&(c.updateTransform?(h=c.updateTransform(g,a,e,b),h&&h.update&&f.push(c)):f.push(c))}),c=n(),a.eachSeries(function(f){var g=d._chartsMap[f.__viewId],h;g.updateTransform?(h=g.updateTransform(f,a,e,b),h&&h.update&&c.set(f.uid,1)):c.set(f.uid,1)}),mE(a),this._scheduler.performVisualTasks(a,b,{setDirty:!0,dirtyMap:c}),mG(d,a,e,b,c),mH(a,this._api))},updateView:function(b){var a=this._model;a&&(ae.markUpdateMethod(b,"updateView"),mE(a),this._scheduler.performVisualTasks(a,b,{setDirty:!0}),qQ(this,this._model,this._api,b),mH(a,this._api))},updateVisual:function(a){cQ.update.call(this,a)},updateLayout:function(a){cQ.update.call(this,a)}};function gC(b){var c=b._model,a=b._scheduler;a.restorePipelines(c),a.prepareStageTasks(),qR(b,"component",c,a),qR(b,"chart",c,a),a.plan()}function qU(b,g,c,a,h){var f=b._model,e,i,d;a?(e={},e[a+"Id"]=c[a+"Id"],e[a+"Index"]=c[a+"Index"],e[a+"Name"]=c[a+"Name"],i={mainType:a,query:e},h&&(i.subType=h),d=c.excludeSeriesId,null!=d&&(d=n(al(d))),f&&f.eachComponent(i,function(c){d&&null!=d.get(c.id)||j(b["series"===a?"_chartsMap":"_componentsMap"][c.__viewId])},b)):ac(b._componentsViews.concat(b._chartsViews),j);function j(a){a&&a.__alive&&a[g]&&a[g](a.__model,f,b._api,c)}}function qT(a,b){var c=a._chartsMap,d=a._scheduler;b.eachSeries(function(a){d.updateStreamModes(a,c[a.__viewId])})}function qS(b,p){var e=b.type,o=b.escapeConnect,n=jo[e],i=n.actionInfo,a=(i.update||"update").split(":"),h=a.pop(),m,k,d,j,l;a=null!=a[0]&&mm(a[0]),this[bE]=!0,m=[b],k=!1,b.batch&&(k=!0,m=c(b.batch,function(a){return(a=g(f({},a),b)).batch=null,a})),j=[],l="highlight"===e||"downplay"===e,ac(m,function(b){(d=(d=n.action(b,this._model,this._api))||f({},b)).type=i.event||d.type,j.push(d),l?qU(this,h,b,"series"):a&&qU(this,h,b,a.main,a.sub)},this),"none"===h||l||a||(this[cK]?(gC(this),cQ.update.call(this,b),this[cK]=!1):cQ[h].call(this,b)),d=k?{type:i.event||e,escapeConnect:o,batch:j}:j[0],this[bE]=!1,p||this._messageCenter.trigger(d.type,d)}function jw(b){for(var a=this._pendingActions,c;a.length;)c=a.shift(),qS.call(this,c,b)}function ju(a){a||this.trigger("updated")}function qR(c,k,f,l){for(var d="component"===k,e=d?c._componentsViews:c._chartsViews,g=d?c._componentsMap:c._chartsMap,i=c._zr,h=c._api,a=0,b;a<e.length;a++)e[a].__alive=!1;function j(b){var c="_ec_"+b.id+"_"+b.type,a=g[c],j;a||(j=mm(b.type),(a=new(d?by.getClass(j.main,j.sub):ae.getClass(j.sub))).init(f,h),g[c]=a,e.push(a),i.add(a.group)),b.__viewId=a.__id=c,a.__alive=!0,a.__model=b,a.group.__ecComponentInfo={mainType:b.mainType,index:b.componentIndex},d||l.prepareView(a,b,f,h)}d?f.eachComponent(function(a,b){"series"!==a&&j(b)}):f.eachSeries(j);for(a=0;a<e.length;)b=e[a],b.__alive?a++:(d||b.renderTask.dispose(),i.remove(b.group),b.dispose(f,h),e.splice(a,1),delete g[b.__id],b.__id=b.group.__ecComponentInfo=null)}function mE(a){a.clearColorPalette(),a.eachSeries(function(a){a.clearColorPalette()})}function qQ(a,b,c,d){!function(a,b,c,d,e){ac(e||a._componentsViews,function(a){var e=a.__model;a.render(e,b,c,d),qP(e,a)})}(a,b,c,d),ac(a._chartsViews,function(a){a.__alive=!1}),mG(a,b,c,d),ac(a._chartsViews,function(a){a.__alive||a.remove(b,c)})}function mG(a,b,g,f,d){var e,c=a._scheduler;b.eachSeries(function(b){var g=a._chartsMap[b.__viewId],h;g.__alive=!0,h=g.renderTask,c.updatePayload(h,f),d&&d.get(b.uid)&&h.dirty(),e|=h.perform(c.getPerformArgs(h)),g.group.silent=!!b.get("silent"),qP(b,g),function(b,c){var a=b.get("blendMode")||null;c.group.traverse(function(b){b.isGroup||b.style.blend!==a&&b.setStyle("blend",a),b.eachPendingDisplayable&&b.eachPendingDisplayable(function(b){b.setStyle("blend",a)})})}(b,g)}),c.unfinished|=e,function(a,b){var d=a._zr.storage,c=0;d.traverse(function(a){c++}),c>b.get("hoverLayerThreshold")&&!t.node&&b.eachSeries(function(b){if(!b.preventUsingHoverLayer){var c=a._chartsMap[b.__viewId];c.__alive&&c.group.traverse(function(a){a.useHoverLayer=!0})}})}(a,b),afP(a._zr.dom,b)}function mH(a,b){ac(qL,function(c){c(a,b)})}A.resize=function(a){var b,d,c;this._disposed||(this._zr.resize(a),b=this._model,(this._loadingFX&&this._loadingFX.resize(),b)&&(d=b.resetOption("media"),c=a&&a.silent,this[bE]=!0,d&&gC(this),cQ.update.call(this),this[bE]=!1,jw.call(this,c),ju.call(this,c)))},A.showLoading=function(a,b){if(!this._disposed&&(fF(a)&&(b=a,a=""),a=a||"default",this.hideLoading(),mS[a])){var c=mS[a](this._api,b),d=this._zr;this._loadingFX=c,d.add(c)}},A.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},A.makeActionFromEvent=function(a){var b=f({},a);return b.type=jj[a.type],b},A.dispatchAction=function(b,a){this._disposed||(fF(a)||(a={silent:!!a}),jo[b.type]&&this._model&&(this[bE]?this._pendingActions.push(b):(qS.call(this,b,a.silent),a.flush?this._zr.flush(!0):!1!==a.flush&&t.browser.weChat&&this._throttledZrFlush(),jw.call(this,a.silent),ju.call(this,a.silent))))},A.appendData=function(a){if(!this._disposed){var b=a.seriesIndex;this.getModel().getSeriesByIndex(b).appendData(a),this._scheduler.unfinished=!0}},A.on=d$("on",!1),A.off=d$("off",!1),A.one=d$("one",!1),adc=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function qP(a,d){var b=a.get("z"),c=a.get("zlevel");d.group.traverse(function(a){"group"!==a.type&&(null!=b&&(a.z=b),null!=c&&(a.zlevel=c))})}function mK(){this.eventInfo}A._initEvents=function(){ac(adc,function(a){function b(j){var b,h=this.getModel(),c=j.target,i,d,g,e,k;"globalout"===a?b={}:c&&null!=c.dataIndex?(i=c.dataModel||h.getSeriesByIndex(c.seriesIndex),b=i&&i.getDataParams(c.dataIndex,c.dataType,c)||{}):c&&c.eventData&&(b=f({},c.eventData)),b&&(d=b.componentType,g=b.componentIndex,"markLine"!==d&&"markPoint"!==d&&"markArea"!==d||(d="series",g=b.seriesIndex),e=d&&null!=g&&h.getComponent(d,g),k=e&&this["series"===e.mainType?"_chartsMap":"_componentsMap"][e.__viewId],b.event=j,b.type=a,this._ecEventProcessor.eventInfo={targetEl:c,packedEvent:b,model:e,view:k},this.trigger(a,b))}b.zrEventfulCallAtLast=!0,this._zr.on(a,b,this)},this),ac(jj,function(b,a){this._messageCenter.on(a,function(b){this.trigger(a,b)},this)},this)},A.isDisposed=function(){return this._disposed},A.clear=function(){this._disposed||this.setOption({series:[]},!0)},A.dispose=function(){if(!this._disposed){this._disposed=!0,vM(this.getDom(),mX,"");var a=this._api,b=this._model;ac(this._componentsViews,function(c){c.dispose(b,a)}),ac(this._chartsViews,function(c){c.dispose(b,a)}),this._zr.dispose(),delete dw[this.id]}},C(gt,Z),mK.prototype={constructor:mK,normalizeQuery:function(c){var b={},d={},e={},f,g,h;return E(c)?(f=mm(c),b.mainType=f.main||null,b.subType=f.sub||null):(g=["Index","Name","Id"],h={name:1,dataIndex:1,dataType:1},a(c,function(c,a){for(var f=!1,i=0,j,k,l;i<g.length;i++)j=g[i],k=a.lastIndexOf(j),0<k&&k===a.length-j.length&&(l=a.slice(0,k),"data"!==l&&(b.mainType=l,b[j.toLowerCase()]=c,f=!0));h.hasOwnProperty(a)&&(d[a]=c,f=!0),f||(e[a]=c)})),{cptQuery:b,dataQuery:d,otherQuery:e}},filter:function(i,f,k){var d=this.eventInfo,j,e,b,g,c,h;return!d||(!!(j=d.targetEl,e=d.packedEvent,b=d.model,g=d.view,!b||!g)||(c=f.cptQuery,h=f.dataQuery,a(c,b,"mainType")&&a(c,b,"subType")&&a(c,b,"index","componentIndex")&&a(c,b,"name")&&a(c,b,"id")&&a(h,e,"name")&&a(h,e,"dataIndex")&&a(h,e,"dataType")&&(!g.filterForExposedEvent||g.filterForExposedEvent(i,f.otherQuery,j,e))));function a(b,c,a,d){return null==b[a]||c[d||a]===b[a]}},afterTrigger:function(){this.eventInfo=null}},jo={},jj={},mN=[],qO=[],qL=[],ji=[],qG={},mS={},dw={},iY={},adb=new Date-0,ada=new Date-0,mX="_echarts_instance_";function qz(a){iY[a]=!1}ac_=qz;function m_(a){return dw[function(a,b){return a.getAttribute?a.getAttribute(b):a[b]}(a,mX)]}function m$(a,b){qG[a]=b}function aj(a){qO.push(a)}function aH(a,b){ng(mN,a,b,1e3)}function u(a,b,d){"function"==typeof b&&(d=b,b="");var c=fF(a)?a.type:[a,a={event:b}][0];a.event=(a.event||c).toLowerCase(),b=a.event,ade(qZ.test(c)&&qZ.test(b)),jo[c]||(jo[c]={action:d,actionInfo:a}),jj[b]=c}function nd(a,b){aq.register(a,b)}function N(a,b){ng(ji,a,b,1e3,"layout")}function H(a,b){ng(ji,a,b,3e3,"visual")}function ng(d,a,c,e,f){(add(a)||fF(a))&&(c=a,a=e);var b=gY.wrapStageHandler(c,f);return b.__prio=a,b.__raw=c,d.push(b),b}function qx(a,b){mS[a]=b}function aN(a){return x.extend(a)}function $(a){return by.extend(a)}function iq(a){return M.extend(a)}function ay(a){return ae.extend(a)}H(2e3,adv),aj(sZ),aH(900,function(b){var a=n();b.eachSeries(function(e){var f=e.get("stack"),c,b,d;if(f){if(c=a.get(f)||a.set(f,[]),b=e.getData(),d={stackResultDimension:b.getCalculationInfo("stackResultDimension"),stackedOverDimension:b.getCalculationInfo("stackedOverDimension"),stackedDimension:b.getCalculationInfo("stackedDimension"),stackedByDimension:b.getCalculationInfo("stackedByDimension"),isStackedByIndex:b.getCalculationInfo("isStackedByIndex"),data:b,seriesModel:e},!d.stackedDimension||!d.isStackedByIndex&&!d.stackedByDimension)return;c.length&&b.setCalculationInfo("stackedOnSeries",c[c.length-1].seriesModel),c.push(d)}}),a.each(adO)}),qx("default",function(d,a){var f,c,h,b;return g(a=a||{},{text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0}),f=new y({style:{fill:a.maskColor},zlevel:a.zlevel,z:1e4}),c=new lg({shape:{startAngle:-gV/2,endAngle:-gV/2+.1,r:10},style:{stroke:a.color,lineCap:"round",lineWidth:5},zlevel:a.zlevel,z:10001}),h=new y({style:{fill:"none",text:a.text,textPosition:"right",textDistance:10,textFill:a.textColor},zlevel:a.zlevel,z:10001}),c.animateShape(!0).when(1e3,{endAngle:3*gV/2}).start("circularInOut"),c.animateShape(!0).when(1e3,{startAngle:3*gV/2}).delay(300).start("circularInOut"),b=new e,b.add(c),b.add(h),b.add(f),b.resize=function(){var b=d.getWidth()/2,e=d.getHeight()/2,a;c.setShape({cx:b,cy:e}),a=c.shape.r,h.setShape({x:b-a,y:e-a,width:2*a,height:2*a}),f.setShape({x:0,y:0,width:d.getWidth(),height:d.getHeight()})},b.resize(),b}),u({type:"highlight",event:"highlight",update:"highlight"},aa),u({type:"downplay",event:"downplay",update:"downplay"},aa),m$("light",adm),m$("dark",rK);function qu(a){return a}function cb(a,b,c,d,e){this._old=a,this._new=b,this._oldKeyGetter=c||qu,this._newKeyGetter=d||qu,this.context=e}function qt(e,d,f,g,h){for(var a=0,c,b;a<e.length;a++)c="_ec_"+h[g](e[a],a),b=d[c],null==b?(f.push(c),d[c]=a):(b.length||(d[c]=b=[b]),b.push(a))}cb.prototype={constructor:cb,add:function(a){return this._add=a,this},update:function(a){return this._update=a,this},remove:function(a){return this._remove=a,this},execute:function(){var h=this._old,j=this._new,c={},i=[],f=[],b,d,a,g,e;for(qt(h,{},i,"_oldKeyGetter",this),qt(j,c,f,"_newKeyGetter",this),b=0;b<h.length;b++)null!=(a=c[d=i[b]])?((e=a.length)?(1===e&&(c[d]=null),a=a.shift()):c[d]=null,this._update&&this._update(a,b)):this._remove&&this._remove(b);for(b=0;b<f.length;b++)if(d=f[b],c.hasOwnProperty(d)){if(null==(a=c[d]))continue;if(a.length)for(g=0,e=a.length;g<e;g++)this._add&&this._add(a[g]);else this._add&&this._add(a)}}},qs=n(["tooltip","label","itemName","itemId","seriesName"]);function nq(a,b){return a.hasOwnProperty(b)||(a[b]=[]),a[b]}function ic(a){return"category"===a?"ordinal":"time"===a?"time":"float"}ib=m,fh="undefined",acZ={float:typeof Float64Array==fh?Array:Float64Array,int:typeof Int32Array==fh?Array:Int32Array,ordinal:Array,number:Array,time:Array},acY=typeof Uint32Array==fh?Array:Uint32Array,acW=typeof Int32Array==fh?Array:Int32Array,acV=typeof Uint16Array==fh?Array:Uint16Array;function hk(a){return 65535<a._rawCount?acY:acV}acT=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],acR=["_extent","_approximateExtent","_rawExtent"];function qm(c,b){a(acT.concat(b.__wrappedMethods||[]),function(a){b.hasOwnProperty(a)&&(c[a]=b[a])}),c.__wrappedMethods=b.__wrappedMethods,a(acR,function(a){c[a]=i(b[a])}),c._calculationInfo=f(b._calculationInfo)}ab=function(e,i){var f,g,h,d,b,c;e=e||["x","y"];for(f={},g=[],h={},d=0;d<e.length;d++)b=e[d],E(b)&&(b={name:b}),c=b.name,b.type=b.type||"float",b.coordDim||(b.coordDim=c,b.coordDimIndex=0),b.otherDims=b.otherDims||{},g.push(c),(f[c]=b).index=d,b.createInvertedIndices&&(h[c]=[]);this.dimensions=g,this._dimensionInfos=f,this.hostModel=i,this.dataType,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawData,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=function(f){var c={},b=c.encode={},k=n(),e=[],d=[],l=c.userOutput={dimensionNames:f.dimensions.slice(),encode:{}},h,j,g,i;return a(f.dimensions,function(c){var a=f.getDimensionInfo(c),g=a.coordDim,h;g&&(h=a.coordDimIndex,nq(b,g)[h]=c,a.isExtraCoord||(k.set(g,1),function(a){return!("ordinal"===a||"time"===a)}(a.type)&&(e[0]=c),nq(l.encode,g)[h]=a.index),a.defaultTooltip&&d.push(c)),qs.each(function(f,d){var e=nq(b,d),c=a.otherDims[d];null!=c&&!1!==c&&(e[c]=a.name)})}),h=[],j={},k.each(function(d,a){var c=b[a];j[a]=c[0],h=h.concat(c)}),c.dataDimsOnCoord=h,c.encodeFirstDimNotExtra=j,g=b.label,g&&g.length&&(e=g.slice()),i=b.tooltip,i&&i.length?d=i.slice():d.length||(d=e.slice()),b.defaultedLabel=e,b.defaultedTooltip=d,c}(this),this._invertedIndicesMap=h,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},h=ab.prototype;function qj(d,j,a,i,h){var l=acZ[j.type],g=i-1,e=j.name,c=d[e][g],k,b,f;if(c&&c.length<a){for(k=new l(Math.min(h-g*a,a)),b=0;b<c.length;b++)k[b]=c[b];d[e][g]=k}for(f=i*a;f<h;f+=a)d[e].push(new l(Math.min(h-f,a)))}function qi(b){var c=b._invertedIndicesMap;a(c,function(d,e){var f=b._dimensionInfos[e].ordinalMeta,a;if(f){d=c[e]=new acW(f.categories.length);for(a=0;a<d.length;a++)d[a]=-1;for(a=0;a<b._count;a++)d[b.get(e,a)]=a}})}function qf(a,d,e){var b,f,i,j,g,h,c;return null!=d&&(f=a._chunkSize,i=Math.floor(e/f),j=e%f,g=a.dimensions[d],h=a._storage[g][i],h&&(b=h[j],c=a._dimensionInfos[g].ordinalMeta,c&&c.categories.length&&(b=c.categories[b]))),b}function gb(a){return a}function gc(a){return a<this._count&&0<=a?this._indices[a]:-1}function nJ(b,c){var a=b._idList[c];return null==a&&(a=qf(b,b._idDimIdx,c)),null==a&&(a="e\0\0"+c),a}function nK(a){return b(a)||(a=[a]),a}function qc(b,i){var e=b.dimensions,d=new ab(c(e,b.getDimensionInfo,b),b.hostModel),h,f,g,a;qm(d,b);for(h=d._storage={},f=b._storage,g=0;g<e.length;g++)a=e[g],f[a]&&(0<=v(i,a)?(h[a]=acQ(f[a]),d._rawExtent[a]=gI(),d._extent[a]=null):h[a]=f[a]);return d}function acQ(c){for(var a,d,e=new Array(c.length),b=0;b<c.length;b++)e[b]=(a=c[b],d=void 0,(d=a.constructor)===Array?a.slice():new d(a));return e}function gI(){return[1/0,-1/0]}h.type="list",h.hasItemOption=!0,h.getDimension=function(a){return"number"!=typeof a&&(isNaN(a)||this._dimensionInfos.hasOwnProperty(a))||(a=this.dimensions[a]),a},h.getDimensionInfo=function(a){return this._dimensionInfos[this.getDimension(a)]},h.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},h.mapDimension=function(c,a){var d=this._dimensionsSummary,b;return null==a?d.encodeFirstDimNotExtra[c]:(b=d.encode[c],!0===a?(b||[]).slice():b&&b[a])},h.initData=function(a,c,b){(bj.isInstance(a)||bL(a))&&(a=new sW(a,this.dimensions.length)),this._rawData=a,this._storage={},this._indices=null,this._nameList=c||[],this._idList=[],this._nameRepeatCount={},b||(this.hasItemOption=!1),this.defaultDimValueGetter=sP[this._rawData.getSource().sourceFormat],this._dimValueGetter=b=b||this.defaultDimValueGetter,this._dimValueGetterArrayRows=sP.arrayRows,this._rawExtent={},this._initDataFromProvider(0,a.count()),a.pure&&(this.hasItemOption=!1)},h.getProvider=function(){return this._rawData},h.appendData=function(d){var a=this._rawData,b=this.count(),c;a.appendData(d),c=a.count(),a.persistent||(c+=b),this._initDataFromProvider(b,c)},h.appendValues=function(p,e){for(var m=this._chunkSize,d=this._storage,l=this.dimensions,k=l.length,j=this._rawExtent,h=this.count(),i=h+Math.max(p.length,e?e.length:0),t=this._chunkCount,o=0,s,b,n,r,q,g,a,c,f;o<k;o++)j[a=l[o]]||(j[a]=gI()),d[a]||(d[a]=[]),qj(d,this._dimensionInfos[a],m,t,i),this._chunkCount=d[a].length;for(s=new Array(k),b=h;b<i;b++){for(n=b-h,r=Math.floor(b/m),q=b%m,g=0;g<k;g++)a=l[g],c=this._dimValueGetterArrayRows(p[n]||s,a,n,g),d[a][r][q]=c,f=j[a],c<f[0]&&(f[0]=c),c>f[1]&&(f[1]=c);e&&(this._nameList[b]=e[n])}this._rawCount=this._count=i,this._extent={},qi(this)},h._initDataFromProvider=function(D,r){var o,s,g,e,m,q,w,x,B,n,h,A,j,t,d,b,v,u,l,c,C,f,k,a,y,z,p,i;if(!(r<=D)){for(o,s=this._chunkSize,g=this._rawData,e=this._storage,m=this.dimensions,q=m.length,w=this._dimensionInfos,x=this._nameList,B=this._idList,n=this._rawExtent,h=this._nameRepeatCount={},A=this._chunkCount,j=0;j<q;j++)n[c=m[j]]||(n[c]=gI()),t=w[c],0===t.otherDims.itemName&&(o=this._nameDimIdx=j),0===t.otherDims.itemId&&(this._idDimIdx=j),e[c]||(e[c]=[]),qj(e,t,s,A,r),this._chunkCount=e[c].length;for(d=new Array(q),b=D;b<r;b++){d=g.getItem(b,d);for(v=Math.floor(b/s),u=b%s,l=0;l<q;l++)C=e[c=m[l]][v],f=this._dimValueGetter(d,c,b,l),C[u]=f,k=n[c],f<k[0]&&(k[0]=f),f>k[1]&&(k[1]=f);g.pure||(a=x[b],d&&null==a&&(null!=d.name?x[b]=a=d.name:null!=o&&(y=m[o],z=e[y][v],z&&(a=z[u],p=w[y].ordinalMeta,p&&p.categories.length&&(a=p.categories[a])))),i=null==d?null:d.id,null==i&&null!=a&&(h[a]=h[a]||0,0<h[i=a]&&(i+="__ec__"+h[a]),h[a]++),null!=i&&(B[b]=i))}!g.persistent&&g.clean&&g.clean(),this._rawCount=this._count=r,this._extent={},qi(this)}},h.count=function(){return this._count},h.getIndices=function(){var c=this._indices,d,e,a,b;if(c)if(d=c.constructor,e=this._count,d===Array){b=new d(e);for(a=0;a<e;a++)b[a]=c[a]}else b=new d(c.buffer,0,e);else{b=new(d=hk(this))(this.count());for(a=0;a<b.length;a++)b[a]=a}return b},h.get=function(c,a){var b,d,e;return 0<=a&&a<this._count?(b=this._storage,!b[c])?NaN:(a=this.getRawIndex(a),d=Math.floor(a/this._chunkSize),e=a%this._chunkSize,b[c][d][e]):NaN},h.getByRawIndex=function(e,a){var b,c,d;return 0<=a&&a<this._rawCount?(b=this._storage[e],!b)?NaN:(c=Math.floor(a/this._chunkSize),d=a%this._chunkSize,b[c][d]):NaN},h._getFast=function(b,a){var c=Math.floor(a/this._chunkSize),d=a%this._chunkSize;return this._storage[b][c][d]},h.getValues=function(a,d){var e=[],c,f;b(a)||(d=a,a=this.dimensions);for(c=0,f=a.length;c<f;c++)e.push(this.get(a[c],d));return e},h.hasValue=function(c){for(var b=this._dimensionsSummary.dataDimsOnCoord,a=0,d=b.length;a<d;a++)if(isNaN(this.get(b[a],c)))return!1;return!0},h.getDataExtent=function(a){var i,g,b,h,e,f,d,c;if(a=this.getDimension(a),i=this._storage[a],g=gI(),!i)return g;if(h=this.count(),!this._indices)return this._rawExtent[a].slice();if(b=this._extent[a])return b.slice();for(e=(b=g)[0],f=b[1],d=0;d<h;d++)c=this._getFast(a,this.getRawIndex(d)),c<e&&(e=c),f<c&&(f=c);return b=[e,f],this._extent[a]=b},h.getApproximateExtent=function(a){return a=this.getDimension(a),this._approximateExtent[a]||this.getDataExtent(a)},h.setApproximateExtent=function(b,a){a=this.getDimension(a),this._approximateExtent[a]=b.slice()},h.getCalculationInfo=function(a){return this._calculationInfo[a]},h.setCalculationInfo=function(a,b){ib(a)?f(this._calculationInfo,a):this._calculationInfo[a]=b},h.getSum=function(b){var c=0,a,e,d;if(this._storage[b])for(a=0,e=this.count();a<e;a++)d=this.get(b,a),isNaN(d)||(c+=d);return c},h.getMedian=function(d){var c=[],b,a;return this.each(d,function(a,b){isNaN(a)||c.push(a)}),b=[].concat(c).sort(function(a,b){return a-b}),a=this.count(),0===a?0:a%2==1?b[(a-1)/2]:(b[a/2]+b[a/2-1])/2},h.rawIndexOf=function(b,c){var a=(b&&this._invertedIndicesMap[b])[c];return null==a||isNaN(a)?-1:a},h.indexOfName=function(b){for(var a=0,c=this.count();a<c;a++)if(this.getName(a)===b)return a;return-1},h.indexOfRawIndex=function(a){var c,d,e,f,b;if(a>=this._rawCount||a<0)return-1;if(!this._indices)return a;if(c=this._indices,d=c[a],null!=d&&d<this._count&&d===a)return a;for(e=0,f=this._count-1;e<=f;)if(b=(e+f)/2|0,c[b]<a)e=1+b;else{if(!(c[b]>a))return b;f=b-1}return-1},h.indicesOfNearest=function(h,i,e){var c=[],d,g,a,j,b,f;if(!this._storage[h])return c;null==e&&(e=1/0);for(d=Number.MAX_VALUE,g=-1,a=0,j=this.count();a<j;a++)b=i-this.get(h,a),f=Math.abs(b),b<=e&&f<=d&&((f<d||0<=b&&g<0)&&(d=f,g=b,c.length=0),c.push(a));return c},h.getRawIndex=gb,h.getRawDataItem=function(c){var b,a,d;if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(c));for(b=[],a=0;a<this.dimensions.length;a++)d=this.dimensions[a],b.push(this.get(d,c));return b},h.getName=function(b){var a=this.getRawIndex(b);return this._nameList[a]||qf(this,this._nameDimIdx,a)||""},h.getId=function(a){return nJ(this,this.getRawIndex(a))},h.each=function(b,e,d,i){var h,a,f,g;if(this._count){"function"==typeof b&&(i=d,d=e,e=b,b=[]),d=d||i||this;for(h=(b=c(nK(b),this.getDimension,this)).length,a=0;a<this.count();a++)switch(h){case 0:e.call(d,a);break;case 1:e.call(d,this.get(b[0],a),a);break;case 2:e.call(d,this.get(b[0],a),this.get(b[1],a),a);break;default:for(f=0,g=[];f<h;f++)g[f]=this.get(b[f],a);g[f]=a,e.apply(d,g)}}},h.filterSelf=function(a,e,b,o){var j,m,h,l,i,n,d,f,k,p,g;if(this._count){"function"==typeof a&&(o=b,b=e,e=a,a=[]),b=b||o||this,a=c(nK(a),this.getDimension,this);for(j=this.count(),m=new(hk(this))(j),h=[],l=a.length,i=0,n=a[0],d=0;d<j;d++){if(k=this.getRawIndex(d),0===l)f=e.call(b,d);else if(1===l)p=this._getFast(n,k),f=e.call(b,p,d);else{for(g=0;g<l;g++)h[g]=this._getFast(n,k);h[g]=d,f=e.apply(b,h)}f&&(m[i++]=k)}return i<j&&(this._indices=m),this._count=i,this._extent={},this.getRawIndex=this._indices?gc:gb,this}},h.selectRange=function(e){var d,m,g,i,h,f,j,r,q,p,l,n,b,o,t,a,z,y,x,w,c,s,k,u,v;if(this._count){d=[];for(m in e)e.hasOwnProperty(m)&&d.push(m);if(g=d.length,g){if(i=this.count(),h=new(hk(this))(i),f=0,j=d[0],r=e[j][0],q=e[j][1],p=!1,!this._indices)if(l=0,1===g){for(n=this._storage[d[0]],b=0;b<this._chunkCount;b++)for(o=n[b],t=Math.min(this._count-b*this._chunkSize,this._chunkSize),a=0;a<t;a++)(r<=(c=o[a])&&c<=q||isNaN(c))&&(h[f++]=l),l++;p=!0}else if(2===g){n=this._storage[j],z=this._storage[d[1]],y=e[d[1]][0],x=e[d[1]][1];for(b=0;b<this._chunkCount;b++){o=n[b],w=z[b];for(t=Math.min(this._count-b*this._chunkSize,this._chunkSize),a=0;a<t;a++)c=o[a],s=w[a],(r<=c&&c<=q||isNaN(c))&&(y<=s&&s<=x||isNaN(s))&&(h[f++]=l),l++}p=!0}if(!p)if(1===g)for(a=0;a<i;a++)k=this.getRawIndex(a),(r<=(c=this._getFast(j,k))&&c<=q||isNaN(c))&&(h[f++]=k);else for(a=0;a<i;a++){u=!0;for(k=this.getRawIndex(a),b=0;b<g;b++)v=d[b],((c=this._getFast(m,k))<e[v][0]||c>e[v][1])&&(u=!1);u&&(h[f++]=this.getRawIndex(a))}return f<i&&(this._indices=h),this._count=f,this._extent={},this.getRawIndex=this._indices?gc:gb,this}}},h.mapArray=function(b,c,a,d){"function"==typeof b&&(d=a,a=c,c=b,b=[]),a=a||d||this;var e=[];return this.each(b,function(){e.push(c&&c.apply(this,arguments))},a),e},h.map=function(h,v,o,x){var b,u,m,k,l,t,j,w,e,g,a,p,r,s,f,n,d,i,q;o=o||x||this,b=qc(this,h=c(nK(h),this.getDimension,this)),b._indices=this._indices,b.getRawIndex=b._indices?gc:gb;for(u=b._storage,m=[],k=this._chunkSize,l=h.length,t=this.count(),j=[],w=b._rawExtent,e=0;e<t;e++){for(g=0;g<l;g++)j[g]=this.get(h[g],e);if(j[l]=e,a=v&&v.apply(o,j),null!=a){"object"!=typeof a&&(m[0]=a,a=m);for(p=this.getRawIndex(e),r=Math.floor(p/k),s=p%k,f=0;f<a.length;f++)n=h[f],d=a[f],i=w[n],q=u[n],q&&(q[r][s]=d),d<i[0]&&(i[0]=d),d>i[1]&&(i[1]=d)}}return b},h.downSample=function(k,u,t,q){for(var a=qc(this,[k]),p=a._storage,g=[],c=Math.floor(1/u),l=p[k],e=this.count(),f=this._chunkSize,h=a._rawExtent[k],m=new(hk(this))(e),n=0,b=0,i,o,r,s,d,j,v;b<e;b+=c){e-b<c&&(c=e-b,g.length=c);for(i=0;i<c;i++)o=this.getRawIndex(b+i),r=Math.floor(o/f),s=o%f,g[i]=l[r][s];d=t(g),j=this.getRawIndex(Math.min(b+q(g,d)||0,e-1)),v=j%f,(l[Math.floor(j/f)][v]=d)<h[0]&&(h[0]=d),d>h[1]&&(h[1]=d),m[n++]=j}return a._count=n,a._indices=m,a.getRawIndex=gc,a},h.getItemModel=function(b){var a=this.hostModel;return new w(this.getRawDataItem(b),a,a&&a.ecModel)},h.diff=function(a){var b=this;return new cb(a?a.getIndices():[],this.getIndices(),function(b){return nJ(a,b)},function(a){return nJ(b,a)})},h.getVisual=function(b){var a=this._visual;return a&&a[b]},h.setVisual=function(a,c){if(ib(a))for(var b in a)a.hasOwnProperty(b)&&this.setVisual(b,a[b]);else this._visual=this._visual||{},this._visual[a]=c},h.setLayout=function(a,c){if(ib(a))for(var b in a)a.hasOwnProperty(b)&&this.setLayout(b,a[b]);else this._layout[a]=c},h.getLayout=function(a){return this._layout[a]},h.getItemLayout=function(a){return this._itemLayouts[a]},h.setItemLayout=function(a,b,c){this._itemLayouts[a]=c?f(this._itemLayouts[a]||{},b):b},h.clearItemLayouts=function(){this._itemLayouts.length=0},h.getItemVisual=function(d,a,e){var b=this._itemVisuals[d],c=b&&b[a];return null!=c||e?c:this.getVisual(a)},h.setItemVisual=function(d,a,f){var c=this._itemVisuals[d]||{},e=this.hasItemVisual,b;if(this._itemVisuals[d]=c,ib(a))for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b],e[b]=!0);else c[a]=f,e[a]=!0},h.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}};function acO(a){a.seriesIndex=this.seriesIndex,a.dataIndex=this.dataIndex,a.dataType=this.dataType}function pY(w,q,e){var l,s,r,x,c,v,d,p,t,b,k,u,o,A,h,y,B,j;bj.isInstance(q)||(q=bj.seriesDataToSource(q)),e=e||{},w=(w||[]).slice();for(l=(e.dimsDef||[]).slice(),s=n(e.encodeDef),r=n(),x=n(),c=[],v=function(d,c,e,f){var b=Math.max(d.dimensionsDetectCount||1,c.length,e.length,f||0);return a(c,function(c){var a=c.dimsDef;a&&(b=Math.max(b,a.length))}),b}(q,w,l,e.dimCount),d=0;d<v;d++)p=l[d]=f({},m(l[d])?l[d]:{name:l[d]}),t=p.name,b=c[d]={otherDims:{}},null!=t&&null==r.get(t)&&(b.name=b.displayName=t,r.set(t,d)),null!=p.type&&(b.type=p.type),null!=p.displayName&&(b.displayName=p.displayName);s.each(function(b,d){if(1===(b=al(b).slice()).length&&!E(b[0])&&b[0]<0)s.set(d,!1);else{var e=s.set(d,[]);a(b,function(a,b){E(a)&&(a=r.get(a)),null!=a&&a<v&&(e[b]=a,z(c[a],d,b))})}}),k=0;function z(b,a,c){null!=qs.get(a)?b.otherDims[a]=c:(b.coordDim=a,b.coordDimIndex=c,x.set(a,!0))}a(w,function(b,n){var f,d,h,l,e,j;if(E(b)?(f=b,b={}):(f=b.name,l=b.ordinalMeta,b.ordinalMeta=null,(b=i(b)).ordinalMeta=l,d=b.dimsDef,h=b.otherDims,b.name=b.coordDim=b.coordDimIndex=b.dimsDef=b.otherDims=null),!1!==(e=s.get(f))){if(!(e=al(e)).length)for(j=0;j<(d&&d.length||1);j++){for(;k<c.length&&null!=c[k].coordDim;)k++;k<c.length&&e.push(k++)}a(e,function(j,i){var a=c[j],e;z(g(a,b),f,i),null==a.name&&d&&(e=d[i],m(e)||(e={name:e}),a.name=a.displayName=e.name,a.defaultTooltip=e.defaultTooltip),h&&g(a.otherDims,h)})}}),u=e.generateCoord,o=e.generateCoordCount,A=null!=o,o=u?o||1:0;for(h,y,B=u||"value",j=0;j<v;j++)null==(b=c[j]=c[j]||{}).coordDim&&(b.coordDim=pX(B,x,A),b.coordDimIndex=0,(!u||o<=0)&&(b.isExtraCoord=!0),o--),null==b.name&&(b.name=pX(b.coordDim,r)),null==b.type&&(h=q,y=j,b.name,to(h.data,h.sourceFormat,h.seriesLayoutBy,h.dimensionsDefine,h.startIndex,y))&&(b.type="ordinal");return c}function pX(a,b,d){if(d||null!=b.get(a)){for(var c=0;null!=b.get(a+c);)c++;a+=c}return b.set(a,!0),a}h.setItemGraphicEl=function(b,a){var c=this.hostModel;a&&(a.dataIndex=b,a.dataType=this.dataType,a.seriesIndex=c&&c.seriesIndex,"group"===a.type&&a.traverse(acO,a)),this._graphicEls[b]=a},h.getItemGraphicEl=function(a){return this._graphicEls[a]},h.eachItemGraphicEl=function(b,c){a(this._graphicEls,function(a,d){a&&b&&b.call(c,a,d)})},h.cloneShallow=function(a){var b,d;return a||(b=c(this.dimensions,this.getDimensionInfo,this),a=new ab(b,this.hostModel)),(a._storage=this._storage,qm(a,this),this._indices)?(d=this._indices.constructor,a._indices=new d(this._indices)):a._indices=null,a.getRawIndex=a._indices?gc:gb,a},h.wrapMethod=function(a,c){var b=this[a];"function"==typeof b&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(a),this[a]=function(){var a=b.apply(this,arguments);return c.apply(this,[a].concat(oN(arguments)))})},h.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],h.CHANGABLE_METHODS=["filterSelf","selectRange"],ed=function(b,a){return pY((a=a||{}).coordDimensions||[],b,{dimsDef:a.dimensionsDefine||b.dimensionsDefine,encodeDef:a.encodeDefine||b.encodeDefine,dimCount:a.dimensionsCount,generateCoord:a.generateCoord,generateCoordCount:a.generateCoordCount})};function pW(m,d,i){var c,b,h,e,f=(i=i||{}).byIndex,j=i.stackedCoordDimension,n=!(!m||!m.get("stack")),k,l,g;return a(d,function(a,e){E(a)&&(d[e]=a={name:a}),n&&!a.isExtraCoord&&(f||c||!a.ordinalMeta||(c=a),b||"ordinal"===a.type||"time"===a.type||j&&j!==a.coordDim||(b=a))}),!b||f||c||(f=!0),b&&(h="__\0ecstackresult",e="__\0ecstackedover",c&&(c.createInvertedIndices=!0),k=b.coordDim,l=b.type,g=0,a(d,function(a){a.coordDim===k&&g++}),d.push({name:h,coordDim:k,coordDimIndex:g,type:l,isExtraCoord:!0,isCalculationCoord:!0}),g++,d.push({name:e,coordDim:e,coordDimIndex:g,type:l,isExtraCoord:!0,isCalculationCoord:!0})),{stackedDimension:b&&b.name,stackedByDimension:c&&c.name,isStackedByIndex:f,stackedOverDimension:e,stackResultDimension:h}}function bX(b,a){return!!a&&a===b.getCalculationInfo("stackedDimension")}function gp(a,b){return bX(a,b)?a.getCalculationInfo("stackResultDimension"):b}function ca(f,k,l){var g,n,h,e,d,m,i,o,j,p;return l=l||{},bj.isInstance(f)||(f=bj.seriesDataToSource(f)),n=k.get("coordinateSystem"),h=aq.get(n),e=tC(k),e&&(g=c(e.coordSysDims,function(a){var b={name:a},c=e.axisMap.get(a),d;return c&&(d=c.get("type"),b.type=ic(d)),b})),g=g||h&&(h.getDimensionsInfo?h.getDimensionsInfo():h.dimensions.slice())||["x","y"],i=ed(f,{coordDimensions:g,generateCoord:l.generateCoord}),e&&a(i,function(a,c){var f=a.coordDim,b=e.categoryAxisMap.get(f);b&&(null==d&&(d=c),a.ordinalMeta=b.getOrdinalMeta()),null!=a.otherDims.itemName&&(m=!0)}),m||null==d||(i[d].otherDims.itemName=0),o=pW(k,i),j=new ab(i,k),j.setCalculationInfo(o),p=null!=d&&function(a){if(a.sourceFormat===dO){var c=function(b){for(var a=0;a<b.length&&null==b[a];)a++;return b[a]}(a.data||[]);return null!=c&&!b(fE(c))}}(f)?function(c,e,a,b){return b===d?a:this.defaultDimValueGetter(c,e,a,b)}:null,j.hasItemOption=!1,j.initData(f,null,p),j}function U(a){this._setting=a||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}function gh(a){this.categories=a.categories||[],this._needCollect=a.needCollect,this._deduplication=a.deduplication,this._map}U.prototype.parse=function(a){return a},U.prototype.getSetting=function(a){return this._setting[a]},U.prototype.contain=function(a){var b=this._extent;return a>=b[0]&&a<=b[1]},U.prototype.normalize=function(b){var a=this._extent;return a[1]===a[0]?.5:(b-a[0])/(a[1]-a[0])},U.prototype.scale=function(b){var a=this._extent;return b*(a[1]-a[0])+a[0]},U.prototype.unionExtent=function(a){var b=this._extent;a[0]<b[0]&&(b[0]=a[0]),a[1]>b[1]&&(b[1]=a[1])},U.prototype.unionExtentFromData=function(a,b){this.unionExtent(a.getApproximateExtent(b))},U.prototype.getExtent=function(){return this._extent.slice()},U.prototype.setExtent=function(a,b){var c=this._extent;isNaN(a)||(c[0]=a),isNaN(b)||(c[1]=b)},U.prototype.isBlank=function(){return this._isBlank},U.prototype.setBlank=function(a){this._isBlank=a},U.prototype.getLabel=null,fa(U),is(U,{registerWhenExtend:!0}),gh.createByAxisModel=function(e){var a=e.option,b=a.data,d=b&&c(b,acN);return new gh({categories:d,needCollect:!d,deduplication:!1!==a.dedplication})},pV=gh.prototype;function pU(a){return a._map||(a._map=n(a.categories))}function acN(a){return m(a)&&null!=a.value?a.value:a+""}pV.getOrdinal=function(a){return pU(this).get(a)},pV.parseAndCollect=function(b){var a,c=this._needCollect,d;return"string"!=typeof b&&!c?b:c&&!this._deduplication?(a=this.categories.length,this.categories[a]=b,a):(d=pU(this),null==(a=d.get(b))&&(c?(a=this.categories.length,this.categories[a]=b,d.set(b,a)):a=NaN),a)},n$=U.prototype,oa=U.extend({type:"ordinal",init:function(a,c){a&&!b(a)||(a=new gh({categories:a})),this._ordinalMeta=a,this._extent=c||[0,a.categories.length-1]},parse:function(a){return"string"==typeof a?this._ordinalMeta.getOrdinal(a):Math.round(a)},contain:function(a){return a=this.parse(a),n$.contain.call(this,a)&&null!=this._ordinalMeta.categories[a]},normalize:function(a){return n$.normalize.call(this,this.parse(a))},scale:function(a){return Math.round(n$.scale.call(this,a))},getTicks:function(){for(var b=[],c=this._extent,a=c[0];a<=c[1];)b.push(a),a++;return b},getLabel:function(a){if(!this.isBlank())return this._ordinalMeta.categories[a]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(a,b){this.unionExtent(a.getApproximateExtent(b))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:aa,niceExtent:aa}),oa.create=function(){return new oa},ob=X;function pT(a){return iz(a)+2}function pP(a,b,c){a[b]=Math.max(Math.min(a[b],c[1]),c[0])}function pO(a,b){isFinite(a[0])||(a[0]=b[0]),isFinite(a[1])||(a[1]=b[1]),pP(a,0,b),pP(a,1,b),a[0]>a[1]&&(a[0]=a[1])}og=X,bA=U.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(a,b){var c=this._extent;isNaN(a)||(c[0]=parseFloat(a)),isNaN(b)||(c[1]=parseFloat(b))},unionExtent:function(b){var a=this._extent;b[0]<a[0]&&(a[0]=b[0]),b[1]>a[1]&&(a[1]=b[1]),bA.prototype.setExtent.call(this,a[0],a[1])},getInterval:function(){return this._interval},setInterval:function(a){this._interval=a,this._niceExtent=this._extent.slice(),this._intervalPrecision=pT(a)},getTicks:function(){return function(e,b,c,f){var a=[],d;if(!e)return a;b[0]<c[0]&&a.push(b[0]);for(d=c[0];d<=c[1]&&(a.push(d),(d=ob(d+e,f))!==a[a.length-1]);)if(1e4<a.length)return[];return b[1]>(a.length?a[a.length-1]:c[1])&&a.push(b[1]),a}(this._interval,this._extent,this._niceExtent,this._intervalPrecision)},getLabel:function(b,c){if(null==b)return"";var a=c&&c.precision;return null==a?a=iz(b)||0:"auto"===a&&(a=this._intervalPrecision),cN(b=og(b,a,!0))},niceTicks:function(d,e,f){var a,b,c;d=d||5,a=this._extent,b=a[1]-a[0],isFinite(b)&&(b<0&&(b=-b,a.reverse()),c=function(c,h,d,e){var b={},g=c[1]-c[0],a=b.interval=j$(g/h,!0),f;return null!=d&&a<d&&(a=b.interval=d),null!=e&&e<a&&(a=b.interval=e),f=b.intervalPrecision=pT(a),pO(b.niceTickExtent=[ob(Math.ceil(c[0]/a)*a,f),ob(Math.floor(c[1]/a)*a,f)],c),b}(a,d,e,f),this._intervalPrecision=c.intervalPrecision,this._interval=c.interval,this._niceExtent=c.niceTickExtent)},niceExtent:function(b){var a=this._extent,d,e,c;a[0]===a[1]&&(0!==a[0]?(d=a[0],b.fixMax||(a[1]+=d/2),a[0]-=d/2):a[1]=1),e=a[1]-a[0],isFinite(e)||(a[0]=0,a[1]=1),this.niceTicks(b.splitNumber,b.minInterval,b.maxInterval),c=this._interval,b.fixMin||(a[0]=og(Math.floor(a[0]/c)*c)),b.fixMax||(a[1]=og(Math.ceil(a[1]/c)*c))}}),bA.create=function(){return new bA},oi="__ec_stack_",pL="undefined"!=typeof Float32Array?Float32Array:Array;function ok(a){return a.get("stack")||oi+a.seriesIndex}function ol(a){return a.dim+a.index}function pK(b,c){var a=[];return c.eachSeriesByType(b,function(b){pF(b)&&!pD(b)&&a.push(b)}),a}function on(b){var e=function(i){var b={},h,f,c,e,d,g;a(i,function(f){var a=f.coordinateSystem.getBaseAxis(),c,d,h,e,i,g;if("time"===a.type||"value"===a.type)for(c=f.getData(),d=a.dim+"_"+a.index,h=c.mapDimension(a.dim),e=0,i=c.count();e<i;++e)g=c.get(h,e),b[d]?b[d].push(g):b[d]=[g]}),h=[];for(f in b)if(b.hasOwnProperty(f))if(c=b[f],c){c.sort(function(a,b){return a-b});for(e=null,d=1;d<c.length;++d)g=c[d]-c[d-1],0<g&&(e=null===e?g:Math.min(e,g));h[f]=e}return h}(b),c=[];return a(b,function(b){var f,a=b.coordinateSystem.getBaseAxis(),g=a.getExtent(),k,i,h,j,l,m,n,o,p,q,r;"category"===a.type?f=a.getBandWidth():"value"===a.type||"time"===a.type?(k=a.dim+"_"+a.index,i=e[k],h=Math.abs(g[1]-g[0]),j=a.scale.getExtent(),l=Math.abs(j[1]-j[0]),f=i?h/l*i:h):(m=b.getData(),f=Math.abs(g[1]-g[0])/m.count()),n=d(b.get("barWidth"),f),o=d(b.get("barMaxWidth"),f),p=d(b.get("barMinWidth")||1,f),q=b.get("barGap"),r=b.get("barCategoryGap"),c.push({bandWidth:f,barWidth:n,barMaxWidth:o,barMinWidth:p,barGap:q,barCategoryGap:r,axisKey:ol(a),stackId:ok(b)})}),pJ(c)}function pJ(e){var c={},b;return a(e,function(a,m){var g=a.axisKey,h=a.bandWidth,b=c[g]||{bandWidth:h,remainedWidth:h,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},d=b.stacks,e,f,i,j,k,l;c[g]=b,e=a.stackId,d[e]||b.autoWidthCount++,d[e]=d[e]||{width:0,maxWidth:0},f=a.barWidth,f&&!d[e].width&&(d[e].width=f,f=Math.min(b.remainedWidth,f),b.remainedWidth-=f),i=a.barMaxWidth,i&&(d[e].maxWidth=i),j=a.barMinWidth,j&&(d[e].minWidth=j),k=a.barGap,null!=k&&(b.gap=k),l=a.barCategoryGap,null!=l&&(b.categoryGap=l)}),b={},a(c,function(f,l){var k,m,n,g,h,e,c,i,j,o;b[l]={},k=f.stacks,m=f.bandWidth,n=d(f.categoryGap,m),g=d(f.gap,1),h=f.remainedWidth,e=f.autoWidthCount,c=(h-n)/(e+(e-1)*g),c=Math.max(c,0),a(k,function(b){var d=b.maxWidth,f=b.minWidth,a;b.width?(a=b.width,d&&(a=Math.min(a,d)),f&&(a=Math.max(a,f)),b.width=a,h-=a,e--):(a=c,d&&d<a&&(a=Math.min(d,h)),f&&a<f&&(a=f),a!==c&&(b.width=a,h-=a,e--))}),c=(h-n)/(e+(e-1)*g),c=Math.max(c,0),j=0,a(k,function(a,b){a.width||(a.width=c),j+=(i=a).width*(1+g)}),i&&(j-=i.width*g),o=-j/2,a(k,function(a,c){b[l][c]=b[l][c]||{bandWidth:m,offset:o,width:a.width},o+=a.width*(1+g)})}),b}function pH(b,c,d){if(b&&c){var a=b[ol(c)];return null!=a&&null!=d&&(a=a[ok(d)]),a}}function pG(d,e){var c=pK(d,e),f=on(c),b={};a(c,function(p){var c=p.getData(),m=p.coordinateSystem,k=m.getBaseAxis(),d=ok(p),x=f[ol(k)][d],u=x.offset,t=x.width,s=m.getOtherAxis(k),l=p.get("barMinHeight")||0,y,A,o,B,i,h,z,j,a,v,w,g,e,n,r,q;b[d]=b[d]||[],c.setLayout({bandWidth:x.bandWidth,offset:u,size:t});for(y=c.mapDimension(s.dim),A=c.mapDimension(k.dim),o=bX(c,y),B=s.isHorizontal(),i=pC(k,s,o),h=0,z=c.count();h<z;h++)j=c.get(y,h),a=c.get(A,h),!isNaN(j)&&!isNaN(a)&&(r=0<=j?"p":"n",q=i,(o&&(b[d][a]||(b[d][a]={p:i,n:i}),q=b[d][a][r]),B)?(v=q,w=(n=m.dataToPoint([j,a]))[1]+u,g=n[0]-i,e=t,Math.abs(g)<l&&(g=(g<0?-1:1)*l),o&&(b[d][a][r]+=g)):(v=(n=m.dataToPoint([a,j]))[0]+u,w=q,g=t,e=n[1]-i,Math.abs(e)<l&&(e=(e<=0?-1:1)*l),o&&(b[d][a][r]+=e)),c.setItemLayout(h,{x:v,y:w,width:g,height:e}))},this)}acM={seriesType:"bar",plan:er(),reset:function(a){if(pF(a)&&pD(a)){var f=a.getData(),c=a.coordinateSystem,b=c.getBaseAxis(),d=c.getOtherAxis(b),i=f.mapDimension(d.dim),j=f.mapDimension(b.dim),g=d.isHorizontal(),h=g?0:1,e=pH(on([a]),b,a).width;return.5<e||(e=.5),{progress:function(p,k){for(var f,n=p.count,l=new pL(2*n),o=new pL(n),a=[],m=[],q=0,r=0;null!=(f=p.next());)m[h]=k.get(i,f),m[1-h]=k.get(j,f),a=c.dataToPoint(m,null,a),l[q++]=a[0],l[q++]=a[1],o[r++]=f;k.setLayout({largePoints:l,largeDataIndices:o,barWidth:e,valueAxisStart:pC(b,d,!1),valueAxisHorizontal:g})}}}}};function pF(a){return a.coordinateSystem&&"cartesian2d"===a.coordinateSystem.type}function pD(a){return a.pipelineContext&&a.pipelineContext.large}function pC(b,a){return a.toGlobalCoord(a.dataToCoord("log"===a.type?1:0))}acL=bA.prototype,pz=Math.ceil,py=Math.floor,px=36e5,Y=864e5,oA=bA.extend({type:"time",getLabel:function(a){var b=this._stepLvl,c=new Date(a);return jU(b[0],c,this.getSetting("useUTC"))},niceExtent:function(b){var a=this._extent,d,c;a[0]===a[1]&&(a[0]-=Y,a[1]+=Y),a[1]===-1/0&&a[0]===1/0&&(d=new Date,a[1]=+new Date(d.getFullYear(),d.getMonth(),d.getDate()),a[0]=a[1]-Y),this.niceTicks(b.splitNumber,b.minInterval,b.maxInterval),c=this._interval,b.fixMin||(a[0]=X(py(a[0]/c)*c)),b.fixMax||(a[1]=X(pz(a[1]/c)*c))},niceTicks:function(e,g,i){var a,j,c,h,l,f,b,d,k;e=e||10,a=this._extent,j=a[1]-a[0],c=j/e,null!=g&&c<g&&(c=g),null!=i&&i<c&&(c=i),h=oB.length,l=function(d,e,a,b){for(;a<b;){var c=a+b>>>1;d[c][1]<e?a=1+c:b=c}return a}(oB,c,0,h),f=oB[Math.min(l,h-1)],b=f[1],"year"===f[0]&&(b*=j$(j/b/e,!0)),d=this.getSetting("useUTC")?0:60*new Date(+a[0]||+a[1]).getTimezoneOffset()*1e3,k=[Math.round(pz((a[0]-d)/b)*b+d),Math.round(py((a[1]-d)/b)*b+d)],pO(k,a),this._stepLvl=f,this._interval=b,this._niceExtent=k},parse:function(a){return+fl(a)}}),a(["contain","normalize"],function(a){oA.prototype[a]=function(b){return acL[a].call(this,this.parse(b))}}),oB=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",px],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",6*px],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",Y],["MM-dd\nyyyy",2*Y],["MM-dd\nyyyy",3*Y],["MM-dd\nyyyy",4*Y],["MM-dd\nyyyy",5*Y],["MM-dd\nyyyy",6*Y],["week",7*Y],["MM-dd\nyyyy",864e6],["week",14*Y],["week",21*Y],["month",31*Y],["week",42*Y],["month",62*Y],["week",70*Y],["quarter",95*Y],["month",31*Y*4],["month",13392e6],["half-year",16416e6],["month",31*Y*8],["month",26784e6],["year",380*Y]],oA.create=function(a){return new oA({useUTC:a.ecModel.get("useUTC")})},hM=U.prototype,hN=bA.prototype,acK=iz,acJ=X,acI=Math.floor,acH=Math.ceil,it=Math.pow,bx=Math.log,ix=U.extend({type:"log",base:10,$constructor:function(){U.apply(this,arguments),this._originalScale=new bA},getTicks:function(){var a=this._originalScale,b=this._extent,d=a.getExtent();return c(hN.getTicks.call(this),function(e){var c=X(it(this.base,e));return c=e===b[0]&&a.__fixMin?iy(c,d[0]):c,c=e===b[1]&&a.__fixMax?iy(c,d[1]):c},this)},getLabel:hN.getLabel,scale:function(a){return a=hM.scale.call(this,a),it(this.base,a)},setExtent:function(a,b){var c=this.base;a=bx(a)/bx(c),b=bx(b)/bx(c),hN.setExtent.call(this,a,b)},getExtent:function(){var c=this.base,a=hM.getExtent.call(this),b,d;return a[0]=it(c,a[0]),a[1]=it(c,a[1]),b=this._originalScale,d=b.getExtent(),b.__fixMin&&(a[0]=iy(a[0],d[0])),b.__fixMax&&(a[1]=iy(a[1],d[1])),a},unionExtent:function(a){this._originalScale.unionExtent(a);var b=this.base;a[0]=bx(a[0])/bx(b),a[1]=bx(a[1])/bx(b),hM.unionExtent.call(this,a)},unionExtentFromData:function(a,b){this.unionExtent(a.getApproximateExtent(b))},niceTicks:function(d){var b,c,a,e;if(d=d||10,b=this._extent,c=b[1]-b[0],!(c==1/0||c<=0)){a=tS(c);for(d/c*a<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&0<Math.abs(a);)a*=10;e=[X(acH(b[0]/a)*a),X(acI(b[1]/a)*a)],this._interval=a,this._niceExtent=e}},niceExtent:function(a){hN.niceExtent.call(this,a);var b=this._originalScale;b.__fixMin=a.fixMin,b.__fixMax=a.fixMax}});function iy(a,b){return acJ(a,acK(b))}function pl(k,h){var j,f,l,i=k.type,c=h.getMin(),e=h.getMax(),s=null!=c,q=null!=e,g=k.getExtent(),o,p,n,r,m;return"ordinal"===i?j=h.getCategories().length:(b(f=h.get("boundaryGap"))||(f=[f||0,f||0]),"boolean"==typeof f[0]&&(f=[0,0]),f[0]=d(f[0],1),f[1]=d(f[1],1),l=g[1]-g[0]||Math.abs(g[0])),null==c&&(c="ordinal"===i?j?0:NaN:g[0]-f[0]*l),null==e&&(e="ordinal"===i?j?j-1:NaN:g[1]+f[1]*l),"dataMin"===c?c=g[0]:"function"==typeof c&&(c=c({min:g[0],max:g[1]})),"dataMax"===e?e=g[1]:"function"==typeof e&&(e=e({min:g[0],max:g[1]})),null!=c&&isFinite(c)||(c=NaN),null!=e&&isFinite(e)||(e=NaN),k.setBlank(eY(c)||eY(e)||"ordinal"===i&&!k.getOrdinalMeta().categories.length),h.getNeedCrossZero()&&(0<c&&0<e&&!s&&(c=0),c<0&&e<0&&!q&&(e=0)),o=h.ecModel,o&&"time"===i&&(n=pK("bar",o),(a(n,function(a){p|=a.getBaseAxis()===h.axis}),p)&&(r=on(n),m=function(d,f,j,l){var h=j.axis.getExtent(),m=h[1]-h[0],e=pH(l,j.axis),b,c,g,k,i;return void 0===e?{min:d,max:f}:(b=1/0,a(e,function(a){b=Math.min(a.offset,b)}),c=-1/0,a(e,function(a){c=Math.max(a.offset+a.width,c)}),b=Math.abs(b),c=Math.abs(c),g=b+c,k=f-d,i=k/(1-(b+c)/m)-k,{min:d-=b/g*i,max:f+=c/g*i})}(c,e,h,r),c=m.min,e=m.max)),[c,e]}function cJ(a,b){var d=pl(a,b),f=null!=b.getMin(),g=null!=b.getMax(),h=b.get("splitNumber"),c,e;"log"===a.type&&(a.base=b.get("logBase")),c=a.type,a.setExtent(d[0],d[1]),a.niceExtent({splitNumber:h,fixMin:f,fixMax:g,minInterval:"interval"===c||"time"===c?b.get("minInterval"):null,maxInterval:"interval"===c||"time"===c?b.get("maxInterval"):null}),e=b.get("interval"),null!=e&&a.setInterval&&a.setInterval(e)}function eH(a,b){if(b=b||a.get("type"))switch(b){case"category":return new oa(a.getOrdinalMeta?a.getOrdinalMeta():a.getCategories(),[1/0,-1/0]);case"value":return new bA;default:return(U.getClass(b)||bA).create(a)}}function fA(a){var c,b=a.getLabelModel().get("formatter"),d="category"===a.type?a.scale.getExtent()[0]:null;return"string"==typeof b?(c=b,b=function(b){return b=a.scale.getLabel(b),c.replace("{value}",null!=b?b:"")}):"function"==typeof b?function(c,e){return null!=d&&(e=c-d),b(oQ(a,c),e)}:function(b){return a.scale.getLabel(b)}}function oQ(a,b){return"category"===a.type?a.scale.getLabel(b):b}function oR(b){var a=b.get("interval");return null==a?"auto":a}function pk(a){return"category"===a.type&&0===oR(a.getLabelModel())}a(["contain","normalize"],function(a){ix.prototype[a]=function(b){return b=bx(b)/bx(this.base),hM[a].call(this,b)}}),ix.create=function(){return new ix},dI={getMin:function(c){var b=this.option,a=c||null==b.rangeStart?b.min:b.rangeStart;return this.axis&&null!=a&&"dataMin"!==a&&"function"!=typeof a&&!eY(a)&&(a=this.axis.scale.parse(a)),a},getMax:function(c){var b=this.option,a=c||null==b.rangeEnd?b.max:b.rangeEnd;return this.axis&&null!=a&&"dataMax"!==a&&"function"!=typeof a&&!eY(a)&&(a=this.axis.scale.parse(a)),a},getNeedCrossZero:function(){var a=this.option;return null==a.rangeStart&&null==a.rangeEnd&&!a.scale},getCoordSysModel:aa,setRange:function(a,b){this.option.rangeStart=a,this.option.rangeEnd=b},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},acG=ba({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,b){var c=b.cx,d=b.cy,f=b.width/2,e=b.height/2;a.moveTo(c,d-e),a.lineTo(c+f,d+e),a.lineTo(c-f,d+e),a.closePath()}}),acF=ba({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,b){var c=b.cx,d=b.cy,e=b.width/2,f=b.height/2;a.moveTo(c,d-f),a.lineTo(c+e,d),a.lineTo(c,d+f),a.lineTo(c-e,d),a.closePath()}}),acE=ba({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(f,i){var b=i.x,h=i.y,n=i.width/5*3,k=Math.max(n,i.height),a=n/2,c=a*a/(k-a),e=h-k+a+c,d=Math.asin(c/a),j=Math.cos(d)*a,l=Math.sin(d),m=Math.cos(d),g=.6*a,o=.7*a;f.moveTo(b-j,e+c),f.arc(b,e,a,Math.PI-d,2*Math.PI+d),f.bezierCurveTo(b+j-l*g,e+c+m*g,b,h-o,b,h),f.bezierCurveTo(b,h-o,b-j+l*g,e+c+m*g,b-j,e+c),f.closePath()}}),acD=ba({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(a,d){var e=d.height,g=d.width,b=d.x,c=d.y,f=g/3*2;a.moveTo(b,c),a.lineTo(b+f,c+e),a.lineTo(b,c+e/4*3),a.lineTo(b-f,c+e),a.lineTo(b,c),a.closePath()}}),acC={line:function(b,c,e,d,a){a.x1=b,a.y1=c+d/2,a.x2=b+e,a.y2=c+d/2},rect:function(b,c,d,e,a){a.x=b,a.y=c,a.width=d,a.height=e},roundRect:function(d,e,b,c,a){a.x=d,a.y=e,a.width=b,a.height=c,a.r=Math.min(b,c)/4},square:function(c,d,e,f,a){var b=Math.min(e,f);a.x=c,a.y=d,a.width=b,a.height=b},circle:function(d,e,b,c,a){a.cx=d+b/2,a.cy=e+c/2,a.r=Math.min(b,c)/2},diamond:function(d,e,b,c,a){a.cx=d+b/2,a.cy=e+c/2,a.width=b,a.height=c},pin:function(d,e,b,c,a){a.x=d+b/2,a.y=e+c/2,a.width=b,a.height=c},arrow:function(d,e,b,c,a){a.x=d+b/2,a.y=e+c/2,a.width=b,a.height=c},triangle:function(d,e,b,c,a){a.cx=d+b/2,a.cy=e+c/2,a.width=b,a.height=c}},oZ={},a({line:av,rect:y,roundRect:y,square:y,circle:bI,diamond:acF,pin:acE,arrow:acD,triangle:acG},function(a,b){oZ[b]=new a}),acB=ba({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,b,a){var c=na(e,b,a),d=this.shape;return d&&"pin"===d.symbolType&&"inside"===b.textPosition&&(c.y=a.y+.4*a.height),c},buildPath:function(d,a,e){var c=a.symbolType,b;"none"!==c&&(b=oZ[c],b=b||oZ[c="rect"],acC[c](a.x,a.y,a.width,a.height,b.shape),b.buildPath(d,b.shape,e))}});function acA(b,d){if("image"!==this.type){var a=this.style,c=this.shape;c&&"line"===c.symbolType?a.stroke=b:this.__isEmptyBrush?(a.stroke=b,a.fill=d||"#fff"):(a.fill&&(a.fill=b),a.stroke&&(a.stroke=b)),this.dirty(!1)}}function aQ(a,f,c,d,e,i,g){var b,h=0===a.indexOf("empty");return h&&(a=a.substr(5,1).toLowerCase()+a.substr(6)),(b=0===a.indexOf("image://")?uG(a.slice(8),new r(f,c,d,e),g?"center":"cover"):0===a.indexOf("path://")?fV(a.slice(7),{},new r(f,c,d,e),g?"center":"cover"):new acB({shape:{symbolType:a,x:f,y:c,width:d,height:e}})).__isEmptyBrush=h,b.setColor=acA,b.setColor(i),b}acz={isDimensionStacked:bX,enableDataStack:pW,getStackedDimension:gp},acy=(Object.freeze||Object)({createList:function(a){return ca(a.getSource(),a)},getLayoutRect:V,dataStack:acz,createScale:function(d,a){var b=a,c;return w.isInstance(a)||C(b=new w(a),dI),c=eH(b),c.setExtent(d[0],d[1]),cJ(c,b),c},mixinAxisModelCommonMethods:function(a){C(a,dI)},completeDimensions:pY,createDimensions:ed,createSymbol:aQ}),acx=1e-8;function pe(a,b){return Math.abs(a-b)<acx}function dl(b,h,g){var d=0,a=b[0],e,f,c;if(!a)return!1;for(e=1;e<b.length;e++)f=b[e],d+=b$(a[0],a[1],f[0],f[1],h,g),a=f;return c=b[0],pe(a[0],c[0])&&pe(a[1],c[1])||(d+=b$(a[0],a[1],c[0],c[1],h,g)),0!==d}function gw(c,d,a){if(this.name=c,this.geometries=d,a)a=[a[0],a[1]];else{var b=this.getBoundingRect();a=[b.x+b.width/2,b.y+b.height/2]}this.center=a}function ph(d,h,i){for(var e=[],f=h[0],g=h[1],c=0,a,b;c<d.length;c+=2)a=d.charCodeAt(c)-64,b=d.charCodeAt(c+1)-64,a=a>>1^-(1&a),b=b>>1^-(1&b),f=a+=f,g=b+=g,e.push([a/i,b/i]);return e}gw.prototype={constructor:gw,properties:null,getBoundingRect:function(){var h=this._rect,d,a,b,f,g,e,c;if(h)return h;for(d=Number.MAX_VALUE,a=[d,d],b=[-d,-d],f=[],g=[],e=this.geometries,c=0;c<e.length;c++)"polygon"===e[c].type&&(lF(e[c].exterior,f,g),bV(a,a,f),ch(b,b,g));return 0===c&&(a[0]=a[1]=b[0]=b[1]=0),this._rect=new r(a[0],a[1],b[0]-a[0],b[1]-a[1])},contain:function(b){var h=this.getBoundingRect(),c=this.geometries,a,f,g,e,d;if(!h.contain(b[0],b[1]))return!1;t:for(a=0,f=c.length;a<f;a++)if("polygon"===c[a].type)if(g=c[a].exterior,e=c[a].interiors,dl(g,b[0],b[1])){for(d=0;d<(e?e.length:0);d++)if(dl(e[d]))continue t;return!0}return!1},transformTo:function(n,m,f,g){var b=this.getBoundingRect(),l=b.width/b.height,k,j,h,c,i,d,a,e;f?g=g||f/l:f=l*g;for(k=new r(n,m,f,g),j=b.calculateTransform(k),h=this.geometries,c=0;c<h.length;c++)if("polygon"===h[c].type){for(i=h[c].exterior,d=h[c].interiors,a=0;a<i.length;a++)F(i[a],i[a],j);for(e=0;e<(d?d.length:0);e++)for(a=0;a<d[e].length;a++)F(d[e][a],d[e][a],j)}(b=this._rect).copy(k),this.center=[b.x+b.width/2,b.y+b.height/2]},cloneShallow:function(a){null==a&&(a=this.name);var b=new gw(a,this.geometries,this.center);return b._rect=this._rect,b.transformTo=null,b}};function o$(b){return function(f){var e,j,h,d,g,i,a,c,b,k;if(!f.UTF8Encoding)return;e=f.UTF8Scale,null==e&&(e=1024);for(j=f.features,h=0;h<j.length;h++)for(d=j[h].geometry,g=d.coordinates,i=d.encodeOffsets,a=0;a<g.length;a++)if(c=g[a],"Polygon"===d.type)g[a]=ph(c,i[a],e);else if("MultiPolygon"===d.type)for(b=0;b<c.length;b++)k=c[b],c[b]=ph(k,i[a][b],e);f.UTF8Encoding=!1}(b),c(W(b.features,function(a){return a.geometry&&a.properties&&0<a.geometry.coordinates.length}),function(f){var b=f.properties,c=f.geometry,d=c.coordinates,e=[],g;return"Polygon"===c.type&&e.push({type:"polygon",exterior:d[0],interiors:d.slice(1)}),"MultiPolygon"===c.type&&a(d,function(a){a[0]&&e.push({type:"polygon",exterior:a[0],interiors:a.slice(1)})}),g=new gw(b.name,e,b.cp),g.properties=b,g})}fO=au();function acw(a){return"category"===a.type?function(a){var b=a.getLabelModel(),c=pm(a,b);return!b.get("show")||a.scale.isBlank()?{labels:[],labelCategoryInterval:c.labelCategoryInterval}:c}(a):function(a){var b=a.scale.getTicks(),d=fA(a);return{labels:c(b,function(b,c){return{formattedLabel:d(b,c),rawLabel:a.scale.getLabel(b),tickValue:b}})}}(a)}function acv(a,b){return"category"===a.type?function(a,f){var d,e,g=pn(a,"ticks"),b=oR(f),h=po(g,b),i;return h||(f.get("show")&&!a.scale.isBlank()||(d=[]),ag(b)?d=pr(a,b,!0):"auto"===b?(i=pm(a,a.getLabelModel()),e=i.labelCategoryInterval,d=c(i.labels,function(a){return a.tickValue})):d=pq(a,e=b,!0),pp(g,b,{ticks:d,tickCategoryInterval:e}))}(a,b):{ticks:a.scale.getTicks()}}function pm(b,e){var c,d=pn(b,"labels"),a=oR(e),f=po(d,a);return f||pp(d,a,{labels:ag(a)?pr(b,a):pq(b,c="auto"===a?function(a){var b=fO(a).autoInterval;return null!=b?b:fO(a).autoInterval=a.calculateCategoryInterval()}(b):a),labelCategoryInterval:c})}function pn(a,b){return fO(a)[b]||(fO(a)[b]=[])}function po(b,c){for(var a=0;a<b.length;a++)if(b[a].key===c)return b[a].value}function pp(b,c,a){return b.push({key:c,value:a}),a}function pq(e,o,p){var k=fA(e),f=e.scale,a=f.getExtent(),h=e.getLabelModel(),i=[],b=Math.max((o||0)+1,1),c=a[0],l=f.count(),j,m,n,d;0!==c&&1<b&&2<l/b&&(c=Math.round(Math.ceil(c/b)*b)),j=pk(e),m=h.get("showMinLabel")||j,n=h.get("showMaxLabel")||j,m&&c!==a[0]&&g(a[0]);for(d=c;d<=a[1];d+=b)g(d);function g(a){i.push(p?a:{formattedLabel:k(a),rawLabel:f.getLabel(a),tickValue:a})}return n&&d-b!==a[1]&&g(a[1]),i}function pr(b,e,f){var c=b.scale,g=fA(b),d=[];return a(c.getTicks(),function(a){var b=c.getLabel(a);e(a,b)&&d.push(f?a:{formattedLabel:g(a),rawLabel:b,tickValue:a})}),d}ps=[0,1],Q=function(a,b,c){this.dim=a,this.scale=b,this._extent=c||[0,0],this.inverse=!1,this.onBand=!1};function pu(a,c){var b=(a[1]-a[0])/c/2;a[0]+=b,a[1]-=b}Q.prototype={constructor:Q,contain:function(b){var a=this._extent,c=Math.min(a[0],a[1]),d=Math.max(a[0],a[1]);return c<=b&&b<=d},containData:function(a){return this.contain(this.dataToCoord(a))},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(a){return kf(a||this.scale.getExtent(),this._extent)},setExtent:function(b,c){var a=this._extent;a[0]=b,a[1]=c},dataToCoord:function(a,d){var b=this._extent,c=this.scale;return a=c.normalize(a),this.onBand&&"ordinal"===c.type&&pu(b=b.slice(),c.count()),J(a,ps,b,d)},coordToData:function(c,d){var a=this._extent,b=this.scale,e;return this.onBand&&"ordinal"===b.type&&pu(a=a.slice(),b.count()),e=J(c,a,ps,d),this.scale.scale(e)},pointToData:function(a,b){},getTicksCoords:function(b){var d=(b=b||{}).tickModel||this.getTickModel(),e=c(acv(this,d).ticks,function(a){return{coord:this.dataToCoord(a),tickValue:a}},this);return function(h,b,k,g){var d=b.length,e,j,c,l,i,m,n;if(!h.onBand||k||!d)return;c=h.getExtent(),1===d?(b[0].coord=c[0],e=b[1]={coord:c[0]}):(l=b[d-1].tickValue-b[0].tickValue,i=(b[d-1].coord-b[0].coord)/l,a(b,function(a){a.coord-=i/2}),m=h.scale.getExtent(),j=1+m[1]-b[d-1].tickValue,e={coord:b[d-1].coord+i*j},b.push(e)),n=c[0]>c[1],f(b[0].coord,c[0])&&(g?b[0].coord=c[0]:b.shift()),g&&f(c[0],b[0].coord)&&b.unshift({coord:c[0]}),f(c[1],e.coord)&&(g?e.coord=c[1]:b.pop()),g&&f(e.coord,c[1])&&b.push({coord:c[1]});function f(a,b){return a=X(a),b=X(b),n?b<a:a<b}}(this,e,d.get("alignWithLabel"),b.clamp),e},getViewLabels:function(){return acw(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var b=this._extent,c=this.scale.getExtent(),a=c[1]-c[0]+(this.onBand?1:0),d;return 0===a&&(a=1),d=Math.abs(b[1]-b[0]),Math.abs(d)/a},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return function(b){var i=function(a){var b=a.getLabelModel();return{axisRotate:a.getRotate?a.getRotate():a.isHorizontal&&!a.isHorizontal()?90:0,labelRotate:b.get("rotate")||0,font:b.getFont()}}(b),w=fA(b),u=(i.axisRotate-i.labelRotate)/180*Math.PI,t=b.scale,f=t.getExtent(),g=t.count(),n,d,s,x,v,m,l,o,p,q,k,j,c,a,e,h,r;if(f[1]-f[0]<1)return 0;n=1,40<g&&(n=Math.max(1,Math.floor(g/40)));for(d=f[0],s=b.dataToCoord(d+1)-b.dataToCoord(d),x=Math.abs(s*Math.cos(u)),v=Math.abs(s*Math.sin(u)),m=0,l=0;d<=f[1];d+=n)q=bn(w(d),i.font,"center","top"),o=1.3*q.width,p=1.3*q.height,m=Math.max(m,o,7),l=Math.max(l,p,7);return k=m/x,j=l/v,isNaN(k)&&(k=1/0),isNaN(j)&&(j=1/0),c=Math.max(0,Math.floor(Math.min(k,j))),a=fO(b.model),e=b.getExtent(),h=a.lastAutoInterval,r=a.lastTickCount,null!=h&&null!=r&&Math.abs(h-c)<=1&&Math.abs(r-g)<=1&&c<h&&a.axisExtend0===e[0]&&a.axisExtend1===e[1]?c=h:(a.lastTickCount=g,a.lastAutoInterval=c,a.axisExtend0=e[0],a.axisExtend1=e[1]),c}(this)}},act=o$,pw={},a(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(a){pw[a]=afJ[a]}),rX={};function hF(b,d){var a=b.mapDimension("defaultedLabel",!0),e=a.length,f,c,g;if(1===e)return ds(b,d,a[0]);if(e){for(f=[],c=0;c<a.length;c++)g=ds(b,d,a[c]),f.push(g);return f.join(" ")}}function cx(a,b,c){e.call(this),this.updateData(a,b,c)}a(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(a){rX[a]=bY[a]}),M.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(a,b){return ca(this.getSource(),this)},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}}),bf=cx.prototype,acs=cx.getSymbolSize=function(b,c){var a=b.getItemVisual(c,"symbolSize");return a instanceof Array?a.slice():[+a,+a]};function ou(a){return[a[0]/2,a[1]/2]}function acr(a,b){this.parent.drift(a,b)}bf._createSymbol=function(b,c,d,e,f){this.removeAll();var a=aQ(b,-1,-1,2,2,c.getItemVisual(d,"color"),f);a.attr({z2:100,culling:!0,scale:ou(e)}),a.drift=acr,this._symbolType=b,this.add(a)},bf.stopSymbolAnimation=function(a){this.childAt(0).stopAnimation(a)},bf.getSymbolPath=function(){return this.childAt(0)},bf.getScale=function(){return this.childAt(0).scale},bf.highlight=function(){this.childAt(0).trigger("emphasis")},bf.downplay=function(){this.childAt(0).trigger("normal")},bf.setZ=function(b,c){var a=this.childAt(0);a.zlevel=b,a.z=c},bf.setDraggable=function(b){var a=this.childAt(0);a.draggable=b,a.cursor=b?"move":a.cursor},bf.updateData=function(c,b,h){var f,d,e,g,k,a,i,j;this.silent=!1,f=c.getItemVisual(b,"symbol")||"circle",d=c.hostModel,e=acs(c,b),g=f!==this._symbolType,g?(k=c.getItemVisual(b,"symbolKeepAspect"),this._createSymbol(f,c,b,e,k)):((a=this.childAt(0)).silent=!1,p(a,{scale:ou(e)},d,b)),(this._updateCommon(c,b,e,h),g)&&(a=this.childAt(0),i=h&&h.fadeIn,j={scale:a.scale.slice()},i&&(j.style={opacity:a.style.opacity}),a.scale=[0,0],i&&(a.style.opacity=0),ao(a,j,d,b)),this._seriesModel=d},acq=["itemStyle"],acp=["emphasis","itemStyle"],aco=["label"],acm=["emphasis","label"];function acl(e,b){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===b){var a=this.__symbolOriginalScale,c=a[1]/a[0],d={scale:[Math.max(1.1*a[0],a[0]+3),Math.max(1.1*a[1],a[1]+3*c)]};this.animateTo(d,400,"elasticOut")}else"normal"===b&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}function ez(a){this.group=new e,this._symbolCtor=a||cx}bf._updateCommon=function(e,h,l,a){var b=this.childAt(0),q=e.hostModel,v=e.getItemVisual(h,"color"),m,g,r,i,n,o,p,j,c,s,t,u,k,w;"image"!==b.type?b.useStyle({strokeNoScale:!0}):b.setStyle({opacity:null,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null}),m=a&&a.itemStyle,g=a&&a.hoverItemStyle,r=a&&a.symbolRotate,i=a&&a.symbolOffset,n=a&&a.labelModel,o=a&&a.hoverLabelModel,p=a&&a.hoverAnimation,j=a&&a.cursorStyle,!a||e.hasItemOption?(c=a&&a.itemModel?a.itemModel:e.getItemModel(h),m=c.getModel(acq).getItemStyle(["color"]),g=c.getModel(acp).getItemStyle(),r=c.getShallow("symbolRotate"),i=c.getShallow("symbolOffset"),n=c.getModel(aco),o=c.getModel(acm),p=c.getShallow("hoverAnimation"),j=c.getShallow("cursor")):g=f({},g),s=b.style,b.attr("rotation",(r||0)*Math.PI/180||0),i&&b.attr("position",[d(i[0],l[0]),d(i[1],l[1])]),j&&b.attr("cursor",j),b.setColor(v,a&&a.symbolInnerColor),b.setStyle(m),t=e.getItemVisual(h,"opacity"),null!=t&&(s.opacity=t),u=e.getItemVisual(h,"liftZ"),k=b.__z2Origin,null!=u?null==k&&(b.__z2Origin=b.z2,b.z2+=u):null!=k&&(b.z2=k,b.__z2Origin=null),w=a&&a.useNameLabel,aI(s,g,n,o,{labelFetcher:q,labelDataIndex:h,defaultText:function(a,b){return w?e.getName(a):hF(e,a)},isRectText:!0,autoColor:v}),b.__symbolOriginalScale=ou(l),b.hoverStyle=g,b.highDownOnUpdate=p&&q.isAnimationEnabled()?acl:null,G(b)},bf.fadeOut=function(c,b){var a=this.childAt(0);this.silent=a.silent=!0,b&&b.keepLabel||(a.style.text=null),p(a,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,c)},D(cx,e),ex=ez.prototype;function oj(d,a,c,b){return a&&!isNaN(a[0])&&!isNaN(a[1])&&!(b.isIgnore&&b.isIgnore(c))&&!(b.clipShape&&!b.clipShape.contain(a[0],a[1]))&&"none"!==d.getItemVisual(c,"symbol")}function pM(a){return null==a||m(a)||(a={isIgnore:a}),a||{}}function pN(b){var a=b.hostModel;return{itemStyle:a.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:a.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:a.get("symbolRotate"),symbolOffset:a.get("symbolOffset"),hoverAnimation:a.get("hoverAnimation"),labelModel:a.getModel("label"),hoverLabelModel:a.getModel("emphasis.label"),cursorStyle:a.get("cursor")}}function oe(f,a,o){var e,g=f.getBaseAxis(),h=f.getOtherAxis(g),k=function(d,c){var b=0,a=d.scale.getExtent();return"start"===c?b=a[0]:"end"===c?b=a[1]:0<a[0]?b=a[0]:a[1]<0&&(b=a[1]),b}(h,o),i=g.dim,d=h.dim,l=a.mapDimension(d),m=a.mapDimension(i),n="x"===d||"radius"===d?1:0,b=c(f.dimensions,function(b){return a.mapDimension(b)}),j=a.getCalculationInfo("stackResultDimension");return(e|=bX(a,b[0]))&&(b[0]=j),(e|=bX(a,b[1]))&&(b[1]=j),{dataDimsForPoint:b,valueStart:k,valueAxisDim:d,baseAxisDim:i,stacked:!!e,valueDim:l,baseDim:m,baseDataOffset:n,stackedOverDimension:a.getCalculationInfo("stackedOverDimension")}}function od(a,g,c,e){var b=NaN,f,d;return a.stacked&&(b=c.get(c.getCalculationInfo("stackedOverDimension"),e)),isNaN(b)&&(b=a.valueStart),f=a.baseDataOffset,d=[],d[f]=c.get(a.baseDim,e),d[1-f]=b,g.dataToPoint(d)}ex.updateData=function(a,c){c=pM(c);var b=this.group,g=a.hostModel,d=this._data,e=this._symbolCtor,f=pN(a);d||b.removeAll(),a.diff(d).add(function(d){var h=a.getItemLayout(d),g;oj(a,h,d,c)&&(g=new e(a,d,f),g.attr("position",h),a.setItemGraphicEl(d,g),b.add(g))}).update(function(i,k){var h=d.getItemGraphicEl(k),j=a.getItemLayout(i);oj(a,j,i,c)?(h?(h.updateData(a,i,f),p(h,{position:j},g)):(h=new e(a,i)).attr("position",j),b.add(h),a.setItemGraphicEl(i,h)):b.remove(h)}).remove(function(c){var a=d.getItemGraphicEl(c);a&&a.fadeOut(function(){b.remove(a)})}).execute(),this._data=a},ex.isPersistent=function(){return!0},ex.updateLayout=function(){var a=this._data;a&&a.eachItemGraphicEl(function(b,c){var d=a.getItemLayout(c);b.attr("position",d)})},ex.incrementalPrepareUpdate=function(a){this._seriesScope=pN(a),this._data=null,this.group.removeAll()},ex.incrementalUpdate=function(f,c,d){var a,e,b;function g(a){a.isGroup||(a.incremental=a.useHoverLayer=!0)}d=pM(d);for(a=f.start;a<f.end;a++)e=c.getItemLayout(a),oj(c,e,a,d)&&(b=new this._symbolCtor(c,a,this._seriesScope),b.traverse(g),b.attr("position",e),this.group.add(b),c.setItemGraphicEl(a,b))},ex.remove=function(c){var a=this.group,b=this._data;b&&c?b.eachItemGraphicEl(function(b){b.fadeOut(function(){a.remove(b)})}):a.removeAll()},pQ=bV,pR=ch,pS=eW,hs=ah,nZ=[],aY=[],aT=[];function bK(a){return isNaN(a[0])||isNaN(a[1])}function nP(b,c,d,j,e,f,g,h,i,a){return"none"!==a&&a?function(f,j,h,o,n,e,r,q,k,p,m){for(var i=0,b=h,d=0,a,g,c,l;d<o;d++){if(a=j[b],n<=b||b<0)break;if(bK(a)){if(m){b+=e;continue}break}b===h?f[0<e?"moveTo":"lineTo"](a[0],a[1]):0<k?(g=j[i],c="y"===p?1:0,l=(a[c]-g[c])*k,hs(aY,g),aY[c]=g[c]+l,hs(aT,a),aT[c]=a[c]-l,f.bezierCurveTo(aY[0],aY[1],aT[0],aT[1],a[0],a[1])):f.lineTo(a[0],a[1]),i=b,b+=e}return d}.apply(this,arguments):function(o,d,s,v,u,e,q,p,i,j,k){for(var t=0,c=s,n=0,a,h,b,r,l,m,f,g;n<v;n++){if(a=d[c],u<=c||c<0)break;if(bK(a)){if(k){c+=e;continue}break}if(c===s)o[0<e?"moveTo":"lineTo"](a[0],a[1]),hs(aY,a);else if(0<i){if(h=c+e,b=d[h],k)for(;b&&bK(d[h]);)b=d[h+=e];r=.5,l=d[t],!(b=d[h])||bK(b)?hs(aT,a):(bK(b)&&!k&&(b=a),ce(nZ,b,l),"x"===j||"y"===j?(g="x"===j?0:1,m=Math.abs(a[g]-l[g]),f=Math.abs(a[g]-b[g])):(m=du(a,l),f=du(a,b)),pS(aT,a,nZ,-i*(1-(r=f/(f+m))))),pQ(aY,aY,p),pR(aY,aY,q),pQ(aT,aT,p),pR(aT,aT,q),o.bezierCurveTo(aY[0],aY[1],aT[0],aT[1],a[0],a[1]),pS(aY,a,nZ,i*r)}else o.lineTo(a[0],a[1]);t=c,c+=e}return n}.apply(this,arguments)}function nO(f,d){var b=[1/0,1/0],c=[-1/0,-1/0],e,a;if(d)for(e=0;e<f.length;e++)a=f[e],a[0]<b[0]&&(b[0]=a[0]),a[1]<b[1]&&(b[1]=a[1]),a[0]>c[0]&&(c[0]=a[0]),a[1]>c[1]&&(c[1]=a[1]);return{min:d?b:c,max:d?c:b}}acj=s.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:ln(s.prototype.brush),buildPath:function(f,b){var d=b.points,c=0,a=d.length,e=nO(d,b.smoothConstraint);if(b.connectNulls){for(;0<a&&bK(d[a-1]);a--);for(;c<a&&bK(d[c]);c++);}for(;c<a;)c+=nP(f,d,c,a,a,1,e.min,e.max,b.smooth,b.smoothMonotone,b.connectNulls)+1}}),p$=s.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:ln(s.prototype.brush),buildPath:function(e,a){var d=a.points,j=a.stackedOnPoints,c=0,b=d.length,g=a.smoothMonotone,h=nO(d,a.smoothConstraint),i=nO(j,a.smoothConstraint),f;if(a.connectNulls){for(;0<b&&bK(d[b-1]);b--);for(;c<b&&bK(d[c]);c++);}for(;c<b;)f=nP(e,d,c,b,b,1,h.min,h.max,a.smooth,g,a.connectNulls),nP(e,j,c+f-1,f,b,-1,i.min,i.max,a.stackedOnSmooth,g,a.connectNulls),c+=f+1,e.closePath()}});function qa(d,j,f){var a=d.getArea(),k=d.getBaseAxis().isHorizontal(),h=a.x,i=a.y,e=a.width,g=a.height,b=f.get("lineStyle.width")||2,c=new y({shape:{x:h-=b/2,y:i-=b/2,width:e+=b,height:g+=b}});return j&&(c.shape[k?"width":"height"]=0,ao(c,{shape:{width:e,height:g}},f)),c}function qb(b,d,e){var a=b.getArea(),c=new bC({shape:{cx:X(b.cx,1),cy:X(b.cy,1),r0:X(a.r0,1),r:X(a.r,1),startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});return d&&(c.shape.endAngle=a.startAngle,ao(c,{shape:{endAngle:a.endAngle}},e)),c}function gT(a,b,c){return a?"polar"===a.type?qb(a,b,c):"cartesian2d"===a.type?qa(a,b,c):null:null}function qd(b,e){var a,c,d;if(b.length===e.length){for(a=0;a<b.length;a++)if(c=b[a],d=e[a],c[0]!==d[0]||c[1]!==d[1])return;return!0}}function qe(a){return"number"==typeof a?a:a?.5:0}function cT(f,j,k){for(var i=j.getBaseAxis(),a="x"===i.dim||"radius"===i.dim?0:1,c=[],d=0,g,e,b,l,h;d<f.length-1;d++)switch(g=f[d+1],e=f[d],c.push(e),b=[],k){case"end":b[a]=g[a],b[1-a]=e[1-a],c.push(b);break;case"middle":l=(e[a]+g[a])/2,h=[],b[a]=h[a]=l,b[1-a]=e[1-a],h[1-a]=g[1-a],c.push(b),c.push(h);break;default:b[a]=e[a],b[1-a]=g[1-a],c.push(b)}return f[d]&&c.push(f[d]),c}function ach(g,c,h){var d=g.get("showAllSymbol"),e="auto"===d,b,i,f;if(!d||e)if(b=h.getAxesByScale("ordinal")[0],b&&(!e||!function(a,d){var e=a.getExtent(),b=Math.abs(e[1]-e[0])/a.scale.count(),f,g,c;isNaN(b)&&(b=0);for(f=d.count(),g=Math.max(1,Math.round(f/5)),c=0;c<f;c+=g)if(1.5*cx.getSymbolSize(d,c)[a.isHorizontal()?1:0]>b)return!1;return!0}(b,c)))return i=c.mapDimension(b.dim),f={},a(b.getViewLabels(),function(a){f[a.tickValue]=1}),function(a){return!f.hasOwnProperty(c.get(i,a))}}function qh(c,f,d){var g,e,a,b;return"cartesian2d"!==c.type?qb(c,f,d):(g=c.getBaseAxis().isHorizontal(),e=qa(c,f,d),d.get("clip",!0)||(a=e.shape,b=Math.max(a.width,a.height),g?(a.y-=b,a.height+=2*b):(a.x-=b,a.width+=2*b)),e)}ae.extend({type:"line",init:function(){var b=new e,a=new ez;this.group.add(a.group),this._symbolDraw=a,this._lineGroup=b},render:function(d,E,B){var b=d.coordinateSystem,x=this.group,e=d.getData(),C=d.getModel("lineStyle"),r=d.getModel("areaStyle"),f=e.mapArray(e.getItemLayout),y="polar"===b.type,D=this._coordSys,q=this._symbolDraw,l=this._polyline,h=this._polygon,o=this._lineGroup,m=d.get("animation"),s=!r.isEmpty(),t=r.get("origin"),i=function(e,b,c){if(!c.valueDim)return[];for(var d=[],a=0,f=b.count();a<f;a++)d.push(od(c,e,b,a));return d}(b,e,oe(b,e,t)),n=d.get("showSymbol"),z=n&&!y&&ach(d,e,b),u=this._data,j,k,w,p,v,A;u&&u.eachItemGraphicEl(function(a,b){a.__temp&&(x.remove(a),u.setItemGraphicEl(b,null))}),n||q.remove(),x.add(o),k=!y&&d.get("step"),b&&b.getArea&&(null!=(j=b.getArea()).width?(j.x-=.1,j.y-=.1,j.width+=.2,j.height+=.2):j.r0&&(j.r0-=.5,j.r1+=.5)),l&&D.type===b.type&&k===this._step?(s&&!h?h=this._newPolygon(f,i,b,m):h&&!s&&(o.remove(h),h=this._polygon=null),o.setClipPath(qh(b,!1,d)),n&&q.updateData(e,{isIgnore:z,clipShape:j}),e.eachItemGraphicEl(function(a){a.stopAnimation(!0)}),qd(this._stackedOnPoints,i)&&qd(this._points,f)||(m?this._updateAnimation(e,i,b,B,k,t):(k&&(f=cT(f,b,k),i=cT(i,b,k)),l.setShape({points:f}),h&&h.setShape({points:f,stackedOnPoints:i})))):(n&&q.updateData(e,{isIgnore:z,clipShape:j}),k&&(f=cT(f,b,k),i=cT(i,b,k)),l=this._newPolyline(f,b,m),s&&(h=this._newPolygon(f,i,b,m)),o.setClipPath(qh(b,!0,d))),w=function(i,n){var e=i.getVisual("visualMeta"),f,g,h,s,r,q,m,b,d,j,k,o,p,l;if(e&&e.length&&i.count()&&"cartesian2d"===n.type){for(f,g,h=e.length-1;0<=h;h--)if(s=e[h].dimension,r=i.dimensions[s],q=i.getDimensionInfo(r),"x"===(f=q&&q.coordDim)||"y"===f){g=e[h];break}if(g)return m=n.getAxis(f),b=c(g.stops,function(a){return{coord:m.toGlobalCoord(m.dataToCoord(a.value)),color:a.color}}),d=b.length,j=g.outerColors.slice(),d&&b[0].coord>b[d-1].coord&&(b.reverse(),j.reverse()),k=b[0].coord-10,o=b[d-1].coord+10,p=o-k,p<.001?"transparent":(a(b,function(a){a.offset=(a.coord-k)/p}),b.push({offset:d?b[d-1].offset:.5,color:j[1]||"transparent"}),b.unshift({offset:d?b[0].offset:.5,color:j[0]||"transparent"}),l=new dh(0,0,0,0,b,!0),l[f]=k,l[f+"2"]=o,l)}}(e,b)||e.getVisual("color"),l.useStyle(g(C.getLineStyle(),{fill:"none",stroke:w,lineJoin:"bevel"})),p=d.get("smooth"),(p=qe(d.get("smooth")),l.setShape({smooth:p,smoothMonotone:d.get("smoothMonotone"),connectNulls:d.get("connectNulls")}),h)&&(v=e.getCalculationInfo("stackedOnSeries"),A=0,h.useStyle(g(r.getAreaStyle(),{fill:w,opacity:.7,lineJoin:"bevel"})),v&&(A=qe(v.get("smooth"))),h.setShape({smooth:p,stackedOnSmooth:A,smoothMonotone:d.get("smoothMonotone"),connectNulls:d.get("connectNulls")})),this._data=e,this._coordSys=b,this._stackedOnPoints=i,this._points=f,this._step=k,this._valueOrigin=t},dispose:function(){},highlight:function(e,h,g,f){var c=e.getData(),b=iM(c,f),a,d;if(!(b instanceof Array)&&null!=b&&0<=b){if(a=c.getItemGraphicEl(b),!a){if(d=c.getItemLayout(b),!d)return;(a=new cx(c,b)).position=d,a.setZ(e.get("zlevel"),e.get("z")),a.ignore=isNaN(d[0])||isNaN(d[1]),a.__temp=!0,c.setItemGraphicEl(b,a),a.stopSymbolAnimation(!0),this.group.add(a)}a.highlight()}else ae.prototype.highlight.call(this,e,h,g,f)},downplay:function(e,f,g,d){var c=e.getData(),b=iM(c,d),a;null!=b&&0<=b?(a=c.getItemGraphicEl(b),a&&(a.__temp?(c.setItemGraphicEl(b,null),this.group.remove(a)):a.downplay())):ae.prototype.downplay.call(this,e,f,g,d)},_newPolyline:function(b){var a=this._polyline;return a&&this._lineGroup.remove(a),a=new acj({shape:{points:b},silent:!0,z2:10}),this._lineGroup.add(a),this._polyline=a},_newPolygon:function(b,c){var a=this._polygon;return a&&this._lineGroup.remove(a),a=new p$({shape:{points:b,stackedOnPoints:c},silent:!0}),this._lineGroup.add(a),this._polygon=a},_updateAnimation:function(k,r,d,s,e,q){var b=this._polyline,h=this._polygon,m=k.hostModel,a=function(e,c,x,t,n,p,C,D){for(var v=function(b,c){var a=[];return c.diff(b).add(function(b){a.push({cmd:"+",idx:b})}).update(function(b,c){a.push({cmd:"=",idx:c,idx1:b})}).remove(function(b){a.push({cmd:"-",idx:b})}).execute(),a}(e,c),i=[],j=[],k=[],l=[],s=[],f=[],g=[],m=oe(n,c,C),o=oe(p,e,D),b=0,d,u,h,w,a,y,z,A,B,r,q;b<v.length;b++){switch(d=v[b],u=!0,d.cmd){case"=":h=e.getItemLayout(d.idx),w=c.getItemLayout(d.idx1),(isNaN(h[0])||isNaN(h[1]))&&(h=w.slice()),i.push(h),j.push(w),k.push(x[d.idx]),l.push(t[d.idx1]),g.push(c.getRawIndex(d.idx1));break;case"+":a=d.idx,i.push(n.dataToPoint([c.get(m.dataDimsForPoint[0],a),c.get(m.dataDimsForPoint[1],a)])),j.push(c.getItemLayout(a).slice()),k.push(od(m,n,c,a)),l.push(t[a]),g.push(c.getRawIndex(a));break;case"-":a=d.idx,y=e.getRawIndex(a),y!==a?(i.push(e.getItemLayout(a)),j.push(p.dataToPoint([e.get(o.dataDimsForPoint[0],a),e.get(o.dataDimsForPoint[1],a)])),k.push(x[a]),l.push(od(o,p,e,a)),g.push(y)):u=!1}u&&(s.push(d),f.push(f.length))}f.sort(function(a,b){return g[a]-g[b]}),z=[],A=[],B=[],r=[],q=[];for(b=0;b<f.length;b++)a=f[b],z[b]=i[a],A[b]=j[a],B[b]=k[a],r[b]=l[a],q[b]=s[a];return{current:z,next:A,stackedOnCurrent:B,stackedOnNext:r,status:q}}(this._data,k,this._stackedOnPoints,r,this._coordSys,d,this._valueOrigin,q),g=a.current,l=a.stackedOnCurrent,i=a.next,n=a.stackedOnNext,f,j,c,o;e&&(g=cT(a.current,d,e),l=cT(a.stackedOnCurrent,d,e),i=cT(a.next,d,e),n=cT(a.stackedOnNext,d,e)),b.shape.__points=a.current,b.shape.points=g,p(b,{shape:{points:i}},m),h&&(h.setShape({points:g,stackedOnPoints:l}),p(h,{shape:{points:i,stackedOnPoints:n}},m));for(f=[],j=a.status,c=0;c<j.length;c++)"="===j[c].cmd&&(o=k.getItemGraphicEl(j[c].idx1),o&&f.push({el:o,ptIdx:c}));b.animators&&b.animators.length&&b.animators[0].during(function(){for(var a=0;a<f.length;a++)f[a].el.attr("position",b.shape.__points[f[a].ptIdx])})},remove:function(c){var b=this.group,a=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),a&&a.eachItemGraphicEl(function(c,d){c.__temp&&(b.remove(c),a.setItemGraphicEl(d,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});function cY(a,b,c){return{seriesType:a,performRawSeries:!0,reset:function(a,l,n){var h=a.getData(),d=a.get("symbol"),g=a.get("symbolSize"),k=a.get("symbolKeepAspect"),e=ag(d),f=ag(g),i=e||f,j=!e&&d?d:b,m=f?null:g;if(h.setVisual({legendSymbol:c||j,symbol:j,symbolSize:m,symbolKeepAspect:k}),!l.isSeriesFiltered(a))return{dataEach:h.hasItemOption||i?function(c,b){var j,k,h,l,m,n;i&&(j=a.getRawValue(b),k=a.getDataParams(b),e&&c.setItemVisual(b,"symbol",d(j,k)),f&&c.setItemVisual(b,"symbolSize",g(j,k))),c.hasItemOption&&(h=c.getItemModel(b),l=h.getShallow("symbol",!0),m=h.getShallow("symbolSize",!0),n=h.getShallow("symbolKeepAspect",!0),null!=l&&c.setItemVisual(b,"symbol",l),null!=m&&c.setItemVisual(b,"symbolSize",m),null!=n&&c.setItemVisual(b,"symbolKeepAspect",n))}:null}}}}function fW(a){return{seriesType:a,plan:er(),reset:function(e){var b=e.getData(),d=e.coordinateSystem,f=e.pipelineContext.large,a,g,h;if(d)return a=c(d.dimensions,function(a){return b.mapDimension(a)}).slice(0,2),g=a.length,h=b.getCalculationInfo("stackResultDimension"),bX(b,a[0])&&(a[0]=h),bX(b,a[1])&&(a[1]=h),g&&{progress:function(h,e){for(var n=h.end-h.start,k=f&&new Float32Array(n*g),c=h.start,l=0,j=[],m=[],b,i,o;c<h.end;c++)1===g?(i=e.get(a[0],c),b=!isNaN(i)&&d.dataToPoint(i,null,m)):(i=j[0]=e.get(a[0],c),o=j[1]=e.get(a[1],c),b=!isNaN(i)&&!isNaN(o)&&d.dataToPoint(j,null,m)),f?(k[l++]=b?b[0]:NaN,k[l++]=b?b[1]:NaN):e.setItemLayout(c,b&&b.slice()||[NaN,NaN]);f&&e.setLayout("symbolPoints",k)}}}}}function acg(a,b){return Math.round(a.length/2)}ace={average:function(b){for(var d=0,c=0,a=0;a<b.length;a++)isNaN(b[a])||(d+=b[a],c++);return 0===c?NaN:d/c},sum:function(b){for(var c=0,a=0;a<b.length;a++)c+=b[a]||0;return c},max:function(c){for(var a=-1/0,b=0;b<c.length;b++)c[b]>a&&(a=c[b]);return isFinite(a)?a:NaN},min:function(c){for(var a=1/0,b=0;b<c.length;b++)c[b]<a&&(a=c[b]);return isFinite(a)?a:NaN},nearest:function(a){return a[0]}};function acd(a){return this._axes[a]}function hj(a){this._axes={},this._dimList=[],this.name=a||""}function fI(a){hj.call(this,a)}hj.prototype={constructor:hj,type:"cartesian",getAxis:function(a){return this._axes[a]},getAxes:function(){return c(this._dimList,acd,this)},getAxesByScale:function(a){return a=a.toLowerCase(),W(this.getAxes(),function(b){return b.scale.type===a})},addAxis:function(a){var b=a.dim;this._axes[b]=a,this._dimList.push(b)},dataToCoord:function(a){return this._dataCoordConvert(a,"dataToCoord")},coordToData:function(a){return this._dataCoordConvert(a,"coordToData")},_dataCoordConvert:function(c,f){for(var d=this._dimList,e=c instanceof Array?[]:{},a=0,b,g;a<d.length;a++)b=d[a],g=this._axes[b],e[b]=g[f](c[b]);return e}},fI.prototype={constructor:fI,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(a){var b=this.getAxis("x"),c=this.getAxis("y");return b.contain(b.toLocalCoord(a[0]))&&c.contain(c.toLocalCoord(a[1]))},containData:function(a){return this.getAxis("x").containData(a[0])&&this.getAxis("y").containData(a[1])},dataToPoint:function(b,e,a){var c=this.getAxis("x"),d=this.getAxis("y");return(a=a||[])[0]=c.toGlobalCoord(c.dataToCoord(b[0])),a[1]=d.toGlobalCoord(d.dataToCoord(b[1])),a},clampData:function(d,a){var e=this.getAxis("x").scale,f=this.getAxis("y").scale,b=e.getExtent(),c=f.getExtent(),g=e.parse(d[0]),h=f.parse(d[1]);return(a=a||[])[0]=Math.min(Math.max(Math.min(b[0],b[1]),g),Math.max(b[0],b[1])),a[1]=Math.min(Math.max(Math.min(c[0],c[1]),h),Math.max(c[0],c[1])),a},pointToData:function(b,a){var c=this.getAxis("x"),d=this.getAxis("y");return(a=a||[])[0]=c.coordToData(c.toLocalCoord(b[0])),a[1]=d.coordToData(d.toLocalCoord(b[1])),a},getOtherAxis:function(a){return this.getAxis("x"===a.dim?"y":"x")},getArea:function(){var a=this.getAxis("x").getGlobalExtent(),b=this.getAxis("y").getGlobalExtent(),c=Math.min(a[0],a[1]),d=Math.min(b[0],b[1]);return new r(c,d,Math.max(a[0],a[1])-c,Math.max(b[0],b[1])-d)}},D(fI,hj);function hU(a,b,c,d,e){Q.call(this,a,b,c),this.type=d||"value",this.position=e||"bottom"}hU.prototype={constructor:hU,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var a=this.position;return"top"===a||"bottom"===a},getGlobalExtent:function(b){var a=this.getExtent();return a[0]=this.toGlobalCoord(a[0]),a[1]=this.toGlobalCoord(a[1]),b&&a[0]>a[1]&&a.reverse(),a},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(a,b){return this.coordToData(this.toLocalCoord(a["x"===this.dim?0:1]),b)},toLocalCoord:null,toGlobalCoord:null},D(hU,Q),qq={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},cE={},cE.categoryAxis=l({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},qq),cE.valueAxis=l({boundaryGap:[0,0],splitNumber:5},qq),cE.timeAxis=g({scale:!0,min:"dataMin",max:"dataMax"},cE.valueAxis),cE.logAxis=g({scale:!0,logBase:10},cE.valueAxis);function eQ(b,d,c,e){a(acc,function(a){d.extend({type:b+"Axis."+a,mergeDefaultAndTheme:function(d,f){var e=this.layoutMode,g=e?ec(d):{};l(d,f.getTheme().get(a+"Axis")),l(d,this.getDefaultOption()),d.type=c(b,d),e&&cR(d,g,e)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=gh.createByAxisModel(this))},getCategories:function(b){var a=this.option;if("category"===a.type)return b?a.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:fJ([{},cE[a+"Axis"],e],!0)})}),x.registerSubTypeDefaulter(b+"Axis",j(c,b))}acc=["value","category","time","log"],eR=x.extend({type:"cartesian2dAxis",axis:null,init:function(){eR.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){eR.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){eR.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function qv(b,a){return a.type||(a.data?"category":"value")}l(eR.prototype,dI),qw={offset:0};function nh(a,b){return a.getCoordSysModel()===b}function eU(a,b,c){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(a,b,c),this.model=a}eQ("x",eR,qv,qw),eQ("y",eR,qv,qw),x.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}}),an=eU.prototype;function qA(j,k,g,h){var b,a,e,f,d,c;if(g.getAxesOnZeroOf=function(){return b?[b]:[]},a=j[k],e=g.model,f=e.get("axisLine.onZero"),d=e.get("axisLine.onZeroAxisIndex"),f){if(null!=d)qB(a[d])&&(b=a[d]);else for(c in a)if(a.hasOwnProperty(c)&&qB(a[c])&&!h[i(a[c])]){b=a[c];break}b&&(h[i(b)]=!0)}function i(a){return a.dim+"_"+a.index}}function qB(a){return a&&"category"!==a.type&&"time"!==a.type&&function(d){var a=d.scale.getExtent(),b=a[0],c=a[1];return!(0<b&&0<c||b<0&&c<0)}(a)}an.type="grid",an.axisPointerEnabled=!0,an.getRect=function(){return this._rect},an.update=function(d,e){var b=this._axesMap,c;this._updateScale(d,this.model),a(b.x,function(a){cJ(a.scale,a.model)}),a(b.y,function(a){cJ(a.scale,a.model)}),c={},a(b.x,function(a){qA(b,"y",a,c)}),a(b.y,function(a){qA(b,"x",a,c)}),this.resize(this.model,e)},an.resize=function(c,d,g){var b=V(c.getBoxLayoutParams(),{width:d.getWidth(),height:d.getHeight()}),e;this._rect=b,e=this._axesList;function f(){a(e,function(a){var c=a.isHorizontal(),d=c?[0,b.width]:[0,b.height],e=a.inverse?1:0;a.setExtent(d[e],d[1-e]),function(a,b){var c=a.getExtent(),d=c[0]+c[1];a.toGlobalCoord="x"===a.dim?function(a){return a+b}:function(a){return d-a+b},a.toLocalCoord="x"===a.dim?function(a){return a-b}:function(a){return d-a+b}}(a,c?b.x:b.y)})}f(),!g&&c.get("containLabel")&&(a(e,function(a){var c,e,d;a.model.get("axisLabel.inside")||(c=function(c){var t=c.model,d=c.scale,j,e,u,x,g,m,p,a,b,i,h,o,k,n,s,l,f,v,w,q;if(t.get("axisLabel.show")&&!d.isBlank()){u="category"===c.type,x=d.getExtent(),e=u?d.count():(j=d.getTicks()).length,n=c.getLabelModel(),s=fA(c),l=1,40<e&&(l=Math.ceil(e/40));for(f=0;f<e;f+=l)v=s(j?j[f]:x[0]+f),w=n.getTextRect(v),q=(m=w,p=n.get("rotate")||0,void 0,a=p*Math.PI/180,b=m.plain(),i=b.width,h=b.height,o=i*Math.cos(a)+h*Math.sin(a),k=i*Math.sin(a)+h*Math.cos(a),new r(b.x,b.y,o,k)),g?g.union(q):g=q;return g}}(a),c&&(e=a.isHorizontal()?"height":"width",d=a.model.get("axisLabel.margin"),b[e]-=c[e]+d,"top"===a.position?b.y+=c.height+d:"left"===a.position&&(b.x+=c.width+d)))}),f())},an.getAxis=function(d,b){var a=this._axesMap[d],c;if(null!=a){if(null==b)for(c in a)if(a.hasOwnProperty(c))return a[c];return a[b]}},an.getAxes=function(){return this._axesList.slice()},an.getCartesian=function(a,d){var e,b,c;if(null!=a&&null!=d)return e="x"+a+"y"+d,this._coordsMap[e];m(a)&&(d=a.yAxisIndex,a=a.xAxisIndex);for(b=0,c=this._coordsList;b<c.length;b++)if(c[b].getAxis("x").index===a||c[b].getAxis("y").index===d)return c[b]},an.getCartesians=function(){return this._coordsList.slice()},an.convertToPixel=function(c,d,b){var a=this._findConvertTarget(c,d);return a.cartesian?a.cartesian.dataToPoint(b):a.axis?a.axis.toGlobalCoord(a.axis.dataToCoord(b)):null},an.convertFromPixel=function(c,d,b){var a=this._findConvertTarget(c,d);return a.cartesian?a.cartesian.pointToData(b):a.axis?a.axis.coordToData(a.axis.toLocalCoord(b)):null},an._findConvertTarget=function(i,d){var b,f,a=d.seriesModel,e=d.xAxisModel||a&&a.getReferringComponents("xAxis")[0],c=d.yAxisModel||a&&a.getReferringComponents("yAxis")[0],g=d.gridModel,h=this._coordsList;return a?v(h,b=a.coordinateSystem)<0&&(b=null):e&&c?b=this.getCartesian(e.componentIndex,c.componentIndex):e?f=this.getAxis("x",e.componentIndex):c?f=this.getAxis("y",c.componentIndex):g&&g.coordinateSystem===this&&(b=this._coordsList[0]),{cartesian:b,axis:f}},an.containPoint=function(b){var a=this._coordsList[0];if(a)return a.containPoint(b)},an._initCartesian=function(e,f,h){var b={left:!1,right:!1,top:!1,bottom:!1},c={x:{},y:{}},d={x:0,y:0};if(f.eachComponent("xAxis",g("x"),this),f.eachComponent("yAxis",g("y"),this),!d.x||!d.y)return this._axesMap={},void(this._axesList=[]);function g(a){return function(h,i){var f,g,j;nh(h,e)&&(f=h.get("position"),"x"===a?"top"!==f&&"bottom"!==f&&(f=b.bottom?"top":"bottom"):"left"!==f&&"right"!==f&&(f=b.left?"right":"left"),b[f]=!0,g=new hU(a,eH(h),[0,0],h.get("type"),f),j="category"===g.type,g.onBand=j&&h.get("boundaryGap"),g.inverse=h.get("inverse"),(h.axis=g).model=h,g.grid=this,g.index=i,this._axesList.push(g),c[a][i]=g,d[a]++)}}a((this._axesMap=c).x,function(b,d){a(c.y,function(f,g){var c="x"+d+"y"+g,a=new fI(c);a.grid=this,a.model=e,this._coordsMap[c]=a,this._coordsList.push(a),a.addAxis(b),a.addAxis(f)},this)},this)},an._updateScale=function(b,c){function d(b,c){a(b.mapDimension(c.dim,!0),function(a){c.scale.unionExtentFromData(b,gp(b,a))})}a(this._axesList,function(a){a.scale.setExtent(1/0,-1/0)}),b.eachSeries(function(a){var f,g,h,i,e,j,k;if(qE(a)){if(f=qD(a,b),g=f[0],h=f[1],!nh(g,c)||!nh(h,c))return;i=this.getCartesian(g.componentIndex,h.componentIndex),e=a.getData(),j=i.getAxis("x"),k=i.getAxis("y"),"list"===e.type&&(d(e,j,a),d(e,k,a))}},this)},an.getTooltipAxes=function(b){var c=[],d=[];return a(this.getCartesians(),function(a){var e=null!=b&&"auto"!==b?a.getAxis(b):a.getBaseAxis(),f=a.getOtherAxis(e);v(c,e)<0&&c.push(e),v(d,f)<0&&d.push(f)}),{baseAxes:c,otherAxes:d}},acb=["xAxis","yAxis"];function qD(a){return c(acb,function(b){return a.getReferringComponents(b)[0]})}function qE(a){return"cartesian2d"===a.get("coordinateSystem")}eU.create=function(a,b){var c=[];return a.eachComponent("grid",function(e,f){var d=new eU(e,a,b);d.name="grid_"+f,d.resize(e,b,!0),e.coordinateSystem=d,c.push(d)}),a.eachSeries(function(a){if(qE(a)){var b=qD(a),c=b[0],d=b[1],e=c.getCoordSysModel().coordinateSystem;a.coordinateSystem=e.getCartesian(c.componentIndex,d.componentIndex)}}),c},eU.dimensions=eU.prototype.dimensions=fI.prototype.dimensions,aq.register("cartesian2d",eU);function ax(c,a){this.opt=a,this.axisModel=c,g(a,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new e;var b=new e({position:a.position.slice(),rotation:a.rotation});b.updateTransform(),this._transform=b.transform,this._dumbGroup=b}cF=Math.PI,ax.prototype={constructor:ax,hasBuilder:function(a){return!!qH[a]},add:function(a){qH[a].call(this)},getGroup:function(){return this.group}},qH={axisLine:function(){var h=this.opt,i=this.axisModel,l,j,b,d,k,c,e,g,m,n;i.get("axisLine.show")&&(l=this.axisModel.axis.getExtent(),j=this._transform,b=[l[0],0],d=[l[1],0],j&&(F(b,b,j),F(d,d,j)),k=f({lineCap:"round"},i.getModel("axisLine.lineStyle").getLineStyle()),this.group.add(new av({anid:"line",subPixelOptimize:!0,shape:{x1:b[0],y1:b[1],x2:d[0],y2:d[1]},style:k,strokeContainThreshold:h.strokeContainThreshold||5,silent:!0,z2:1})),c=i.get("axisLine.symbol"),e=i.get("axisLine.symbolSize"),g=i.get("axisLine.symbolOffset")||0,("number"==typeof g&&(g=[g,g]),null!=c)&&("string"==typeof c&&(c=[c,c]),"string"!=typeof e&&"number"!=typeof e||(e=[e,e]),m=e[0],n=e[1],a([{rotate:h.rotation+Math.PI/2,offset:g[0],r:0},{rotate:h.rotation-Math.PI/2,offset:g[1],r:Math.sqrt((b[0]-d[0])*(b[0]-d[0])+(b[1]-d[1])*(b[1]-d[1]))}],function(a,d){if("none"!==c[d]&&null!=c[d]){var e=aQ(c[d],-m/2,-n/2,m,n,k.stroke,!0),f=a.r+a.offset,g=[b[0]+f*Math.cos(h.rotation),b[1]-f*Math.sin(h.rotation)];e.attr({rotation:a.rotate,position:g,silent:!0,z2:11}),this.group.add(e)}},this)))},axisTickLabel:function(){var b=this.axisModel,c=this.opt,d=function(h,c,p){var k=c.axis,j,o,n,e,b,a,f,i,d,l,m;if(!c.get("axisTick.show")||k.scale.isBlank())return;for(j=c.getModel("axisTick"),o=j.getModel("lineStyle"),n=j.get("length"),e=k.getTicksCoords(),b=[],a=[],f=h._transform,i=[],d=0;d<e.length;d++)l=e[d].coord,b[0]=l,b[1]=0,a[0]=l,a[1]=p.tickDirection*n,f&&(F(b,b,f),F(a,a,f)),m=new av({anid:"tick_"+e[d].tickValue,subPixelOptimize:!0,shape:{x1:b[0],y1:b[1],x2:a[0],y2:a[1]},style:g(o.getLineStyle(),{stroke:c.get("axisLine.lineStyle.color")}),z2:2,silent:!0}),h.group.add(m),i.push(m);return i}(this,b,c);!function(e,b,a){var h,f,c,g,d,i,j,l,k,m;if(pk(e.axis))return;h=e.get("axisLabel.showMinLabel"),f=e.get("axisLabel.showMaxLabel"),a=a||[],c=(b=b||[])[0],g=b[1],d=b[b.length-1],i=b[b.length-2],j=a[0],l=a[1],k=a[a.length-1],m=a[a.length-2],!1===h?(aW(c),aW(j)):qM(c,g)&&(h?(aW(g),aW(l)):(aW(c),aW(j))),!1===f?(aW(d),aW(k)):qM(i,d)&&(f?(aW(i),aW(m)):(aW(d),aW(k)))}(b,function(i,b,c){var d=b.axis,e,l,j,k,g,f,h,m,n;if(!af(c.axisLabelShow,b.get("axisLabel.show"))||d.scale.isBlank())return;return e=b.getModel("axisLabel"),l=e.get("margin"),j=d.getViewLabels(),k=(af(c.labelRotate,e.get("rotate"))||0)*cF/180,g=qJ(c.rotation,k,c.labelDirection),f=b.getCategories&&b.getCategories(!0),h=[],m=qK(b),n=b.get("triggerEvent"),a(j,function(o,s){var j=o.tickValue,t=o.formattedLabel,r=o.rawLabel,k=e,p,u,a;f&&f[j]&&f[j].textStyle&&(k=new w(f[j].textStyle,e,b.ecModel)),p=k.getTextColor()||b.get("axisLine.lineStyle.color"),u=[d.dataToCoord(j),c.labelOffset+c.labelDirection*l],a=new q({anid:"label_"+j,position:u,rotation:g.rotation,silent:m,z2:10}),O(a.style,k,{text:t,textAlign:k.getShallow("align",!0)||g.textAlign,textVerticalAlign:k.getShallow("verticalAlign",!0)||k.getShallow("baseline",!0)||g.textVerticalAlign,textFill:"function"==typeof p?p("category"===d.type?r:"value"===d.type?j+"":j,s):p}),n&&(a.eventData=qI(b),a.eventData.targetType="axisLabel",a.eventData.value=r),i._dumbGroup.add(a),a.updateTransform(),h.push(a),i.group.add(a),a.decomposeTransform()}),h}(this,b,c),d)},axisName:function(){var b=this.opt,a=this.axisModel,c=af(b.axisName,a.get("name")),h,g,k,u,j,l,e,p,x,i,o,m,r,s,t,n,v,w,d;c&&(k=a.get("nameLocation"),u=b.nameDirection,j=a.getModel("nameTextStyle"),l=a.get("nameGap")||0,e=this.axisModel.axis.getExtent(),p=e[0]>e[1]?-1:1,x=["start"===k?e[0]-p*l:"end"===k?e[1]+p*l:(e[0]+e[1])/2,qN(k)?b.labelOffset+u*l:0],i=a.get("nameRotate"),null!=i&&(i=i*cF/180),qN(k)?h=qJ(b.rotation,null!=i?i:b.rotation,u):(h=function(h,d,i,e){var f,c,a=kd(i-h.rotation),g=e[0]>e[1],b="start"===d&&!g||"start"!==d&&g;return f=fj(a-cF/2)?(c=b?"bottom":"top","center"):fj(a-1.5*cF)?(c=b?"top":"bottom","center"):(c="middle",a<1.5*cF&&cF/2<a?b?"left":"right":b?"right":"left"),{rotation:a,textAlign:f,textVerticalAlign:c}}(b,k,i||0,e),null!=(g=b.axisNameAvailableWidth)&&(g=Math.abs(g/Math.sin(h.rotation)),isFinite(g)||(g=null))),o=j.getFont(),m=a.get("nameTruncate",!0)||{},r=m.ellipsis,s=af(b.nameTruncateMaxWidth,m.maxWidth,g),t=null!=r&&null!=s?tN(c,s,o,r,{minChar:2,placeholder:m.placeholder}):c,n=a.get("tooltip",!0),v=a.mainType,w={componentType:v,name:c,$vars:["name"]},w[v+"Index"]=a.componentIndex,d=new q({anid:"name",__fullText:c,__truncatedText:t,position:x,rotation:h.rotation,silent:qK(a),z2:1,tooltip:n&&n.show?f({content:c,formatter:function(){return c},formatterParams:w},n):null}),O(d.style,j,{text:t,textFont:o,textFill:j.getTextColor()||a.get("axisLine.lineStyle.color"),textAlign:j.get("align")||h.textAlign,textVerticalAlign:j.get("verticalAlign")||h.textVerticalAlign}),a.get("triggerEvent")&&(d.eventData=qI(a),d.eventData.targetType="axisName",d.eventData.name=c),this._dumbGroup.add(d),d.updateTransform(),this.group.add(d),d.decomposeTransform())}},qI=ax.makeAxisEventDataBase=function(a){var b={componentType:a.mainType,componentIndex:a.componentIndex};return b[a.mainType+"Index"]=a.componentIndex,b},qJ=ax.innerTextLayout=function(d,e,b){var c,a=kd(e-d);return{rotation:a,textAlign:fj(a)?(c=0<b?"top":"bottom","center"):fj(a-cF)?(c=0<b?"bottom":"top","center"):(c="middle",0<a&&a<cF?0<b?"right":"left":0<b?"left":"right"),textVerticalAlign:c}},qK=ax.isLabelSilent=function(a){var b=a.get("tooltip");return a.get("silent")||!(a.get("triggerEvent")||b&&b.show)};function aW(a){a&&(a.ignore=!0)}function qM(a,c){var d=a&&a.getBoundingRect().clone(),e=c&&c.getBoundingRect().clone(),b;if(d&&e)return b=el([]),cc(b,b,-a.rotation),d.applyTransform(cu([],b,a.getLocalTransform())),e.applyTransform(cu([],b,c.getLocalTransform())),d.intersect(e)}function qN(a){return"middle"===a||"center"===a}ee=a,mJ=j;function aca(b,c){var a={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(a,b,h){var d=b.getComponent("tooltip"),c=b.getComponent("axisPointer"),e=c.get("link",!0)||[],f=[];ee(h.getCoordinateSystems(),function(h){var l,p,j,m,k,n;h.axisPointerEnabled&&(l=gE(h.model),p=a.coordSysAxesInfo[l]={},j=(a.coordSysMap[l]=h).model.getModel("tooltip",d),(ee(h.getAxes(),mJ(o,!1,null)),h.getTooltipAxes&&d&&j.get("show"))&&(m="axis"===j.get("trigger"),k="cross"===j.get("axisPointer.type"),n=h.getTooltipAxes(j.get("axisPointer.axis")),(m||k)&&ee(n.baseAxes,mJ(o,!k||"cross",m)),k&&ee(n.otherAxes,mJ(o,"cross",!1))));function o(q,l,k){var d=k.model.getModel("axisPointer",c),u=d.get("show"),s,m,t,r,n,o;u&&("auto"!==u||q||mz(d))&&(null==l&&(l=d.get("triggerTooltip")),s=(d=q?function(h,j,k,l,m,f){var b=j.getModel("axisPointer"),a={},c,d,e;return ee(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(c){a[c]=i(b.get(c))}),a.snap="category"!==h.type&&!!f,"cross"===b.get("type")&&(a.type="line"),c=a.label||(a.label={}),(null==c.show&&(c.show=!1),"cross"===m)&&(d=b.get("label.show"),(c.show=null==d||d,!f)&&(e=a.lineStyle=b.get("crossStyle"),e&&g(c,e.textStyle))),h.model.getModel("axisPointer",new w(a,k,l))}(k,j,c,b,q,l):d).get("snap"),m=gE(k.model),t=l||s||"category"===k.type,r=a.axesInfo[m]={key:m,axis:k,coordSys:h,axisPointerModel:d,triggerTooltip:l,involveSeries:t,snap:s,useHandle:mz(d),seriesModels:[]},p[m]=r,a.seriesInvolved|=t,n=function(e,f){for(var b=f.model,c=f.dim,a=0,d;a<e.length;a++)if(d=e[a]||{},mD(d[c+"AxisId"],b.id)||mD(d[c+"AxisIndex"],b.componentIndex)||mD(d[c+"AxisName"],b.name))return a}(e,k),null!=n&&(o=f[n]||(f[n]={axesInfo:{}}),o.axesInfo[m]=r,o.mapper=e[n].mapper,r.linkGroup=o))}})}(a,b,c),a.seriesInvolved&&function(a,b){b.eachSeries(function(b){var c=b.coordinateSystem,d=b.get("tooltip.trigger",!0),e=b.get("tooltip.show",!0);c&&"none"!==d&&!1!==d&&"item"!==d&&!1!==e&&!1!==b.get("axisPointer.show",!0)&&ee(a.coordSysAxesInfo[gE(c.model)],function(a){var d=a.axis;c.getAxis(d.dim)===d&&(a.seriesModels.push(b),null==a.seriesDataCount&&(a.seriesDataCount=0),a.seriesDataCount+=b.getData().count())})},this)}(a,b),a}function mD(a,c){return"all"===a||b(a)&&0<=v(a,c)||a===c}function mA(a){var b=(a.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return b&&b.axesInfo[gE(a)]}function mz(a){return!!a.get("handle.show")}function gE(a){return a.type+"||"+a.id}aE=$({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(a,b,c,d){this.axisPointerClass&&function(i){var c=mA(i),d,f,e,h,a,g,b;c&&(d=c.axisPointerModel,f=c.axis.scale,e=d.option,h=d.get("status"),a=d.get("value"),null!=a&&(a=f.parse(a)),g=mz(d),null==h&&(e.status=g?"show":"hide"),b=f.getExtent().slice(),b[0]>b[1]&&b.reverse(),(null==a||a>b[1])&&(a=b[1]),a<b[0]&&(a=b[0]),e.value=a,g&&(e.status=c.axis.scale.isBlank()?"hide":"show"))}(a),aE.superApply(this,"render",arguments),qW(this,a,b,c,d,!0)},updateAxisPointer:function(a,b,c,d,e){qW(this,a,b,c,d,!1)},remove:function(c,b){var a=this._axisPointer;a&&a.remove(b),aE.superApply(this,"remove",arguments)},dispose:function(b,a){qX(this,a),aE.superApply(this,"dispose",arguments)}});function qW(a,b,g,c,h,f){var d=aE.getAxisPointerClass(a.axisPointerClass),e;d&&(e=function(b){var a=mA(b);return a&&a.axisPointerModel}(b),e?(a._axisPointer||(a._axisPointer=new d)).render(b,e,c,f):qX(a,c))}function qX(a,c,d){var b=a._axisPointer;b&&b.dispose(c,d),a._axisPointer=null}qY=[];function mq(q,g,n){var o,l,a,f,j,k,i,c,d,e,h,b,p,m;return n=n||{},o=q.coordinateSystem,l=g.axis,a={},f=l.getAxesOnZeroOf()[0],j=l.position,k=f?"onZero":j,i=l.dim,c=o.getRect(),d=[c.x,c.x+c.width,c.y,c.y+c.height],e={left:0,right:1,top:0,bottom:1,onZero:2},h=g.get("offset")||0,b="x"===i?[d[2]-h,d[3]+h]:[d[0]-h,d[1]+h],f&&(p=f.toGlobalCoord(f.dataToCoord(0)),b[e.onZero]=Math.max(Math.min(p,b[1]),b[0])),a.position=["y"===i?b[e[k]]:d[0],"x"===i?b[e[k]]:d[3]],a.rotation=Math.PI/2*("x"===i?0:1),a.labelDirection=a.tickDirection=a.nameDirection={top:-1,bottom:1,left:-1,right:1}[j],a.labelOffset=f?b[e[j]]-b[e.onZero]:0,g.get("axisTick.inside")&&(a.tickDirection=-a.tickDirection),af(n.labelInside,g.get("axisLabel.inside"))&&(a.labelDirection=-a.labelDirection),m=g.get("axisLabel.rotate"),a.labelRotate="top"===k?-m:m,a.z2=1,a}aE.registerAxisPointerClass=function(a,b){qY[a]=b},aE.getAxisPointerClass=function(a){return a&&qY[a]},ab$=["axisLine","axisTickLabel","axisName"],ab_=["splitArea","splitLine"],mh=aE.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(b,j,h,i){var f,d,g,c;this.group.removeAll(),f=this._axisGroup,(this._axisGroup=new e,this.group.add(this._axisGroup),b.get("show"))&&(d=b.getCoordSysModel(),g=mq(d,b),c=new ax(b,g),a(ab$,c.add,c),this._axisGroup.add(c.getGroup()),a(ab_,function(a){b.get(a+".show")&&this["_"+a](b,d)},this),kx(f,this._axisGroup,b),mh.superCall(this,"render",b,j,h,i))},remove:function(){this._splitAreaColors=null},_splitLine:function(k,q){var h=k.axis,l,m,d,e,p,n,i,c,a,o,f,j,r,s;if(!h.scale.isBlank()){l=k.getModel("splitLine"),m=l.getModel("lineStyle"),d=m.get("color"),d=b(d)?d:[d];for(e=q.coordinateSystem.getRect(),p=h.isHorizontal(),n=0,i=h.getTicksCoords({tickModel:l}),c=[],a=[],o=m.getLineStyle(),f=0;f<i.length;f++)j=h.toGlobalCoord(i[f].coord),p?(c[0]=j,c[1]=e.y,a[0]=j,a[1]=e.y+e.height):(c[0]=e.x,c[1]=j,a[0]=e.x+e.width,a[1]=j),r=n++%d.length,s=i[f].tickValue,this._axisGroup.add(new av({anid:null!=s?"line_"+i[f].tickValue:null,subPixelOptimize:!0,shape:{x1:c[0],y1:c[1],x2:a[0],y2:a[1]},style:g({stroke:d[r]},o),silent:!0}))}},_splitArea:function(s,x){var i=s.axis,u,t,d,j,c,m,r,q,e,a,v,p,z,h,f,k,o,w,l;if(!i.scale.isBlank())if(u=s.getModel("splitArea"),t=u.getModel("areaStyle"),d=t.get("color"),j=x.coordinateSystem.getRect(),c=i.getTicksCoords({tickModel:u,clamp:!0}),c.length){if(m=d.length,r=this._splitAreaColors,q=n(),e=0,r)for(a=0;a<c.length;a++)if(v=r.get(c[a].tickValue),null!=v){e=(v+(m-1)*a)%m;break}p=i.toGlobalCoord(c[0].coord),z=t.getAreaStyle(),d=b(d)?d:[d];for(a=1;a<c.length;a++)w=i.toGlobalCoord(c[a].coord),p=i.isHorizontal()?(h=p,f=j.y,k=w-h,o=j.height,h+k):(h=j.x,f=p,k=j.width,f+(o=w-f)),l=c[a-1].tickValue,null!=l&&q.set(l,e),this._axisGroup.add(new y({anid:null!=l?"area_"+l:null,shape:{x:h,y:f,width:k,height:o},style:g({fill:d[e]},z),silent:!0})),e=(e+1)%m;this._splitAreaColors=q}}}),mh.extend({type:"xAxis"}),mh.extend({type:"yAxis"}),$({type:"grid",render:function(a,b){this.group.removeAll(),a.get("show")&&this.group.add(new y({shape:a.coordinateSystem.getRect(),style:g({fill:a.get("backgroundColor")},a.getItemStyle()),silent:!0,z2:-1}))}}),aj(function(a){a.xAxis&&a.yAxis&&!a.grid&&(a.grid={})}),H(cY("line","circle","line")),N(fW("line")),aH(bz.PROCESSOR.STATISTIC,{seriesType:"line",modifyOutputEnd:!0,reset:function(b,k,l){var d=b.getData(),a=b.get("sampling"),e=b.coordinateSystem,c,f,i,g,j,h;"cartesian2d"===e.type&&a&&(f=e.getBaseAxis(),i=e.getOtherAxis(f),g=f.getExtent(),j=g[1]-g[0],h=Math.round(d.count()/j),1<h&&("string"==typeof a?c=ace[a]:"function"==typeof a&&(c=a),c&&b.setData(d.downSample(d.mapDimension(i.dim),1/h,c,acg))))}}),rb=M.extend({type:"series.__base_bar__",getInitialData:function(a,b){return ca(this.getSource(),this)},getMarkerPosition:function(d){var a=this.coordinateSystem,b,c,e,f;return a?(b=a.dataToPoint(a.clampData(d)),c=this.getData(),e=c.getLayout("offset"),f=c.getLayout("size"),b[a.getBaseAxis().isHorizontal()?0:1]+=e+f/2,b):[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});function rc(a,b,c,f,d,e){aI(a,b,c.getModel("label"),c.getModel("emphasis.label"),{labelFetcher:d,labelDataIndex:e,defaultText:hF(d.getData(),e),isRectText:!0,autoColor:f}),rd(a),rd(b)}function rd(a,b){"outside"===a.textPosition&&(a.textPosition=b)}rb.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var a=this.get("progressiveThreshold"),b=this.get("largeThreshold");return a<b&&(a=b),a},defaultOption:{clip:!0,roundCap:!1}}),abZ=dP([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),abY={getBarItemStyle:function(c){var a=abZ(this,c),b;return this.getBorderLineDash&&(b=this.getBorderLineDash(),b&&(a.lineDash=b)),a}},abX=ba({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(b,f){var g=f.cx,e=f.cy,d=Math.max(f.r0||0,0),i=Math.max(f.r,0),k=.5*(i-d),j=d+k,c=f.startAngle,a=f.endAngle,h=f.clockwise,l=Math.cos(c),n=Math.sin(c),o=Math.cos(a),m=Math.sin(a);(h?a-c<2*Math.PI:c-a<2*Math.PI)&&(b.moveTo(l*d+g,n*d+e),b.arc(l*j+g,n*j+e,k,-Math.PI+c,c,!h)),b.arc(g,e,i,c,a,!h),b.moveTo(o*i+g,m*i+e),b.arc(o*j+g,m*j+e,k,a-2*Math.PI,a-Math.PI,!h),0!==d&&(b.arc(g,e,d,a,c,h),b.moveTo(l*d+g,m*d+e)),b.closePath()}}),abW=["itemStyle","barBorderWidth"],jc=[0,0],f(w.prototype,abY),ay({type:"bar",render:function(a,b,c){this._updateDrawMode(a);var d=a.get("coordinateSystem");return"cartesian2d"!==d&&"polar"!==d||(this._isLargeDraw?this._renderLarge(a,b,c):this._renderNormal(a,b,c)),this.group},incrementalPrepareRender:function(a,b,c){this._clear(),this._updateDrawMode(a)},incrementalRender:function(a,b,c,d){this._incrementalRenderLarge(a,b)},_updateDrawMode:function(b){var a=b.pipelineContext.large;(null==this._isLargeDraw||a^this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},_renderNormal:function(c,m,l){var d,e=this.group,b=c.getData(),g=this._data,a=c.coordinateSystem,h=a.getBaseAxis(),f,i,j,k;"cartesian2d"===a.type?d=h.isHorizontal():"polar"===a.type&&(d="angle"===h.dim),f=c.isAnimationEnabled()?c:null,i=c.get("clip",!0),j=function(b,e){var a=b.getArea&&b.getArea(),d,c;return"cartesian2d"===b.type&&(d=b.getBaseAxis(),("category"!==d.type||!d.onBand)&&(c=e.getLayout("bandWidth"),d.isHorizontal()?(a.x-=c,a.width+=2*c):(a.y-=c,a.height+=2*c))),a}(a,b),e.removeClipPath(),k=c.get("roundCap",!0),b.diff(g).add(function(g){var m,l,h;if(b.hasValue(g)){if(m=b.getItemModel(g),l=rp[a.type](b,g,m),i)if(rl[a.type](j,l))return void e.remove(h);h=rm[a.type](g,l,d,f,!1,k),b.setItemGraphicEl(g,h),e.add(h),rq(h,b,g,m,l,c,d,"polar"===a.type)}}).update(function(l,o){var h=g.getItemGraphicEl(o),n,m;if(b.hasValue(l)){if(n=b.getItemModel(l),m=rp[a.type](b,l,n),i)if(rl[a.type](j,m))return void e.remove(h);h?p(h,{shape:m},f,l):h=rm[a.type](l,m,d,f,!0,k),b.setItemGraphicEl(l,h),e.add(h),rq(h,b,l,n,m,c,d,"polar"===a.type)}else e.remove(h)}).remove(function(c){var b=g.getItemGraphicEl(c);"cartesian2d"===a.type?b&&rn(c,f,b):b&&ro(c,f,b)}).execute(),this._data=b},_renderLarge:function(a,c,d){this._clear(),rs(a,this.group);var b=a.get("clip",!0)?gT(a.coordinateSystem,!1,a):null;b?this.group.setClipPath(b):this.group.removeClipPath()},_incrementalRenderLarge:function(b,a){rs(a,this.group,!0)},dispose:aa,remove:function(a){this._clear(a)},_clear:function(a){var c=this.group,b=this._data;a&&a.get("animation")&&b&&!this._isLargeDraw?b.eachItemGraphicEl(function(b){"sector"===b.type?ro(b.dataIndex,a,b):rn(b.dataIndex,a,b)}):c.removeAll(),this._data=null}}),rj=Math.max,rk=Math.min,rl={cartesian2d:function(b,a){var c=a.width<0?-1:1,d=a.height<0?-1:1,e,g,f,h,i;return c<0&&(a.x+=a.width,a.width=-a.width),d<0&&(a.y+=a.height,a.height=-a.height),e=rj(a.x,b.x),g=rk(a.x+a.width,b.x+b.width),f=rj(a.y,b.y),h=rk(a.y+a.height,b.y+b.height),a.x=e,a.y=f,a.width=g-e,a.height=h-f,i=a.width<0||a.height<0,c<0&&(a.x+=a.width,a.width=-a.width),d<0&&(a.y+=a.height,a.height=-a.height),i},polar:function(a){return!1}},rm={cartesian2d:function(i,c,g,d,h){var b=new y({shape:f({},c)}),a,e;return d&&(a=g?"height":"width",e={},b.shape[a]=0,e[a]=c[a],bY[h?"updateProps":"initProps"](b,{shape:e},d,i)),b},polar:function(h,a,b,e,i,j){var k=a.startAngle<a.endAngle,c=new(!b&&j?abX:bC)({shape:g({clockwise:k},a)}),d,f;return e&&(d=b?"r":"endAngle",f={},c.shape[d]=b?0:a.startAngle,f[d]=a[d],bY[i?"updateProps":"initProps"](c,{shape:f},e,h)),c}};function rn(b,c,a){a.style.text=null,p(a,{shape:{width:0}},c,b,function(){a.parent&&a.parent.remove(a)})}function ro(b,c,a){a.style.text=null,p(a,{shape:{r:a.shape.r0}},c,b,function(){a.parent&&a.parent.remove(a)})}rp={cartesian2d:function(g,e,f){var a=g.getItemLayout(e),b=function(b,a){var c=b.get(abW)||0;return Math.min(c,Math.abs(a.width),Math.abs(a.height))}(f,a),d=0<a.width?1:-1,c=0<a.height?1:-1;return{x:a.x+d*b/2,y:a.y+c*b/2,width:a.width-d*b,height:a.height-c*b}},polar:function(b,c,d){var a=b.getItemLayout(c);return{cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle}}};function rq(a,h,c,b,e,m,n,i){var j=h.getItemVisual(c,"color"),l=h.getItemVisual(c,"opacity"),k=b.getModel("itemStyle"),f=b.getModel("emphasis.itemStyle").getBarItemStyle(),d;i||a.setShape("r",k.get("barBorderRadius")||0),a.useStyle(g({fill:j,opacity:l},k.getBarItemStyle())),d=b.getShallow("cursor"),d&&a.attr("cursor",d),n?e.height:e.width,i||rc(a.style,f,b,j,m,c),G(a,f)}abU=s.extend({type:"largeBar",shape:{points:[]},buildPath:function(d,f){for(var b=f.points,c=this.__startPoint,e=this.__baseDimIdx,a=0;a<b.length;a+=2)c[e]=b[a+e],d.moveTo(c[0],c[1]),d.lineTo(b[a],b[a+1])}});function rs(c,f,g){var a=c.getData(),d=[],e=a.getLayout("valueAxisHorizontal")?1:0,b;d[1-e]=a.getLayout("valueAxisStart"),b=new abU({shape:{points:a.getLayout("largePoints")},incremental:!!g,__startPoint:d,__baseDimIdx:e,__largeDataIndices:a.getLayout("largeDataIndices"),__barWidth:a.getLayout("barWidth")}),f.add(b),function(a,c,b){var d=b.getVisual("borderColor")||b.getVisual("color"),e=c.getModel("itemStyle").getItemStyle(["color","borderColor"]);a.useStyle(e),a.style.fill=null,a.style.stroke=d,a.style.lineWidth=b.getLayout("barWidth")}(b,c,a),b.seriesIndex=c.seriesIndex,c.get("silent")||(b.on("mousedown",rt),b.on("mousemove",rt))}rt=gG(function(a){var b=function(a,o,q){var d=a.__baseDimIdx,i=1-d,f=a.shape.points,m=a.__largeDataIndices,h=Math.abs(a.__barWidth/2),e=a.__startPoint[i],k,c,r,n,b,p,l,j,g;jc[0]=o,jc[1]=q;for(k=jc[d],c=jc[1-d],r=k-h,n=k+h,b=0,p=f.length/2;b<p;b++)if(l=2*b,j=f[l+d],g=f[l+i],r<=j&&j<=n&&(e<=g?e<=c&&c<=g:g<=c&&c<=e))return m[b];return-1}(this,a.offsetX,a.offsetY);this.dataIndex=0<=b?b:null},30,!1),N(bz.VISUAL.LAYOUT,j(pG,"bar")),N(bz.VISUAL.PROGRESSIVE_LAYOUT,acM),H({seriesType:"bar",reset:function(a){a.getData().setVisual("legendSymbol","roundRect")}});function eo(c,a,g){a=b(a)&&{coordDimensions:a}||f({},a);var d=c.getSource(),h=ed(d,a),e=new ab(h,c);return e.initData(d,g),e}mb={updateSelectedMap:function(a){this._targetList=b(a)?a.slice():[],this._selectTargetMap=eD(a||[],function(a,b){return a.set(b.name,b),a},n())},select:function(c,a){var b=null!=a?this._targetList[a]:this._selectTargetMap.get(c);"single"===this.get("selectedMode")&&this._selectTargetMap.each(function(a){a.selected=!1}),b&&(b.selected=!0)},unSelect:function(c,a){var b=null!=a?this._targetList[a]:this._selectTargetMap.get(c);b&&(b.selected=!1)},toggleSelected:function(c,a){var b=null!=a?this._targetList[a]:this._selectTargetMap.get(c);if(null!=b)return this[b.selected?"unSelect":"select"](c,a),b.selected},isSelected:function(c,a){var b=null!=a?this._targetList[a]:this._selectTargetMap.get(c);return b&&b.selected}},iW=iq({type:"series.pie",init:function(a){iW.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()},this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(a)},mergeOption:function(a){iW.superCall(this,"mergeOption",a),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(a,b){return eo(this,["value"])},_createSelectableList:function(){for(var a=this.getRawData(),d=a.mapDimension("value"),c=[],b=0,e=a.count();b<e;b++)c.push({name:a.getName(b),value:a.get(d,b),selected:sH(a,b,"selected")});return c},getDataParams:function(c){var a=this.getData(),b=iW.superCall(this,"getDataParams",c),d=[];return a.each(a.mapDimension("value"),function(a){d.push(a)}),b.percent=tT(d,c,a.hostModel.get("percentPrecision")),b.$vars.push("percent"),b},_defaultLabelLine:function(a){dn(a,"labelLine",["show"]);var b=a.labelLine,c=a.emphasis.labelLine;b.show=b.show&&a.label.show,c.show=c.show&&a.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,label:{rotate:!1,show:!0,position:"outer"},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});function abT(c,b,d,e){var a=b.getData(),f=this.dataIndex,g=a.getName(f),h=b.get("selectedOffset");e.dispatchAction({type:"pieToggleSelect",from:c,name:g,seriesId:b.id}),a.each(function(c){ry(a.getItemGraphicEl(c),a.getItemLayout(c),b.isSelected(a.getName(c)),h,d)})}function ry(a,b,f,g,h){var c=(b.startAngle+b.endAngle)/2,d=f?g:0,e=[Math.cos(c)*d,Math.sin(c)*d];h?a.animate().when(200,{position:e}).start("bounceOut"):a.attr("position",e)}function lZ(a,b){e.call(this);var c=new bC({z2:2}),d=new aZ,f=new q;this.add(c),this.add(d),this.add(f),this.updateData(a,b,!0)}C(iW,mb),rA=lZ.prototype,rA.updateData=function(e,c,l){var a=this.childAt(0),i=this.childAt(1),j=this.childAt(2),b=e.hostModel,k=e.getItemModel(c),d=e.getItemLayout(c),h=f({},d),m,o,n,q;h.label=null,m=b.getShallow("animationTypeUpdate"),l?(a.setShape(h),"scale"===b.getShallow("animationType")?(a.shape.r=d.r0,ao(a,{shape:{r:d.r}},b,c)):(a.shape.endAngle=d.startAngle,p(a,{shape:{endAngle:d.endAngle}},b,c))):"expansion"===m?a.setShape(h):p(a,{shape:h},b,c),o=e.getItemVisual(c,"color"),a.useStyle(g({lineJoin:"bevel",fill:o},k.getModel("itemStyle").getItemStyle())),a.hoverStyle=k.getModel("emphasis.itemStyle").getItemStyle(),n=k.getShallow("cursor"),n&&a.attr("cursor",n),ry(this,e.getItemLayout(c),b.isSelected(null,c),b.get("selectedOffset"),b.get("animation")),q=!l&&"transition"===m,this._updateLabel(e,c,q),this.highDownOnUpdate=k.get("hoverAnimation")&&b.isAnimationEnabled()?function(e,c){"emphasis"===c?(i.ignore=i.hoverIgnore,j.ignore=j.hoverIgnore,a.stopAnimation(!0),a.animateTo({shape:{r:d.r+b.get("hoverOffset")}},300,"elasticOut")):(i.ignore=i.normalIgnore,j.ignore=j.normalIgnore,a.stopAnimation(!0),a.animateTo({shape:{r:d.r}},300,"elasticOut"))}:null,G(this)},rA._updateLabel=function(e,d,q){var b=this.childAt(1),c=this.childAt(2),n=e.hostModel,f=e.getItemModel(d),a=e.getItemLayout(d).label,i=e.getItemVisual(d,"color"),o,k,l,m,h,j,g;!a||isNaN(a.x)||isNaN(a.y)?c.ignore=c.normalIgnore=c.hoverIgnore=b.ignore=b.normalIgnore=b.hoverIgnore=!0:(o={points:a.linePoints||[[a.x,a.y],[a.x,a.y],[a.x,a.y]]},k={x:a.x,y:a.y},q?(p(b,{shape:o},n,d),p(c,{style:k},n,d)):(b.attr({shape:o}),c.attr({style:k})),c.attr({rotation:a.rotation,origin:[a.x,a.y],z2:10}),l=f.getModel("label"),m=f.getModel("emphasis.label"),h=f.getModel("labelLine"),j=f.getModel("emphasis.labelLine"),i=e.getItemVisual(d,"color"),aI(c.style,c.hoverStyle={},l,m,{labelFetcher:e.hostModel,labelDataIndex:d,defaultText:e.getName(d),autoColor:i,useInsideStyle:!!a.inside},{textAlign:a.textAlign,textVerticalAlign:a.verticalAlign,opacity:e.getItemVisual(d,"opacity")}),c.ignore=c.normalIgnore=!l.get("show"),c.hoverIgnore=!m.get("show"),b.ignore=b.normalIgnore=!h.get("show"),b.hoverIgnore=!j.get("show"),b.setStyle({stroke:i,opacity:e.getItemVisual(d,"opacity")}),b.setStyle(h.getModel("lineStyle").getLineStyle()),b.hoverStyle=j.getModel("lineStyle").getLineStyle(),g=h.get("smooth"),g&&!0===g&&(g=.4),b.setShape({smooth:g}))},D(lZ,e);function rB(b,c){a(c,function(a){a.update="updateView",u(a,function(c,e){var d={};return e.eachComponent({mainType:"series",subType:b,query:c},function(b){b[a.method]&&b[a.method](c.name,c.dataIndex);var e=b.getData();e.each(function(c){var a=e.getName(c);d[a]=b.isSelected(a)||!1})}),{name:c.name,selected:d,seriesId:c.seriesId}})})}function iP(a){return{getTargetSeries:function(c){var d={},b=n();return c.eachSeriesByType(a,function(a){a.__paletteScope=d,b.set(a.uid,a)}),b},reset:function(c,e){var a=c.getRawData(),d={},b=c.getData();b.each(function(a){var c=b.getRawIndex(a);d[c]=a}),a.each(function(e){var g,f=d[e],h=null!=f&&b.getItemVisual(f,"color",!0),i=null!=f&&b.getItemVisual(f,"borderColor",!0),j,k;h&&i||(g=a.getItemModel(e)),h?a.setItemVisual(e,"color",h):(j=g.get("itemStyle.color")||c.getColorFromPalette(a.getName(e)||e+"",c.__paletteScope,a.count()),a.setItemVisual(e,"color",j),null!=f&&b.setItemVisual(f,"color",j)),i?a.setItemVisual(e,"borderColor",i):(k=g.get("itemStyle.borderColor"),a.setItemVisual(e,"borderColor",k),null!=f&&b.setItemVisual(f,"borderColor",k))})}}}ae.extend({type:"pie",init:function(){var a=new e;this._sectorGroup=a},render:function(d,s,o,p){var a,e,b,i,f,l,m,n,h,c,g,q,r;if(!p||p.from!==this.uid){if(a=d.getData(),e=this._data,b=this.group,i=s.get("animation"),f=!e,l=d.get("animationType"),m=d.get("animationTypeUpdate"),n=j(abT,this.uid,d,i,o),h=d.get("selectedMode"),a.diff(e).add(function(d){var c=new lZ(a,d);f&&"scale"!==l&&c.eachChild(function(a){a.stopAnimation(!0)}),h&&c.on("click",n),a.setItemGraphicEl(d,c),b.add(c)}).update(function(d,g){var c=e.getItemGraphicEl(g);f||"transition"===m||c.eachChild(function(a){a.stopAnimation(!0)}),c.updateData(a,d),c.off("click"),h&&c.on("click",n),b.add(c),a.setItemGraphicEl(d,c)}).remove(function(a){var c=e.getItemGraphicEl(a);b.remove(c)}).execute(),i&&0<a.count()&&(f?"scale"!==l:"transition"!==m)){for(c=a.getItemLayout(0),g=1;isNaN(c.startAngle)&&g<a.count();++g)c=a.getItemLayout(g);q=Math.max(o.getWidth(),o.getHeight())/2,r=k(b.removeClipPath,b),b.setClipPath(this._createClipPath(c.cx,c.cy,q,c.startAngle,c.clockwise,r,d,f))}else b.removeClipPath();this._data=a}},dispose:function(){},_createClipPath:function(d,e,i,a,c,f,g,h){var b=new bC({shape:{cx:d,cy:e,r0:0,r:i,startAngle:a,endAngle:a,clockwise:c}});return(h?ao:p)(b,{shape:{endAngle:a+(c?1:-1)*Math.PI*2}},g,f),b},containPoint:function(b,f){var a=f.getData().getItemLayout(0),c,d,e;if(a)return c=b[0]-a.cx,d=b[1]-a.cy,e=Math.sqrt(c*c+d*d),e<=a.r&&e>=a.r0}}),abS=Math.PI/180;function rE(a,i,e,m,l,p,g){function o(e,c,d){for(var b=e;b<c;b++)if(a[b].y+=d,e<b&&b+1<c&&a[b+1].y>a[b].y+a[b].height)return void f(b,d/2);f(c-1,d/2)}function f(c,d){for(var b=c;0<=b&&(a[b].y-=d,!(0<b&&a[b].y>a[b-1].y+a[b-1].height));b--);}function j(b,g,j,l,f,m){for(var d=g?Number.MAX_VALUE:0,a=0,k=b.length,e,h,i,c;a<k;a++)e=Math.abs(b[a].y-l),h=b[a].len,i=b[a].len2,c=e<f+h?Math.sqrt((f+h+i)*(f+h+i)-e*e):Math.abs(b[a].x-j),g&&d<=c&&(c=d-10),!g&&c<=d&&(c=d+10),b[a].x=j+c*m,d=c}a.sort(function(a,b){return a.y-b.y});for(var k,d=0,c=a.length,h=[],n=[],b=0;b<c;b++)(k=a[b].y-d)<0&&o(b,c,-k),d=a[b].y+a[b].height;g-d<0&&f(c-1,d-g);for(b=0;b<c;b++)a[b].y>=e?n.push(a[b]):h.push(a[b]);j(h,!1,i,e,m,l),j(n,!0,i,e,m,l)}function rF(a){return"center"===a.position}function abQ(a,e,j,i,k){var c,d,b=a.getData(),f=[],g=!1,h=(a.get("minShowLabelAngle")||0)*abS;b.each(function(r){var i=b.getItemLayout(r),x=b.getItemModel(r),w=x.getModel("label"),n=w.get("position")||x.get("emphasis.label.position"),D=x.getModel("labelLine"),u=D.get("length"),E=D.get("length2"),q,l,z,p,o,j,m,k,y,s,A,B,C,v,F,t,G;i.angle<h||(o=(i.startAngle+i.endAngle)/2,j=Math.cos(o),m=Math.sin(o),c=i.cx,d=i.cy,k="inside"===n||"inner"===n,"center"===n?(q=i.cx,l=i.cy,p="center"):(y=(k?(i.r+i.r0)/2*j:i.r*j)+c,s=(k?(i.r+i.r0)/2*m:i.r*m)+d,(q=y+3*j,l=s+3*m,!k)&&(A=y+j*(u+e-i.r),B=s+m*(u+e-i.r),C=A+(j<0?-1:1)*E,q=C+(j<0?-5:5),z=[[y,s],[A,B],[C,l=B]]),p=k?"center":0<j?"left":"right"),F=w.getFont(),t=w.get("rotate"),v="number"==typeof t?t*(Math.PI/180):t?j<0?-o+Math.PI:-o:0,G=bn(a.getFormattedLabel(r,"normal")||b.getName(r),F,p,"top"),g=!!v,i.label={x:q,y:l,position:n,height:G.height,len:u,len2:E,linePoints:z,textAlign:p,verticalAlign:"middle",rotation:v,inside:k},k||f.push(i.label))}),!g&&a.get("avoidLabelOverlap")&&function(b,d,h,i,k,e){for(var f=[],g=[],a=0,c,j;a<b.length;a++)rF(b[a])||(b[a].x<d?f.push(b[a]):g.push(b[a]));for(rE(g,d,h,i,1,0,e),rE(f,d,h,i,-1,0,e),a=0;a<b.length;a++)rF(b[a])||(c=b[a].linePoints,c&&(j=c[1][0]-c[2][0],b[a].x<d?c[2][0]=b[a].x+3:c[2][0]=b[a].x-3,c[1][1]=c[2][1]=b[a].y,c[1][0]=c[2][0]+j))}(f,c,d,e,0,i)}function fs(a){return{seriesType:a,reset:function(c,d){var a=d.findComponents({mainType:"legend"}),b;a&&a.length&&(b=c.getData(),b.filterSelf(function(d){for(var e=b.getName(d),c=0;c<a.length;c++)if(!a[c].isSelected(e))return!1;return!0}))}}}iE=2*Math.PI,rJ=Math.PI/180,rB("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),H(iP("pie")),N(j(function(c,e,a,f){e.eachSeriesByType(c,function(e){var c=e.getData(),g=c.mapDimension("value"),h=e.get("center"),k=e.get("radius"),B,r,y,v,A,s,o,l,p,j,w,n,q,t,C,x,m,z,f,i,u;b(k)||(k=[0,k]),b(h)||(h=[h,h]),B=a.getWidth(),r=a.getHeight(),y=Math.min(B,r),v=d(h[0],B),A=d(h[1],r),s=d(k[0],y/2),o=d(k[1],y/2),l=-e.get("startAngle")*rJ,p=e.get("minAngle")*rJ,j=0,c.each(g,function(a){isNaN(a)||j++}),w=c.getSum(g),n=Math.PI/(w||j)*2,q=e.get("clockwise"),t=e.get("roseType"),C=e.get("stillShowZeroSum"),x=c.getDataExtent(g),x[0]=0,m=iE,z=0,f=l,i=q?1:-1,(c.each(g,function(a,d){var b,e;isNaN(a)?c.setItemLayout(d,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:q,cx:v,cy:A,r0:s,r:t?NaN:o}):((b="area"!==t?0===w&&C?n:a*n:iE/j)<p?m-=b=p:z+=a,e=f+i*b,c.setItemLayout(d,{angle:b,startAngle:f,endAngle:e,clockwise:q,cx:v,cy:A,r0:s,r:t?J(a,x,[s,o]):o}),f=e)}),m<iE&&j)&&(m<=.001?(u=iE/j,c.each(g,function(d,a){if(!isNaN(d)){var b=c.getItemLayout(a);b.angle=u,b.startAngle=l+i*a*u,b.endAngle=l+i*(a+1)*u}})):(n=m/z,f=l,c.each(g,function(b,e){if(!isNaN(b)){var a=c.getItemLayout(e),d=a.angle===p?p:b*n;a.startAngle=f,a.endAngle=f+i*d,f+=i*d}}))),abQ(e,o,0,r)})},"pie")),aH(fs("pie")),M.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(a,b){return ca(this.getSource(),this)},brushSelector:"point",getProgressive:function(){var a=this.option.progressive;return null==a?this.option.large?5e3:this.get("progressive"):a},getProgressiveThreshold:function(){var a=this.option.progressiveThreshold;return null==a?this.option.large?1e4:this.get("progressiveThreshold"):a},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}}),lR=ba({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(c,i){var e=i.points,a=i.size,h=this.symbolProxy,b=h.shape,f,d,g;if(!((c.getContext?c.getContext():c)&&a[0]<4))for(f=0;f<e.length;)d=e[f++],g=e[f++],isNaN(d)||isNaN(g)||this.softClipShape&&!this.softClipShape.contain(d,g)||(b.x=d-a[0]/2,b.y=g-a[1]/2,b.width=a[0],b.height=a[1],h.buildPath(c,b,!0))},afterBrush:function(b){var g=this.shape,c=g.points,a=g.size,d,e,f;if(a[0]<4){this.setTransform(b);for(d=0;d<c.length;)e=c[d++],f=c[d++],isNaN(e)||isNaN(f)||this.softClipShape&&!this.softClipShape.contain(e,f)||b.fillRect(e-a[0]/2,f-a[1]/2,a[0],a[1]);this.restoreTransform(b)}},findDataIndex:function(c,h){for(var d=this.shape,b=d.points,e=d.size,f=Math.max(e[0],4),g=Math.max(e[1],4),a=b.length/2-1,i,j,k;0<=a;a--)if(i=2*a,j=b[i]-f/2,k=b[1+i]-g/2,j<=c&&k<=h&&c<=j+f&&h<=k+g)return a;return-1}});function rL(){this.group=new e}ck=rL.prototype;function rN(a,b,c){Q.call(this,a,b,c),this.type="value",this.angle=0,this.name="",this.model}function bm(a,d,b){this._model=a,this.dimensions=[],this._indicatorAxes=c(a.getIndicatorModels(),function(b,d){var c="indicator_"+d,a=new rN(c,"log"===b.get("axisType")?new ix:new bA);return a.name=b.get("name"),(a.model=b).axis=a,this.dimensions.push(c),a},this),this.resize(a,b),this.cx,this.cy,this.r,this.r0,this.startAngle}ck.isPersistent=function(){return!this._incremental},ck.updateData=function(b,c){this.group.removeAll();var a=new lR({rectHover:!0,cursor:"default"});a.setShape({points:b.getLayout("symbolPoints")}),this._setCommon(a,b,!1,c),this.group.add(a),this._incremental=null},ck.updateLayout=function(b){if(!this._incremental){var a=b.getLayout("symbolPoints");this.group.eachChild(function(b){if(null!=b.startIndex){var c=2*(b.endIndex-b.startIndex),d=4*b.startIndex*2;a=new Float32Array(a.buffer,d,c)}b.setShape("points",a)})}},ck.incrementalPrepareUpdate=function(a){this.group.removeAll(),this._clearIncremental(),2e6<a.count()?(this._incremental||(this._incremental=new aJ({silent:!0})),this.group.add(this._incremental)):this._incremental=null},ck.incrementalUpdate=function(b,c,d){var a;this._incremental?(a=new lR,this._incremental.addDisplayable(a,!0)):((a=new lR({rectHover:!0,cursor:"default",startIndex:b.start,endIndex:b.end})).incremental=!0,this.group.add(a)),a.setShape({points:c.getLayout("symbolPoints")}),this._setCommon(a,c,!!this._incremental,d)},ck._setCommon=function(a,b,g,d){var e=b.hostModel,c,h,f;d=d||{},c=b.getVisual("symbolSize"),a.setShape("size",c instanceof Array?c:[c,c]),a.softClipShape=d.clipShape||null,a.symbolProxy=aQ(b.getVisual("symbol"),0,0,0,0),a.setColor=a.symbolProxy.setColor,h=a.shape.size[0]<4,a.useStyle(e.getModel("itemStyle").getItemStyle(h?["color","shadowBlur","shadowColor"]:["color"])),f=b.getVisual("color"),f&&a.setColor(f),g||(a.seriesIndex=e.seriesIndex,a.on("mousemove",function(b){a.dataIndex=null;var c=a.findDataIndex(b.offsetX,b.offsetY);0<=c&&(a.dataIndex=c+(a.startIndex||0))}))},ck.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},ck._clearIncremental=function(){var a=this._incremental;a&&a.clearDisplaybles()},ay({type:"scatter",render:function(a,c,d){var b=a.getData();this._updateSymbolDraw(b,a).updateData(b,{clipShape:this._getClipShape(a)}),this._finished=!0},incrementalPrepareRender:function(a,c,d){var b=a.getData();this._updateSymbolDraw(b,a).incrementalPrepareUpdate(b),this._finished=!1},incrementalRender:function(b,a,c){this._symbolDraw.incrementalUpdate(b,a.getData(),{clipShape:this._getClipShape(a)}),this._finished=b.end===a.getData().count()},updateTransform:function(b,d,e){var a=b.getData(),c;if(this.group.dirty(),!this._finished||1e4<a.count()||!this._symbolDraw.isPersistent())return{update:!0};c=fW().reset(b),c.progress&&c.progress({start:0,end:a.count()},a),this._symbolDraw.updateLayout(a)},_getClipShape:function(b){var a=b.coordinateSystem,c=a&&a.getArea&&a.getArea();return b.get("clip",!0)?c:null},_updateSymbolDraw:function(d,c){var a=this._symbolDraw,b=c.pipelineContext.large;return a&&b===this._isLargeDraw||(a&&a.remove(),a=this._symbolDraw=b?new rL:new ez,this._isLargeDraw=b,this.group.removeAll()),this.group.add(a.group),a},remove:function(a,b){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}}),H(cY("scatter","circle")),N(fW("scatter")),D(rN,Q),bm.prototype.getIndicatorAxes=function(){return this._indicatorAxes},bm.prototype.dataToPoint=function(b,a){var c=this._indicatorAxes[a];return this.coordToPoint(c.dataToCoord(b),a)},bm.prototype.coordToPoint=function(a,c){var b=this._indicatorAxes[c].angle;return[this.cx+a*Math.cos(b),this.cy-a*Math.sin(b)]},bm.prototype.pointToData=function(f){var a=f[0]-this.cx,b=f[1]-this.cy,d=Math.sqrt(a*a+b*b),e,k,g,h,c,i,j;a/=d,b/=d;for(e,k=Math.atan2(-b,a),g=1/0,h=-1,c=0;c<this._indicatorAxes.length;c++)i=this._indicatorAxes[c],j=Math.abs(k-i.angle),j<g&&(e=i,h=c,g=j);return[h,+(e&&e.coordToData(d))]},bm.prototype.resize=function(c,e){var f=c.get("center"),g=e.getWidth(),h=e.getHeight(),i=Math.min(g,h)/2,b;this.cx=d(f[0],g),this.cy=d(f[1],h),this.startAngle=c.get("startAngle")*Math.PI/180,b=c.get("radius"),"string"!=typeof b&&"number"!=typeof b||(b=[0,b]),this.r0=d(b[0],i),this.r=d(b[1],i),a(this._indicatorAxes,function(b,c){b.setExtent(this.r0,this.r);var a=this.startAngle+c*Math.PI*2/this._indicatorAxes.length;a=Math.atan2(Math.sin(a),Math.cos(a)),b.angle=a},this)},bm.prototype.update=function(e,g){var c=this._indicatorAxes,f=this._model,b;a(c,function(a){a.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(b,g){if("radar"===b.get("coordinateSystem")&&e.getComponent("radar",b.get("radarIndex"))===f){var d=b.getData();a(c,function(a){a.scale.unionExtentFromData(d,d.mapDimension(a.dim))})}},this),b=f.get("splitNumber");function d(b){var c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10)),a=b/c;return 2===a?a=5:a*=2,a*c}a(c,function(h,o){var f=pl(h.scale,h.model),k,c,e,g,a,i,j,n,l,m;if(cJ(h.scale,h.model),k=h.model,c=h.scale,e=k.getMin(),g=k.getMax(),a=c.getInterval(),null!=e&&null!=g)c.setExtent(+e,+g),c.setInterval((g-e)/b);else if(null!=e)for(i;i=e+a*b,c.setExtent(+e,i),c.setInterval(a),a=d(a),i<f[1]&&isFinite(i)&&isFinite(f[1]););else if(null!=g)for(j;j=g-a*b,c.setExtent(j,+g),c.setInterval(a),a=d(a),j>f[0]&&isFinite(j)&&isFinite(f[0]););else n=c.getTicks().length-1,b<n&&(a=d(a)),l=Math.round((f[0]+f[1])/2/a)*a,m=Math.round(b/2),c.setExtent(X(l-m*a),X(l+(b-m)*a)),c.setInterval(a)})},bm.dimensions=[],bm.create=function(a,c){var b=[];return a.eachComponent("radar",function(d){var e=new bm(d,a,c);b.push(e),d.coordinateSystem=e}),a.eachSeriesByType("radar",function(a){"radar"===a.get("coordinateSystem")&&(a.coordinateSystem=b[a.get("radarIndex")||0])}),b},aq.register("radar",bm),fo=cE.valueAxis;function hS(a,b){return g({show:b},a)}aN({type:"radar",optionUpdated:function(){var d=this.get("boundaryGap"),o=this.get("splitNumber"),m=this.get("scale"),e=this.get("axisLine"),h=this.get("axisTick"),j=this.get("axisType"),k=this.get("axisLabel"),b=this.get("name"),n=this.get("name.show"),a=this.get("name.formatter"),p=this.get("nameGap"),q=this.get("triggerEvent"),r=c(this.get("indicator")||[],function(c){var s,t,r;return null!=c.max&&0<c.max&&!c.min?c.min=0:null!=c.min&&c.min<0&&!c.max&&(c.max=0),s=b,(null!=c.color&&(s=g({color:c.color},b)),c=l(i(c),{boundaryGap:d,splitNumber:o,scale:m,axisLine:e,axisTick:h,axisType:j,axisLabel:k,name:c.text,nameLocation:"end",nameGap:p,nameTextStyle:s,triggerEvent:q},!1),n||(c.name=""),"string"==typeof a)?(t=c.name,c.name=a.replace("{value}",null!=t?t:"")):"function"==typeof a&&(c.name=a(c.name,c)),r=f(new w(c,null,this.ecModel),dI),r.mainType="radar",r.componentIndex=this.componentIndex,r},this);this.getIndicatorModels=function(){return r}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:l({lineStyle:{color:"#bbb"}},fo.axisLine),axisLabel:hS(fo.axisLabel,!1),axisTick:hS(fo.axisTick,!1),axisType:"interval",splitLine:hS(fo.splitLine,!0),splitArea:hS(fo.splitArea,!0),indicator:[]}}),abP=["axisLine","axisTickLabel","axisName"],$({type:"radar",render:function(a,b,c){this.group.removeAll(),this._buildAxes(a),this._buildSplitLineAndArea(a)},_buildAxes:function(d){var b=d.coordinateSystem;a(c(b.getIndicatorAxes(),function(a){return new ax(a.model,{position:[b.cx,b.cy],rotation:a.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(b){a(abP,b.add,b),this.group.add(b.getGroup())},this)},_buildSplitLineAndArea:function(o){var m=o.coordinateSystem,n=m.getIndicatorAxes(),A,y,v,s,x,w,z,e,f,j,i,k,t,u,d,l,B,q,h,r,C,D;if(n.length){if(A=o.get("shape"),y=o.getModel("splitLine"),v=o.getModel("splitArea"),s=y.getModel("lineStyle"),x=v.getModel("areaStyle"),w=y.get("show"),z=v.get("show"),e=s.get("color"),f=x.get("color"),e=b(e)?e:[e],f=b(f)?f:[f],j=[],i=[],"circle"===A){for(k=n[0].getTicksCoords(),t=m.cx,u=m.cy,d=0;d<k.length;d++)w&&j[p(j,e,d)].push(new bI({shape:{cx:t,cy:u,r:k[d].coord}})),z&&d<k.length-1&&i[p(i,f,d)].push(new gH({shape:{cx:t,cy:u,r0:k[d].coord,r:k[d+1].coord}}))}else{B=c(n,function(b,d){var a=b.getTicksCoords();return l=null==l?a.length-1:Math.min(a.length-1,l),c(a,function(a){return m.coordToPoint(a.coord,d)})}),q=[];for(d=0;d<=l;d++){for(h=[],r=0;r<n.length;r++)h.push(B[r][d]);h[0]&&h.push(h[0].slice()),w&&j[p(j,e,d)].push(new aZ({shape:{points:h}})),z&&q&&i[p(i,f,d-1)].push(new aF({shape:{points:h.concat(q)}})),q=h.slice().reverse()}}C=s.getLineStyle(),D=x.getAreaStyle(),a(i,function(a,b){this.group.add(bS(a,{style:g({stroke:"none",fill:f[b%f.length]},D),silent:!0}))},this),a(j,function(a,b){this.group.add(bS(a,{style:g({fill:"none",stroke:e[b%e.length]},C),silent:!0}))},this)}function p(b,c,d){var a=d%c.length;return b[a]=b[a]||[],a}}}),abO=M.extend({type:"series.radar",dependencies:["radar"],init:function(a){abO.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()}},getInitialData:function(a,b){return eo(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(a){var b=this.getData(),e=this.coordinateSystem.getIndicatorAxes(),d=this.getData().getName(a);return K(""===d?this.name:d)+"<br/>"+c(e,function(c,e){var d=b.get(b.mapDimension(c.dim),a);return K(c.name+" : "+d)}).join("<br />")},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}}),ay({type:"radar",render:function(d,n,o){var j=d.coordinateSystem,k=this.group,a=d.getData(),f=this._data;function m(a,c){var d=a.getItemVisual(c,"symbol")||"circle",g=a.getItemVisual(c,"color"),e,f;if("none"!==d)return e=function(a){return b(a)||(a=[+a,+a]),a}(a.getItemVisual(c,"symbolSize")),f=aQ(d,-1,-1,2,2,g),f.attr({style:{strokeNoScale:!0},z2:100,scale:[e[0]/2,e[1]/2]}),f}function h(g,c,e,h,f,i){var a,b;e.removeAll();for(a=0;a<c.length-1;a++)b=m(h,f),b&&(g[b.__dimIdx=a]?(b.attr("position",g[a]),bY[i?"initProps":"updateProps"](b,{position:c[a]},d,f)):b.attr("position",c[a]),e.add(b))}function l(a){return c(a,function(a){return[j.cx,j.cy]})}a.diff(f).add(function(b){var c=a.getItemLayout(b),i,f,j,g,k;c&&(i=new aF,f=new aZ,j={shape:{points:c}},i.shape.points=l(c),f.shape.points=l(c),ao(i,j,d,b),ao(f,j,d,b),g=new e,k=new e,g.add(f),g.add(i),g.add(k),h(f.shape.points,c,k,a,b,!0),a.setItemGraphicEl(b,g))}).update(function(e,i){var c=f.getItemGraphicEl(i),g=c.childAt(0),j=c.childAt(1),k=c.childAt(2),b={shape:{points:a.getItemLayout(e)}};b.shape.points&&(h(g.shape.points,b.shape.points,k,a,e,!1),p(g,b,d),p(j,b,d),a.setItemGraphicEl(e,c))}).remove(function(a){k.remove(f.getItemGraphicEl(a))}).execute(),a.eachItemGraphicEl(function(c,e){var b=a.getItemModel(e),n=c.childAt(0),d=c.childAt(1),o=c.childAt(2),l=a.getItemVisual(e,"color"),m,f,j,h,p,q,r,s;k.add(c),n.useStyle(g(b.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:l})),n.hoverStyle=b.getModel("emphasis.lineStyle").getLineStyle(),m=b.getModel("areaStyle"),f=b.getModel("emphasis.areaStyle"),j=m.isEmpty()&&m.parentModel.isEmpty(),h=f.isEmpty()&&f.parentModel.isEmpty(),h=h&&j,d.ignore=j,d.useStyle(g(m.getAreaStyle(),{fill:l,opacity:.7})),d.hoverStyle=f.getAreaStyle(),p=b.getModel("itemStyle").getItemStyle(["color"]),q=b.getModel("emphasis.itemStyle").getItemStyle(),r=b.getModel("label"),s=b.getModel("emphasis.label"),o.eachChild(function(b){b.setStyle(p),b.hoverStyle=i(q);var c=a.get(a.dimensions[b.__dimIdx],e);null!=c&&!isNaN(c)||(c=""),aI(b.style,b.hoverStyle,r,s,{labelFetcher:a.hostModel,labelDataIndex:e,labelDimIndex:b.__dimIdx,defaultText:c,autoColor:l,isRectText:!0})}),c.highDownOnUpdate=function(b,a){d.attr("ignore","emphasis"===a?h:j)},G(c)}),this._data=a},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}});function rT(a){return!isNaN(a[0])&&!isNaN(a[1])}function rU(a){return[a.cx,a.cy]}H(iP("radar")),H(cY("radar","circle")),N(function(b){b.eachSeriesByType("radar",function(e){var d=e.getData(),b=[],c=e.coordinateSystem,f;c&&(f=c.getIndicatorAxes(),a(f,function(e,a){d.each(d.mapDimension(f[a].dim),function(f,d){b[d]=b[d]||[];var e=c.dataToPoint(f,a);b[d][a]=rT(e)?e:rU(c)})}),d.each(function(a){var e=yN(b[a],function(a){return rT(a)})||rU(c);b[a].push(e.slice()),d.setItemLayout(a,b[a])}))})}),aH(fs("radar")),aj(function(c){var d=c.polar,e;d&&(b(d)||(d=[d]),e=[],a(d,function(a,d){a.indicator?(a.type&&!a.shape&&(a.shape=a.type),c.radar=c.radar||[],b(c.radar)||(c.radar=[c.radar]),c.radar.push(a)):e.push(a)}),c.polar=e),a(c.series,function(a){a&&"radar"===a.type&&a.polarIndex&&(a.radarIndex=a.polarIndex)})});for(lx=[126,25],cZ=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],c$=0;c$<cZ.length;c$++)for(dR=0;dR<cZ[c$].length;dR++)cZ[c$][dR][0]/=10.5,cZ[c$][dR][1]/=-14,cZ[c$][dR][0]+=lx[0],cZ[c$][dR][1]+=lx[1];abN={"":[32,80],"":[0,-10],"":[10,5],"":[-10,10],"":[5,5]},abM={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},abL=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],sa=au(),abI={load:function(d,e){var f=sa(e).parsed,b,h,g;if(f)return f;h=e.specialAreas||{},g=e.geoJSON;try{b=g?o$(g):[]}catch(a){throw new Error("Invalid geoJson format\n"+a.message)}return function(a,b){"china"===a&&b.push(new gw("",c(cZ,function(a){return{type:"polygon",exterior:a}}),lx))}(d,b),a(b,function(a){var c=a.name,b;!function(d,c){var a,b;"china"===d&&(a=abN[c.name],a&&(b=c.center,b[0]+=a[0]/10.5,b[1]+=-a[1]/14))}(d,a),function(d,c){var a,b;"world"===d&&(a=abM[c.name],a&&(b=c.center,b[0]=a[0],b[1]=a[1]))}(d,a),function(b,a){"china"===b&&""===a.name&&a.geometries.push({type:"polygon",exterior:abL[0]})}(d,a),b=h[c],b&&a.transformTo(b.left,b.top,b.width,b.height)}),sa(e).parsed={regions:b,boundingRect:function(c){for(var a,b=0,d;b<c.length;b++)d=c[b].getBoundingRect(),(a=a||d.clone()).union(d);return a}(b)}}},d_=au();function sd(k,a){var c,b,h=k.svgXML,f,d,i,j,g;try{cg(null!=(b=(c=h&&function(a,b){return(new iO).parse(a,b)}(h,{ignoreViewBox:!0,ignoreRootClip:!0})||{}).root))}catch(a){throw new Error("Invalid svg format\n"+a.message)}return f=c.width,d=c.height,i=c.viewBoxRect,(a||(a=null==f||null==d?b.getBoundingRect():new r(0,0,0,0),null!=f&&(a.width=f),null!=d&&(a.height=d)),i)&&(j=rf(i,a.width,a.height),g=b,(b=new e).add(g),g.scale=j.scale,g.position=j.position),b.setClipPath(new y({shape:a.plain()})),{root:b,boundingRect:a}}se={geoJSON:abI,svg:{load:function(d,a){var c=d_(a).originRoot,b;return c?{root:c,boundingRect:d_(a).boundingRect}:(b=sd(a),d_(a).originRoot=b.root,d_(a).boundingRect=b.boundingRect,b)},makeGraphic:function(h,d,c){var a=d_(d),e=a.rootMap||(a.rootMap=n()),b=e.get(c),f,g;return b||(f=a.originRoot,g=a.boundingRect,b=a.originRootHostKey?sd(d,g).root:(a.originRootHostKey=c,f),e.set(c,b))},removeGraphic:function(e,d,b){var a=d_(d),c=a.rootMap;c&&c.removeKey(b),b===a.originRootHostKey&&(a.originRootHostKey=null)}}},gg={load:function(d,c){var b,e=[],f=n(),g=n();return a(sh(d),function(i){var j=se[i.type].load(d,i),h;a(j.regions,function(a){var b=a.name;c&&c.hasOwnProperty(b)&&(a=a.cloneShallow(b=c[b])),e.push(a),f.set(b,a),g.set(b,a.center)}),h=j.boundingRect,h&&(b?b.union(h):b=h.clone())}),{regions:e,regionsMap:f,nameCoordMap:g,boundingRect:b||new r(0,0,0,0)}},makeGraphic:sg("makeGraphic"),removeGraphic:sg("removeGraphic")};function sg(b){return function(c,e){var f=sh(c),d=[];return a(f,function(a){var f=se[a.type][b];f&&d.push(f(c,a,e))}),d}}function sh(a){return jx.retrieveMap(a)||[]}C(M.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(j){for(var b=eo(this,["value"]),i=b.mapDimension("value"),f=n(),d=[],g=[],c=0,h=b.count(),e;c<h;c++)e=b.getName(c),f.set(e,!0),d.push({name:e,value:b.get(i,c),selected:sH(b,c,"selected")});return a(gg.load(this.getMapType(),this.option.nameMap).regions,function(b){var a=b.name;f.get(a)||(d.push({name:a}),g.push(a))}),this.updateSelectedMap(d),b.appendValues([],g),b},getHostGeoModel:function(){var a=this.option.geoIndex;return null!=a?this.dependentModels.geo[a]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(b){var a=this.getData();return a.get(a.mapDimension("value"),b)},getRegionModel:function(b){var a=this.getData();return a.getItemModel(a.indexOfName(b))},formatTooltip:function(f){for(var c=this.getData(),g=cN(this.getRawValue(f)),d=c.getName(f),b=this.seriesGroup,e=[],a=0,h,i;a<b.length;a++)h=b[a].originalData.indexOfName(d),i=c.mapDimension("value"),isNaN(b[a].originalData.get(i,h))||e.push(K(b[a].name));return e.join(", ")+"<br />"+K(d+" : "+g)},getTooltipPosition:function(a){if(null!=a){var d=this.getData().getName(a),b=this.coordinateSystem,c=b.getRegion(d);return c&&b.dataToPoint(c.center)}},setZoom:function(a){this.option.zoom=a},setCenter:function(a){this.option.center=a},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}}}}),mb),si="\0_ec_interaction_mutex";function sj(a,b){return!!lc(a)[b]}function lc(a){return a[si]||(a[si]={})}function ep(a){this.pointerChecker,this._zr=a,this._opt={};var b=k,c=b(abH,this),d=b(abF,this),e=b(abD,this),f=b(abC,this),h=b(abB,this);Z.call(this),this.setPointerChecker=function(a){this.pointerChecker=a},this.enable=function(b,j){this.disable(),this._opt=g(i(j)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==b&&(b=!0),!0!==b&&"move"!==b&&"pan"!==b||(a.on("mousedown",c),a.on("mousemove",d),a.on("mouseup",e)),!0!==b&&"scale"!==b&&"zoom"!==b||(a.on("mousewheel",f),a.on("pinch",h))},this.disable=function(){a.off("mousedown",c),a.off("mousemove",d),a.off("mouseup",e),a.off("mousewheel",f),a.off("pinch",h)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function abH(a){if(!(yg(a)||a.target&&a.target.draggable)){var b=a.offsetX,c=a.offsetY;this.pointerChecker&&this.pointerChecker(a,b,c)&&(this._x=b,this._y=c,this._dragging=!0)}}function abF(a){if(this._dragging&&hv("moveOnMouseMove",a,this._opt)&&"pinch"!==a.gestureEvent&&!sj(this._zr,"globalPan")){var b=a.offsetX,c=a.offsetY,d=this._x,e=this._y,f=b-d,g=c-e;this._x=b,this._y=c,this._opt.preventDefaultMouseMove&&cw(a.event),ss(this,"pan","moveOnMouseMove",a,{dx:f,dy:g,oldX:d,oldY:e,newX:b,newY:c})}}function abD(a){yg(a)||(this._dragging=!1)}function abC(a){var c=hv("zoomOnMouseWheel",a,this._opt),d=hv("moveOnMouseWheel",a,this._opt),b=a.wheelDelta,e=Math.abs(b),f=a.offsetX,g=a.offsetY,h,i;0!==b&&(c||d)&&(c&&(h=3<e?1.4:1<e?1.2:1.1,kV(this,"zoom","zoomOnMouseWheel",a,{scale:0<b?h:1/h,originX:f,originY:g})),d&&(i=Math.abs(b),kV(this,"scrollMove","moveOnMouseWheel",a,{scrollDelta:(0<b?1:-1)*(3<i?.4:1<i?.15:.05),originX:f,originY:g})))}function abB(a){sj(this._zr,"globalPan")||kV(this,"zoom",null,a,{scale:1<a.pinchScale?1.1:1/1.1,originX:a.pinchX,originY:a.pinchY})}function kV(a,d,e,b,c){a.pointerChecker&&a.pointerChecker(b,c.originX,c.originY)&&(cw(b.event),ss(a,d,e,b,c))}function ss(b,c,d,e,a){a.isAvailableBehavior=k(hv,null,d,e),b.trigger(c,a)}function hv(b,c,d){var a=d[b];return!b||a&&(!E(a)||c.event[a+"Key"])}function kT(c,d,e){var a=c.target,b=a.position;b[0]+=d,b[1]+=e,a.dirty()}function kQ(a,i,j,h){var e=a.target,f=a.zoomLimit,d=e.position,g=e.scale,b=a.zoom=a.zoom||1,k,l,c;b*=i,f&&(k=f.min||0,l=f.max||1/0,b=Math.max(Math.min(l,b),k)),c=b/a.zoom,a.zoom=b,d[0]-=(j-d[0])*(c-1),d[1]-=(h-d[1])*(c-1),g[0]*=c,g[1]*=c,e.dirty()}u({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),C(ep,Z),abz={axisPointer:1,tooltip:1,brush:1};function hC(d,e,b){var a=e.getComponentByElement(d.topTarget),c=a&&a.coordinateSystem;return a&&a!==b&&!abz[a.mainType]&&c&&c.model!==b}function sy(a){var b=a.getItemStyle(),c=a.get("areaColor");return null!=c&&(b.fill=c),b}function sz(b,c){c.eachChild(function(c){a(c.__regions,function(a){c.trigger(b.isSelected(a.name)?"emphasis":"normal")})})}function hD(c,b){var a=new e;this.uid=eV("ec_map_draw"),this._controller=new ep(c.getZr()),this._controllerHost={target:b?a:null},this.group=a,this._updateGroup=b,this._mouseDownFlag,this._mapName,this._initialized,a.add(this._regionsGroup=new e),a.add(this._backgroundGroup=new e)}hD.prototype={constructor:hD,draw:function(b,k,j,r,v){var i="geo"===b.mainType,d=b.getData&&b.getData(),f,h,g,l,m,p,s,t,u,o;i&&k.eachComponent({mainType:"series",subType:"map"},function(a){d||a.getHostGeoModel()!==b||(d=a.getData())}),f=b.coordinateSystem,this._updateBackground(f),h=this._regionsGroup,g=this.group,f._roamTransformable.transform&&(g.transform=f._roamTransformable.transform.slice(),g.decomposeTransform()),l=f._rawTransformable.scale,m=f._rawTransformable.position,h.removeAll(),p=["itemStyle"],s=["emphasis","itemStyle"],t=["label"],u=["emphasis","label"],o=n(),a(f.regions,function(c){var f=o.get(c.name)||o.set(c.name,new e),j=new uR({segmentIgnoreThreshold:1,shape:{paths:[]}}),k,F,J,w,I,x,y,B,C,E,D,A,z,H,v,n;f.add(j),F=(n=b.getRegionModel(c.name)||b).getModel(p),J=n.getModel(s),w=sy(F),I=sy(J),x=n.getModel(t),y=n.getModel(u),d&&(k=d.indexOfName(c.name),B=d.getItemVisual(k,"color",!0),B&&(w.fill=B));function r(a){return[a[0]*l[0]+m[0],a[1]*l[1]+m[1]]}a(c.geometries,function(b){var c,a,e,d;if("polygon"===b.type){for(c=[],a=0;a<b.exterior.length;++a)c.push(r(b.exterior[a]));j.shape.paths.push(new aF({segmentIgnoreThreshold:1,shape:{points:c}}));for(a=0;a<(b.interiors?b.interiors.length:0);++a){for(e=b.interiors[a],d=(c=[],0);d<e.length;++d)c.push(r(e[d]));j.shape.paths.push(new aF({segmentIgnoreThreshold:1,shape:{points:c}}))}}}),j.setStyle(w),j.style.strokeNoScale=!0,j.culling=!0,C=x.get("show"),E=y.get("show"),D=d&&isNaN(d.get(d.mapDimension("value"),k)),A=d&&d.getItemLayout(k),(i||D&&(C||E)||A&&A.showLabel)&&(H=i?c.name:k,(!d||0<=k)&&(z=b),v=new q({position:r(c.center.slice()),scale:[1/g.scale[0],1/g.scale[1]],z2:10,silent:!0}),aI(v.style,v.hoverStyle={},x,y,{labelFetcher:z,labelDataIndex:H,defaultText:c.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),f.add(v)),d?d.setItemGraphicEl(k,f):(n=b.getRegionModel(c.name),j.eventData={componentType:"geo",componentIndex:b.componentIndex,geoIndex:b.componentIndex,name:c.name,region:n&&n.option||{}}),(f.__regions||(f.__regions=[])).push(c),f.highDownSilentOnTouch=!!b.get("selectedMode"),G(f,I),h.add(f)}),this._updateController(b,k,j),function(d,a,b,e,f){b.off("click"),b.off("mousedown"),a.get("selectedMode")&&(b.on("mousedown",function(){d._mouseDownFlag=!0}),b.on("click",function(i){var g,h;if(d._mouseDownFlag){d._mouseDownFlag=!1;for(g=i.target;!g.__regions;)g=g.parent;g&&(h={type:("geo"===a.mainType?"geo":"map")+"ToggleSelect",batch:c(g.__regions,function(a){return{name:a.name,from:f.uid}})},h[a.mainType+"Id"]=a.id,e.dispatchAction(h),sz(a,b))}}))}(this,b,h,j,r),sz(b,h)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&gg.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(c){var b=c.map;this._mapName!==b&&a(gg.makeGraphic(b,this.uid),function(a){this._backgroundGroup.add(a)},this),this._mapName=b},_updateController:function(a,i,d){var g=a.coordinateSystem,b=this._controller,c=this._controllerHost,h;c.zoomLimit=a.get("scaleLimit"),c.zoom=g.getZoom(),b.enable(a.get("roam")||!1),h=a.mainType;function e(){var b={type:"geoRoam",componentType:h};return b[h+"Id"]=a.id,b}b.off("pan").on("pan",function(a){this._mouseDownFlag=!1,kT(c,a.dx,a.dy),d.dispatchAction(f(e(),{dx:a.dx,dy:a.dy}))},this),b.off("zoom").on("zoom",function(a){if(this._mouseDownFlag=!1,kQ(c,a.scale,a.originX,a.originY),d.dispatchAction(f(e(),{zoom:a.scale,originX:a.originX,originY:a.originY})),this._updateGroup){var b=this.group.scale;this._regionsGroup.traverse(function(a){"text"===a.type&&a.attr("scale",[1/b[0],1/b[1]])})}},this),b.setPointerChecker(function(b,c,e){return g.getViewRectAfterRoam().contain(c,e)&&!hC(b,d,a)})}},kM="__seriesMapHighDown",sC="__seriesMapCallKey";function sD(b){var a=this[kM];a&&a.recordVersion===this[sC]&&sE(a,b)}function sE(b,e){var a=b.circle,c=b.labelModel,d=b.hoverLabelModel,f=b.emphasisText,g=b.normalText;e?(a.style.extendFrom(O({},d,{text:d.get("show")?f:null},{isRectText:!0,useInsideStyle:!1},!0)),a.__mapOriginalZ2=a.z2,a.z2+=f_):(O(a.style,c,{text:c.get("show")?g:null,textPosition:c.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),a.dirty(!1),null!=a.__mapOriginalZ2&&(a.z2=a.__mapOriginalZ2,a.__mapOriginalZ2=null))}function kF(a,c,g){var h=a.getZoom(),d=a.getCenter(),b=c.zoom,f=a.dataToPoint(d),i,j,e,k,l;return null!=c.dx&&null!=c.dy&&(f[0]-=c.dx,f[1]-=c.dy,d=a.pointToData(f),a.setCenter(d)),null!=b&&(g&&(i=g.min||0,j=g.max||1/0,b=Math.max(Math.min(h*b,j),i)/h),a.scale[0]*=b,a.scale[1]*=b,e=a.position,k=(c.originX-e[0])*(b-1),l=(c.originY-e[1])*(b-1),e[0]-=k,e[1]-=l,a.updateTransform(),d=a.pointToData(f),a.setCenter(d),a.setZoom(b*h)),{center:a.getCenter(),zoom:a.getZoom()}}ay({type:"map",render:function(b,e,f,a){var d,c;(!a||"mapToggleSelect"!==a.type||a.from!==this.uid)&&(d=this.group,(d.removeAll(),!b.getHostGeoModel())&&(a&&"geoRoam"===a.type&&"series"===a.componentType&&a.seriesId===b.id?(c=this._mapDraw)&&d.add(c.group):b.needsDrawMap?(c=this._mapDraw||new hD(f,!0),d.add(c.group),c.draw(b,e,f,this,a),this._mapDraw=c):(this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null),b.get("showLegendSymbol")&&e.getComponent("legend")&&this._renderSymbols(b,e,f)))},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(a,d,e){var b=a.originalData,c=this.group;b.each(b.mapDimension("value"),function(x,q){var g,n,i,l,k,m,h,o,w,u,d,r,t,e,v,p,s;isNaN(x)||(g=b.getItemLayout(q),g&&g.point&&(n=g.point,i=g.offset,l=new bI({style:{fill:a.getData().getVisual("color")},shape:{cx:n[0]+9*i,cy:n[1],r:3},silent:!0,z2:8+(i?0:f_+1)}),i||(k=a.mainSeries.getData(),m=b.getName(q),h=k.indexOfName(m),o=b.getItemModel(q),w=o.getModel("label"),u=o.getModel("emphasis.label"),d=k.getItemGraphicEl(h),r=R(a.getFormattedLabel(h,"normal"),m),t=R(a.getFormattedLabel(h,"emphasis"),r),e=d[kM],v=Math.random(),e||(e=d[kM]={},p=j(sD,!0),s=j(sD,!1),d.on("mouseover",p).on("mouseout",s).on("emphasis",p).on("normal",s)),f(e,{recordVersion:d[sC]=v,circle:l,labelModel:w,hoverLabelModel:u,emphasisText:t,normalText:r}),sE(e,!1)),c.add(l)))})}}),u({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(b,d){var c=b.componentType||"series";d.eachComponent({mainType:c,query:b},function(d){var f=d.coordinateSystem,e;"geo"===f.type&&(e=kF(f,b,d.get("scaleLimit")),d.setCenter&&d.setCenter(e.center),d.setZoom&&d.setZoom(e.zoom),"series"===c&&a(d.seriesGroup,function(a){a.setCenter(e.center),a.setZoom(e.zoom)}))})}),sG=F;function kB(){bs.call(this)}function cA(a){this.name=a,this.zoomLimit,bs.call(this),this._roamTransformable=new kB,this._rawTransformable=new kB,this._center,this._zoom}function sJ(c,f,d,e){var a=d.seriesModel,b=a?a.coordinateSystem:null;return b===this?b[c](e):null}function eL(d,b,e,c){cA.call(this,d),this.map=b;var a=gg.load(b,e);this._nameCoordMap=a.nameCoordMap,this._regionsMap=a.regionsMap,this._invertLongitute=null==c||c,this.regions=a.regions,this._rect=a.boundingRect}function sL(f,g,c,e){var d=c.geoModel,a=c.seriesModel,b=d?d.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return b===this?b[f](e):null}function sM(f,m){var k=f.get("boundingCoords"),e,g,n,l,c,b,i,j,h,o,a;null!=k&&(e=k[0],g=k[1],isNaN(e[0])||isNaN(e[1])||isNaN(g[0])||isNaN(g[1])||this.setBoundingRect(e[0],e[1],g[0]-e[0],g[1]-e[1])),l=this.getBoundingRect(),c=f.get("layoutCenter"),b=f.get("layoutSize"),i=m.getWidth(),j=m.getHeight(),h=l.width/l.height*this.aspectScale,o=!1,(c&&b&&(c=[d(c[0],i),d(c[1],j)],b=d(b,Math.min(i,j)),isNaN(c[0])||isNaN(c[1])||isNaN(b)||(o=!0)),o)?(a={},1<h?(a.width=b,a.height=b/h):(a.height=b,a.width=b*h),a.y=c[1]-a.height/2,a.x=c[0]-a.width/2):((n=f.getBoxLayoutParams()).aspect=h,a=V(n,{width:i,height:j})),this.setViewRect(a.x,a.y,a.width,a.height),this.setCenter(f.get("center")),this.setZoom(f.get("zoom"))}function sN(b,c){a(c.get("geoCoord"),function(a,c){b.addGeoCoord(c,a)})}C(kB,bs),cA.prototype={constructor:cA,type:"view",dimensions:["x","y"],setBoundingRect:function(a,b,c,d){return this._rect=new r(a,b,c,d),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(a,b,c,d){this.transformTo(a,b,c,d),this._viewRect=new r(a,b,c,d)},transformTo:function(b,c,d,e){var f=this.getBoundingRect(),a=this._rawTransformable;a.transform=f.calculateTransform(new r(b,c,d,e)),a.decomposeTransform(),this._updateTransform()},setCenter:function(a){a&&(this._center=a,this._updateCenterAndZoom())},setZoom:function(a){a=a||1;var b=this.zoomLimit;b&&(null!=b.max&&(a=Math.min(b.max,a)),null!=b.min&&(a=Math.max(b.min,a))),this._zoom=a,this._updateCenterAndZoom()},getDefaultCenter:function(){var a=this.getBoundingRect();return[a.x+a.width/2,a.y+a.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var d=this._rawTransformable.getLocalTransform(),c=this._roamTransformable,b=this.getDefaultCenter(),a=this.getCenter(),e=this.getZoom();a=F([],a,d),b=F([],b,d),c.origin=a,c.position=[b[0]-a[0],b[1]-a[1]],c.scale=[e,e],this._updateTransform()},_updateTransform:function(){var b=this._roamTransformable,a=this._rawTransformable;(a.parent=b).updateTransform(),a.updateTransform(),fY(this.transform||(this.transform=[]),a.transform||aL()),this._rawTransform=a.getLocalTransform(),this.invTransform=this.invTransform||[],hb(this.invTransform,this.transform),this.decomposeTransform()},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var a=this.getBoundingRect().clone();return a.applyTransform(this.transform),a},dataToPoint:function(b,d,a){var c=d?this._rawTransform:this.transform;return a=a||[],c?sG(a,b,c):ah(a,b)},pointToData:function(a){var b=this.invTransform;return b?sG([],a,b):[a[0],a[1]]},convertToPixel:j(sJ,"dataToPoint"),convertFromPixel:j(sJ,"pointToData"),containPoint:function(a){return this.getViewRectAfterRoam().contain(a[0],a[1])}},C(cA,bs),eL.prototype={constructor:eL,type:"geo",dimensions:["lng","lat"],containCoord:function(c){for(var b=this.regions,a=0;a<b.length;a++)if(b[a].contain(c))return!0;return!1},transformTo:function(g,h,e,f){var a=this.getBoundingRect(),d=this._invertLongitute,b,c;a=a.clone(),d&&(a.y=-a.y-a.height),b=this._rawTransformable,(b.transform=a.calculateTransform(new r(g,h,e,f)),b.decomposeTransform(),d)&&(c=b.scale,c[1]=-c[1]),b.updateTransform(),this._updateTransform()},getRegion:function(a){return this._regionsMap.get(a)},getRegionByCoord:function(c){for(var b=this.regions,a=0;a<b.length;a++)if(b[a].contain(c))return b[a]},addGeoCoord:function(a,b){this._nameCoordMap.set(a,b)},getGeoCoord:function(a){return this._nameCoordMap.get(a)},getBoundingRect:function(){return this._rect},dataToPoint:function(a,b,c){if("string"==typeof a&&(a=this.getGeoCoord(a)),a)return cA.prototype.dataToPoint.call(this,a,b,c)},convertToPixel:j(sL,"dataToPoint"),convertFromPixel:j(sL,"pointToData")},C(eL,cA),sO={dimensions:eL.prototype.dimensions,create:function(e,f){var b=[],d;return e.eachComponent("geo",function(a,i){var e=a.get("map"),d=a.get("aspectScale"),h=!0,g=jx.retrieveMap(e),c;g&&g[0]&&"svg"===g[0].type?(null==d&&(d=1),h=!1):null==d&&(d=.75),c=new eL(e+i,e,a.get("nameMap"),h),c.aspectScale=d,c.zoomLimit=a.get("scaleLimit"),b.push(c),sN(c,a),(a.coordinateSystem=c).model=a,c.resize=sM,c.resize(a,f)}),e.eachSeries(function(a){if("geo"===a.get("coordinateSystem")){var c=a.get("geoIndex")||0;a.coordinateSystem=b[c]}}),d={},e.eachSeriesByType("map",function(a){if(!a.getHostGeoModel()){var b=a.getMapType();d[b]=d[b]||[],d[b].push(a)}}),a(d,function(e,g){var d=new eL(g,g,fJ(c(e,function(a){return a.get("nameMap")})));d.zoomLimit=af.apply(null,c(e,function(a){return a.get("scaleLimit")})),b.push(d),d.resize=sM,d.aspectScale=e[0].get("aspectScale"),d.resize(e[0],f),a(e,function(a){sN(a.coordinateSystem=d,a)})}),b},getFilledRegions:function(e,f,g){for(var b=(e||[]).slice(),d=n(),c=0;c<b.length;c++)d.set(b[c].name,b[c]);return a(gg.load(f,g).regions,function(c){var a=c.name;d.get(a)||b.push({name:a})}),b}},nd("geo",sO),N(function(b){var c={};b.eachSeriesByType("map",function(d){var g=d.getMapType(),f,e;!d.getHostGeoModel()&&!c[g]&&(f={},a(d.seriesGroup,function(c){var d=c.coordinateSystem,a=c.originalData;c.get("showLegendSymbol")&&b.getComponent("legend")&&a.each(a.mapDimension("value"),function(h,c){var b=a.getName(c),e=d.getRegion(b),g,i;e&&!isNaN(h)&&(g=f[b]||0,i=d.dataToPoint(e.center),f[b]=g+1,a.setItemLayout(c,{point:i,offset:g}))})}),e=d.getData(),e.each(function(a){var c=e.getName(a),b=e.getItemLayout(a)||{};b.showLabel=!f[c],e.setItemLayout(a,b)}),c[g]=!0)})}),H(function(a){a.eachSeriesByType("map",function(a){var b=a.get("color"),c=a.getModel("itemStyle"),d=c.get("areaColor"),e=c.get("color")||b[a.seriesIndex%b.length];a.getData().setVisual({areaColor:d,color:e})})}),aH(bz.PROCESSOR.STATISTIC,function(d){var b={};d.eachSeriesByType("map",function(a){var c=a.getHostGeoModel(),d=c?"o"+c.id:"i"+a.getMapType();(b[d]=b[d]||[]).push(a)}),a(b,function(d,f){for(var e=function(c,d){var b={};return a(c,function(a){a.each(a.mapDimension("value"),function(d,e){var c="ec-"+a.getName(e);b[c]=b[c]||[],isNaN(d)||b[c].push(d)})}),c[0].map(c[0].mapDimension("value"),function(l,k){for(var j,e="ec-"+c[0].getName(k),h=0,i=1/0,f=-1/0,g=b[e].length,a=0;a<g;a++)i=Math.min(i,b[e][a]),f=Math.max(f,b[e][a]),h+=b[e][a];return j="min"===d?i:"max"===d?f:"average"===d?h/g:h,0===g?NaN:j})}(c(d,function(a){return a.getData()}),d[0].get("mapValueCalculation")),b=0;b<d.length;b++)d[b].originalData=d[b].getData();for(b=0;b<d.length;b++)(d[b].seriesGroup=d)[b].needsDrawMap=0===b&&!d[b].getHostGeoModel(),d[b].setData(e.cloneShallow()),d[b].mainSeries=d[0]})}),aj(function(b){var c=[];a(b.series,function(a){a&&"map"===a.type&&(c.push(a),a.map=a.map||a.mapType,g(a,a.mapLocation))})}),rB("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]),gF=a,fc="\0__link_datas",ih="\0__link_mainData";function sS(a){var b=a.mainData,c=a.datas;c||(c={main:b},a.datasAttr={main:"data"}),a.datas=a.mainData=null,sX(b,c,a),gF(c,function(c){gF(b.TRANSFERABLE_METHODS,function(b){c.wrapMethod(b,j(aby,a))})}),b.wrapMethod("cloneShallow",j(abw,a)),gF(b.CHANGABLE_METHODS,function(c){b.wrapMethod(c,j(abx,a))}),cg(c[b.dataType]===b)}function aby(b,a){if(function(a){return a[ih]===a}(this)){var c=f({},this[fc]);sX(c[this.dataType]=a,c,b)}else ko(a,this.dataType,this[ih],b);return a}function abx(a,b){return a.struct&&a.struct.update(this),b}function abw(b,a){return gF(a[fc],function(c,d){c!==a&&ko(c.cloneShallow(),d,a,b)}),a}function abv(b){var a=this[ih];return null==b||null==a?a:a[fc][b]}function sX(a,b,c){a[fc]={},gF(b,function(b,d){ko(b,d,a,c)})}function ko(a,c,d,b){(d[fc][c]=a)[ih]=d,a.dataType=c,b.struct&&(a[b.structAttr]=b.struct,b.struct[b.datasAttr[c]]=a),a.getLinkedData=abv}function kn(a,b){this.name=a||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=b}function dy(a,b,d){this.root,this.data,this._nodes=[],this.hostModel=a,this.levelModels=c(b||[],function(b){return new w(b,a,a.ecModel)}),this.leavesModel=new w(d||{},a,a.ecModel)}function abu(a,b){var c=b.children;a.parentNode!==b&&(c.push(a),a.parentNode=b)}function abt(a,d){var c=a.isExpand?a.children:[],e=a.parentNode.children,b=a.hierNode.i?e[a.hierNode.i-1]:null,f;c.length?(!function(f){for(var c=f.children,d=c.length,b=0,e=0,a;0<=--d;)a=c[d],a.hierNode.prelim+=b,a.hierNode.modifier+=b,e+=a.hierNode.change,b+=a.hierNode.shift+e}(a),f=(c[0].hierNode.prelim+c[c.length-1].hierNode.prelim)/2,b?(a.hierNode.prelim=b.hierNode.prelim+d(a,b),a.hierNode.modifier=a.hierNode.prelim-f):a.hierNode.prelim=f):b&&(a.hierNode.prelim=b.hierNode.prelim+d(a,b)),a.parentNode.hierNode.defaultAncestor=function(e,o,l,p){var c,b,d,a,i,f,k,h,g,m,n,j;if(o){for(c=e,b=e,d=b.parentNode.children[0],a=o,i=c.hierNode.modifier,f=b.hierNode.modifier,k=d.hierNode.modifier,h=a.hierNode.modifier;a=kb(a),b=jY(b),a&&b;)c=kb(c),d=jY(d),c.hierNode.ancestor=e,g=a.hierNode.prelim+h-b.hierNode.prelim-f+p(a,b),0<g&&(abr((n=e,j=l,(m=a).hierNode.ancestor.parentNode===n.parentNode?m.hierNode.ancestor:j),e,g),f+=g,i+=g),h+=a.hierNode.modifier,f+=b.hierNode.modifier,i+=c.hierNode.modifier,k+=d.hierNode.modifier;a&&!kb(c)&&(c.hierNode.thread=a,c.hierNode.modifier+=h-i),b&&!jY(d)&&(d.hierNode.thread=b,d.hierNode.modifier+=f-k,l=e)}return l}(a,b,a.parentNode.hierNode.defaultAncestor||e[0],d)}function abs(a){var b=a.hierNode.prelim+a.parentNode.hierNode.modifier;a.setLayout({x:b},!0),a.hierNode.modifier+=a.parentNode.hierNode.modifier}function tc(a){return arguments.length?a:abq}function eX(a,c){var b={};return a-=Math.PI/2,b.x=c*Math.cos(a),b.y=c*Math.sin(a),b}function kb(a){var b=a.children;return b.length&&a.isExpand?b[b.length-1]:a.hierNode.thread}function jY(a){var b=a.children;return b.length&&a.isExpand?b[0]:a.hierNode.thread}function abr(c,a,b){var d=b/(a.hierNode.i-c.hierNode.i);a.hierNode.change-=d,a.hierNode.shift+=b,a.hierNode.modifier+=b,a.hierNode.prelim+=b,c.hierNode.change+=d}function abq(a,b){return a.parentNode===b.parentNode?1:2}function ti(b,c){var a=b.getItemLayout(c);return a&&!isNaN(a.x)&&!isNaN(a.y)&&"none"!==b.getItemVisual(c,"symbol")}function tj(c,b,a){return a.itemModel=b,a.itemStyle=b.getModel("itemStyle").getItemStyle(),a.hoverItemStyle=b.getModel("emphasis.itemStyle").getItemStyle(),a.lineStyle=b.getModel("lineStyle").getLineStyle(),a.labelModel=b.getModel("label"),a.hoverLabelModel=b.getModel("emphasis.label"),!1===c.isExpand&&0!==c.children.length?a.symbolInnerColor=a.itemStyle.fill:a.symbolInnerColor="#fff",a}function tk(h,l,a,t,v,e){var x=!a,b=h.tree.getNodeByDataIndex(l),y=b.getModel(),q=(e=tj(b,y,e),h.tree.root),r=b.parentNode===q?b:b.parentNode||b,k=h.getItemGraphicEl(r.dataIndex),w=r.getLayout(),n=k?{x:k.position[0],y:k.position[1],rawX:k.__radialOldRawX,rawY:k.__radialOldRawY}:w,d=b.getLayout(),A,c,m,i,f,u,j,z,s,B,o;x?(a=new cx(h,l,e)).attr("position",[n.x,n.y]):a.updateData(h,l,e),a.__radialOldRawX=a.__radialRawX,a.__radialOldRawY=a.__radialRawY,a.__radialRawX=d.rawX,a.__radialRawY=d.rawY,t.add(a),h.setItemGraphicEl(l,a),p(a,{position:[d.x,d.y]},v),A=a.getSymbolPath(),"radial"===e.layout&&(i=q.children[0],f=i.getLayout(),u=i.children.length,d.x===f.x&&!0===b.isExpand?(j={},j.x=(i.children[0].getLayout().x+i.children[u-1].getLayout().x)/2,j.y=(i.children[0].getLayout().y+i.children[u-1].getLayout().y)/2,(c=Math.atan2(j.y-f.y,j.x-f.x))<0&&(c=2*Math.PI+c),(m=j.x<f.x)&&(c-=Math.PI)):((c=Math.atan2(d.y-f.y,d.x-f.x))<0&&(c=2*Math.PI+c),0===b.children.length||0!==b.children.length&&!1===b.isExpand?(m=d.x<f.x)&&(c-=Math.PI):(m=d.x>f.x)||(c-=Math.PI)),z=m?"left":"right",s=e.labelModel.get("rotate"),B=s*(Math.PI/180),A.setStyle({textPosition:e.labelModel.get("position")||z,textRotation:null==s?-c:B,textOrigin:"center",verticalAlign:"middle"})),b.parentNode&&b.parentNode!==q&&(o=a.__edge,p(o=o||(a.__edge=new gX({shape:jQ(e,n,n),style:g({opacity:0,strokeNoScale:!0},e.lineStyle)})),{shape:jQ(e,w,d),style:{opacity:1}},v),t.add(o))}function tl(f,i,d,h,k,e){for(var c,a=f.tree.getNodeByDataIndex(i),j=f.tree.root,l=a.getModel(),b=(e=tj(a,l,e),a.parentNode===j?a:a.parentNode||a),g;null==(c=b.getLayout());)b=b.parentNode===j?b:b.parentNode||b;p(d,{position:[c.x+1,c.y+1]},k,function(){h.remove(d),f.setItemGraphicEl(i,null)}),d.fadeOut(null,{keepLabel:!0}),g=d.__edge,g&&p(g,{shape:jQ(e,c,c),style:{opacity:0}},k,function(){h.remove(g)})}function jQ(e,h,g){var k,j,l,i,c,d,b,a,f=e.orient,m,n,o,p;return"radial"!==e.layout?(c=h.x,b=h.y,d=g.x,a=g.y,"LR"!==f&&"RL"!==f||(k=c+(d-c)*e.curvature,j=b,l=d+(c-d)*e.curvature,i=a),"TB"!==f&&"BT"!==f||(k=c,j=b+(a-b)*e.curvature,l=d,i=a+(b-a)*e.curvature),{x1:c,y1:b,x2:d,y2:a,cpx1:k,cpy1:j,cpx2:l,cpy2:i}):(c=h.rawX,b=h.rawY,d=g.rawX,a=g.rawY,m=eX(c,b),n=eX(c,b+(a-b)*e.curvature),o=eX(d,a+(b-a)*e.curvature),p=eX(d,a),{x1:m.x,y1:m.y,x2:p.x,y2:p.y,cpx1:n.x,cpy1:n.y,cpx2:o.x,cpy2:o.y})}function fU(e,f){for(var a,d=[e],b,c;a=d.pop();)if(f(a),a.isExpand)if(b=a.children,b.length)for(c=b.length-1;0<=c;c--)d.push(b[c])}kn.prototype={constructor:kn,isRemoved:function(){return this.dataIndex<0},eachNode:function(a,b,c){var e,f,g,d;"function"==typeof a&&(c=b,b=a,a=null),E(a=a||{})&&(a={order:a}),f=a.order||"preorder",g=this[a.attr||"children"],"preorder"===f&&(e=b.call(c,this));for(d=0;!e&&d<g.length;d++)g[d].eachNode(a,b,c);"postorder"===f&&b.call(c,this)},updateDepthAndHeight:function(d){var a=0,b,c;this.depth=d;for(b=0;b<this.children.length;b++)c=this.children[b],c.updateDepthAndHeight(d+1),c.height>a&&(a=c.height);this.height=a+1},getNodeById:function(d){var a,b,e,c;if(this.getId()===d)return this;for(a=0,b=this.children,e=b.length;a<e;a++)if(c=b[a].getNodeById(d),c)return c},contains:function(d){var a,b,e,c;if(d===this)return!0;for(a=0,b=this.children,e=b.length;a<e;a++)if(c=b[a].contains(d),c)return c},getAncestors:function(c){for(var b=[],a=c?this:this.parentNode;a;)b.push(a),a=a.parentNode;return b.reverse(),b},getValue:function(b){var a=this.hostTree.data;return a.get(a.getDimension(b||"value"),this.dataIndex)},setLayout:function(a,b){0<=this.dataIndex&&this.hostTree.data.setItemLayout(this.dataIndex,a,b)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(a){if(!(this.dataIndex<0)){var b,c=this.hostTree,e=c.data.getItemModel(this.dataIndex),d=this.getLevelModel();return d||0!==this.children.length&&(0===this.children.length||!1!==this.isExpand)||(b=this.getLeavesModel()),e.getModel(a,(d||b||c.hostModel).getModel(a))}},getLevelModel:function(){return(this.hostTree.levelModels||[])[this.depth]},getLeavesModel:function(){return this.hostTree.leavesModel},setVisual:function(a,b){0<=this.dataIndex&&this.hostTree.data.setItemVisual(this.dataIndex,a,b)},getVisual:function(a,b){return this.hostTree.data.getItemVisual(this.dataIndex,a,b)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(b){for(var a=b.parentNode;a;){if(a===this)return!0;a=a.parentNode}return!1},isDescendantOf:function(a){return a!==this&&a.isAncestorOf(this)}},dy.prototype={constructor:dy,type:"tree",eachNode:function(a,b,c){this.root.eachNode(a,b,c)},getNodeByDataIndex:function(a){var b=this.data.getRawIndex(a);return this._nodes[b]},getNodeByName:function(a){return this.root.getNodeByName(a)},update:function(){for(var d=this.data,b=this._nodes,a=0,c=b.length;a<c;a++)b[a].dataIndex=-1;for(a=0,c=d.count();a<c;a++)b[d.getRawIndex(a)].dataIndex=a},clearLayouts:function(){this.data.clearItemLayouts()}},dy.createTree=function(h,e,f){var a=new dy(e,f.levels,f.leaves),c=[],d=1,i,g;return!function k(e,i){var j=e.value,f,h,g;if(d=Math.max(d,b(j)?j.length:1),c.push(e),f=new kn(e.name,a),i?abu(f,i):a.root=f,a._nodes.push(f),h=e.children,h)for(g=0;g<h.length;g++)k(h[g],f)}(h),a.root.updateDepthAndHeight(0),i=ed(c,{coordDimensions:["value"],dimensionsCount:d}),g=new ab(i,e),g.initData(c),sS({mainData:g,struct:a,structAttr:"tree"}),a.update(),a},M.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(a){var e={name:a.name,children:a.data},f=a.leaves||{},d={},b,c,g;return d.leaves=f,b=dy.createTree(e,this,d),c=0,b.eachNode("preorder",function(a){a.depth>c&&(c=a.depth)}),g=a.expandAndCollapse&&0<=a.initialTreeDepth?a.initialTreeDepth:c,b.root.eachNode("preorder",function(a){var b=a.hostTree.data.getRawDataItem(a.dataIndex);a.isExpand=b&&null!=b.collapsed?!b.collapsed:a.depth<=g}),b.data},getOrient:function(){var a=this.get("orient");return"horizontal"===a?a="LR":"vertical"===a&&(a="TB"),a},setZoom:function(a){this.option.zoom=a},setCenter:function(a){this.option.center=a},formatTooltip:function(e){for(var d=this.getData().tree,f=d.root.children[0],a=d.getNodeByDataIndex(e),b=a.getValue(),c=a.name;a&&a!==f;)c=a.parentNode.name+"."+c,a=a.parentNode;return K(c+(isNaN(b)||null==b?"":" : "+b))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}}),ay({type:"tree",init:function(b,a){this._oldTree,this._mainGroup=new e,this._controller=new ep(a.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(a,i,h,j){var b=a.getData(),c=a.layoutInfo,d=this._mainGroup,g=a.get("layout"),e,f;"radial"===g?d.attr("position",[c.x+c.width/2,c.y+c.height/2]):d.attr("position",[c.x,c.y]),this._updateViewCoordSys(a,c,g),this._updateController(a,i,h),e=this._data,f={expandAndCollapse:a.get("expandAndCollapse"),layout:g,orient:a.getOrient(),curvature:a.get("lineStyle.curveness"),symbolRotate:a.get("symbolRotate"),symbolOffset:a.get("symbolOffset"),hoverAnimation:a.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0},b.diff(e).add(function(c){ti(b,c)&&tk(b,c,null,d,a,f)}).update(function(g,h){var c=e.getItemGraphicEl(h);ti(b,g)?tk(b,g,c,d,a,f):c&&tl(e,h,c,d,a,f)}).remove(function(b){var c=e.getItemGraphicEl(b);c&&tl(e,b,c,d,a,f)}).execute(),this._nodeScaleRatio=a.get("nodeScaleRatio"),this._updateNodeAndLinkScale(a),!0===f.expandAndCollapse&&b.eachItemGraphicEl(function(b,c){b.off("click").on("click",function(){h.dispatchAction({type:"treeExpandAndCollapse",seriesId:a.id,dataIndex:c})})}),this._data=b},_updateViewCoordSys:function(d){var h=d.getData(),g=[],a,b,e,f,c;h.each(function(b){var a=h.getItemLayout(b);!a||isNaN(a.x)||isNaN(a.y)||g.push([+a.x,+a.y])}),a=[],b=[],lF(g,a,b),e=this._min,f=this._max,b[0]-a[0]==0&&(a[0]=e?e[0]:a[0]-1,b[0]=f?f[0]:b[0]+1),b[1]-a[1]==0&&(a[1]=e?e[1]:a[1]-1,b[1]=f?f[1]:b[1]+1),c=d.coordinateSystem=new cA,c.zoomLimit=d.get("scaleLimit"),c.setBoundingRect(a[0],a[1],b[0]-a[0],b[1]-a[1]),c.setCenter(d.get("center")),c.setZoom(d.get("zoom")),this.group.attr({position:c.position,scale:c.scale}),this._viewCoordSys=c,this._min=a,this._max=b},_updateController:function(a,f,c){var d=this._controller,b=this._controllerHost,e=this.group;d.setPointerChecker(function(d,f,g){var b=e.getBoundingRect();return b.applyTransform(e.transform),b.contain(f,g)&&!hC(d,c,a)}),d.enable(a.get("roam")),b.zoomLimit=a.get("scaleLimit"),b.zoom=a.coordinateSystem.getZoom(),d.off("pan").off("zoom").on("pan",function(d){kT(b,d.dx,d.dy),c.dispatchAction({seriesId:a.id,type:"treeRoam",dx:d.dx,dy:d.dy})},this).on("zoom",function(d){kQ(b,d.scale,d.originX,d.originY),c.dispatchAction({seriesId:a.id,type:"treeRoam",zoom:d.scale,originX:d.originX,originY:d.originY}),this._updateNodeAndLinkScale(a)},this)},_updateNodeAndLinkScale:function(a){var c=a.getData(),b=this._getNodeGlobalScale(a),d=[b,b];c.eachItemGraphicEl(function(a,b){a.attr("scale",d)})},_getNodeGlobalScale:function(c){var a=c.coordinateSystem,d,b,e;return"view"!==a.type?1:(d=this._nodeScaleRatio,b=a.scale,e=b&&b[0]||1,((a.getZoom()-1)*d+1)/e)},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}}),u({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(a,b){b.eachComponent({mainType:"series",subType:"tree",query:a},function(c){var d=a.dataIndex,b=c.getData().tree.getNodeByDataIndex(d);b.isExpand=!b.isExpand})}),u({type:"treeRoam",event:"treeRoam",update:"none"},function(a,b){b.eachComponent({mainType:"series",subType:"tree",query:a},function(b){var c=kF(b.coordinateSystem,a);b.setCenter&&b.setCenter(c.center),b.setZoom&&b.setZoom(c.zoom)})});function go(b,e,f){var c,a,d;if(b&&0<=v(e,b.type)){if(c=f.getData().tree.root,a=b.targetNode,"string"==typeof a&&(a=c.getNodeById(a)),a&&c.contains(a))return{node:a};if(d=b.targetNodeId,null!=d&&(a=c.getNodeById(d)))return{node:a}}}function tp(a){for(var b=[];a;)(a=a.parentNode)&&b.push(a);return b.reverse()}function jK(a,b){return 0<=v(tp(a),b)}function jJ(a,d){for(var b=[],c;a;)c=a.dataIndex,b.push({name:a.name,dataIndex:c,value:d.getRawValue(c)}),a=a.parentNode;return b.reverse(),b}H(cY("tree","circle")),N(function(a,b){a.eachSeriesByType("tree",function(a){!function(n,s){var k=function(b,a){return V(b.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}(n,s),r,j,g,q,p,a,m,e,l,o,h,f,b,d,c,i;n.layoutInfo=k,r=n.get("layout"),j=0,g=0,q=null,q="radial"===r?(j=2*Math.PI,g=Math.min(k.height,k.width)/2,tc(function(a,b){return(a.parentNode===b.parentNode?1:2)/a.depth})):(j=k.width,g=k.height,tc()),p=n.getData().tree.root,a=p.children[0],a&&(!function(e){var c,a,f,b,d;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(c,a,f=[e];c=f.pop();)if(a=c.children,c.isExpand&&a.length)for(b=a.length-1;0<=b;b--)d=a[b],d.hierNode={defaultAncestor:null,ancestor:d,prelim:0,modifier:0,change:0,shift:0,i:b,thread:null},f.push(d)}(p),function(g,h,f){for(var a,d=[g],e=[],b,c;a=d.pop();)if(e.push(a),a.isExpand)if(b=a.children,b.length)for(c=0;c<b.length;c++)d.push(b[c]);for(;a=e.pop();)h(a,f)}(a,abt,q),p.hierNode.modifier=-a.hierNode.prelim,fU(a,abs),m=a,e=a,l=a,fU(a,function(a){var b=a.getLayout().x;b<m.getLayout().x&&(m=a),b>e.getLayout().x&&(e=a),a.depth>l.depth&&(l=a)}),o=m===e?1:q(m,e)/2,h=o-m.getLayout().x,f=0,b=0,d=0,c=0,"radial"===r?(f=j/(e.getLayout().x+o+h),b=g/(l.depth-1||1),fU(a,function(a){d=(a.getLayout().x+h)*f,c=(a.depth-1)*b;var e=eX(d,c);a.setLayout({x:e.x,y:e.y,rawX:d,rawY:c},!0)})):(i=n.getOrient(),"RL"===i||"LR"===i?(b=g/(e.getLayout().x+o+h),f=j/(l.depth-1||1),fU(a,function(a){c=(a.getLayout().x+h)*b,d="LR"===i?(a.depth-1)*f:j-(a.depth-1)*f,a.setLayout({x:d,y:c},!0)})):"TB"!==i&&"BT"!==i||(f=j/(e.getLayout().x+o+h),b=g/(l.depth-1||1),fU(a,function(a){d=(a.getLayout().x+h)*f,c="TB"===i?(a.depth-1)*b:g-(a.depth-1)*b,a.setLayout({x:d,y:c},!0)}))))}(a,b)})}),M.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(c,g){var e={name:c.name,children:c.data},d,f;return!function f(d){var e=0,c;a(d.children,function(c){f(c);var a=c.value;b(a)&&(a=a[0]),e+=a}),c=d.value,b(c)&&(c=c[0]),null!=c&&!isNaN(c)||(c=e),c<0&&(c=0),b(d.value)?d.value[0]=c:d.value=c}(e),d=c.levels||[],d=c.levels=function(b,e){var c,d=e.get("color");if(!d)return;return a(b=b||[],function(d){var a=new w(d),b=a.get("color");(a.get("itemStyle.color")||b&&"none"!==b)&&(c=!0)}),!c&&((b[0]||(b[0]={})).color=d.slice()),b}(d,g),f={},f.levels=d,dy.createTree(e,this,f).data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(c){var d=this.getData(),a=this.getRawValue(c),e=b(a)?cN(a[0]):cN(a);return K(d.getName(c)+": "+e)},getDataParams:function(b){var a=M.prototype.getDataParams.apply(this,arguments),c=this.getData().tree.getNodeByDataIndex(b);return a.treePathInfo=jJ(c,this),a},setLayoutInfo:function(a){this.layoutInfo=this.layoutInfo||{},f(this.layoutInfo,a)},mapIdToIndex:function(c){var a=this._idIndexMap,b;return a||(a=this._idIndexMap=n(),this._idIndexMapCount=0),b=a.get(c),null==b&&a.set(c,b=this._idIndexMapCount++),b},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(a){a?this._viewRoot=a:a=this._viewRoot;var b=this.getRawData().tree.root;a&&(a===b||b.contains(a))||(this._viewRoot=b)}}),jI=5;function jE(a){this.group=new e,a.add(this.group)}function abo(a,b,d,c,e,g){var f=[[e?a:a-jI,b],[a+d,b],[a+d,b+c],[e?a:a-jI,b+c]];return g||f.splice(2,0,[a+d+jI,b+c/2]),e||f.push([a,b+c/2]),f}jE.prototype={constructor:jE,render:function(c,d,h,i){var a=c.getModel("breadcrumb"),e=this.group,f,g,b;e.removeAll(),a.get("show")&&h&&(f=a.getModel("itemStyle"),g=f.getModel("textStyle"),b={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:d.getWidth(),height:d.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]},this._prepare(h,b,g),this._renderContent(c,b,f,g,i),jh(e,b.pos,b.box))},_prepare:function(g,b,e){for(var a=g,d,f,c;a;a=a.parentNode)d=a.getModel().get("name"),f=e.getTextRect(d),c=Math.max(f.width+16,b.emptyItemWidth),b.totalWidth+=c+8,b.renderList.push({node:a,text:d,width:c})},_renderContent:function(m,b,u,q,t){for(var e,a,p=0,l=b.emptyItemWidth,v=m.get("breadcrumb.height"),s=function(a,j,b){var e=j.width,f=j.height,g=d(a.x,e),h=d(a.y,f),c=d(a.x2,e),i=d(a.y2,f);return(isNaN(g)||isNaN(parseFloat(a.x)))&&(g=0),(isNaN(c)||isNaN(parseFloat(a.x2)))&&(c=e),(isNaN(h)||isNaN(parseFloat(a.y)))&&(h=0),(isNaN(i)||isNaN(parseFloat(a.y2)))&&(i=f),b=dJ(b||0),{width:Math.max(c-g-b[1]-b[3],0),height:Math.max(i-h-b[0]-b[2],0)}}(b.pos,b.box),o=b.totalWidth,i=b.renderList,c=i.length-1,h,n,f,r,k;0<=c;c--)h=i[c],n=h.node,f=h.width,r=h.text,o>s.width&&(o-=f-l,f=l,r=null),k=new aF({shape:{points:abo(p,0,f,v,c===i.length-1,0===c)},style:g(u.getItemStyle(),{lineJoin:"bevel",text:r,textFill:q.getTextColor(),textFont:q.getFont()}),z:10,onclick:j(t,n)}),this.group.add(k),e=m,a=n,k.eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.componentIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:a&&a.dataIndex,name:a&&a.name},treePathInfo:a&&jJ(a,e)},p+=f+8},remove:function(){this.group.removeAll()}};function tv(b){var a=jD(b);return a.stroke=a.fill=a.lineWidth=null,a}jr=k,tx=e,ty=y,bp=a,abn=["label"],abm=["emphasis","label"],abl=["upperLabel"],abk=["emphasis","upperLabel"],abi=10,jD=dP([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);function abh(h,B,z,p,y,D,b,x,C,v){var a,e,k,d,t,g,l,s,n,m,o,j,c,q,r;if(b)if(a=b.getLayout(),a&&a.isInView)if(e=a.width,k=a.height,d=a.borderWidth,t=a.invisible,g=b.getRawIndex(),l=x&&x.getRawIndex(),s=b.viewChildren,n=a.upperHeight,m=s&&s.length,o=b.getModel("itemStyle"),j=b.getModel("emphasis.itemStyle"),c=u("nodeGroup",tx),c)return C.add(c),c.attr("position",[a.x||0,a.y||0]),c.__tmNodeWidth=e,c.__tmNodeHeight=k,a.isAboveViewRoot?c:(q=u("background",ty,v,1),(q&&function(f,a,g){a.dataIndex=b.dataIndex,a.seriesIndex=h.seriesIndex,a.setShape({x:0,y:0,width:e,height:k});var c=b.getVisual("borderColor",!0),i=j.get("borderColor");w(a,function(){var b=tv(o),f,h;b.fill=c,f=jD(j),(f.fill=i,g)?(h=e-2*d,A(b,f,c,h,n,{x:d,y:0,width:h,height:n})):b.text=f.text=null,a.setStyle(b),G(a,f)}),f.add(a)}(c,q,m&&a.upperHeight),!m)&&(r=u("content",ty,v,2),r&&function(i,a){var c,f,g;a.dataIndex=b.dataIndex,a.seriesIndex=h.seriesIndex,c=Math.max(e-2*d,0),f=Math.max(k-2*d,0),a.culling=!0,a.setShape({x:d,y:d,width:c,height:f}),g=b.getVisual("color",!0),w(a,function(){var b=tv(o),d;b.fill=g,d=jD(j),A(b,d,g,c,f),a.setStyle(b),G(a,d)}),i.add(a)}(c,r)),c);function w(a,b){t?a.invisible||D.push(a):(b(),a.__tmWillVisible||(a.invisible=!1))}function A(e,m,n,o,l,c){var g=b.getModel(),d=af(h.getFormattedLabel(b.dataIndex,"normal",null,null,c?"upperLabel":"label"),g.get("name")),j,f,p,k;!c&&a.isLeafRoot&&(j=h.get("drillDownIcon",!0),d=j?j+" "+d:d),f=g.getModel(c?abl:abn),p=g.getModel(c?abk:abm),k=f.getShallow("show"),aI(e,m,f,p,{defaultText:k?d:null,autoColor:n,isRectText:!0}),c&&(e.textRect=i(c)),e.truncate=k&&f.get("ellipsis")?{outerWidth:o,outerHeight:l,minChar:2}:null}function u(a,h,d,i){var c=null!=l&&z[a][l],e=y[a];return c?(z[a][l]=null,function(b,a,c){(b[g]={}).old="nodeGroup"===c?a.position.slice():f({},a.shape)}(e,c,a)):t||((c=new h({z:function(b,c){var a=b*abi+c;return(a-1)/a}(d,i)})).__tmDepth=d,function(i,j,d){var e=i[g]={},f=b.parentNode,h,c,a;f&&(!p||"drillDown"===p.direction)&&(h=0,c=0,a=y.background[f.getRawIndex()],!p&&a&&a.old&&(h=a.old.width,c=a.old.height),e.old="nodeGroup"===d?[0,c]:{x:h,y:c,width:0,height:0}),e.fadein="nodeGroup"!==d}(e,0,c.__tmStorageName=a)),B[a][g]=c}}ay({type:"treemap",init:function(a,b){this._containerGroup,this._storage={nodeGroup:[],background:[],content:[]},this._oldTree,this._breadcrumb,this._controller,this._state="ready"},render:function(a,f,d,b){if(!(v(f.findComponents({mainType:"series",subType:"treemap",query:b}),a)<0)){this.seriesModel=a,this.api=d,this.ecModel=f;var e=go(b,["treemapZoomToNode","treemapRootToNode"],a),c=b&&b.type,k=a.layoutInfo,l=!this._oldTree,g=this._storage,h="treemapRootToNode"===c&&e&&g?{rootNodeGroup:g.nodeGroup[e.node.getRawIndex()],direction:b.direction}:null,i=this._giveContainerGroup(k),j=this._doRender(i,a,h);l||c&&"treemapZoomToNode"!==c&&"treemapRootToNode"!==c?j.renderFinally():this._doAnimation(i,j,a,h),this._resetController(d),this._renderBreadcrumb(a,d,e)}},_giveContainerGroup:function(b){var a=this._containerGroup;return a||(a=this._containerGroup=new tx,this._initEvents(a),this.group.add(a)),a.attr("position",[b.x,b.y]),a},_doRender:function(n,e,m){var b=e.getData().tree,a=this._oldTree,f={nodeGroup:[],background:[],content:[]},g={nodeGroup:[],background:[],content:[]},h=this._storage,i=[],l=j(abh,e,g,h,m,f,i),k,c,d;return!function h(c,b,g,e,f){e?bp(b=c,function(c,b){c.isRemoved()||a(b,b)}):new cb(b,c,d,d).add(a).update(a).remove(j(a,null)).execute();function d(a){return a.getId()}function a(i,j){var a=null!=i?c[i]:null,d=null!=j?b[j]:null,k=l(a,d,g,f);k&&h(a&&a.viewChildren||[],d&&d.viewChildren||[],k,e,f+1)}}(b.root?[b.root]:[],a&&a.root?[a.root]:[],n,b===a||!a,0),d=(c={nodeGroup:[],background:[],content:[]},(k=h)&&bp(k,function(a,b){var d=c[b];bp(a,function(a){a&&(d.push(a),a.__tmWillDelete=1)})}),c),this._oldTree=b,this._storage=g,{lastsForAnimation:f,willDeleteEls:d,renderFinally:function(){bp(d,function(a){bp(a,function(a){a.parent&&a.parent.remove(a)})}),bp(i,function(a){a.invisible=!0,a.dirty()})}}},_doAnimation:function(h,b,c,d){if(c.get("animation")){var e=c.get("animationDurationUpdate"),g=c.get("animationEasing"),a=function(){var b,a=[],c={};return{add:function(d,f,g,b,e){return E(b)&&(e=b,b=0),!c[d.id]&&(c[d.id]=1,a.push({el:d,target:f,time:g,delay:b,easing:e}),!0)},done:function(a){return b=a,this},start:function(){for(var f=a.length,e=0,g=a.length,d;e<g;e++)d=a[e],d.el.animateTo(d.target,d.time,d.delay,d.easing,h);return this;function h(){--f||(a.length=0,c={},b&&b())}}}}();bp(b.willDeleteEls,function(b,c){bp(b,function(j,k){var f,b,h,i;j.invisible||(b=j.parent,d&&"drillDown"===d.direction?f=b===d.rootNodeGroup?{shape:{x:0,y:0,width:b.__tmNodeWidth,height:b.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}}:(h=0,i=0,b.__tmWillDelete||(h=b.__tmNodeWidth/2,i=b.__tmNodeHeight/2),f="nodeGroup"===c?{position:[h,i],style:{opacity:0}}:{shape:{x:h,y:i,width:0,height:0},style:{opacity:0}}),f&&a.add(j,f,e,g))})}),bp(this._storage,function(d,c){bp(d,function(d,j){var h=b.lastsForAnimation[c][j],i={};h&&("nodeGroup"===c?h.old&&(i.position=d.position.slice(),d.attr("position",h.old)):(h.old&&(i.shape=f({},d.shape),d.setShape(h.old)),h.fadein?(d.setStyle("opacity",0),i.style={opacity:1}):1!==d.style.opacity&&(i.style={opacity:1})),a.add(d,i,e,g))})},this),this._state="animating",a.done(jr(function(){this._state="ready",b.renderFinally()},this)).start()}},_resetController:function(b){var a=this._controller,c;a||((a=this._controller=new ep(b.getZr())).enable(this.seriesModel.get("roam")),a.on("pan",jr(this._onPan,this)),a.on("zoom",jr(this._onZoom,this))),c=new r(0,0,b.getWidth(),b.getHeight()),a.setPointerChecker(function(d,a,b){return c.contain(a,b)})},_clearController:function(){var a=this._controller;a&&(a.dispose(),a=null)},_onPan:function(b){var c,a;if("animating"!==this._state&&(3<Math.abs(b.dx)||3<Math.abs(b.dy))){if(c=this.seriesModel.getData().tree.root,!c)return;if(a=c.getLayout(),!a)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x+b.dx,y:a.y+b.dy,width:a.width,height:a.height}})}},_onZoom:function(d){var f=d.originX,e=d.originY,g,b,c,h,a;if("animating"!==this._state){if(g=this.seriesModel.getData().tree.root,!g)return;if(b=g.getLayout(),!b)return;c=new r(b.x,b.y,b.width,b.height),h=this.seriesModel.layoutInfo,f-=h.x,e-=h.y,a=aL(),be(a,a,[-f,-e]),fZ(a,a,[d.scale,d.scale]),be(a,a,[f,e]),c.applyTransform(a),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:c.x,y:c.y,width:c.width,height:c.height}})}},_initEvents:function(a){a.on("click",function(f){var b,a,c,d,e,g;"ready"===this._state&&(b=this.seriesModel.get("nodeClick",!0),b&&(a=this.findTarget(f.offsetX,f.offsetY),a&&(c=a.node,c.getLayout().isLeafRoot?this._rootToNode(a):"zoomToNode"===b?this._zoomToNode(a):"link"===b&&(d=c.hostTree.data.getItemModel(c.dataIndex),e=d.get("link",!0),g=d.get("target",!0)||"blank",e&&window.open(e,g)))))},this)},_renderBreadcrumb:function(a,c,b){b=b||(b=null!=a.get("leafDepth",!0)?{node:a.getViewRoot()}:this.findTarget(c.getWidth()/2,c.getHeight()/2))||{node:a.getData().tree.root},(this._breadcrumb||(this._breadcrumb=new jE(this.group))).render(a,c,b.node,jr(function(b){"animating"!==this._state&&(jK(a.getViewRoot(),b)?this._rootToNode({node:b}):this._zoomToNode({node:b}))},this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(a){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},_rootToNode:function(a){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a.node})},findTarget:function(b,c){var a;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(g){var f=this._storage.background[g.getRawIndex()],d,e;if(f){if(d=f.transformCoordToLocal(b,c),e=f.shape,!(e.x<=d[0]&&d[0]<=e.x+e.width&&e.y<=d[1]&&d[1]<=e.y+e.height))return!1;a={node:g,offsetX:d[0],offsetY:d[1]}}},this),a}});for(abg=function(){},tI=["treemapZoomToNode","treemapRender","treemapMove"],jH=0;jH<tI.length;jH++)u({type:tI[jH],update:"updateView"},abg);u({type:"treemapRootToNode",update:"updateView"},function(a,b){b.eachComponent({mainType:"series",subType:"treemap",query:a},function(b,e){var c=go(a,["treemapZoomToNode","treemapRootToNode"],b),d;c&&(d=b.getViewRoot(),d&&(a.direction=jK(d,c.node)?"rollUp":"drillDown"),b.resetViewRoot(c.node))})}),gm=a,tL=m,ie=-1,B=function(e){var d=e.mappingMethod,g=e.type,c=this.option=i(e),f;this.type=g,this.mappingMethod=d,this._normalizeData=abf[d],f=fQ[g],this.applyVisual=f.applyVisual,this.getColorMapper=f.getColorMapper,this._doMap=f._doMap[d],"piecewise"===d?(jX(c),function(b){var c=b.pieceList;b.hasSpecialVisual=!1,a(c,function(a,c){a.originIndex=c,null!=a.visual&&(b.hasSpecialVisual=!0)})}(c)):"category"===d?c.categories?function(c){var d=c.categories,a=c.visual,f=c.categoryMap={},g,e;gm(d,function(a,b){f[a]=b}),!b(a)&&(g=[],m(a)?gm(a,function(b,c){var a=f[c];g[null!=a?a:ie]=b}):g[ie]=a,a=tX(c,g));for(e=d.length-1;0<=e;e--)null==a[e]&&(delete f[d[e]],d.pop())}(c):jX(c,!0):(cg("linear"!==d||c.dataExtent),jX(c))},B.prototype={constructor:B,mapValueToVisual:function(a){var b=this._normalizeData(a);return this._doMap(b,a)},getNormalizer:function(){return k(this._normalizeData,this)}},fQ=B.visualHandlers={color:{applyVisual:iH("color"),getColorMapper:function(){var a=this.option;return k("category"===a.mappingMethod?function(a,b){return b||(a=this._normalizeData(a)),iB.call(this,a)}:function(c,d,b){var e=!!b;return d||(c=this._normalizeData(c)),b=gD(c,a.parsedVisual,b),e?b:bU(b,"rgba")},this)},_doMap:{linear:function(a){return bU(gD(a,this.option.parsedVisual),"rgba")},category:iB,piecewise:function(b,c){var a=kh.call(this,c);return null==a&&(a=bU(gD(b,this.option.parsedVisual),"rgba")),a},fixed:dE}},colorHue:iL(function(a,b){return eg(a,b)}),colorSaturation:iL(function(a,b){return eg(a,null,b)}),colorLightness:iL(function(a,b){return eg(a,null,null,b)}),colorAlpha:iL(function(a,b){return gZ(a,b)}),opacity:{applyVisual:iH("opacity"),_doMap:kg([0,1])},liftZ:{applyVisual:iH("liftZ"),_doMap:{linear:dE,category:dE,piecewise:dE,fixed:dE}},symbol:{applyVisual:function(d,e,c){var a=this.mapValueToVisual(d),b;if(E(a))c("symbol",a);else if(tL(a))for(b in a)a.hasOwnProperty(b)&&c(b,a[b])},_doMap:{linear:tR,category:iB,piecewise:function(b,c){var a=kh.call(this,c);return null==a&&(a=tR.call(this,b)),a},fixed:dE}},symbolSize:{applyVisual:iH("symbolSize"),_doMap:kg([0,1])}};function jX(c,d){var b=c.visual,a=[];m(b)?gm(b,function(b){a.push(b)}):null!=b&&a.push(b),d||1!==a.length||{color:1,symbol:1}.hasOwnProperty(c.type)||(a[1]=a[0]),tX(c,a)}function iL(a){return{applyVisual:function(b,c,d){b=this.mapValueToVisual(b),d("color",a(c("color"),b))},_doMap:kg([0,1])}}function tR(b){var a=this.option.visual;return a[Math.round(J(b,[0,1],[0,a.length-1],!0))]||{}}function iH(a){return function(b,d,c){c(a,this.mapValueToVisual(b))}}function iB(a){var b=this.option.visual;return b[this.option.loop&&a!==ie?a%b.length:a]}function dE(){return this.option.visual[0]}function kg(a){return{linear:function(b){return J(b,a,this.option.visual,!0)},category:iB,piecewise:function(c,d){var b=kh.call(this,d);return null==b&&(b=J(c,a,this.option.visual,!0)),b},fixed:dE}}function kh(d){var b=this.option,c=b.pieceList,a;if(b.hasSpecialVisual)if(a=c[B.findPieceIndex(d,c)],a&&a.visual)return a.visual[this.type]}function tX(a,b){return a.visual=b,"color"===a.type&&(a.parsedVisual=c(b,function(a){return aG(a)})),b}abf={linear:function(a){return J(a,this.option.dataExtent,[0,1],!0)},piecewise:function(c){var a=this.option.pieceList,b=B.findPieceIndex(c,a,!0);if(null!=b)return J(b,[0,a.length-1],[0,1],!0)},category:function(a){var b=this.option.categories?this.option.categoryMap[a]:a;return null==b?ie:b},fixed:aa};function ip(c,a,b){return c?a<=b:a<b}B.listVisualTypes=function(){var b=[];return a(fQ,function(c,a){b.push(a)}),b},B.addVisualHandler=function(a,b){fQ[a]=b},B.isValidType=function(a){return fQ.hasOwnProperty(a)},B.eachVisual=function(b,c,d){m(b)?a(b,c,d):c.call(d,b)},B.mapVisual=function(a,e,f){var d,c=b(a)?[]:m(a)?{}:(d=!0,null);return B.eachVisual(a,function(g,a){var b=e.call(f,g,a);d?c=b:c[a]=b}),c},B.retrieveVisuals=function(a){var b,c={};return a&&gm(fQ,function(e,d){a.hasOwnProperty(d)&&(c[d]=a[d],b=!0)}),b?c:null},B.prepareVisualTypes=function(a){if(tL(a)){var c=[];gm(a,function(b,a){c.push(a)}),a=c}else{if(!b(a))return[];a=a.slice()}return a.sort(function(a,b){return"color"===b&&"color"!==a&&0===a.indexOf("color")?1:-1}),a},B.dependsOn=function(a,b){return"color"===b?!(!a||0!==a.indexOf(b)):a===b},B.findPieceIndex=function(b,d,f){for(var k,l=1/0,a=0,h=d.length,e,j,c,g;a<h;a++)if(e=d[a].value,null!=e){if(e===b||"string"==typeof e&&e===b+"")return a;f&&i(e,a)}for(a=0,h=d.length;a<h;a++)if(j=d[a],c=j.interval,g=j.close,c){if(c[0]===-1/0){if(ip(g[1],b,c[1]))return a}else if(c[1]===1/0){if(ip(g[0],c[0],b))return a}else if(ip(g[0],c[0],b)&&ip(g[1],b,c[1]))return a;f&&i(c[0],a),f&&i(c[1],a)}if(f)return b===1/0?d.length-1:b===-1/0?0:k;function i(c,d){var a=Math.abs(c-b);a<l&&(l=a,k=d)}},abe=b,kk="itemStyle",abd={seriesType:"treemap",reset:function(b,g,h,i){var d=b.getData().tree,e=d.root,f=b.getModel(kk);e.isRemoved()||!function q(b,s,m,k,h,j){var i=b.getModel(),g=b.getLayout(),f,r,e,n,o,c,p,l,d,t;if(!g||g.invisible||!g.isInView)return;f=b.getModel(kk),r=m[b.depth],e=abc(f,s,r,k),n=f.get("borderColor"),o=f.get("borderColorSaturation"),null!=o&&(c=uc(e),p=o,n=null!=(l=c)?eg(l,null,null,p):null),b.setVisual("borderColor",n),d=b.viewChildren,d&&d.length?(t=abb(b,i,g,f,e,d),a(d,function(a,b){if(a.depth>=h.length||a===h[a.depth]){var c=aba(i,e,a,b,t,j);q(a,c,m,k,h,j)}})):(c=uc(e),b.setVisual("color",c))}(e,{},c(d.levelModels,function(a){return a?a.get(kk):null}),f,b.getViewRoot().getAncestors(),b)}};function abc(e,b,c,g){var d=f({},b);return a(["color","colorAlpha","colorSaturation"],function(f){var a=e.get(f,!0);null==a&&c&&(a=c[f]),null==a&&(a=b[f]),null==a&&(a=g.get(f)),null!=a&&(d[f]=a)}),d}function uc(b){var a=kl(b,"color"),c,d;if(a)return c=kl(b,"colorAlpha"),d=kl(b,"colorSaturation"),d&&(a=eg(a,null,null,d)),c&&(a=gZ(a,c)),a}function kl(b,c){var a=b[c];if(null!=a&&"none"!==a)return a}function abb(m,a,k,l,j,i){var g,d,f,c,e,b,h;if(i&&i.length)if(g=kt(a,"color")||null!=j.color&&"none"!==j.color&&(kt(a,"colorAlpha")||kt(a,"colorSaturation")),g)return d=a.get("visualMin"),f=a.get("visualMax"),c=k.dataExtent.slice(),null!=d&&d<c[0]&&(c[0]=d),null!=f&&f>c[1]&&(c[1]=f),e=a.get("colorMappingBy"),b={type:g.name,dataExtent:c,visual:g.range},"color"!==b.type||"index"!==e&&"id"!==e?b.mappingMethod="linear":(b.mappingMethod="category",b.loop=!0),h=new B(b),h.__drColorMappingBy=e,h}function kt(c,b){var a=c.get(b);return abe(a)&&a.length?{name:b,range:a}:null}function aba(i,j,d,g,a,h){var b=f({},j),c,e,k;return a&&(c=a.type,e="color"===c&&a.__drColorMappingBy,k="index"===e?g:"id"===e?h.mapIdToIndex(d.getId()):d.getValue(i.get("visualDimension")),b[c]=a.mapValueToVisual(k)),b}fd=Math.max,ia=Math.min,uj=af,kA=a,ul=["itemStyle","borderWidth"],aa$=["itemStyle","gapWidth"],aaZ=["upperLabel","show"],aaY=["upperLabel","height"],aaX={seriesType:"treemap",reset:function(b,x,h,k){var u=h.getWidth(),t=h.getHeight(),j=b.option,c=V(b.getBoxLayoutParams(),{width:h.getWidth(),height:h.getHeight()}),s=j.size||[],q=d(uj(c.width,s[0]),u),o=d(uj(c.height,s[1]),t),l=k&&k.type,p=go(k,["treemapZoomToNode","treemapRootToNode"],b),g="treemapRender"===l||"treemapMove"===l?k.rootRect:null,a=b.getViewRoot(),n=tp(a),i,e,w,m,v;"treemapMove"!==l&&(i="treemapZoomToNode"===l?function(s,q,p,f,g){var d,b=(q||{}).node,i=[f,g],e,a,k,l,h,o,m,j,c,r,n;if(!b||b===p)return i;for(e=f*g,a=e*s.option.zoomToNodeRatio;d=b.parentNode;){for(k=0,l=d.children,h=0,o=l.length;h<o;h++)k+=l[h].getValue();if(m=b.getValue(),0===m)return i;a*=k/m,j=d.getModel(),c=j.get(ul),r=Math.max(c,ut(j)),a+=4*c*c+(3*c+r)*Math.pow(a,.5),ke<a&&(a=ke),b=d}return a<e&&(a=e),n=Math.pow(a/e,.5),[f*n,g*n]}(b,p,a,q,o):g?[g.width,g.height]:[q,o],e=j.sort,e&&"asc"!==e&&"desc"!==e&&(e="desc"),w={squareRatio:j.squareRatio,sort:e,leafDepth:j.leafDepth},a.hostTree.clearLayouts(),m={x:0,y:0,width:i[0],height:i[1],area:i[0]*i[1]},a.setLayout(m),function z(d,n,h,w){var f,c,v,e,m,i,u,s,o,r,q,g,k,j,t,a,b,l,x,y,p;if(d.isRemoved())return;if(v=d.getLayout(),f=v.width,c=v.height,e=d.getModel(),m=e.get(ul),i=e.get(aa$)/2,u=ut(e),s=Math.max(m,u),o=m-i,r=s-i,e=d.getModel(),d.setLayout({borderWidth:m,upperHeight:s,upperLabelHeight:u},!0),f=fd(f-2*o,0),c=fd(c-o-r,0),q=f*c,g=aaW(d,e,q,n,h,w),!g.length)return;k={x:o,y:r,width:f,height:c},j=ia(f,c),t=1/0,a=[],a.area=0;for(b=0,l=g.length;b<l;)x=g[b],a.push(x),a.area+=x.getLayout().area,y=aaU(a,j,n.squareRatio),t=y<=t?(b++,y):(a.area-=a.pop().getLayout().area,us(a,j,k,i,!1),j=ia(k.width,k.height),a.length=a.area=0,1/0);a.length&&us(a,j,k,i,!0),h||(p=e.get("childrenVisibleMin"),null!=p&&q<p&&(h=!0));for(b=0,l=g.length;b<l;b++)z(g[b],n,h,w+1)}(a,w,!1,0),m=a.getLayout(),kA(n,function(c,d){var b=(n[d+1]||a).getValue();c.setLayout(f({dataExtent:[b,b],borderWidth:0,upperHeight:0},m))})),v=b.getData().tree.root,v.setLayout(function(h,g,i){var e,f,c,a,b,d;if(g)return{x:g.x,y:g.y};if(e={x:0,y:0},!i)return e;if(f=i.node,c=f.getLayout(),!c)return e;for(a=[c.width/2,c.height/2],b=f;b;)d=b.getLayout(),a[0]+=d.x,a[1]+=d.y,b=b.parentNode;return{x:h.width/2-a[0],y:h.height/2-a[1]}}(c,g,p),!0),b.setLayoutInfo(c),function i(a,b,d,h,e){var c=a.getLayout(),f=d[e],g=f&&f===a,j;if(f&&!g||e===d.length&&a!==h)return;a.setLayout({isInView:!0,invisible:!g&&!b.intersect(c),isAboveViewRoot:g},!0),j=new r(b.x-c.x,b.y-c.y,b.width,b.height),kA(a.viewChildren||[],function(a){i(a,j,d,h,e+1)})}(v,new r(-c.x,-c.y,u,t),n,a,0)}};function aaW(b,h,g,f,k,j){var a=b.children||[],d=f.sort,i,c,e,l,m;if("asc"!==d&&"desc"!==d&&(d=null),i=null!=f.leafDepth&&f.leafDepth<=j,k&&!i)return b.viewChildren=[];if(!function(b,a){a&&b.sort(function(b,c){var d="asc"===a?b.getValue()-c.getValue():c.getValue()-b.getValue();return 0==d?"asc"===a?b.dataIndex-c.dataIndex:c.dataIndex-b.dataIndex:d})}(a=W(a,function(a){return!a.isRemoved()}),d),c=function(h,a,e){for(var f=0,c=0,g=a.length,d,b;c<g;c++)f+=a[c].getValue();return d=h.get("visualDimension"),a&&a.length?"value"===d&&e?(b=[a[a.length-1].getValue(),a[0].getValue()],"asc"===e&&b.reverse()):(b=[1/0,-1/0],kA(a,function(c){var a=c.getValue(d);a<b[0]&&(b[0]=a),a>b[1]&&(b[1]=a)})):b=[NaN,NaN],{sum:f,dataExtent:b}}(h,a,d),0===c.sum)return b.viewChildren=[];if(c.sum=function(i,j,e,f,d){var h,a,c,b,g;if(!f)return e;for(h=i.get("visibleMin"),a=d.length,c=a,b=a-1;0<=b;b--)g=d["asc"===f?a-b-1:b].getValue(),g/e*j<h&&(c=b,e-=g);return"asc"===f?d.splice(0,a-c):d.splice(c,a-c),e}(h,g,c.sum,d,a),0===c.sum)return b.viewChildren=[];for(e=0,l=a.length;e<l;e++)m=a[e].getValue()/c.sum*g,a[e].setLayout({area:m});return i&&(a.length&&b.setLayout({isLeafRoot:!0},!0),a.length=0),b.viewChildren=a,b.setLayout({dataExtent:c.dataExtent},!0),a}function aaU(b,g,j){for(var a,d=0,e=1/0,f=0,i=b.length,c,h;f<i;f++)(a=b[f].getLayout().area)&&(a<e&&(e=a),d<a&&(d=a));return c=b.area*b.area,h=g*g*j,c?fd(h*d/c,c/(h*e)):1/0}function us(l,j,a,h,r){var e=j===a.width?0:1,b=1-e,d=["x","y"],f=["width","height"],k=a[d[e]],c=j?l.area/j:0,i,m,n,g,o,s,p,q,t;(r||c>a[f[b]])&&(c=a[f[b]]);for(i=0,m=l.length;i<m;i++)n=l[i],g={},o=c?n.getLayout().area/c:0,s=g[f[b]]=fd(c-2*h,0),p=a[d[e]]+a[f[e]]-k,q=i===m-1||p<o?p:o,t=g[f[e]]=fd(q-2*h,0),g[d[b]]=a[d[b]]+ia(h,s/2),g[d[e]]=k+ia(h,t/2),k+=q,n.setLayout(g,!0);a[d[b]]+=c,a[f[b]]-=c}function ut(a){return a.get(aaZ)?a.get(aaY):0}function eE(a){return"_EC_"+a}H(abd),N(aaX);function fy(a){this._directed=a||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData}aM=fy.prototype;function bd(a,b){this.id=null==a?"":a,this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=null==b?-1:b}function fG(b,c,a){this.node1=b,this.node2=c,this.dataIndex=null==a?-1:a}aM.type="graph",aM.isDirected=function(){return this._directed},aM.addNode=function(a,d){var c,b;if(a=null==a?""+d:""+a,c=this._nodesMap,!c[eE(a)])return b=new bd(a,d),(b.hostGraph=this).nodes.push(b),c[eE(a)]=b},aM.getNodeByIndex=function(a){var b=this.data.getRawIndex(a);return this.nodes[b]},aM.getNodeById=function(a){return this._nodesMap[eE(a)]},aM.addEdge=function(a,b,g){var d=this._nodesMap,e=this._edgesMap,f,c;if("number"==typeof a&&(a=this.nodes[a]),"number"==typeof b&&(b=this.nodes[b]),bd.isInstance(a)||(a=d[eE(a)]),bd.isInstance(b)||(b=d[eE(b)]),a&&b)if(f=a.id+"-"+b.id,!e[f])return c=new fG(a,b,g),(c.hostGraph=this)._directed&&(a.outEdges.push(c),b.inEdges.push(c)),a.edges.push(c),a!==b&&b.edges.push(c),this.edges.push(c),e[f]=c},aM.getEdgeByIndex=function(a){var b=this.edgeData.getRawIndex(a);return this.edges[b]},aM.getEdge=function(a,b){bd.isInstance(a)&&(a=a.id),bd.isInstance(b)&&(b=b.id);var c=this._edgesMap;return this._directed?c[a+"-"+b]:c[a+"-"+b]||c[b+"-"+a]},aM.eachNode=function(c,d){for(var b=this.nodes,e=b.length,a=0;a<e;a++)0<=b[a].dataIndex&&c.call(d,b[a],a)},aM.eachEdge=function(c,d){for(var b=this.edges,e=b.length,a=0;a<e;a++)0<=b[a].dataIndex&&0<=b[a].node1.dataIndex&&0<=b[a].node2.dataIndex&&c.call(d,b[a],a)},aM.breadthFirstTraverse=function(h,b,i,j){var k,a,d,f,g,e,c;if(bd.isInstance(b)||(b=this._nodesMap[eE(b)]),b){for(k="out"===i?"outEdges":"in"===i?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!h.call(j,b,null))for(d=[b];d.length;){f=d.shift(),g=f[k];for(a=0;a<g.length;a++)if(e=g[a],c=e.node1===f?e.node2:e.node1,!c.__visited){if(h.call(j,c,f))return;d.push(c),c.__visited=!0}}}},aM.update=function(){for(var f=this.data,c=this.edgeData,e=this.nodes,d=this.edges,a=0,b=e.length;a<b;a++)e[a].dataIndex=-1;for(a=0,b=f.count();a<b;a++)e[f.getRawIndex(a)].dataIndex=a;c.filterSelf(function(b){var a=d[c.getRawIndex(b)];return 0<=a.node1.dataIndex&&0<=a.node2.dataIndex});for(a=0,b=d.length;a<b;a++)d[a].dataIndex=-1;for(a=0,b=c.count();a<b;a++)d[c.getRawIndex(a)].dataIndex=a},aM.clone=function(){for(var b=new fy(this._directed),c=this.nodes,e=this.edges,a=0,d;a<c.length;a++)b.addNode(c[a].id,c[a].dataIndex);for(a=0;a<e.length;a++)d=e[a],b.addEdge(d.node1.id,d.node2.id,d.dataIndex);return b},bd.prototype={constructor:bd,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(a){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(a)}},fG.prototype.getModel=function(a){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(a)};function uz(a,b){return{getValue:function(d){var c=this[a][b];return c.get(c.getDimension(d||"value"),this.dataIndex)},setVisual:function(c,d){0<=this.dataIndex&&this[a][b].setItemVisual(this.dataIndex,c,d)},getVisual:function(c,d){return this[a][b].getItemVisual(this.dataIndex,c,d)},setLayout:function(c,d){0<=this.dataIndex&&this[a][b].setItemLayout(this.dataIndex,c,d)},getLayout:function(){return this[a][b].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[a][b].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[a][b].getRawIndex(this.dataIndex)}}}C(bd,uz("hostGraph","data")),C(fG,uz("hostGraph","edgeData")),fy.Node=bd,fy.Edge=fG,iA(bd),iA(fG);function uA(b,p,e,r,o){for(var d=new fy(r),a=0,n,k,q,f,l,m,c,h,g,i,s,j;a<b.length;a++)d.addNode(af(b[a].id,b[a].name,a),a);n=[],k=[],q=0;for(a=0;a<p.length;a++)f=p[a],l=f.source,m=f.target,d.addEdge(l,m,q)&&(k.push(f),n.push(af(f.id,l+" > "+m)),q++);return h=e.get("coordinateSystem"),"cartesian2d"===h||"polar"===h?c=ca(b,e):(g=aq.get(h),i=g&&"view"!==g.type&&g.dimensions||[],v(i,"value")<0&&i.concat(["value"]),s=ed(b,{coordDimensions:i}),(c=new ab(s,e)).initData(b)),j=new ab(["value"],e),j.initData(k,n),o&&o(c,j),sS({mainData:c,struct:d,structAttr:"graph",datas:{node:c,edge:j},datasAttr:{node:"data",edge:"edgeData"}}),d.update(),d}fH=iq({type:"series.graph",init:function(a){fH.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},mergeOption:function(a){fH.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(a.edges||a.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(a){fH.superApply(this,"mergeDefaultAndTheme",arguments),dn(a,["edgeLabel"],["show"])},getInitialData:function(a,c){var d=a.edges||a.links||[],e=a.data||a.nodes||[],b=this;if(e&&d)return uA(e,d,this,!0,function(e,f){e.wrapMethod("getItemModel",function(a){var c=b._categoriesModels[a.getShallow("category")];return c&&(c.parentModel=a.parentModel,a.parentModel=c),a});var a=b.getModel("edgeLabel"),g=new w({label:a.option},a.parentModel,c),d=b.getModel("emphasis.edgeLabel"),h=new w({emphasis:{label:d.option}},d.parentModel,c);function i(a){return(a=this.parsePath(a))&&"label"===a[0]?g:a&&"emphasis"===a[0]&&"label"===a[1]?h:this.parentModel}f.wrapMethod("getItemModel",function(a){return a.customizeGetParent(i),a})}).data},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(c,i,h){if("edge"!==h)return fH.superApply(this,"formatTooltip",arguments);var b=this.getData(),e=this.getDataParams(c,h),f=b.graph.getEdgeByIndex(c),g=b.getName(f.node1.dataIndex),d=b.getName(f.node2.dataIndex),a=[];return null!=g&&a.push(g),null!=d&&a.push(d),a=K(a.join(" > ")),e.value&&(a+=" : "+K(e.value)),a},_updateCategoriesData:function(){var b=c(this.option.categories||[],function(a){return null!=a.value?a:f({value:0},a)}),a=new ab(["value"],this);a.initData(b),this._categoriesData=a,this._categoriesModels=a.mapArray(function(b){return a.getItemModel(b,!0)})},setZoom:function(a){this.option.zoom=a},setCenter:function(a){this.option.center=a},isAnimationEnabled:function(){return fH.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle"},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,curveness:0,opacity:.5},emphasis:{label:{show:!0}}}}),uC=av.prototype,kU=gX.prototype;function kX(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}aaT=ba({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(b,a){this[kX(a)?"_buildPathLine":"_buildPathCurve"](b,a)},_buildPathLine:uC.buildPath,_buildPathCurve:kU.buildPath,pointAt:function(a){return this[kX(this.shape)?"_pointAtLine":"_pointAtCurve"](a)},_pointAtLine:uC.pointAt,_pointAtCurve:kU.pointAt,tangentAt:function(c){var a=this.shape,b=kX(a)?[a.x2-a.x1,a.y2-a.y1]:this._tangentAtCurve(c);return ef(b,b)},_tangentAtCurve:kU.tangentAt}),k_=["fromSymbol","toSymbol"];function uH(a){return"_"+a+"Type"}function uI(c,d,e){var h=d.getItemVisual(e,"color"),f=d.getItemVisual(e,c),a=d.getItemVisual(e,c+"Size"),g;if(f&&"none"!==f)return b(a)||(a=[a,a]),g=aQ(f,-a[0]/2,-a[1]/2,a[0],a[1],h),g.name=c,g}function ld(a,b){a.x1=b[0][0],a.y1=b[0][1],a.x2=b[1][0],a.y2=b[1][1],a.percent=1;var c=b[2];c?(a.cpx1=c[0],a.cpy1=c[1]):(a.cpx1=NaN,a.cpy1=NaN)}function fT(a,b,c){e.call(this),this._createLine(a,b,c)}cv=fT.prototype;function hh(a){this._ctor=a||fT,this.group=new e}cv.beforeUpdate=function(){var m=this.childOfName("fromSymbol"),j=this.childOfName("toSymbol"),b=this.childOfName("label"),e,l,d,h,k,i,a,c,p,o,n,g,r,f,s,q;if(m||j||!b.ignore){for(e=1,l=this.parent;l;)l.scale&&(e/=l.scale[0]),l=l.parent;d=this.childOfName("line"),(this.__dirty||d.__dirty)&&(h=d.shape.percent,k=d.pointAt(0),i=d.pointAt(h),a=ce([],i,k),(ef(a,a),m)&&(m.attr("position",k),c=d.tangentAt(0),m.attr("rotation",Math.PI/2-Math.atan2(c[1],c[0])),m.attr("scale",[e*h,e*h])),j&&(j.attr("position",i),c=d.tangentAt(1),j.attr("rotation",-Math.PI/2-Math.atan2(c[1],c[0])),j.attr("scale",[e*h,e*h])),b.ignore||(b.attr("position",i),g=5*e,"end"===b.__position?(p=[a[0]*g+i[0],a[1]*g+i[1]],o=.8<a[0]?"left":a[0]<-.8?"right":"center",n=.8<a[1]?"top":a[1]<-.8?"bottom":"middle"):"middle"===b.__position?(r=h/2,f=[(c=d.tangentAt(r))[1],-c[0]],s=d.pointAt(r),0<f[1]&&(f[0]=-f[0],f[1]=-f[1]),p=[s[0]+f[0]*g,s[1]+f[1]*g],o="center",n="bottom",q=-Math.atan2(c[1],c[0]),i[0]<k[0]&&(q=Math.PI+q),b.attr("rotation",q)):(p=[-a[0]*g+k[0],-a[1]*g+k[1]],o=.8<a[0]?"right":a[0]<-.8?"left":"center",n=.8<a[1]?"bottom":a[1]<-.8?"top":"middle"),b.attr({style:{textVerticalAlign:b.__verticalAlign||n,textAlign:b.__textAlign||o},position:p,scale:[e,e]})))}},cv._createLine=function(b,c,e){var f=b.hostModel,d=function(b){var a=new aaT({name:"line",subPixelOptimize:!0});return ld(a.shape,b),a}(b.getItemLayout(c)),g;d.shape.percent=0,ao(d,{shape:{percent:1}},f,c),this.add(d),g=new q({name:"label",lineLabelOriginalOpacity:1}),this.add(g),a(k_,function(a){var d=uI(a,b,c);this.add(d),this[uH(a)]=b.getItemVisual(c,a)},this),this._updateCommonStl(b,c,e)},cv.updateData=function(b,c,e){var f=b.hostModel,g=this.childOfName("line"),h=b.getItemLayout(c),d={shape:{}};ld(d.shape,h),p(g,d,f,c),a(k_,function(a){var d=b.getItemVisual(c,a),e=uH(a),f;this[e]!==d&&(this.remove(this.childOfName(a)),f=uI(a,b,c),this.add(f)),this[e]=d},this),this._updateCommonStl(b,c,e)},cv._updateCommonStl=function(c,e,b){var n=c.hostModel,v=this.childOfName("line"),l=b&&b.lineStyle,t=b&&b.hoverLineStyle,j=b&&b.labelModel,d=b&&b.hoverLabelModel,h,q,s,r,k,p,o,f,i,u,m,w;(!b||c.hasItemOption)&&(h=c.getItemModel(e),l=h.getModel("lineStyle").getLineStyle(),t=h.getModel("emphasis.lineStyle").getLineStyle(),j=h.getModel("label"),d=h.getModel("emphasis.label")),q=c.getItemVisual(e,"color"),s=dF(c.getItemVisual(e,"opacity"),l.opacity,1),v.useStyle(g({strokeNoScale:!0,fill:"none",stroke:q,opacity:s},l)),v.hoverStyle=t,a(k_,function(b){var a=this.childOfName(b);a&&(a.setColor(q),a.setStyle({opacity:s}))},this),p=j.getShallow("show"),o=d.getShallow("show"),f=this.childOfName("label"),(p||o)&&(r=q||"#000",null==(k=n.getFormattedLabel(e,"normal",c.dataType)))&&(i=n.getRawValue(e),k=null==i?c.getName(e):isFinite(i)?X(i):i),u=p?k:null,m=o?R(n.getFormattedLabel(e,"emphasis",c.dataType),k):null,w=f.style,null==u&&null==m||(O(f.style,j,{text:u},{autoColor:r}),f.__textAlign=w.textAlign,f.__verticalAlign=w.textVerticalAlign,f.__position=j.get("position")||"middle"),f.hoverStyle=null!=m?{text:m,textFill:d.getTextColor(!0),fontStyle:d.getShallow("fontStyle"),fontWeight:d.getShallow("fontWeight"),fontSize:d.getShallow("fontSize"),fontFamily:d.getShallow("fontFamily")}:{text:null},f.ignore=!p&&!o,G(this)},cv.highlight=function(){this.trigger("emphasis")},cv.downplay=function(){this.trigger("normal")},cv.updateLayout=function(a,b){this.setLinePoints(a.getItemLayout(b))},cv.setLinePoints=function(b){var a=this.childOfName("line");ld(a.shape,b),a.dirty()},D(fT,e),dk=hh.prototype;function uO(b){var a=b.hostModel;return{lineStyle:a.getModel("lineStyle").getLineStyle(),hoverLineStyle:a.getModel("emphasis.lineStyle").getLineStyle(),labelModel:a.getModel("label"),hoverLabelModel:a.getModel("emphasis.label")}}function uP(a){return isNaN(a[0])||isNaN(a[1])}function jT(a){return!uP(a[0])&&!uP(a[1])}function ge(b){var a=b.coordinateSystem,d,c,e;return"view"!==a.type?1:(d=b.option.nodeScaleRatio,c=a.scale,e=c&&c[0]||1,((a.getZoom()-1)*d+1)/e)}function gi(b){var a=b.getVisual("symbolSize");return a instanceof Array&&(a=(a[0]+a[1])/2),+a}dk.isPersistent=function(){return!0},dk.updateData=function(a){var b=this,d=b.group,c=b._lineData,e;b._lineData=a,c||d.removeAll(),e=uO(a),a.diff(c).add(function(c){!function(c,a,b,e){if(!jT(a.getItemLayout(b)))return;var d=new c._ctor(a,b,e);a.setItemGraphicEl(b,d),c.group.add(d)}(b,a,c,e)}).update(function(d,f){!function(d,f,b,g,c,e){var a=f.getItemGraphicEl(g);if(!jT(b.getItemLayout(c)))return d.group.remove(a);a?a.updateData(b,c,e):a=new d._ctor(b,c,e),b.setItemGraphicEl(c,a),d.group.add(a)}(b,c,a,f,d,e)}).remove(function(a){d.remove(c.getItemGraphicEl(a))}).execute()},dk.updateLayout=function(){var a=this._lineData;a&&a.eachItemGraphicEl(function(b,c){b.updateLayout(a,c)},this)},dk.incrementalPrepareUpdate=function(a){this._seriesScope=uO(a),this._lineData=null,this.group.removeAll()},dk.incrementalUpdate=function(d,c){var a,b;function e(a){a.isGroup||(a.incremental=a.useHoverLayer=!0)}for(a=d.start;a<d.end;a++)jT(c.getItemLayout(a))&&(b=new this._ctor(c,a,this._seriesScope),b.traverse(e),this.group.add(b),c.setItemGraphicEl(a,b))},dk.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},dk._clearIncremental=function(){var a=this._incremental;a&&a.clearDisplaybles()},lh=[],lj=[],lk=[],dU=am,lo=cC,uY=Math.abs;function uZ(i,h,n){for(var a,c=i[0],d=i[1],b=i[2],k=1/0,j=n*n,e=.1,f=.1,l,m,g,o;f<=.9;f+=.1)lh[0]=dU(c[0],d[0],b[0],f),lh[1]=dU(c[1],d[1],b[1],f),(g=uY(lo(lh,h)-j))<k&&(k=g,a=f);for(l=0;l<32;l++){if(m=a+e,lj[0]=dU(c[0],d[0],b[0],a),lj[1]=dU(c[1],d[1],b[1],a),lk[0]=dU(c[0],d[0],b[0],m),lk[1]=dU(c[1],d[1],b[1],m),g=lo(lj,h)-j,uY(g)<.01)break;o=lo(lk,h)-j,e/=2,g<0?0<=o?a+=e:a-=e:0<=o?a-=e:a+=e}return a}function lp(g,e){var b=[],f=lJ,a=[[],[],[]],c=[[],[]],d=[];e/=2,g.eachEdge(function(h,n){var g=h.getLayout(),l=h.getVisual("fromSymbol"),m=h.getVisual("toSymbol"),i,j,k;g.__original||(g.__original=[bi(g[0]),bi(g[1])],g[2]&&g.__original.push(bi(g[2]))),i=g.__original,null!=g[2]?(ah(a[0],i[0]),ah(a[1],i[2]),ah(a[2],i[1]),l&&"none"!==l&&(j=gi(h.node1),k=uZ(a,i[0],j*e),f(a[0][0],a[1][0],a[2][0],k,b),a[0][0]=b[3],a[1][0]=b[4],f(a[0][1],a[1][1],a[2][1],k,b),a[0][1]=b[3],a[1][1]=b[4]),m&&"none"!==m&&(j=gi(h.node2),k=uZ(a,i[1],j*e),f(a[0][0],a[1][0],a[2][0],k,b),a[1][0]=b[1],a[2][0]=b[2],f(a[0][1],a[1][1],a[2][1],k,b),a[1][1]=b[1],a[2][1]=b[2]),ah(g[0],a[0]),ah(g[1],a[2]),ah(g[2],a[1])):(ah(c[0],i[0]),ah(c[1],i[1]),ce(d,c[1],c[0]),ef(d,d),l&&"none"!==l&&(j=gi(h.node1),eW(c[0],c[0],d,j*e)),m&&"none"!==m&&(j=gi(h.node2),eW(c[1],c[1],d,-j*e)),ah(g[0],c[0]),ah(g[1],c[1]))})}dV="__focusNodeAdjacency",dX="__unfocusNodeAdjacency",dd=["itemStyle","opacity"],gR=["lineStyle","opacity"];function vd(a,c){var b=a.getVisual("opacity");return null!=b?b:a.getModel().get(c)}function gS(d,e,b){var c=d.getGraphicEl(),a=vd(d,e);null!=b&&(null==a&&(a=1),a*=b),c.downplay&&c.downplay(),c.traverse(function(c){if(!c.isGroup){var d=c.lineLabelOriginalOpacity;null!=d&&null==b||(d=a),c.setStyle("opacity",d)}})}function db(b,c){var d=vd(b,c),a=b.getGraphicEl();a.traverse(function(a){a.isGroup||a.setStyle("opacity",d)}),a.highlight&&a.highlight()}ay({type:"graph",init:function(e,d){var b=new ez,c=new hh,a=this.group;this._controller=new ep(d.getZr()),this._controllerHost={target:a},a.add(b.group),a.add(c.group),this._symbolDraw=b,this._lineDraw=c,this._firstRender=!0},render:function(a,n,d){var e=a.coordinateSystem,l,k,g,i,b,j,c,f,m,h,o;this._model=a,l=this._symbolDraw,k=this._lineDraw,g=this.group,"view"===e.type&&(i={position:e.position,scale:e.scale},this._firstRender?g.attr(i):p(g,i,a)),lp(a.getGraph(),ge(a)),b=a.getData(),l.updateData(b),j=a.getEdgeData(),k.updateData(j),this._updateNodeAndLinkScale(),this._updateController(a,n,d),clearTimeout(this._layoutTimeout),c=a.forceLayout,f=a.get("force.layoutAnimation"),c&&this._startForceLayoutIteration(c,f),b.eachItemGraphicEl(function(e,g){var h=b.getItemModel(g),i;e.off("drag").off("dragend"),i=h.get("draggable"),i&&e.on("drag",function(){c&&(c.warmUp(),this._layouting||this._startForceLayoutIteration(c,f),c.setFixed(g),b.setItemLayout(g,e.position))},this).on("dragend",function(){c&&c.setUnfixed(g)},this),e.setDraggable(i&&c),e[dV]&&e.off("mouseover",e[dV]),e[dX]&&e.off("mouseout",e[dX]),h.get("focusNodeAdjacency")&&(e.on("mouseover",e[dV]=function(){d.dispatchAction({type:"focusNodeAdjacency",seriesId:a.id,dataIndex:e.dataIndex})}),e.on("mouseout",e[dX]=function(){d.dispatchAction({type:"unfocusNodeAdjacency",seriesId:a.id})}))},this),b.graph.eachEdge(function(c){var b=c.getGraphicEl();b[dV]&&b.off("mouseover",b[dV]),b[dX]&&b.off("mouseout",b[dX]),c.getModel().get("focusNodeAdjacency")&&(b.on("mouseover",b[dV]=function(){d.dispatchAction({type:"focusNodeAdjacency",seriesId:a.id,edgeDataIndex:c.dataIndex})}),b.on("mouseout",b[dX]=function(){d.dispatchAction({type:"unfocusNodeAdjacency",seriesId:a.id})}))}),m="circular"===a.get("layout")&&a.get("circular.rotateLabel"),h=b.getLayout("cx"),o=b.getLayout("cy"),b.eachItemGraphicEl(function(j,e){var i=b.getItemModel(e).get("label.rotate")||0,f=j.getSymbolPath(),c,a,d,g;m?(c=b.getItemLayout(e),a=Math.atan2(c[1]-o,c[0]-h),a<0&&(a=2*Math.PI+a),d=c[0]<h,d&&(a-=Math.PI),g=d?"left":"right",kI(f,{textRotation:-a,textPosition:g,textOrigin:"center"},{textPosition:g})):kI(f,{textRotation:i*=Math.PI/180})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},focusNodeAdjacency:function(h,i,j,e){var d=this._model.getData().graph,g=e.dataIndex,f=e.edgeDataIndex,c=d.getNodeByIndex(g),b=d.getEdgeByIndex(f);(c||b)&&(d.eachNode(function(a){gS(a,dd,.1)}),d.eachEdge(function(a){gS(a,gR,.1)}),c&&(db(c,dd),a(c.edges,function(a){a.dataIndex<0||(db(a,gR),db(a.node1,dd),db(a.node2,dd))})),b&&(db(b,gR),db(b.node1,dd),db(b.node2,dd)))},unfocusNodeAdjacency:function(b,c,d,e){var a=this._model.getData().graph;a.eachNode(function(a){gS(a,dd)}),a.eachEdge(function(a){gS(a,gR)})},_startForceLayoutIteration:function(b,c){var a=this;!function d(){b.step(function(b){a.updateLayout(a._model),(a._layouting=!b)&&(c?a._layoutTimeout=setTimeout(d,16):d())})}()},_updateController:function(a,f,d){var b=this._controller,c=this._controllerHost,e=this.group;b.setPointerChecker(function(c,f,g){var b=e.getBoundingRect();return b.applyTransform(e.transform),b.contain(f,g)&&!hC(c,d,a)}),"view"===a.coordinateSystem.type?(b.enable(a.get("roam")),c.zoomLimit=a.get("scaleLimit"),c.zoom=a.coordinateSystem.getZoom(),b.off("pan").off("zoom").on("pan",function(b){kT(c,b.dx,b.dy),d.dispatchAction({seriesId:a.id,type:"graphRoam",dx:b.dx,dy:b.dy})}).on("zoom",function(b){kQ(c,b.scale,b.originX,b.originY),d.dispatchAction({seriesId:a.id,type:"graphRoam",zoom:b.scale,originX:b.originX,originY:b.originY}),this._updateNodeAndLinkScale(),lp(a.getGraph(),ge(a)),this._lineDraw.updateLayout()},this)):b.disable()},_updateNodeAndLinkScale:function(){var a=this._model,c=a.getData(),b=ge(a),d=[b,b];c.eachItemGraphicEl(function(a,b){a.attr("scale",d)})},updateLayout:function(a){lp(a.getGraph(),ge(a)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(a,b){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}}),u({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),u({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){}),u({type:"graphRoam",event:"graphRoam",update:"none"},function(a,b){b.eachComponent({mainType:"series",query:a},function(b){var c=kF(b.coordinateSystem,a);b.setCenter&&b.setCenter(c.center),b.setZoom&&b.setZoom(c.zoom)})});function gW(a){return a instanceof Array||(a=[a,a]),a}function vh(a){var b=a.coordinateSystem,c;(!b||"view"===b.type)&&(c=a.getGraph(),c.eachNode(function(a){var b=a.getModel();a.setLayout([+b.get("x"),+b.get("y")])}),vi(c))}function vi(a){a.eachEdge(function(c){var d=c.getModel().get("lineStyle.curveness")||0,a=bi(c.node1.getLayout()),b=bi(c.node2.getLayout()),e=[a,b];+d&&e.push([(a[0]+b[0])/2-(a[1]-b[1])*d,(a[1]+b[1])/2-(b[0]-a[0])*d]),c.setLayout(e)})}vj=Math.PI,lu=[];function vl(d,i){var b=d.coordinateSystem,a,c,g,f,e,j,h;(!b||"view"===b.type)&&(a=b.getBoundingRect(),c=d.getData(),g=c.graph,f=a.width/2+a.x,e=a.height/2+a.y,j=Math.min(a.width,a.height)/2,h=c.count(),c.setLayout({cx:f,cy:e}),h&&(aaS[i](d,b,g,c,j,f,e,h),g.eachEdge(function(b){var g,a=b.getModel().get("lineStyle.curveness")||0,c=bi(b.node1.getLayout()),d=bi(b.node2.getLayout()),h=(c[0]+d[0])/2,i=(c[1]+d[1])/2;+a&&(g=[f*(a*=3)+h*(1-a),e*a+i*(1-a)]),b.setLayout([c,d,g])})))}aaS={value:function(j,k,g,h,c,f,d,e){var a=0,b=h.getSum("value"),i=2*Math.PI/(b||e);g.eachNode(function(e){var h=e.getValue("value"),g=i*(b?h:1)/2;a+=g,e.setLayout([c*Math.cos(a)+f,c*Math.sin(a)+d]),a+=g})},symbolSize:function(f,k,d,l,b,j,h,c){var e=0,g,i,a;lu.length=c,g=ge(f),d.eachNode(function(d){var a=gi(d),c;isNaN(a)&&(a=2),a<0&&(a=0),a*=g,c=Math.asin(a/2/b),isNaN(c)&&(c=vj/2),lu[d.dataIndex]=c,e+=2*c}),i=(2*vj-e)/c/2,a=0,d.eachNode(function(c){var d=i+lu[c.dataIndex];a+=d,c.setLayout([b*Math.cos(a)+j,b*Math.sin(a)+h]),a+=d})}},ej=eW,aH(function(b){var a=b.findComponents({mainType:"legend"});a&&a.length&&b.eachSeriesByType("graph",function(b){var c=b.getCategoriesData(),d=b.getGraph().data,e=c.mapArray(c.getName);d.filterSelf(function(f){var b=d.getItemModel(f).getShallow("category"),c;if(null!=b){"number"==typeof b&&(b=e[b]);for(c=0;c<a.length;c++)if(!a[c].isSelected(b))return!1}return!0})},this)}),H(cY("graph","circle",null)),H(function(a){var b={};a.eachSeriesByType("graph",function(d){var a=d.getCategoriesData(),c=d.getData(),e={};a.each(function(c){var h=a.getName(c),i,k,g,f,j;e["ec-"+h]=c,i=a.getItemModel(c),k=i.get("itemStyle.color")||d.getColorFromPalette(h,b),a.setItemVisual(c,"color",k);for(g=["opacity","symbol","symbolSize","symbolKeepAspect"],f=0;f<g.length;f++)j=i.getShallow(g[f],!0),null!=j&&a.setItemVisual(c,g[f],j)}),a.count()&&c.each(function(g){var b=c.getItemModel(g).getShallow("category"),f,d;if(null!=b){"string"==typeof b&&(b=e["ec-"+b]);for(f=["color","opacity","symbol","symbolSize","symbolKeepAspect"],d=0;d<f.length;d++)null==c.getItemVisual(g,f[d],!0)&&c.setItemVisual(g,f[d],a.getItemVisual(b,f[d]))}})})}),H(function(a){a.eachSeriesByType("graph",function(b){var g=b.getGraph(),a=b.getEdgeData(),c=gW(b.get("edgeSymbol")),d=gW(b.get("edgeSymbolSize")),e="lineStyle.color".split("."),f="lineStyle.opacity".split(".");a.setVisual("fromSymbol",c&&c[0]),a.setVisual("toSymbol",c&&c[1]),a.setVisual("fromSymbolSize",d&&d[0]),a.setVisual("toSymbolSize",d&&d[1]),a.setVisual("color",b.get(e)),a.setVisual("opacity",b.get(f)),a.each(function(j){var c=a.getItemModel(j),b=g.getEdgeByIndex(j),d=gW(c.getShallow("symbol",!0)),h=gW(c.getShallow("symbolSize",!0)),i=c.get(e),k=c.get(f);switch(i){case"source":i=b.node1.getVisual("color");break;case"target":i=b.node2.getVisual("color")}d[0]&&b.setVisual("fromSymbol",d[0]),d[1]&&b.setVisual("toSymbol",d[1]),h[0]&&b.setVisual("fromSymbolSize",h[0]),h[1]&&b.setVisual("toSymbolSize",h[1]),b.setVisual("color",i),b.setVisual("opacity",k)})})}),N(function(b,c){b.eachSeriesByType("graph",function(d){var h=d.get("layout"),e=d.coordinateSystem,b,f,c,i,j,g,k;if(e&&"view"!==e.type){b=d.getData(),f=[],a(e.dimensions,function(a){f=f.concat(b.mapDimension(a,!0))});for(c=0;c<b.count();c++){for(i=[],j=!1,g=0;g<f.length;g++)k=b.get(f[g],c),isNaN(k)||(j=!0),i.push(k);j?b.setItemLayout(c,e.dataToPoint(i)):b.setItemLayout(c,[NaN,NaN])}vi(b.graph)}else h&&"none"!==h||vh(d)})}),N(bz.VISUAL.POST_CHART_LAYOUT,function(a){a.eachSeriesByType("graph",function(a){"circular"===a.get("layout")&&vl(a,"symbolSize")})}),N(function(a){a.eachSeriesByType("graph",function(a){var k,g,d,m,h,j,q,n,e,c,l,f,o,p,i,r;(!(l=a.coordinateSystem)||"view"===l.type)&&("force"===a.get("layout")?(k=a.preservedPoints||{},g=a.getGraph(),d=g.data,m=g.edgeData,h=a.getModel("force"),j=h.get("initLayout"),a.preservedPoints?d.each(function(a){var b=d.getId(a);d.setItemLayout(a,k[b]||[NaN,NaN])}):j&&"none"!==j?"circular"===j&&vl(a,"value"):vh(a),q=d.getDataExtent("value"),n=m.getDataExtent("value"),e=h.get("repulsion"),c=h.get("edgeLength"),b(e)||(e=[e,e]),b(c)||(c=[c,c]),c=[c[1],c[0]],f=d.mapArray("value",function(f,c){var a=d.getItemLayout(c),b=J(f,q,e);return isNaN(b)&&(b=(e[0]+e[1])/2),{w:b,rep:b,fixed:d.getItemModel(c).get("fixed"),p:!a||isNaN(a[0])||isNaN(a[1])?null:a}}),o=m.mapArray("value",function(e,h){var a=g.getEdgeByIndex(h),b=J(e,n,c),d;return isNaN(b)&&(b=(c[0]+c[1])/2),d=a.getModel(),{n1:f[a.node1.dataIndex],n2:f[a.node2.dataIndex],d:b,curveness:d.get("lineStyle.curveness")||0,ignoreForceLayout:d.get("ignoreForceLayout")}}),p=(l=a.coordinateSystem).getBoundingRect(),i=function(a,f,c){for(var e=c.rect,i=e.width,k=e.height,g=[e.x+i/2,e.y+k/2],l=null==c.gravity?.1:c.gravity,h=0,d,j,b;h<a.length;h++)d=a[h],d.p||(d.p=cG(i*(Math.random()-.5)+g[0],k*(Math.random()-.5)+g[1])),d.pp=bi(d.p),d.edges=null;return j=null==c.friction?.6:c.friction,b=j,{warmUp:function(){b=.8*j},setFixed:function(b){a[b].fixed=!0},setUnfixed:function(b){a[b].fixed=!1},step:function(r){for(var d=[],n=a.length,c=0,k,e,j,m,o,h,p,q,i;c<f.length;c++)k=f[c],k.ignoreForceLayout||(e=k.n1,ce(d,(h=k.n2).p,e.p),j=eZ(d)-k.d,m=h.w/(e.w+h.w),isNaN(m)&&(m=0),ef(d,d),e.fixed||ej(e.p,e.p,d,m*j*b),h.fixed||ej(h.p,h.p,d,-(1-m)*j*b));for(c=0;c<n;c++)(i=a[c]).fixed||(ce(d,g,i.p),ej(i.p,i.p,d,l*b));for(c=0;c<n;c++){e=a[c];for(o=c+1;o<n;o++)ce(d,(h=a[o]).p,e.p),0===(j=eZ(d))&&(yF(d,Math.random()-.5,Math.random()-.5),j=1),p=(e.rep+h.rep)/j/j,e.fixed||ej(e.pp,e.pp,d,p),h.fixed||ej(h.pp,h.pp,d,-p)}q=[];for(c=0;c<n;c++)(i=a[c]).fixed||(ce(q,i.p,i.pp),ej(i.p,i.p,q,b),ah(i.pp,i.p));b*=.992,r&&r(a,f,b<.01)}}}(f,o,{rect:p,gravity:h.get("gravity"),friction:h.get("friction")}),r=i.step,i.step=function(b){for(var a=0,c=f.length;a<c;a++)f[a].fixed&&ah(f[a].p,g.getNodeByIndex(a).getLayout());r(function(i,m,n){for(var a=0,j=i.length,h,l,e,f,c;a<j;a++)i[a].fixed||g.getNodeByIndex(a).setLayout(i[a].p),k[d.getId(a)]=i[a].p;for(a=0,j=m.length;a<j;a++)h=m[a],l=g.getEdgeByIndex(a),e=h.n1.p,f=h.n2.p,c=l.getLayout(),(c=c?c.slice():[])[0]=c[0]||[],c[1]=c[1]||[],ah(c[0],e),ah(c[1],f),+h.curveness&&(c[2]=[(e[0]+f[0])/2-(e[1]-f[1])*h.curveness,(e[1]+f[1])/2-(f[0]-e[0])*h.curveness]),l.setLayout(c);b&&b(n)})},a.forceLayout=i,a.preservedPoints=k,i.step()):a.forceLayout=null)})}),nd("graphView",{create:function(b,c){var a=[];return b.eachSeriesByType("graph",function(f){var h=f.get("coordinateSystem"),i,b,e,j,d,k,l,m,n,g;(!h||"view"===h)&&(i=f.getData(),b=[],e=[],lF(i.mapArray(function(b){var a=i.getItemModel(b);return[+a.get("x"),+a.get("y")]}),b,e),e[0]-b[0]==0&&(e[0]+=1,b[0]-=1),e[1]-b[1]==0&&(e[1]+=1,b[1]-=1),j=(e[0]-b[0])/(e[1]-b[1]),d=function(c,a,d){var b=c.getBoxLayoutParams();return b.aspect=d,V(b,{width:a.getWidth(),height:a.getHeight()})}(f,c,j),isNaN(j)&&(b=[d.x,d.y],e=[d.x+d.width,d.y+d.height]),k=e[0]-b[0],l=e[1]-b[1],m=d.width,n=d.height,g=f.coordinateSystem=new cA,g.zoomLimit=f.get("scaleLimit"),g.setBoundingRect(b[0],b[1],k,l),g.setViewRect(d.x,d.y,m,n),g.setCenter(f.get("center")),g.setZoom(f.get("zoom")),a.push(g))}),a}}),M.extend({type:"series.gauge",getInitialData:function(a,b){return eo(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}}),aaR=s.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(d,a){var e=Math.cos,f=Math.sin,g=a.r,b=a.width,c=a.angle,h=a.x-e(c)*b*(g/3<=b?1:2),i=a.y-f(c)*b*(g/3<=b?1:2);c=a.angle-Math.PI/2,d.moveTo(h,i),d.lineTo(a.x+e(c)*b,a.y+f(c)*b),d.lineTo(a.x+e(a.angle)*g,a.y+f(a.angle)*g),d.lineTo(a.x-e(c)*b,a.y-f(c)*b),d.lineTo(h,i)}});function vp(a,b){return b&&("string"==typeof b?a=b.replace("{value}",null!=a?a:""):"function"==typeof b&&(a=b(a))),a}aaQ=2*Math.PI,vr=(ae.extend({type:"gauge",render:function(a,c,b){this.group.removeAll();var e=a.get("axisLine.lineStyle.color"),f=function(b,a){var c=b.get("center"),e=a.getWidth(),f=a.getHeight(),g=Math.min(e,f);return{cx:d(c[0],a.getWidth()),cy:d(c[1],a.getHeight()),r:d(b.get("radius"),g/2)}}(a,b);this._renderMain(a,c,b,e,f)},dispose:function(){},_renderMain:function(b,j,h,a,c){for(var s=this.group,l=b.getModel("axisLine"),n=l.getModel("lineStyle"),i=b.get("clockwise"),d=-b.get("startAngle")/180*Math.PI,o=((e=-b.get("endAngle")/180*Math.PI)-d)%aaQ,m=d,r=n.get("width"),p=l.get("show"),f=0,e,q,k,t;p&&f<a.length;f++)q=Math.min(Math.max(a[f][0],0),1),k=new bC({shape:{startAngle:m,endAngle:e=d+o*q,cx:c.cx,cy:c.cy,clockwise:i,r0:c.r-r,r:c.r},silent:!0}),k.setStyle({fill:a[f][1]}),k.setStyle(n.getLineStyle(["color","borderWidth","borderColor"])),s.add(k),m=e;function g(c){if(c<=0)return a[0][1];for(var b=0;b<a.length;b++)if(a[b][0]>=c&&(0===b?0:a[b-1][0])<c)return a[b][1];return a[b-1][1]}i||(t=d,d=e,e=t),this._renderTicks(b,j,h,g,c,d,e,i),this._renderPointer(b,j,h,g,c,d,e,i),this._renderTitle(b,j,h,g,c),this._renderDetail(b,j,h,g,c)},_renderTicks:function(h,I,J,t,p,u,H,K){for(var n=this.group,i=p.cx,j=p.cy,a=p.r,x=+h.get("min"),F=+h.get("max"),s=h.getModel("splitLine"),l=h.getModel("axisTick"),m=h.getModel("axisLabel"),g=h.get("splitNumber"),r=l.get("splitNumber"),k=d(s.get("length"),a),w=d(l.get("length"),a),f=u,y=(H-u)/g,z=y/r,A=s.getModel("lineStyle").getLineStyle(),B=l.getModel("lineStyle").getLineStyle(),e=0,c,b,C,E,v,G,o,D;e<=g;e++)if(c=Math.cos(f),b=Math.sin(f),s.get("show")&&(C=new av({shape:{x1:c*a+i,y1:b*a+j,x2:c*(a-k)+i,y2:b*(a-k)+j},style:A,silent:!0}),"auto"===A.stroke&&C.setStyle({stroke:t(e/g)}),n.add(C)),m.get("show")&&(E=vp(X(e/g*(F-x)+x),m.get("formatter")),v=m.get("distance"),G=t(e/g),n.add(new q({style:O({},m,{text:E,x:c*(a-k-v)+i,y:b*(a-k-v)+j,textVerticalAlign:b<-.4?"top":.4<b?"bottom":"middle",textAlign:c<-.4?"left":.4<c?"right":"center"},{autoColor:G}),silent:!0}))),l.get("show")&&e!==g){for(o=0;o<=r;o++)c=Math.cos(f),b=Math.sin(f),D=new av({shape:{x1:c*a+i,y1:b*a+j,x2:c*(a-w)+i,y2:b*(a-w)+j},silent:!0,style:B}),"auto"===B.stroke&&D.setStyle({stroke:t((e+o/r)/g)}),n.add(D),f+=z;f-=z}else f+=y},_renderPointer:function(b,n,m,l,e,i,k,o){var f=this.group,c=this._data,g,j,a,h;b.get("pointer.show")?(g=[+b.get("min"),+b.get("max")],j=[i,k],a=b.getData(),h=a.mapDimension("value"),a.diff(c).add(function(d){var c=new aaR({shape:{angle:i}});ao(c,{shape:{angle:J(a.get(h,d),g,j,!0)}},b),f.add(c),a.setItemGraphicEl(d,c)}).update(function(e,i){var d=c.getItemGraphicEl(i);p(d,{shape:{angle:J(a.get(h,e),g,j,!0)}},b),f.add(d),a.setItemGraphicEl(e,d)}).remove(function(a){var b=c.getItemGraphicEl(a);f.remove(b)}).execute(),a.eachItemGraphicEl(function(b,f){var c=a.getItemModel(f),i=c.getModel("pointer");b.setShape({x:e.cx,y:e.cy,width:d(i.get("width"),e.r),r:d(i.get("length"),e.r)}),b.useStyle(c.getModel("itemStyle").getItemStyle()),"auto"===b.style.fill&&b.setStyle("fill",l(J(a.get(h,f),g,[0,1],!0))),G(b,c.getModel("emphasis.itemStyle").getItemStyle())}),this._data=a):c&&c.eachItemGraphicEl(function(a){f.remove(a)})},_renderTitle:function(a,o,n,g,b){var e=a.getData(),i=e.mapDimension("value"),c=a.getModel("title"),f,k,h,l,m,j;c.get("show")&&(f=c.get("offsetCenter"),k=b.cx+d(f[0],b.r),h=b.cy+d(f[1],b.r),l=+a.get("min"),m=+a.get("max"),j=g(J(a.getData().get(i,0),[l,m],[0,1],!0)),this.group.add(new q({silent:!0,style:O({},c,{x:k,y:h,text:e.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:j,forceRich:!0})})))},_renderDetail:function(c,r,p,n,a){var b=c.getModel("detail"),m=+c.get("min"),j=+c.get("max"),i,k,l,h,g,f,e,o;b.get("show")&&(i=b.get("offsetCenter"),k=a.cx+d(i[0],a.r),l=a.cy+d(i[1],a.r),h=d(b.get("width"),a.r),g=d(b.get("height"),a.r),f=c.getData(),e=f.get(f.mapDimension("value"),0),o=n(J(e,[m,j],[0,1],!0)),this.group.add(new q({silent:!0,style:O({},b,{x:k,y:l,text:vp(e,b.get("formatter")),textWidth:isNaN(h)?null:h,textHeight:isNaN(g)?null:g,textAlign:"center",textVerticalAlign:"middle"},{autoColor:o,forceRich:!0})})))}}),iq({type:"series.funnel",init:function(a){vr.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()},this._defaultLabelLine(a)},getInitialData:function(a,b){return eo(this,["value"])},_defaultLabelLine:function(a){dn(a,"labelLine",["show"]);var b=a.labelLine,c=a.emphasis.labelLine;b.show=b.show&&a.label.show,c.show=c.show&&a.emphasis.label.show},getDataParams:function(c){var a=this.getData(),b=vr.superCall(this,"getDataParams",c),d=a.mapDimension("value"),e=a.getSum(d);return b.percent=e?+(a.get(d,c)/e*100).toFixed(2):0,b.$vars.push("percent"),b},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}));function lB(c,d){e.call(this);var f=new aF,a=new aZ,b=new q;this.add(f),this.add(a),this.add(b),this.highDownOnUpdate=function(d,c){"emphasis"===c?(a.ignore=a.hoverIgnore,b.ignore=b.hoverIgnore):(a.ignore=a.normalIgnore,b.ignore=b.normalIgnore)},this.updateData(c,d,!0)}vt=lB.prototype,aaO=["itemStyle","opacity"],vt.updateData=function(c,a,j){var b=this.childAt(0),f=c.hostModel,i=c.getItemModel(a),h=c.getItemLayout(a),d=c.getItemModel(a).get(aaO),e,k;d=null==d?1:d,b.useStyle({}),j?(b.setShape({points:h.points}),b.setStyle({opacity:0}),ao(b,{style:{opacity:d}},f,a)):p(b,{style:{opacity:d},shape:{points:h.points}},f,a),e=i.getModel("itemStyle"),k=c.getItemVisual(a,"color"),b.setStyle(g({lineJoin:"round",fill:k},e.getItemStyle(["opacity"]))),b.hoverStyle=e.getModel("emphasis").getItemStyle(),this._updateLabel(c,a),G(this)},vt._updateLabel=function(e,b){var c=this.childAt(1),d=this.childAt(2),h=e.hostModel,f=e.getItemModel(b),a=e.getItemLayout(b).label,g=e.getItemVisual(b,"color"),i,j,k,l;p(c,{shape:{points:a.linePoints||a.linePoints}},h,b),p(d,{style:{x:a.x,y:a.y}},h,b),d.attr({rotation:a.rotation,origin:[a.x,a.y],z2:10}),i=f.getModel("label"),j=f.getModel("emphasis.label"),k=f.getModel("labelLine"),l=f.getModel("emphasis.labelLine"),g=e.getItemVisual(b,"color"),aI(d.style,d.hoverStyle={},i,j,{labelFetcher:e.hostModel,labelDataIndex:b,defaultText:e.getName(b),autoColor:g,useInsideStyle:!!a.inside},{textAlign:a.textAlign,textVerticalAlign:a.verticalAlign}),d.ignore=d.normalIgnore=!i.get("show"),d.hoverIgnore=!j.get("show"),c.ignore=c.normalIgnore=!k.get("show"),c.hoverIgnore=!l.get("show"),c.setStyle({stroke:g}),c.setStyle(k.getModel("lineStyle").getLineStyle()),c.hoverStyle=l.getModel("lineStyle").getLineStyle()},D(lB,e),ae.extend({type:"funnel",render:function(d,e,f){var a=d.getData(),b=this._data,c=this.group;a.diff(b).add(function(b){var d=new lB(a,b);a.setItemGraphicEl(b,d),c.add(d)}).update(function(e,f){var d=b.getItemGraphicEl(f);d.updateData(a,e),c.add(d),a.setItemGraphicEl(e,d)}).remove(function(a){var d=b.getItemGraphicEl(a);c.remove(d)}).execute(),this._data=a},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),H(iP("funnel")),N(function(a,b,c){a.eachSeriesByType("funnel",function(e){var c=e.getData(),p=c.mapDimension("value"),m=e.get("sort"),a=function(b,a){return V(b.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}(e,b),g=function(e,b){for(var f=e.mapDimension("value"),c=e.mapArray(f,function(a){return a}),d=[],g="ascending"===b,a=0,h=e.count();a<h;a++)d[a]=a;return"function"==typeof b?d.sort(b):"none"!==b&&d.sort(function(a,b){return g?c[a]-c[b]:c[b]-c[a]}),d}(c,m),u=[d(e.get("minSize"),a.width),d(e.get("maxSize"),a.width)],q=c.getDataExtent(p),k=e.get("min"),l=e.get("max"),s,h,o,j,i,n,t,f,v,w;null==k&&(k=Math.min(q[0],0)),null==l&&(l=q[1]);function r(f,e){var b,d=J(c.get(p,f)||0,[k,l],u,!0);switch(s){case"left":b=a.x;break;case"center":b=a.x+(a.width-d)/2;break;case"right":b=a.x+a.width-d}return[[b,e],[b+d,e]]}s=e.get("funnelAlign"),h=e.get("gap"),o=(a.height-h*(c.count()-1))/c.count(),j=a.y,"ascending"===m&&(o=-o,h=-h,j+=a.height,g=g.reverse());for(i=0;i<g.length;i++)n=g[i],t=g[i+1],f=c.getItemModel(n).get("itemStyle.height"),null==f?f=o:(f=d(f,a.height),"ascending"===m&&(f=-f)),v=r(n,j),w=r(t,j+f),j+=f+h,c.setItemLayout(n,{points:v.concat(w.slice().reverse())});!function(a){a.each(function(l){var k,d,i,j,o=a.getItemModel(l),e=o.getModel("label").get("position"),p=o.getModel("labelLine"),n=a.getItemLayout(l),b=n.points,m="inner"===e||"inside"===e||"center"===e||"insideLeft"===e||"insideRight"===e,c,f,g,h;m?(k="insideLeft"===e?(d=(b[0][0]+b[3][0])/2+5,i=(b[0][1]+b[3][1])/2,"left"):"insideRight"===e?(d=(b[1][0]+b[2][0])/2-5,i=(b[1][1]+b[2][1])/2,"right"):(d=(b[0][0]+b[1][0]+b[2][0]+b[3][0])/4,i=(b[0][1]+b[1][1]+b[2][1]+b[3][1])/4,"center"),j=[[d,i],[d,i]]):(h=p.get("length"),k="left"===e?(c=(b[3][0]+b[0][0])/2,f=(b[3][1]+b[0][1])/2,d=(g=c-h)-5,"right"):"right"===e?(c=(b[1][0]+b[2][0])/2,f=(b[1][1]+b[2][1])/2,d=(g=c+h)+5,"left"):"rightTop"===e?(c=b[1][0],f=b[1][1],d=(g=c+h)+5,"top"):"rightBottom"===e?(c=b[2][0],f=b[2][1],d=(g=c+h)+5,"bottom"):"leftTop"===e?(c=b[0][0],f=b[1][1],d=(g=c-h)-5,"right"):"leftBottom"===e?(c=b[3][0],f=b[2][1],d=(g=c-h)-5,"right"):(c=(b[1][0]+b[2][0])/2,f=(b[1][1]+b[2][1])/2,d=(g=c+h)+5,"left"),j=[[c,f],[g,f]],i=f),n.label={linePoints:j,x:d,y:i,verticalAlign:"middle",textAlign:k,inside:m}})}(c)})}),aH(fs("funnel"));function hB(a,b,c,d,e){Q.call(this,a,b,c),this.type=d||"value",this.axisIndex=e}hB.prototype={constructor:hB,model:null,isHorizontal:function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")}},D(hB,Q);function cV(i,a,f,b,c,d){var j,k,g,l,h,e;return i=i||0,j=f[1]-f[0],(null!=c&&(c=eJ(c,[0,j])),null!=d&&(d=Math.max(d,null!=c?c:0)),"all"===b)&&(k=Math.abs(a[1]-a[0]),c=d=eJ(k=eJ(k,[0,j]),[c,d]),b=0),a[0]=eJ(a[0],f),a[1]=eJ(a[1],f),g=lK(a,b),a[b]+=i,l=c||0,h=f.slice(),g.sign<0?h[0]+=l:h[1]-=l,a[b]=eJ(a[b],h),e=lK(a,b),null!=c&&(e.sign!==g.sign||e.span<c)&&(a[1-b]=a[b]+g.sign*c),e=lK(a,b),null!=d&&e.span>d&&(a[1-b]=a[b]+e.sign*d),a}function lK(c,a){var b=c[a]-c[1-a];return{span:Math.abs(b),sign:0<b?-1:b<0?1:a?-1:1}}function eJ(b,a){return Math.min(null!=a[1]?a[1]:1/0,Math.max(null!=a[0]?a[0]:-1/0,b))}lM=a,vA=Math.min,vB=Math.max,vC=Math.floor,aaN=Math.ceil,vE=X,aaL=Math.PI;function jy(a,b,c){this._axesMap=n(),this._axesLayout={},this.dimensions=a.dimensions,this._rect,this._model=a,this._init(a,b,c)}function ig(b,a){return vA(vB(b,a[0]),a[1])}jy.prototype={type:"parallel",constructor:jy,_init:function(a,b,e){var c=a.dimensions,d=a.parallelAxisIndex;lM(c,function(e,g){var f=d[g],a=b.getComponent("parallelAxis",f),c=this._axesMap.set(e,new hB(e,eH(a),[0,0],a.get("type"),f)),h="category"===c.type;c.onBand=h&&a.get("boundaryGap"),c.inverse=a.get("inverse"),(a.axis=c).model=a,c.coordinateSystem=a.coordinateSystem=this},this)},update:function(a,b){this._updateAxesFromSeries(this._model,a)},containPoint:function(b){var a=this._makeLayoutInfo(),c=a.axisBase,d=a.layoutBase,e=a.pixelDimIndex,f=b[1-e],g=b[e];return c<=f&&f<=c+a.axisLength&&d<=g&&g<=d+a.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(b,a){a.eachSeries(function(c){if(b.contains(c,a)){var d=c.getData();lM(this.dimensions,function(b){var a=this._axesMap.get(b);a.scale.unionExtentFromData(d,d.mapDimension(b)),cJ(a.scale,a.model)},this)}},this)},resize:function(b,a){this._rect=V(b.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var d,c=this._model,i=this._rect,n=["x","y"],m=["width","height"],l=c.get("layout"),f="horizontal"===l?0:1,h=i[m[f]],k=[0,h],e=this.dimensions.length,b=ig(c.get("axisExpandWidth"),k),g=ig(c.get("axisExpandCount")||0,[0,e]),o=c.get("axisExpandable")&&3<e&&g<e&&1<g&&0<b&&0<h,a=c.get("axisExpandWindow"),j,p,q;return a?(d=ig(a[1]-a[0],k),a[1]=a[0]+d):(d=ig(b*(g-1),k),(a=[b*(c.get("axisExpandCenter")||vC(e/2))-d/2])[1]=a[0]+d),j=(h-d)/(e-g),j<3&&(j=0),p=[vC(vE(a[0]/b,1))+1,aaN(vE(a[1]/b,1))-1],q=j/b*a[0],{layout:l,pixelDimIndex:f,layoutBase:i[n[f]],layoutLength:h,axisBase:i[n[1-f]],axisLength:i[m[1-f]],axisExpandable:o,axisExpandWidth:b,axisCollapseWidth:j,axisExpandWindow:a,axisCount:e,winInnerIndices:p,axisExpandWindow0Pos:q}},_layoutAxes:function(){var c=this._rect,d=this._axesMap,e=this.dimensions,a=this._makeLayoutInfo(),b=a.layout;d.each(function(b){var c=[0,a.axisLength],d=b.inverse?1:0;b.setExtent(c[d],c[1-d])}),lM(e,function(j,k){var e=(a.axisExpandable?function(b,a){var d,e,k=a.layoutLength,g=a.axisExpandWidth,j=a.axisCount,c=a.axisCollapseWidth,h=a.winInnerIndices,i=c,f=!1;return b<h[0]?(d=b*c,e=c):b<=h[1]?(d=a.axisExpandWindow0Pos+b*g-a.axisExpandWindow[0],i=g,f=!0):(d=k-(j-1-b)*c,e=c),{position:d,axisNameAvailableWidth:i,axisLabelShow:f,nameTruncateMaxWidth:e}}:function(c,a){var b=a.layoutLength/(a.axisCount-1);return{position:b*c,axisNameAvailableWidth:b,axisLabelShow:!0}})(k,a),g={horizontal:{x:e.position,y:a.axisLength},vertical:{x:0,y:e.position}},i={horizontal:aaL/2,vertical:0},h=[g[b].x+c.x,g[b].y+c.y],f=i[b],d=aL();cc(d,d,f),be(d,d,h),this._axesLayout[j]={position:h,rotation:f,transform:d,axisNameAvailableWidth:e.axisNameAvailableWidth,axisLabelShow:e.axisLabelShow,nameTruncateMaxWidth:e.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(a){return this._axesMap.get(a)},dataToPoint:function(b,a){return this.axisCoordToPoint(this._axesMap.get(a).dataToCoord(b),a)},eachActiveState:function(j,o,e,f){var l,g,h,i,k,b,d,m,c,n;null==e&&(e=0),null==f&&(f=j.count()),l=this._axesMap,g=this.dimensions,h=[],i=[],a(g,function(a){h.push(j.mapDimension(a)),i.push(l.get(a).model)});for(k=this.hasAxisBrushed(),b=e;b<f;b++){if(k){{d="active";for(m=j.getValues(h,b),c=0,n=g.length;c<n;c++)if("inactive"===i[c].getActiveState(m[c])){d="inactive";break}}}else d="normal";o(d,b)}},hasAxisBrushed:function(){for(var b=this.dimensions,d=this._axesMap,c=!1,a=0,e=b.length;a<e;a++)"normal"!==d.get(b[a]).model.getActiveState()&&(c=!0);return c},axisCoordToPoint:function(a,b){return bH([a,0],this._axesLayout[b].transform)},getAxisLayout:function(a){return i(this._axesLayout[a])},getSlidedAxisExpandWindow:function(j){var c=this._makeLayoutInfo(),l=c.pixelDimIndex,a=c.axisExpandWindow.slice(),b=a[1]-a[0],i=[0,c.axisExpandWidth*(c.axisCount-1)],d,e,g,h,f,k;return this.containPoint(j)?(e=j[l]-c.layoutBase-c.axisExpandWindow0Pos,g="slide",h=c.axisCollapseWidth,f=this._model.get("axisExpandSlideTriggerArea"),k=null!=f[0],h?(k&&h&&e<b*f[0]?(g="jump",d=e-b*f[2]):k&&h&&e>b*(1-f[0])?(g="jump",d=e-b*(1-f[2])):0<=(d=e-b*f[1])&&(d=e-b*(1-f[1]))<=0&&(d=0),(d*=c.axisExpandWidth/h)?cV(d,a,i,"all"):g="none"):(b=a[1]-a[0],(a=[vB(0,i[1]*e/b-b/2)])[1]=vA(i[1],a[0]+b),a[0]=a[1]-b),{axisExpandWindow:a,behavior:g}):{behavior:"none",axisExpandWindow:a}}},aq.register("parallel",{create:function(a,b){var c=[];return a.eachComponent("parallel",function(d,f){var e=new jy(d,a,b);e.name="parallel_"+f,e.resize(d,b),(d.coordinateSystem=e).model=d,c.push(e)}),a.eachSeries(function(b){if("parallel"===b.get("coordinateSystem")){var c=a.queryComponents({mainType:"parallel",index:b.get("parallelIndex"),id:b.get("parallelId")})[0];b.coordinateSystem=c.coordinateSystem}}),c}}),vI=x.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return dP([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(c){var a=this.activeIntervals=i(c),b;if(a)for(b=a.length-1;0<=b;b--)dD(a[b])},getActiveState:function(a){var b=this.activeIntervals,d,c,e;if(!b.length)return"normal";if(null==a||isNaN(a))return"inactive";if(1===b.length){if(d=b[0],d[0]<=a&&a<=d[1])return"active"}else for(c=0,e=b.length;c<e;c++)if(b[c][0]<=a&&a<=b[c][1])return"active";return"inactive"}}),l(vI.prototype,dI),eQ("parallel",vI,function(b,a){return a.type||(a.data?"category":"value")},{type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10}),x.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){x.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(a){var b=this.option;a&&l(b,a,!0),this._initDimensions()},contains:function(b,c){var a=b.get("parallelIndex");return null!=a&&c.getComponent("parallel",a)===this},setAxisExpand:function(b){a(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(a){b.hasOwnProperty(a)&&(this.option[a]=b[a])},this)},_initDimensions:function(){var b=this.dimensions=[],c=this.parallelAxisIndex=[];a(W(this.dependentModels.parallelAxis,function(a){return(a.get("parallelIndex")||0)===this.componentIndex},this),function(a){b.push("dim"+a.get("dim")),c.push(a.componentIndex)})}}),u({type:"axisAreaSelect",event:"axisAreaSelected"},function(a,b){b.eachComponent({mainType:"parallelAxis",query:a},function(b){b.axis.model.setActiveIntervals(a.intervals)})}),u("parallelAxisExpand",function(a,b){b.eachComponent({mainType:"parallel",query:a},function(b){b.setAxisExpand(a)})}),cp=j,bD=a,aaK=c,fm=Math.min,eB=Math.max,aaJ=Math.pow,aaH=1e4,aaG=6,aaF=6,vS="globalPan",aaD={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},aaC={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},sI={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},aaB=0;function ek(a){Z.call(this),this._zr=a,this.group=new e,this._brushType,this._brushOption,this._panels,this._track=[],this._dragging,this._lastMouseMovePoint={},this._covers=[],this._creatingCover,this._creatingPanel,this._enableGlobalPan,this._uid="brushController_"+aaB++,this._handlers={},bD(aay,function(a,b){this._handlers[b]=k(a,this)},this)}function vY(c,a){var b=iU[a.brushType].createCover(c,a);return b.__brushOption=a,v$(b,a),c.group.add(b),b}function vZ(c,a){var b=ml(a);return b.endCreating&&(b.endCreating(c,a),v$(a,a.__brushOption)),a}function v_(c,a){var b=a.__brushOption;ml(a).updateCoverShape(c,a,b.range,b)}function v$(b,c){var a=c.z;null==a&&(a=aaH),b.traverse(function(b){b.z=a,b.z2=a})}function mi(b,a){ml(a).updateCommon(b,a),v_(b,a)}function ml(a){return iU[a.__brushOption.brushType]}function mn(a,d,e){var b,c=a._panels,f;return!c||(f=a._transform,bD(c,function(a){a.isTargetByCursor(d,e,f)&&(b=a)}),b)}function wd(c,d){var a=c._panels,b;return!a||(b=d.__brushOption.panelId,null==b||a[b])}function mw(a){var b=a._covers,c=b.length;return bD(b,function(b){a.group.remove(b)},a),b.length=0,!!c}function dB(a,b){var c=aaK(a._covers,function(b){var a=b.__brushOption,c=i(a.range);return{brushType:a.brushType,panelId:a.panelId,range:c}});a.trigger("brush",c,{isEnd:!!b.isEnd,removeOnClick:!!b.removeOnClick})}function wg(a){var b=a.length-1;return b<0&&(b=0),[a[0],a[b]]}function wh(c,b,d,f){var a=new e;return a.add(new y({name:"main",style:mM(d),silent:!0,draggable:!0,cursor:"move",drift:cp(c,b,a,"nswe"),ondragend:cp(dB,b,{isEnd:!0})})),bD(f,function(d){a.add(new y({name:d,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:cp(c,b,a,d),ondragend:cp(dB,b,{isEnd:!0})}))}),a}function wi(c,b,g,l){var d=l.brushStyle.lineWidth||0,a=eB(d,aaF),h=g[0][0],i=g[1][0],e=h-d/2,f=i-d/2,m=g[0][1],n=g[1][1],j=m-a+d/2,k=n-a+d/2,o=m-h,p=n-i,q=o+d,r=p+d;bN(c,b,"main",h,i,o,p),l.transformable&&(bN(c,b,"w",e,f,a,r),bN(c,b,"e",j,f,a,r),bN(c,b,"n",e,f,q,a),bN(c,b,"s",e,k,q,a),bN(c,b,"nw",e,f,a,a),bN(c,b,"ne",j,f,a,a),bN(c,b,"sw",e,k,a,a),bN(c,b,"se",j,k,a,a))}function mL(e,b){var c=b.__brushOption,a=c.transformable,d=b.childAt(0);d.useStyle(mM(c)),d.attr({silent:!a,cursor:a?"move":"default"}),bD(["w","e","n","s","se","sw","ne","nw"],function(c){var d=b.childOfName(c),f=function d(c,b){var a,e,f;return 1<b.length?(b=b.split(""),a=[d(c,b[0]),d(c,b[1])],"e"!==a[0]&&"w"!==a[0]||a.reverse(),a.join("")):(e={w:"left",e:"right",n:"top",s:"bottom"},f={left:"w",right:"e",top:"n",bottom:"s"},a=ky(e[b],dt(c.group)),f[a])}(e,c);d&&d.attr({silent:!a,invisible:!a,cursor:a?aaC[f]+"-resize":null})})}function bN(e,a,f,b,c,g,h){var d=a.childOfName(f);d&&d.setShape(function(a){var b=fm(a[0][0],a[1][0]),c=fm(a[0][1],a[1][1]),d=eB(a[0][0],a[1][0]),e=eB(a[0][1],a[1][1]);return{x:b,y:c,width:d-b,height:e-c}}(mO(e,a,[[b,c],[b+g,c+h]])))}function mM(a){return g({strokeNoScale:!0},a.brushStyle)}function wm(a,b,c,d){var e=[fm(a,c),fm(b,d)],f=[eB(a,c),eB(b,d)];return[[e[0],f[0]],[e[1],f[1]]]}function wn(e,f,b,d,g,h,i,k){var c=d.__brushOption,a=e(c.range),j=wp(b,h,i);bD(g.split(""),function(c){var b=aaD[c];a[b[0]][b[1]]+=j[b[0]]}),c.range=f(wm(a[0][0],a[1][0],a[0][1],a[1][1])),mi(b,d),dB(b,{isEnd:!1})}function aaz(a,b,d,e,g){var f=b.__brushOption.range,c=wp(a,d,e);bD(f,function(a){a[0]+=c[0],a[1]+=c[1]}),mi(a,b),dB(a,{isEnd:!1})}function wp(d,e,f){var a=d.group,b=a.transformCoordToLocal(e,f),c=a.transformCoordToLocal(0,0);return[b[0]-c[0],b[1]-c[1]]}function mO(b,d,c){var a=wd(b,d);return a&&!0!==a?a.clipPath(c,b._transform):i(c)}function mP(b){var a=b.event;a.preventDefault&&a.preventDefault()}function mQ(a,b,c){return a.childOfName("main").contain(b,c)}function wt(a,k,h,f){var g,b=a._creatingCover,c=a._creatingPanel,d=a._brushOption,e,j;return a._track.push(h.slice()),function(f){var a=f._track,b,c,d,e,g;return!!a.length&&(b=a[a.length-1],c=a[0],d=b[0]-c[0],e=b[1]-c[1],g=aaJ(d*d+e*e,.5),aaG<g)}(a)||b?(c&&!b&&("single"===d.brushMode&&mw(a),e=i(d),e.brushType=wu(e.brushType,c),e.panelId=!0===c?null:c.panelId,b=a._creatingCover=vY(a,e),a._covers.push(b)),b&&(j=iU[wu(a._brushType,c)],b.__brushOption.range=j.getCreatingRange(mO(a,b,a._track)),f&&(vZ(a,b),j.updateCommon(a,b)),v_(a,b),g={isEnd:f})):f&&"single"===d.brushMode&&d.removeOnClick&&mn(a,k,h)&&mw(a)&&(g={isEnd:f,removeOnClick:!0}),g}function wu(a,b){return"auto"===a?b.defaultBrushType:a}ek.prototype={constructor:ek,enableBrush:function(a){return this._brushType&&function(a){var b=a._zr;(function(c,a,d){var b=lc(c);b[a]===d&&(b[a]=null)})(b,vS,a._uid),bD(a._handlers,function(a,c){b.off(c,a)}),a._brushType=a._brushOption=null}(this),a.brushType&&function(a,b){var c=a._zr;a._enableGlobalPan||function(a,b,c){lc(a)[b]=c}(c,vS,a._uid),bD(a._handlers,function(a,b){c.on(b,a)}),a._brushType=b.brushType,a._brushOption=l(i(sI),b,!0)}(this,a),this},setPanels:function(b){if(b&&b.length){var c=this._panels={};a(b,function(a){c[a.panelId]=i(a)})}else this._panels=null;return this},mount:function(a){a=a||{},this._enableGlobalPan=a.enableGlobalPan;var b=this.group;return this._zr.add(b),b.attr({position:a.position||[0,0],rotation:a.rotation||0,scale:a.scale||[1,1]}),this._transform=b.getLocalTransform(),this},eachCover:function(a,b){bD(this._covers,a,b)},updateCovers:function(b){b=c(b,function(a){return l(i(sI),a,!0)});var j="\0-brush-index-",a=this._covers,f=this._covers=[],d=this,g=this._creatingCover;return new cb(a,b,function(a,b){return h(a.__brushOption,b)},h).add(e).update(e).remove(function(b){a[b]!==g&&d.group.remove(a[b])}).execute(),this;function h(a,b){return(null!=a.id?a.id:j+b)+"-"+a.brushType}function e(e,c){var h=b[e],i;null!=c&&a[c]===g?f[e]=a[c]:(i=f[e]=null!=c?(a[c].__brushOption=h,a[c]):vZ(d,vY(d,h)),mi(d,i))}},unmount:function(){return this.enableBrush(!1),mw(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},C(ek,Z),aay={mousedown:function(a){if(this._dragging)mT(this,a);else if(!a.target||!a.target.draggable){mP(a);var b=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null,(this._creatingPanel=mn(this,a,b))&&(this._dragging=!0,this._track=[b.slice()])}},mousemove:function(a){var b=this._lastMouseMovePoint,c,d;b.x=a.offsetX,b.y=a.offsetY,c=this.group.transformCoordToLocal(b.x,b.y),(function(a,h,f){var g,d,b,c,e;if(a._brushType){if(g=a._zr,d=a._covers,b=mn(a,h,f),!a._dragging)for(c=0;c<d.length;c++)if(e=d[c].__brushOption,b&&(!0===b||e.panelId===b.panelId)&&iU[e.brushType].contain(d[c],f[0],f[1]))return;b&&g.setCursorStyle("crosshair")}}(this,a,c),this._dragging)&&(mP(a),d=wt(this,a,c,!1),d&&dB(this,d))},mouseup:function(a){mT(this,a)},globalout:function(a){mT(this,a,!0)}};function mT(a,b,g){var c,d,e,h,f;a._dragging&&(g||mP(b),c=b.offsetX,d=b.offsetY,e=a._lastMouseMovePoint,g&&(c=e.x,d=e.y),h=a.group.transformCoordToLocal(c,d),f=wt(a,b,h,!0),a._dragging=!1,a._track=[],a._creatingCover=null,f&&dB(a,f))}iU={lineX:wz(0),lineY:wz(1),rect:{createCover:function(a,b){return wh(cp(wn,function(a){return a},function(a){return a}),a,b,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(b){var a=wg(b);return wm(a[1][0],a[1][1],a[0][0],a[0][1])},updateCoverShape:function(a,b,c,d){wi(a,b,c,d)},updateCommon:mL,contain:mQ},polygon:{createCover:function(c,b){var a=new e;return a.add(new aZ({name:"main",style:mM(b),silent:!0})),a},getCreatingRange:function(a){return a},endCreating:function(b,a){a.remove(a.childAt(0)),a.add(new aF({name:"main",draggable:!0,drift:cp(aaz,b,a),ondragend:cp(dB,b,{isEnd:!0})}))},updateCoverShape:function(b,a,c,d){a.childAt(0).setShape({points:mO(b,a,c)})},updateCommon:mL,contain:mQ}};function wz(a){return{createCover:function(b,c){return wh(cp(wn,function(c){var b=[c,[0,100]];return a&&b.reverse(),b},function(b){return b[a]}),b,c,[["w","e"],["n","s"]][a])},getCreatingRange:function(c){var b=wg(c);return[fm(b[0][a],b[1][a]),eB(b[0][a],b[1][a])]},updateCoverShape:function(b,e,h,i){var c,d=wd(b,e),f,g;!0!==d&&d.getLinearBrushOtherExtent?c=d.getLinearBrushOtherExtent(a,b._transform):(f=b._zr,c=[0,[f.getWidth(),f.getHeight()][1-a]]),g=[h,c],a&&g.reverse(),wi(b,e,g,i)},updateCommon:mL,contain:mQ}}function wA(a){return a=mY(a),function(b,c){return ui(b,a)}}function wB(a,b){return a=mY(a),function(e){var c=null!=b?b:e,f=c?a.width:a.height,d=c?a.x:a.y;return[d,d+(f||0)]}}function wC(a,b,c){return a=mY(a),function(e,d,f){return a.contain(d[0],d[1])&&!hC(e,b,c)}}function mY(a){return r.create(a)}aax=["axisLine","axisTickLabel","axisName"],aaw=$({type:"parallelAxis",init:function(b,a){aaw.superApply(this,"init",arguments),(this._brushController=new ek(a.getZr())).on("brush",k(this._onBrush,this))},render:function(b,o,n,g){var l,i,k,j,h,m,d,c,p;(function(b,c,a){return a&&"axisAreaSelect"===a.type&&c.findComponents({mainType:"parallelAxis",query:a})[0]===b})(b,o,g)||(this.axisModel=b,this.api=n,this.group.removeAll(),l=this._axisGroup,(this._axisGroup=new e,this.group.add(this._axisGroup),b.get("show"))&&(i=function(a,b){return b.getComponent("parallel",a.get("parallelIndex"))}(b,o),k=i.coordinateSystem,j=b.getAreaSelectStyle(),h=j.width,m=b.axis.dim,d=f({strokeContainThreshold:h},k.getAxisLayout(m)),c=new ax(b,d),a(aax,c.add,c),this._axisGroup.add(c.getGroup()),this._refreshBrushController(d,j,b,i,h,n),p=g&&!1===g.animation?null:b,kx(l,this._axisGroup,p)))},_refreshBrushController:function(g,j,e,k,f,i){var b=e.axis.getExtent(),d=b[1]-b[0],h=Math.min(30,.1*Math.abs(d)),a=r.create({x:b[0],y:-f/2,width:d,height:f});a.x-=h,a.width+=2*h,this._brushController.mount({enableGlobalPan:!0,rotation:g.rotation,position:g.position}).setPanels([{panelId:"pl",clipPath:wA(a),isTargetByCursor:wC(a,i,k),getLinearBrushOtherExtent:wB(a,0)}]).enableBrush({brushType:"lineX",brushStyle:j,removeOnClick:!0}).updateCovers(function(a){var b=a.axis;return c(a.activeIntervals,function(a){return{brushType:"lineX",panelId:"pl",range:[b.dataToCoord(a[0],!0),b.dataToCoord(a[1],!0)]}})}(e))},_onBrush:function(e,b){var a=this.axisModel,d=a.axis,f=c(e,function(a){return[d.coordToData(a.range[0],!0),d.coordToData(a.range[1],!0)]});!a.option.realtime!==b.isEnd&&!b.removeOnClick||this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:a.id,intervals:f})},dispose:function(){this._brushController.dispose()}}),$({type:"parallel",render:function(b,d,c){this._model=b,this._api=c,this._handlers||(this._handlers={},a(aav,function(b,a){c.getZr().on(a,this._handlers[a]=k(b,this))},this)),gB(this,"_throttledDispatchExpand",b.get("axisExpandRate"),"fixRate")},dispose:function(c,b){a(this._handlers,function(a,c){b.getZr().off(c,a)}),this._handlers=null},_throttledDispatchExpand:function(a){this._dispatchExpand(a)},_dispatchExpand:function(a){a&&this._api.dispatchAction(f({type:"parallelAxisExpand"},a))}}),aav={mousedown:function(a){mZ(this,"click")&&(this._mouseDownPoint=[a.offsetX,a.offsetY])},mouseup:function(a){var b=this._mouseDownPoint,c,d;if(mZ(this,"click")&&b){if(c=[a.offsetX,a.offsetY],5<Math.pow(b[0]-c[0],2)+Math.pow(b[1]-c[1],2))return;d=this._model.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]),"none"!==d.behavior&&this._dispatchExpand({axisExpandWindow:d.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(b){if(!this._mouseDownPoint&&mZ(this,"mousemove")){var c=this._model,d=c.coordinateSystem.getSlidedAxisExpandWindow([b.offsetX,b.offsetY]),a=d.behavior;"jump"===a&&this._throttledDispatchExpand.debounceNextCall(c.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===a?null:{axisExpandWindow:d.axisExpandWindow,animation:"jump"===a&&null})}}};function mZ(b,c){var a=b._model;return a.get("axisExpandable")&&a.get("axisExpandTriggerOn")===c}aj(function(b){!function(b){if(b.parallel)return;var c=!1;a(b.series,function(a){a&&"parallel"===a.type&&(c=!0)}),c&&(b.parallel=[{}])}(b),function(b){a(al(b.parallelAxis),function(a){if(m(a)){var d=a.parallelIndex||0,c=al(b.parallel)[d];c&&c.parallelAxisDefault&&l(a,c.parallelAxisDefault,!1)}})}(b)}),M.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(c,d){var b=this.getSource();return function(c,d){var b,e;if(c.encodeDefine)return;if(b=d.ecModel.getComponent("parallel",d.get("parallelIndex")),!b)return;e=c.encodeDefine=n(),a(b.dimensions,function(a){var b=function(a){return+a.replace("dim","")}(a);e.set(a,b)})}(b,this),ca(b,this)},getRawIndicesByActiveState:function(c){var d=this.coordinateSystem,a=this.getData(),b=[];return d.eachActiveState(a,function(d,e){c===d&&b.push(a.getRawIndex(e))}),b},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}}),ae.extend({type:"parallel",init:function(){this._dataGroup=new e,this.group.add(this._dataGroup),this._data,this._initialized},render:function(b,j,k,g){var d=this._dataGroup,a=b.getData(),e=this._data,c=b.coordinateSystem,f=c.dimensions,h=wK(b),i;a.diff(e).add(function(b){nf(wJ(a,d,b,f,c),a,b,h)}).update(function(d,j){var i=e.getItemGraphicEl(j),k=wI(a,d,f,c),l;a.setItemGraphicEl(d,i),l=g&&!1===g.animation?null:b,p(i,{shape:{points:k}},l,d),nf(i,a,d,h)}).remove(function(a){var b=e.getItemGraphicEl(a);d.remove(b)}).execute(),!this._initialized&&(this._initialized=!0,i=function(c,d,e){var f=c.model,a=c.getRect(),b=new y({shape:{x:a.x,y:a.y,width:a.width,height:a.height}}),g="horizontal"===f.get("layout")?"width":"height";return b.setShape(g,0),ao(b,{shape:{width:a.width,height:a.height}},d,e),b}(c,b,function(){setTimeout(function(){d.removeClipPath()})}),d.setClipPath(i)),this._data=a},incrementalPrepareRender:function(a,b,c){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(c,b,i){for(var e=b.getData(),f=b.coordinateSystem,g=f.dimensions,h=wK(b),a=c.start,d;a<c.end;a++)d=wJ(e,this._dataGroup,a,g,f),d.incremental=!0,nf(d,e,a,h)},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});function wI(g,i,d,e){for(var a,f=[],b=0,c,h;b<d.length;b++)c=d[b],h=g.get(g.mapDimension(c),i),a=h,("category"===e.getAxis(c).type?null==a:null==a||isNaN(a))||f.push(e.dataToPoint(h,c));return f}function wJ(c,d,b,e,f){var g=wI(c,b,e,f),a=new aZ({shape:{points:g},silent:!0,z2:10});return d.add(a),c.setItemGraphicEl(b,a),a}function wK(b){var a=b.get("smooth",!0);return!0===a&&(a=.3),{lineStyle:b.getModel("lineStyle").getLineStyle(),smooth:null!=a?a:.3}}function nf(b,a,c,d){var f=d.lineStyle,e;a.hasItemOption&&(f=a.getItemModel(c).getModel("lineStyle").getLineStyle()),b.useStyle(f),e=b.style,e.fill=null,e.stroke=a.getItemVisual(c,"color"),e.opacity=a.getItemVisual(c,"opacity"),d.smooth&&(b.shape.smooth=d.smooth)}aau=["lineStyle","normal","opacity"],H({seriesType:"parallel",reset:function(a,g,m){var d=a.getModel("itemStyle"),e=a.getModel("lineStyle"),b=g.get("color"),c=e.get("color")||d.get("color")||b[a.seriesIndex%b.length],h=a.get("inactiveOpacity"),i=a.get("activeOpacity"),j=a.getModel("lineStyle").getLineStyle(),k=a.coordinateSystem,f=a.getData(),l={normal:j.opacity,active:i,inactive:h};return f.setVisual("color",c),{progress:function(b,a){k.eachActiveState(a,function(b,c){var d=l[b],e;"normal"===b&&a.hasItemOption&&(e=a.getItemModel(c).get(aau,!0),null!=e&&(d=e)),a.setItemVisual(c,"opacity",d)},b.start,b.end)}}}}),aas=M.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(c,f){for(var d=c.edges||c.links,e=c.data||c.nodes,b=c.levels,g=this.levelModels={},a=0;a<b.length;a++)null!=b[a].depth&&0<=b[a].depth&&(g[b[a].depth]=new w(b[a],this,f));if(e&&d)return uA(e,d,this,!0,function(a,b){a.wrapMethod("getItemModel",function(a,b){return a.customizeGetParent(function(d){var a=this.parentModel,c=a.getData().getItemLayout(b).depth;return a.levelModels[c]||this.parentModel}),a}),b.wrapMethod("getItemModel",function(a,b){return a.customizeGetParent(function(d){var a=this.parentModel,c=a.getGraph().getEdgeByIndex(b).node1.getLayout().depth;return a.levelModels[c]||this.parentModel}),a})}).data},setNodePosition:function(c,a){var b=this.option.data[c];b.localX=a[0],b.localY=a[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(b,h,c){var d,e,a,f,g;return"edge"===c?(d=this.getDataParams(b,c),e=d.data,a=e.source+" -- "+e.target,d.value&&(a+=" : "+d.value),K(a)):"node"!==c?aas.superCall(this,"formatTooltip",b,h):(f=this.getGraph().getNodeByIndex(b).getLayout().value,g=this.getDataParams(b,c).data.name,f&&(a=g+" : "+f),K(a))},optionUpdated:function(){var a=this.option;!0===a.focusNodeAdjacency&&(a.focusNodeAdjacency="allEdges")},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.6}},animationEasing:"linear",animationDuration:1e3}}),bZ=["itemStyle","opacity"],eS=["lineStyle","opacity"];function wQ(a,b){return a.getVisual("opacity")||a.getModel().get(b)}function iw(c,e,d){var b=c.getGraphicEl(),a=wQ(c,e);null!=d&&(null==a&&(a=1),a*=d),b.downplay&&b.downplay(),b.traverse(function(b){"group"!==b.type&&b.setStyle("opacity",a)})}function bl(b,c){var d=wQ(b,c),a=b.getGraphicEl();a.highlight&&a.highlight(),a.traverse(function(a){"group"!==a.type&&a.setStyle("opacity",d)})}aap=ba({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(c,a){var b=a.extent;c.moveTo(a.x1,a.y1),c.bezierCurveTo(a.cpx1,a.cpy1,a.cpx2,a.cpy2,a.x2,a.y2),"vertical"===a.orient?(c.lineTo(a.x2+b,a.y2),c.bezierCurveTo(a.cpx2+b,a.cpy2,a.cpx1+b,a.cpy1,a.x1+b,a.y1)):(c.lineTo(a.x2,a.y2+b),c.bezierCurveTo(a.cpx2,a.cpy2+b,a.cpx1,a.cpy1+b,a.x1,a.y1+b)),c.closePath()}}),ay({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(a,l,f){var e=this,j=a.getGraph(),b=this.group,g=a.layoutInfo,c=g.width,d=g.height,h=a.getData(),i=a.getData("edge"),k=a.get("orient");this._model=a,b.removeAll(),b.attr("position",[g.x,g.y]),j.eachEdge(function(f){var e=new aap,h,j,m,s,v,w,u,z,A,g,l,y,o,r,q,x,t,p,n;switch(e.dataIndex=f.dataIndex,e.seriesIndex=a.seriesIndex,e.dataType="edge",A=f.getModel("lineStyle"),g=A.get("curveness"),l=f.node1.getLayout(),y=f.node1.getModel(),o=y.get("localX"),r=y.get("localY"),q=f.node2.getLayout(),x=f.node2.getModel(),t=x.get("localX"),p=x.get("localY"),n=f.getLayout(),e.shape.extent=Math.max(1,n.dy),z="vertical"===(e.shape.orient=k)?(h=(null!=o?o*c:l.x)+n.sy,j=(null!=r?r*d:l.y)+l.dy,m=(null!=t?t*c:q.x)+n.ty,v=h,w=j*(1-g)+(s=null!=p?p*d:q.y)*g,u=m,j*g+s*(1-g)):(h=(null!=o?o*c:l.x)+l.dx,j=(null!=r?r*d:l.y)+n.sy,v=h*(1-g)+(m=null!=t?t*c:q.x)*g,w=j,u=h*g+m*(1-g),s=(null!=p?p*d:q.y)+n.ty),e.setShape({x1:h,y1:j,x2:m,y2:s,cpx1:v,cpy1:w,cpx2:u,cpy2:z}),e.setStyle(A.getItemStyle()),e.style.fill){case"source":e.style.fill=f.node1.getVisual("color");break;case"target":e.style.fill=f.node2.getVisual("color")}G(e,f.getModel("emphasis.lineStyle").getItemStyle()),b.add(e),i.setItemGraphicEl(f.dataIndex,e)}),j.eachNode(function(e){var i=e.getLayout(),g=e.getModel(),j=g.get("localX"),k=g.get("localY"),m=g.getModel("label"),n=g.getModel("emphasis.label"),f=new y({shape:{x:null!=j?j*c:i.x,y:null!=k?k*d:i.y,width:i.dx,height:i.dy},style:g.getModel("itemStyle").getItemStyle()}),l=e.getModel("emphasis.itemStyle").getItemStyle();aI(f.style,l,m,n,{labelFetcher:a,labelDataIndex:e.dataIndex,defaultText:e.id,isRectText:!0}),f.setStyle("fill",e.getVisual("color")),G(f,l),b.add(f),h.setItemGraphicEl(e.dataIndex,f),f.dataType="node"}),h.eachItemGraphicEl(function(b,g){var i=h.getItemModel(g);i.get("draggable")&&(b.drift=function(b,i){e._focusAdjacencyDisabled=!0,this.shape.x+=b,this.shape.y+=i,this.dirty(),f.dispatchAction({type:"dragNode",seriesId:a.id,dataIndex:h.getRawIndex(g),localX:this.shape.x/c,localY:this.shape.y/d})},b.ondragend=function(){e._focusAdjacencyDisabled=!1},b.draggable=!0,b.cursor="move"),i.get("focusNodeAdjacency")&&(b.off("mouseover").on("mouseover",function(){e._focusAdjacencyDisabled||f.dispatchAction({type:"focusNodeAdjacency",seriesId:a.id,dataIndex:b.dataIndex})}),b.off("mouseout").on("mouseout",function(){e._focusAdjacencyDisabled||f.dispatchAction({type:"unfocusNodeAdjacency",seriesId:a.id})}))}),i.eachItemGraphicEl(function(b,c){i.getItemModel(c).get("focusNodeAdjacency")&&(b.off("mouseover").on("mouseover",function(){e._focusAdjacencyDisabled||f.dispatchAction({type:"focusNodeAdjacency",seriesId:a.id,edgeDataIndex:b.dataIndex})}),b.off("mouseout").on("mouseout",function(){e._focusAdjacencyDisabled||f.dispatchAction({type:"unfocusNodeAdjacency",seriesId:a.id})}))}),!this._data&&a.get("animation")&&b.setClipPath(function(a,c,d){var b=new y({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return ao(b,{shape:{width:a.width+20,height:a.height+20}},c,d),b}(b.getBoundingRect(),a,function(){b.removeClipPath()})),this._data=a.getData()},dispose:function(){},focusNodeAdjacency:function(k,l,m,h){var i=this._model.getData(),d=i.graph,e=h.dataIndex,j=i.getItemModel(e),g=h.edgeDataIndex,b,c,f;(null!=e||null!=g)&&(b=d.getNodeByIndex(e),c=d.getEdgeByIndex(g),(d.eachNode(function(a){iw(a,bZ,.1)}),d.eachEdge(function(a){iw(a,eS,.1)}),b)&&(bl(b,bZ),f=j.get("focusNodeAdjacency"),"outEdges"===f?a(b.outEdges,function(a){a.dataIndex<0||(bl(a,eS),bl(a.node2,bZ))}):"inEdges"===f?a(b.inEdges,function(a){a.dataIndex<0||(bl(a,eS),bl(a.node1,bZ))}):"allEdges"===f&&a(b.edges,function(a){a.dataIndex<0||(bl(a,eS),bl(a.node1,bZ),bl(a.node2,bZ))})),c&&(bl(c,eS),bl(c.node1,bZ),bl(c.node2,bZ)))},unfocusNodeAdjacency:function(b,c,d,e){var a=this._model.getGraph();a.eachNode(function(a){iw(a,bZ)}),a.eachEdge(function(a){iw(a,eS)})}}),u({type:"dragNode",event:"dragnode",update:"update"},function(a,b){b.eachComponent({mainType:"series",subType:"sankey",query:a},function(b){b.setNodePosition(a.dataIndex,[a.localX,a.localY])})});function wU(a){var b=a.hostGraph.data.getRawDataItem(a.dataIndex);return null!=b.depth&&0<=b.depth}function ns(e,d,f,g,c){var b="vertical"===c?"x":"y";a(e,function(k){var e,a,i,j,l,m,h;k.sort(function(a,c){return a.getLayout()[b]-c.getLayout()[b]});for(j=0,l=k.length,m="vertical"===c?"dx":"dy",h=0;h<l;h++)0<(i=j-(a=k[h]).getLayout()[b])&&(e=a.getLayout()[b]+i,"vertical"===c?a.setLayout({x:e},!0):a.setLayout({y:e},!0)),j=a.getLayout()[b]+a.getLayout()[m]+d;if(0<(i=j-d-("vertical"===c?g:f)))for(e=a.getLayout()[b]-i,"vertical"===c?a.setLayout({x:e},!0):a.setLayout({y:e},!0),j=e,h=l-2;0<=h;--h)0<(i=(a=k[h]).getLayout()[b]+a.getLayout()[m]+d-j)&&(e=a.getLayout()[b]-i,"vertical"===c?a.setLayout({x:e},!0):a.setLayout({y:e},!0)),j=a.getLayout()[b]})}function aao(d,c,b){a(d.slice().reverse(),function(d){a(d,function(a){var d,e,f;a.outEdges.length&&(d=eC(a.outEdges,aan,b)/eC(a.outEdges,hQ,b),"vertical"===b?(e=a.getLayout().x+(d-eI(a,b))*c,a.setLayout({x:e},!0)):(f=a.getLayout().y+(d-eI(a,b))*c,a.setLayout({y:f},!0)))})})}function aan(a,b){return eI(a.node2,b)*a.getValue()}function aam(a,b){return eI(a.node1,b)*a.getValue()}function eI(a,b){return"vertical"===b?a.getLayout().x+a.getLayout().dx/2:a.getLayout().y+a.getLayout().dy/2}function hQ(a){return a.getValue()}function eC(a,e,f){for(var b=0,g=a.length,c=-1,d;++c<g;)d=+e.call(a,a[c],f),isNaN(d)||(b+=d);return b}function aal(d,c,b){a(d,function(d){a(d,function(a){var d,e,f;a.inEdges.length&&(d=eC(a.inEdges,aam,b)/eC(a.inEdges,hQ,b),"vertical"===b?(e=a.getLayout().x+(d-eI(a,b))*c,a.setLayout({x:e},!0)):(f=a.getLayout().y+(d-eI(a,b))*c,a.setLayout({y:f},!0)))})})}N(function(b,c,d){b.eachSeriesByType("sankey",function(b){var j=b.get("nodeWidth"),g=b.get("nodeGap"),e=function(b,a){return V(b.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}(b,c),h=(b.layoutInfo=e).width,i=e.height,f=b.getGraph(),d=f.nodes,k=f.edges;!function(b){a(b,function(a){var b=eC(a.outEdges,hQ),c=eC(a.inEdges,hQ),d=Math.max(b,c);a.setLayout({value:d},!0)})}(d),function(b,f,g,h,d,e,i,c,j){(function(d,t,h,y,w,n,o){for(var i=[],l=[],e=[],j=[],g=0,b=0,k,p,c,f,s,q,u,v,m,x,r;b<t.length;b++)i[b]=1;for(b=0;b<d.length;b++)l[b]=d[b].inEdges.length,0===l[b]&&e.push(d[b]);for(k=-1;e.length;){for(p=0;p<e.length;p++){c=e[p],f=c.hostGraph.data.getRawDataItem(c.dataIndex),s=null!=f.depth&&0<=f.depth,s&&f.depth>k&&(k=f.depth),c.setLayout({depth:s?f.depth:g},!0),"vertical"===n?c.setLayout({dy:h},!0):c.setLayout({dx:h},!0);for(q=0;q<c.outEdges.length;q++)u=c.outEdges[q],v=t.indexOf(u),i[v]=0,m=u.node2,x=d.indexOf(m),0==--l[x]&&j.indexOf(m)<0&&j.push(m)}++g,e=j,j=[]}for(b=0;b<i.length;b++)if(1===i[b])throw new Error("Sankey is a DAG, the original data has cycle!");r=g-1<k?k:g-1,o&&"left"!==o&&function(g,j,l,k){var b,c,h,d,e,f,i;if("right"===j){for(b=[],c=g,h=0;c.length;){for(d=0;d<c.length;d++){e=c[d],e.setLayout({skNodeHeight:h},!0);for(f=0;f<e.inEdges.length;f++)i=e.inEdges[f],b.indexOf(i.node1)<0&&b.push(i.node1)}c=b,b=[],++h}a(g,function(a){wU(a)||a.setLayout({depth:Math.max(0,k-a.getLayout().skNodeHeight)},!0)})}else"justify"===j&&function(b,c){a(b,function(a){wU(a)||a.outEdges.length||a.setLayout({depth:c},!0)})}(g,k)}(d,o,0,r),!function(b,c,d){a(b,function(a){var b=a.getLayout().depth*c;"vertical"===d?a.setLayout({y:b},!0):a.setLayout({x:b},!0)})}(d,"vertical"===n?(w-h)/r:(y-h)/r,n)})(b,f,g,d,e,c,j),function(i,j,d,e,f,g,b){var c=function(d,e){var c=[],f="vertical"===e?"y":"x",b=lS(d,function(a){return a.getLayout()[f]});return b.keys.sort(function(a,b){return a-b}),a(b.keys,function(a){c.push(b.buckets.get(a))}),c}(i,b),h;(function(e,f,g,h,c,d){var b=1/0;a(e,function(f){var i=f.length,e=0,j;a(f,function(a){e+=a.getLayout().value}),j="vertical"===d?(h-(i-1)*c)/e:(g-(i-1)*c)/e,j<b&&(b=j)}),a(e,function(c){a(c,function(a,c){var e=a.getLayout().value*b;"vertical"===d?(a.setLayout({x:c},!0),a.setLayout({dx:e},!0)):(a.setLayout({y:c},!0),a.setLayout({dy:e},!0))})}),a(f,function(a){var c=+a.getValue()*b;a.setLayout({dy:c},!0)})})(c,j,d,e,f,b),ns(c,f,d,e,b);for(h=1;0<g;g--)aao(c,h*=.99,b),ns(c,f,d,e,b),aal(c,h,b),ns(c,f,d,e,b)}(b,f,e,d,h,i,c),function(c,d){var b="vertical"===d?"x":"y";a(c,function(a){a.outEdges.sort(function(a,c){return a.node2.getLayout()[b]-c.node2.getLayout()[b]}),a.inEdges.sort(function(a,c){return a.node1.getLayout()[b]-c.node1.getLayout()[b]})}),a(c,function(b){var c=0,d=0;a(b.outEdges,function(a){a.setLayout({sy:c},!0),c+=a.getLayout().dy}),a(b.inEdges,function(a){a.setLayout({ty:d},!0),d+=a.getLayout().dy})})}(b,c)}(d,k,j,g,h,i,0!==W(d,function(a){return 0===a.getLayout().value}).length?0:b.get("layoutIterations"),b.get("orient"),b.get("nodeAlign"))})}),H(function(b,c){b.eachSeriesByType("sankey",function(e){var b=e.getGraph().nodes,c,d;b.length&&(c=1/0,d=-1/0,a(b,function(b){var a=b.getLayout().value;a<c&&(c=a),d<a&&(d=a)}),a(b,function(a){var f=new B({type:"color",mappingMethod:"linear",dataExtent:[c,d],visual:e.get("color")}).mapValueToVisual(a.getLayout().value),b=a.getModel().get("itemStyle.color");null!=b?a.setVisual("color",b):a.setVisual("color",f)}))})}),xb={_baseAxisDim:null,getInitialData:function(c,m){var h,e,f=m.getComponent("xAxis",this.get("xAxisIndex")),g=m.getComponent("yAxis",this.get("yAxisIndex")),s=f.get("type"),r=g.get("type"),l,d,t,o,i,p,q,k,j,n;return"category"===s?(c.layout="horizontal",h=f.getOrdinalMeta(),e=!0):"category"===r?(c.layout="vertical",h=g.getOrdinalMeta(),e=!0):c.layout=c.layout||"horizontal",l=["x","y"],d="horizontal"===c.layout?0:1,t=this._baseAxisDim=l[d],o=l[1-d],i=[f,g],p=i[d].get("type"),q=i[1-d].get("type"),k=c.data,k&&e&&(j=[],a(k,function(a,d){var c;a.value&&b(a.value)?(c=a.value.slice(),a.value.unshift(d)):b(a)?(c=a.slice(),a.unshift(d)):c=a,j.push(c)}),c.data=j),n=this.defaultValueDimensions,eo(this,{coordDimensions:[{name:t,type:ic(p),ordinalMeta:h,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:o,type:ic(q),dimsDef:n.slice()}],dimensionsCount:n.length+1})},getBaseAxis:function(){var a=this._baseAxisDim;return this.ecModel.getComponent(a+"Axis",this.get(a+"AxisIndex")).axis}},C(M.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}}),xb,!0),aag=["itemStyle"],aaf=["emphasis","itemStyle"],aae=(ae.extend({type:"boxplot",render:function(d,f,g){var a=d.getData(),b=this.group,c=this._data,e;this._data||b.removeAll(),e="horizontal"===d.get("layout")?1:0,a.diff(c).add(function(c){if(a.hasValue(c)){var d=xf(a.getItemLayout(c),a,c,e,!0);a.setItemGraphicEl(c,d),b.add(d)}}).update(function(f,h){var d=c.getItemGraphicEl(h),g;a.hasValue(f)?(g=a.getItemLayout(f),d?xg(g,d,a,f):d=xf(g,a,f,e),b.add(d),a.setItemGraphicEl(f,d)):b.remove(d)}).remove(function(d){var a=c.getItemGraphicEl(d);a&&b.remove(a)}).execute(),this._data=a},remove:function(c){var b=this.group,a=this._data;this._data=null,a&&a.eachItemGraphicEl(function(a){a&&b.remove(a)})},dispose:aa}),s.extend({type:"boxplotBoxPath",shape:{},buildPath:function(c,d){var b=d.points,a=0;for(c.moveTo(b[a][0],b[a][1]),a++;a<4;a++)c.lineTo(b[a][0],b[a][1]);for(c.closePath();a<b.length;a++)c.moveTo(b[a][0],b[a][1]),a++,c.lineTo(b[a][0],b[a][1])}}));function xf(a,f,g,h,b){var d=a.ends,e=new aae({shape:{points:b?function(a,b,d){return c(a,function(a){return(a=a.slice())[b]=d.initBaseline,a})}(d,h,a):d}});return xg(a,e,f,g,b),e}function xg(h,a,b,c,f){var g=b.hostModel,e,i,j,d;(0,bY[f?"initProps":"updateProps"])(a,{shape:{points:h.ends}},g,c),e=b.getItemModel(c),i=e.getModel(aag),j=b.getItemVisual(c,"color"),d=i.getItemStyle(["borderColor"]),d.stroke=j,d.strokeNoScale=!0,a.useStyle(d),a.z2=100,G(a,e.getModel(aaf).getItemStyle())}xh=["itemStyle","borderColor"],fR=a,H(function(a,c){var b=a.get("color");a.eachRawSeriesByType("boxplot",function(c){var e=b[c.seriesIndex%b.length],d=c.getData();d.setVisual({legendSymbol:"roundRect",color:c.get(xh)||e}),a.isSeriesFiltered(c)||d.each(function(a){var b=d.getItemModel(a);d.setItemVisual(a,{color:b.get(xh,!0)})})})}),N(function(a){var c=function(c){var a=[],b=[];return c.eachSeriesByType("boxplot",function(e){var d=e.getBaseAxis(),c=v(b,d);c<0&&(c=b.length,b[c]=d,a[c]={axis:d,seriesModels:[]}),a[c].seriesModels.push(e)}),a}(a);fR(c,function(a){var c=a.seriesModels;c.length&&(function(a){var j,c,g=a.axis,e=a.seriesModels,h=e.length,o=a.boxWidthList=[],p=a.boxOffsetList=[],k=[],m,f,n,i,l;"category"===g.type?c=g.getBandWidth():(m=0,fR(e,function(a){m=Math.max(m,a.getData().count())}),j=g.getExtent(),Math.abs(j[1]-j[0])),fR(e,function(e){var a=e.get("boxWidth");b(a)||(a=[a,a]),k.push([d(a[0],c)||0,d(a[1],c)||0])}),f=.8*c-2,n=f/h*.3,i=(f-n*(h-1))/h,l=i/2-f/2,fR(e,function(b,a){p.push(l),l+=n+i,o.push(Math.min(Math.max(i,k[a][0]),k[a][1]))})}(a),fR(c,function(c,b){!function(j,v,u){var t=j.coordinateSystem,d=j.getData(),h=u/2,b="horizontal"===j.get("layout")?0:1,i=1-b,m=["x","y"],l=d.mapDimension(m[b]),e=d.mapDimension(m[i],!0),a,g,n,o,s,p,q,c;if(null==l||e.length<5)return;for(a=0;a<d.count();a++)g=d.get(l,a),n=f(g,e[2],a),o=f(g,e[0],a),s=f(g,e[1],a),p=f(g,e[3],a),q=f(g,e[4],a),c=[],r(c,s,0),r(c,p,1),c.push(o,s,q,p),k(c,o),k(c,q),k(c,n),d.setItemLayout(a,{initBaseline:n[i],ends:c});function f(e,g,h){var a,f=d.get(g,h),c=[];return c[b]=e,c[i]=f,isNaN(e)||isNaN(f)?a=[NaN,NaN]:(a=t.dataToPoint(c))[b]+=v,a}function r(d,e,f){var a=e.slice(),c=e.slice();a[b]+=h,c[b]-=h,f?d.push(a,c):d.push(c,a)}function k(e,a){var c=a.slice(),d=a.slice();c[b]-=h,d[b]+=h,e.push(c,d)}}(c,a.boxOffsetList[b],a.boxWidthList[b])}))})}),C(M.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(b,c,d){var a=c.getItemLayout(b);return a&&d.rect(a.brushRect)}}),xb,!0),xj=["itemStyle"],aac=["emphasis","itemStyle"],xl=["color","color0","borderColor","borderColor0"],aaa=(ae.extend({type:"candlestick",render:function(a,b,c){this.group.removeClipPath(),this._updateDrawMode(a),this._isLargeDraw?this._renderLarge(a):this._renderNormal(a)},incrementalPrepareRender:function(a,b,c){this._clear(),this._updateDrawMode(a)},incrementalRender:function(a,b,c,d){this._isLargeDraw?this._incrementalRenderLarge(a,b):this._incrementalRenderNormal(a,b)},_updateDrawMode:function(b){var a=b.pipelineContext.large;(null==this._isLargeDraw||a^this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},_renderNormal:function(c){var a=c.getData(),d=this._data,b=this.group,e=a.getLayout("isSimpleBox"),f=c.get("clip",!0),g=c.coordinateSystem,h=g.getArea&&g.getArea();this._data||b.removeAll(),a.diff(d).add(function(d){if(a.hasValue(d)){var g,i=a.getItemLayout(d);if(f&&xo(h,i))return;ao(g=nC(i,d,!0),{shape:{points:i.ends}},c,d),nE(g,a,d,e),b.add(g),a.setItemGraphicEl(d,g)}}).update(function(i,k){var g=d.getItemGraphicEl(k),j;a.hasValue(i)?(j=a.getItemLayout(i),f&&xo(h,j)?b.remove(g):(g?p(g,{shape:{points:j.ends}},c,i):g=nC(j,i),nE(g,a,i,e),b.add(g),a.setItemGraphicEl(i,g))):b.remove(g)}).remove(function(c){var a=d.getItemGraphicEl(c);a&&b.remove(a)}).execute(),this._data=a},_renderLarge:function(a){this._clear(),xr(a,this.group);var b=a.get("clip",!0)?gT(a.coordinateSystem,!1,a):null;b?this.group.setClipPath(b):this.group.removeClipPath()},_incrementalRenderNormal:function(d,e){for(var a,b=e.getData(),f=b.getLayout("isSimpleBox"),c;null!=(a=d.next());)nE(c=nC(b.getItemLayout(a),a),b,a,f),c.incremental=!0,this.group.add(c)},_incrementalRenderLarge:function(b,a){xr(a,this.group,!0)},remove:function(a){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:aa}),s.extend({type:"normalCandlestickBox",shape:{},buildPath:function(b,c){var a=c.points;this.__simpleBox?(b.moveTo(a[4][0],a[4][1]),b.lineTo(a[6][0],a[6][1])):(b.moveTo(a[0][0],a[0][1]),b.lineTo(a[1][0],a[1][1]),b.lineTo(a[2][0],a[2][1]),b.lineTo(a[3][0],a[3][1]),b.closePath(),b.moveTo(a[4][0],a[4][1]),b.lineTo(a[5][0],a[5][1]),b.moveTo(a[6][0],a[6][1]),b.lineTo(a[7][0],a[7][1]))}}));function nC(a,e,d){var b=a.ends;return new aaa({shape:{points:d?function(a,b){return c(a,function(a){return(a=a.slice())[1]=b.initBaseline,a})}(b,a):b},z2:100})}function xo(d,b){for(var c=!0,a=0;a<b.ends.length;a++)if(d.contain(b.ends[a][0],b.ends[a][1])){c=!1;break}return c}function nE(a,b,c,f){var d=b.getItemModel(c),g=d.getModel(xj),e=b.getItemVisual(c,"color"),h=b.getItemVisual(c,"borderColor")||e,i=g.getItemStyle(xl);a.useStyle(i),a.style.strokeNoScale=!0,a.style.fill=e,a.style.stroke=h,a.__simpleBox=f,G(a,d.getModel(aac).getItemStyle())}xq=s.extend({type:"largeCandlestickBox",shape:{},buildPath:function(c,e){for(var b=e.points,a=0,d;a<b.length;)this.__sign===b[a++]?(d=b[a++],c.moveTo(d,b[a++]),c.lineTo(d,b[a++])):a+=3}});function xr(a,e,g){var b=a.getData(),f=b.getLayout("largePoints"),c=new xq({shape:{points:f},__sign:1}),d;e.add(c),d=new xq({shape:{points:f},__sign:-1}),e.add(d),xs(1,c,a,b),xs(-1,d,a,b),g&&(c.incremental=!0,d.incremental=!0)}function xs(d,a,e,b){var c=0<d?"P":"N",f=b.getVisual("borderColor"+c)||b.getVisual("color"+c),g=e.getModel(xj).getItemStyle(xl);a.useStyle(g),a.style.fill=null,a.style.stroke=f}z_=["itemStyle","borderColor"],zZ=["itemStyle","borderColor0"],zY=["itemStyle","color"],zW=["itemStyle","color0"],zV={seriesType:"candlestick",plan:er(),performRawSeries:!0,reset:function(a,d){var e=a.getData(),f=a.pipelineContext.large;if(e.setVisual({legendSymbol:"roundRect",colorP:b(1,a),colorN:b(-1,a),borderColorP:c(1,a),borderColorN:c(-1,a)}),!d.isSeriesFiltered(a))return!f&&{progress:function(g,d){for(var a,e,f;null!=(a=g.next());)e=d.getItemModel(a),f=d.getItemLayout(a).sign,d.setItemVisual(a,{color:b(f,e),borderColor:c(f,e)})}};function b(a,b){return b.get(0<a?zY:zW)}function c(a,b){return b.get(0<a?z_:zZ)}}},zU="undefined"!=typeof Float32Array?Float32Array:Array,zT={seriesType:"candlestick",plan:er(),reset:function(e){var g=e.coordinateSystem,c=e.getData(),a=function(b,i){var c,e=b.getBaseAxis(),a="category"===e.type?e.getBandWidth():(c=e.getExtent(),Math.abs(c[1]-c[0])/i.count()),g=d(R(b.get("barMaxWidth"),a),a),h=d(R(b.get("barMinWidth"),1),a),f=b.get("barWidth");return null!=f?d(f,a):Math.max(Math.min(a/2,g),h)}(e,c),i=["x","y"],h=c.mapDimension(i[0]),b=c.mapDimension(i[1],!0),j=b[0],f=b[1],k=b[2],l=b[3];if(c.setLayout({candleWidth:a,isSimpleBox:a<=1.3}),!(null==h||b.length<4))return{progress:e.pipelineContext.large?function(m,b){for(var a,c,d=new zU(4*m.count),e=0,i=[],n=[],o,s,r,p,q;null!=(c=m.next());)o=b.get(h,c),s=b.get(j,c),r=b.get(f,c),p=b.get(k,c),q=b.get(l,c),isNaN(o)||isNaN(p)||isNaN(q)?(d[e++]=NaN,e+=3):(d[e++]=xA(b,c,s,r,f),i[0]=o,i[1]=p,a=g.dataToPoint(i,null,n),d[e++]=a?a[0]:NaN,d[e++]=a?a[1]:NaN,i[1]=q,a=g.dataToPoint(i,null,n),d[e++]=a?a[1]:NaN);b.setLayout("largePoints",d)}:function(z,c){for(var b,e,i,m,t,s,x,u,p,q,w,v,o;null!=(b=z.next());)e=c.get(h,b),i=c.get(j,b),m=c.get(f,b),t=c.get(k,b),s=c.get(l,b),x=Math.min(i,m),u=Math.max(i,m),p=d(x,e),q=d(u,e),w=d(t,e),v=d(s,e),o=[],r(o,q,0),r(o,p,1),o.push(n(v),n(q),n(w),n(p)),c.setItemLayout(b,{sign:xA(c,b,i,m,f),initBaseline:m<i?q[1]:p[1],ends:o,brushRect:y(t,s,e)});function d(b,c){var a=[];return a[0]=c,a[1]=b,isNaN(c)||isNaN(b)?[NaN,NaN]:g.dataToPoint(a)}function r(d,e,f){var b=e.slice(),c=e.slice();b[0]=hu(b[0]+a/2,1,!1),c[0]=hu(c[0]-a/2,1,!0),f?d.push(b,c):d.push(c,b)}function y(f,g,c){var b=d(f,c),e=d(g,c);return b[0]-=a/2,e[0]-=a/2,{x:b[0],y:b[1],width:a,height:e[1]-b[1]}}function n(a){return a[0]=hu(a[0],1),a}}}}};function xA(d,b,c,a,e){return a<c?-1:c<a?1:0<b?d.get(e,b-1)<=a?1:-1:1}aj(function(c){c&&b(c.series)&&a(c.series,function(a){m(a)&&"k"===a.type&&(a.type="candlestick")})}),H(zV),N(zT),M.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(a,b){return ca(this.getSource(),this)},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});function xB(c,a){var b=a.rippleEffectColor||a.color;c.eachChild(function(c){c.attr({z:a.z,zlevel:a.zlevel,style:{stroke:"stroke"===a.brushType?b:null,fill:"fill"===a.brushType?b:null}})})}function nH(a,b){e.call(this);var c=new cx(a,b),d=new e;this.add(c),this.add(d),d.beforeUpdate=function(){this.attr(c.getScale())},this.updateData(a,b)}da=nH.prototype,da.stopEffectAnimation=function(){this.childAt(1).removeAll()},da.startEffectAnimation=function(a){for(var f=a.symbolType,g=a.color,d=this.childAt(1),c=0,b,e;c<3;c++)b=aQ(f,-1,-1,2,2,g),b.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]}),e=-c/3*a.period+a.effectOffset,b.animate("",!0).when(a.period,{scale:[a.rippleScale/2,a.rippleScale/2]}).delay(e).start(),b.animateStyle(!0).when(a.period,{opacity:0}).delay(e).start(),d.add(b);xB(d,a)},da.updateEffectAnimation=function(a){for(var e=this._effectCfg,f=this.childAt(1),c=["symbolType","period","rippleScale"],b=0,d;b<c.length;b++)if(d=c[b],e[d]!==a[d])return this.stopEffectAnimation(),void this.startEffectAnimation(a);xB(f,a)},da.highlight=function(){this.trigger("emphasis")},da.downplay=function(){this.trigger("normal")},da.updateData=function(e,f){var p=e.hostModel,g,c,o,i,j,h,l,a,k,m,n;this.childAt(0).updateData(e,f),g=this.childAt(1),c=e.getItemModel(f),o=e.getItemVisual(f,"symbol"),i=function(a){return b(a)||(a=[+a,+a]),a}(e.getItemVisual(f,"symbolSize")),j=e.getItemVisual(f,"color"),g.attr("scale",i),g.traverse(function(a){a.attr({fill:j})}),h=c.getShallow("symbolOffset"),h&&(l=g.position,l[0]=d(h[0],i[0]),l[1]=d(h[1],i[1])),g.rotation=(c.getShallow("symbolRotate")||0)*Math.PI/180||0,a={},(a.showEffectOn=p.get("showEffectOn"),a.rippleScale=c.get("rippleEffect.scale"),a.brushType=c.get("rippleEffect.brushType"),a.period=1e3*c.get("rippleEffect.period"),a.effectOffset=f/e.count(),a.z=c.getShallow("z")||0,a.zlevel=c.getShallow("zlevel")||0,a.symbolType=o,a.color=j,a.rippleEffectColor=c.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===a.showEffectOn)?(this._effectCfg?this.updateEffectAnimation(a):this.startEffectAnimation(a),this._effectCfg=a):(this._effectCfg=null,this.stopEffectAnimation(),k=this.childAt(0),m=function(){k.highlight(),"render"!==a.showEffectOn&&this.startEffectAnimation(a)},n=function(){k.downplay(),"render"!==a.showEffectOn&&this.stopEffectAnimation()},this.on("mouseover",m,this).on("mouseout",n,this).on("emphasis",m,this).on("normal",n,this)),this._effectCfg=a},da.fadeOut=function(a){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),a&&a()},D(nH,e),ay({type:"effectScatter",init:function(){this._symbolDraw=new ez(nH)},render:function(b,d,e){var c=b.getData(),a=this._symbolDraw;a.updateData(c),this.group.add(a.group)},updateTransform:function(b,d,e){var a=b.getData(),c;this.group.dirty(),c=fW().reset(b),c.progress&&c.progress({start:0,end:a.count()},a),this._symbolDraw.updateLayout(a)},_updateGroupTransform:function(b){var a=b.coordinateSystem;a&&a.getRoamTransform&&(this.group.transform=xN(a.getRoamTransform()),this.group.decomposeTransform())},remove:function(b,a){this._symbolDraw&&this._symbolDraw.remove(a)},dispose:function(){}}),H(cY("effectScatter","circle")),N(fW("effectScatter")),zS="undefined"==typeof Uint32Array?Array:Uint32Array,zQ="undefined"==typeof Float64Array?Array:Float64Array;function xG(b){var a=b.data;a&&a[0]&&a[0][0]&&a[0][0].coord&&(b.data=c(a,function(a){var b={coords:[a[0].coord,a[1].coord]};return a[0].name&&(b.fromName=a[0].name),a[1].name&&(b.toName=a[1].name),fJ([b,a[0],a[1]])}))}zi=M.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(a){a.data=a.data||[],xG(a);var b=this._processFlatCoordsArray(a.data);this._flatCoords=b.flatCoords,this._flatCoordsOffset=b.flatCoordsOffset,b.flatCoords&&(a.data=new Float32Array(b.count)),zi.superApply(this,"init",arguments)},mergeOption:function(a){if(a.data=a.data||[],xG(a),a.data){var b=this._processFlatCoordsArray(a.data);this._flatCoords=b.flatCoords,this._flatCoordsOffset=b.flatCoordsOffset,b.flatCoords&&(a.data=new Float32Array(b.count))}zi.superApply(this,"mergeOption",arguments)},appendData:function(b){var a=this._processFlatCoordsArray(b.data);a.flatCoords&&(this._flatCoords?(this._flatCoords=oJ(this._flatCoords,a.flatCoords),this._flatCoordsOffset=oJ(this._flatCoordsOffset,a.flatCoordsOffset)):(this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset),b.data=new Float32Array(a.count)),this.getRawData().appendData(b.data)},_getCoordsFromItemModel:function(b){var a=this.getData().getItemModel(b);return a.option instanceof Array?a.option:a.getShallow("coords")},getLineCoordsCount:function(a){return this._flatCoordsOffset?this._flatCoordsOffset[2*a+1]:this._getCoordsFromItemModel(a).length},getLineCoords:function(d,b){var e,f,a,c;if(this._flatCoordsOffset){for(e=this._flatCoordsOffset[2*d],f=this._flatCoordsOffset[2*d+1],a=0;a<f;a++)b[a]=b[a]||[],b[a][0]=this._flatCoords[e+2*a],b[a][1]=this._flatCoords[e+2*a+1];return f}c=this._getCoordsFromItemModel(d);for(a=0;a<c.length;a++)b[a]=b[a]||[],b[a][0]=c[a][0],b[a][1]=c[a][1];return c.length},_processFlatCoordsArray:function(a){var i=0,c,d,e,f,g,h,b,j,k,l,m;if(this._flatCoords&&(i=this._flatCoords.length),"number"!=typeof a[0])return{flatCoordsOffset:null,flatCoords:null,count:a.length};for(c=a.length,d=new zS(c),e=new zQ(c),f=0,g=0,h=0,b=0;b<c;){h++,j=a[b++],d[g++]=f+i,d[g++]=j;for(k=0;k<j;k++)l=a[b++],m=a[b++],e[f++]=l,e[f++]=m}return{flatCoordsOffset:new Uint32Array(d.buffer,0,g),flatCoords:e,count:h}},getInitialData:function(b,c){var a=new ab(["value"],this);return a.hasItemOption=!1,a.initData(b.data,[],function(c,e,f,d){if(c instanceof Array)return NaN;a.hasItemOption=!0;var b=c.value;return null!=b?b instanceof Array?b[d]:b:void 0}),a},formatTooltip:function(f){var a=this.getData().getItemModel(f),c=a.get("name"),d,e,b;return c||(d=a.get("fromName"),e=a.get("toName"),b=[],null!=d&&b.push(d),null!=e&&b.push(e),K(b.join(" > ")))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var a=this.option.progressive;return null==a?this.option.large?1e4:this.get("progressive"):a},getProgressiveThreshold:function(){var a=this.option.progressiveThreshold;return null==a?this.option.large?2e4:this.get("progressiveThreshold"):a},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}});function gr(a,b,c){e.call(this),this.add(this.createLine(a,b,c)),this._updateEffectSymbol(a,b)}cD=gr.prototype;function gL(a,b,c){e.call(this),this._createPolyline(a,b,c)}cD.createLine=function(a,b,c){return new fT(a,b,c)},cD._updateEffectSymbol=function(h,e){var d=h.getItemModel(e).getModel("effect"),c=d.get("symbolSize"),f=d.get("symbol"),g,a;b(c)||(c=[c,c]),g=d.get("color")||h.getItemVisual(e,"color"),a=this.childAt(1),this._symbolType!==f&&(this.remove(a),(a=aQ(f,-.5,-.5,1,1,g)).z2=100,a.culling=!0,this.add(a)),a&&(a.setStyle("shadowColor",g),a.setStyle(d.getItemStyle(["color"])),a.attr("scale",c),a.setColor(g),a.attr("scale",c),this._symbolType=f,this._updateEffectAnimation(h,d,e))},cD._updateEffectAnimation=function(g,c,j){var a=this.childAt(1),h,m,b,d,i,e,l,f,k;a&&(h=this,m=g.getItemLayout(j),b=1e3*c.get("period"),d=c.get("loop"),i=c.get("constantSpeed"),e=af(c.get("delay"),function(a){return a/g.count()*b/3}),l="function"==typeof e,(a.ignore=!0,this.updateAnimationPoints(a,m),0<i&&(b=this.getLineLength(a)/i*1e3),b!==this._period||d!==this._loop)&&(a.stopAnimation(),f=e,l&&(f=e(j)),0<a.__t&&(f=-b*a.__t),a.__t=0,k=a.animate("",d).when(b,{__t:1}).delay(f).during(function(){h.updateSymbolPosition(a)}),d||k.done(function(){h.remove(a)}),k.start()),this._period=b,this._loop=d)},cD.getLineLength=function(a){return du(a.__p1,a.__cp1)+du(a.__cp1,a.__p2)},cD.updateAnimationPoints=function(b,a){b.__p1=a[0],b.__p2=a[1],b.__cp1=a[2]||[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]},cD.updateData=function(a,b,c){this.childAt(0).updateData(a,b,c),this._updateEffectSymbol(a,b)},cD.updateSymbolPosition=function(a){var b=a.__p1,c=a.__p2,d=a.__cp1,e=a.__t,f=a.position,g=am,h=lL,i,j;f[0]=g(b[0],d[0],c[0],e),f[1]=g(b[1],d[1],c[1],e),i=h(b[0],d[0],c[0],e),j=h(b[1],d[1],c[1],e),a.rotation=-Math.atan2(j,i)-Math.PI/2,a.ignore=!1},cD.updateLayout=function(a,b){this.childAt(0).updateLayout(a,b);var c=a.getItemModel(b).getModel("effect");this._updateEffectAnimation(a,c,b)},D(gr,e),gP=gL.prototype;function nV(a,b,c){gr.call(this,a,b,c),this._lastFrame=0,this._lastFramePercent=0}gP._createPolyline=function(a,b,c){var d=a.getItemLayout(b),e=new aZ({shape:{points:d}});this.add(e),this._updateCommonStl(a,b,c)},gP.updateData=function(a,b,c){var d=a.hostModel;p(this.childAt(0),{shape:{points:a.getItemLayout(b)}},d,b),this._updateCommonStl(a,b,c)},gP._updateCommonStl=function(b,c,a){var d=this.childAt(0),e=b.getItemModel(c),i=b.getItemVisual(c,"color"),f=a&&a.lineStyle,h=a&&a.hoverLineStyle;a&&!b.hasItemOption||(f=e.getModel("lineStyle").getLineStyle(),h=e.getModel("emphasis.lineStyle").getLineStyle()),d.useStyle(g({strokeNoScale:!0,fill:"none",stroke:i},f)),d.hoverStyle=h,G(this)},gP.updateLayout=function(a,b){this.childAt(0).setShape("points",a.getItemLayout(b))},D(gL,e),ha=nV.prototype,ha.createLine=function(a,b,c){return new gL(a,b,c)},ha.updateAnimationPoints=function(g,d){var c,b,a,f,e;this._points=d;for(c=[0],b=0,a=1;a<d.length;a++)f=d[a-1],e=d[a],b+=du(f,e),c.push(b);if(0!==b){for(a=0;a<c.length;a++)c[a]/=b;this._offsets=c,this._length=b}},ha.getLineLength=function(a){return this._length},ha.updateSymbolPosition=function(f){var d=f.__t,b=this._points,c=this._offsets,e=b.length,g,a,h,i;if(c){if(g=this._lastFrame,d<this._lastFramePercent){for(a=Math.min(g+1,e-1);0<=a&&!(c[a]<=d);a--);a=Math.min(a,e-2)}else{for(a=g;a<e&&!(c[a]>d);a++);a=Math.min(a-1,e-2)}yr(f.position,b[a],b[a+1],(d-c[a])/(c[a+1]-c[a])),h=b[a+1][0]-b[a][0],i=b[a+1][1]-b[a][1],f.rotation=-Math.atan2(i,h)-Math.PI/2,this._lastFrame=a,this._lastFramePercent=d,f.ignore=!1}},D(nV,gr),xO=ba({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(c,f){var b=f.segs,g=f.curveness,a,k,j,h,i,e,d,l,m;if(f.polyline){for(a=0;a<b.length;)if(k=b[a++],0<k){c.moveTo(b[a++],b[a++]);for(j=1;j<k;j++)c.lineTo(b[a++],b[a++])}}else for(a=0;a<b.length;)h=b[a++],i=b[a++],e=b[a++],d=b[a++],(c.moveTo(h,i),0<g)?(l=(h+e)/2-(i-d)*g,m=(i+d)/2-(e-h)*g,c.quadraticCurveTo(l,m,e,d)):c.lineTo(e,d)},findDataIndex:function(m,l){var i=this.shape,b=i.segs,h=i.curveness,e,a,j,d,c,k,f,g;if(i.polyline)for(e=0,a=0;a<b.length;){if(j=b[a++],0<j)for(d=b[a++],c=b[a++],k=1;k<j;k++)if(cS(d,c,f=b[a++],g=b[a++]))return e;e++}else for(e=0,a=0;a<b.length;){if(d=b[a++],c=b[a++],f=b[a++],g=b[a++],0<h){if(vn(d,c,(d+f)/2-(c-g)*h,(c+g)/2-(f-d)*h,f,g))return e}else if(cS(d,c,f,g))return e;e++}return-1}});function xP(){this.group=new e}dm=xP.prototype,dm.isPersistent=function(){return!this._incremental},dm.updateData=function(b){this.group.removeAll();var a=new xO({rectHover:!0,cursor:"default"});a.setShape({segs:b.getLayout("linesPoints")}),this._setCommon(a,b),this.group.add(a),this._incremental=null},dm.incrementalPrepareUpdate=function(a){this.group.removeAll(),this._clearIncremental(),5e5<a.count()?(this._incremental||(this._incremental=new aJ({silent:!0})),this.group.add(this._incremental)):this._incremental=null},dm.incrementalUpdate=function(c,b){var a=new xO;a.setShape({segs:b.getLayout("linesPoints")}),this._setCommon(a,b,!!this._incremental),this._incremental?this._incremental.addDisplayable(a,!0):(a.rectHover=!0,a.cursor="default",a.__startIndex=c.start,this.group.add(a))},dm.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},dm._setCommon=function(a,c,e){var b=c.hostModel,d;a.setShape({polyline:b.get("polyline"),curveness:b.get("lineStyle.curveness")}),a.useStyle(b.getModel("lineStyle").getLineStyle()),a.style.strokeNoScale=!0,d=c.getVisual("color"),d&&a.setStyle("stroke",d),a.setStyle("fill"),e||(a.seriesIndex=b.seriesIndex,a.on("mousemove",function(b){a.dataIndex=null;var c=a.findDataIndex(b.offsetX,b.offsetY);0<c&&(a.dataIndex=c+a.__startIndex)}))},dm._clearIncremental=function(){var a=this._incremental;a&&a.clearDisplaybles()},xR={seriesType:"lines",plan:er(),reset:function(a){var b=a.coordinateSystem,c=a.get("polyline"),d=a.pipelineContext.large;return{progress:function(g,n){var h=[],i,r,q,e,l,k,j,o,s,f,m,p;if(d){if(r=g.end-g.start,c){for(q=0,e=g.start;e<g.end;e++)q+=a.getLineCoordsCount(e);i=new Float32Array(r+2*q)}else i=new Float32Array(4*r);l=0,k=[];for(e=g.start;e<g.end;e++){j=a.getLineCoords(e,h),c&&(i[l++]=j);for(o=0;o<j;o++)k=b.dataToPoint(h[o],!1,k),i[l++]=k[0],i[l++]=k[1]}n.setLayout("linesPoints",i)}else for(e=g.start;e<g.end;e++){if(s=n.getItemModel(e),f=(j=a.getLineCoords(e,h),[]),c)for(m=0;m<j;m++)f.push(b.dataToPoint(h[m]));else f[0]=b.dataToPoint(h[0]),f[1]=b.dataToPoint(h[1]),p=s.get("lineStyle.curveness"),+p&&(f[2]=[(f[0][0]+f[1][0])/2-(f[0][1]-f[1][1])*p,(f[0][1]+f[1][1])/2-(f[1][0]-f[0][0])*p]);n.setItemLayout(e,f)}}}}};function hn(a){return a instanceof Array||(a=[a,a]),a}ay({type:"lines",init:function(){},render:function(a,j,i){var e=a.getData(),h=this._updateLineDraw(e,a),d=a.get("zlevel"),f=a.get("effect.trailLength"),b=i.getZr(),c="svg"===b.painter.getType(),g;c||b.painter.getLayer(d).clear(!0),null==this._lastZlevel||c||b.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(a)&&f&&(c||b.configLayer(d,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(f/10+.9,1),0)})),h.updateData(e),g=a.get("clip",!0)&&gT(a.coordinateSystem,!1,a),g?this.group.setClipPath(g):this.group.removeClipPath(),this._lastZlevel=d,this._finished=!0},incrementalPrepareRender:function(a,d,c){var b=a.getData();this._updateLineDraw(b,a).incrementalPrepareUpdate(b),this._clearLayer(c),this._finished=!1},incrementalRender:function(a,b,c){this._lineDraw.incrementalUpdate(a,b.getData()),this._finished=a.end===b.getData().count()},updateTransform:function(a,f,e){var b=a.getData(),c=a.pipelineContext,d;if(!this._finished||c.large||c.progressiveRender)return{update:!0};d=xR.reset(a),d.progress&&d.progress({start:0,end:b.count()},b),this._lineDraw.updateLayout(),this._clearLayer(e)},_updateLineDraw:function(f,c){var a=this._lineDraw,b=this._showEffect(c),d=!!c.get("polyline"),e=c.pipelineContext.large;return a&&b===this._hasEffet&&d===this._isPolyline&&e===this._isLargeDraw||(a&&a.remove(),a=this._lineDraw=e?new xP:new hh(d?b?nV:gL:b?gr:fT),this._hasEffet=b,this._isPolyline=d,this._isLargeDraw=e,this.group.removeAll()),this.group.add(a.group),a},_showEffect:function(a){return!!a.get("effect.show")},_clearLayer:function(b){var a=b.getZr();"svg"===a.painter.getType()||null==this._lastZlevel||a.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(b,a){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(a)},dispose:function(){}}),xT="lineStyle.opacity".split("."),zO={seriesType:"lines",reset:function(b,e,f){var c=hn(b.get("symbol")),d=hn(b.get("symbolSize")),a=b.getData();return a.setVisual("fromSymbol",c&&c[0]),a.setVisual("toSymbol",c&&c[1]),a.setVisual("fromSymbolSize",d&&d[0]),a.setVisual("toSymbolSize",d&&d[1]),a.setVisual("opacity",b.get(xT)),{dataEach:a.hasItemOption?function(a,b){var e=a.getItemModel(b),c=hn(e.getShallow("symbol",!0)),d=hn(e.getShallow("symbolSize",!0)),f=e.get(xT);c[0]&&a.setItemVisual(b,"fromSymbol",c[0]),c[1]&&a.setItemVisual(b,"toSymbol",c[1]),d[0]&&a.setItemVisual(b,"fromSymbolSize",d[0]),d[1]&&a.setItemVisual(b,"toSymbolSize",d[1]),a.setItemVisual(b,"opacity",f)}:null}}},N(xR),H(zO),M.extend({type:"series.heatmap",getInitialData:function(a,b){return ca(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var a=aq.get(this.get("coordinateSystem"));if(a&&a.dimensions)return"lng"===a.dimensions[0]&&"lat"===a.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}});function xV(){var a=eA();this.canvas=a,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}xV.prototype={update:function(f,y,u,t,n,o){var s=this._getBrush(),w=this._getGradient(f,n,"inRange"),z=this._getGradient(f,n,"outOfRange"),k=this.pointSize+this.blurSize,a=this.canvas,g=a.getContext("2d"),r=f.length,j,i,p,q,b,m,d,c,v,l,x,e,h;a.width=y,a.height=u;for(j=0;j<r;++j)i=f[j],p=i[0],q=i[1],b=t(i[2]),g.globalAlpha=b,g.drawImage(s,p-k,q-k);if(!a.width||!a.height)return a;for(m=g.getImageData(0,0,a.width,a.height),d=m.data,c=0,v=d.length,l=this.minOpacity,x=this.maxOpacity-l;c<v;)b=d[c+3]/256,e=4*Math.floor(255*b),0<b?(h=o(b)?w:z,0<b&&(b=b*x+l),d[c++]=h[e],d[c++]=h[1+e],d[c++]=h[2+e],d[c++]=h[3+e]*b*256):c+=4;return g.putImageData(m,0,0),a},_getBrush:function(){var c=this._brushCanvas||(this._brushCanvas=eA()),d=this.pointSize+this.blurSize,b=2*d,a;return c.width=b,c.height=b,a=c.getContext("2d"),a.clearRect(0,0,b,b),a.shadowOffsetX=b,a.shadowBlur=this.blurSize,a.shadowColor="#000",a.beginPath(),a.arc(-d,d,this.pointSize,0,2*Math.PI,!0),a.closePath(),a.fill(),c},_getGradient:function(h,g,e){for(var f=this._gradientPixels,a=f[e]||(f[e]=new Uint8ClampedArray(1024)),b=[0,0,0,0],c=0,d=0;d<256;d++)g[e](d/255,!0,b),a[c++]=b[0],a[c++]=b[1],a[c++]=b[2],a[c++]=b[3];return a}},ay({type:"heatmap",render:function(a,e,c){var d,b;e.eachComponent("visualMap",function(b){b.eachTargetSeries(function(c){c===a&&(d=b)})}),this.group.removeAll(),this._incrementalDisplayable=null,b=a.coordinateSystem,"cartesian2d"===b.type||"calendar"===b.type?this._renderOnCartesianAndCalendar(a,c,0,a.getData().count()):function(b){var a=b.dimensions;return"lng"===a[0]&&"lat"===a[1]}(b)&&this._renderOnGeo(b,a,d,c)},incrementalPrepareRender:function(a,b,c){this.group.removeAll()},incrementalRender:function(a,b,d,c){b.coordinateSystem&&this._renderOnCartesianAndCalendar(b,c,a.start,a.end,!0)},_renderOnCartesianAndCalendar:function(c,B,z,x,w){var m,j,e=c.coordinateSystem,v,A,u,a,o,s,l,i,r,n,p,g,b,d,q,h,k,t;"cartesian2d"===e.type&&(v=e.getAxis("x"),A=e.getAxis("y"),m=v.getBandWidth(),j=A.getBandWidth());for(u=this.group,a=c.getData(),o="emphasis.itemStyle",s="emphasis.label",l=c.getModel("itemStyle").getItemStyle(["color"]),i=c.getModel(o).getItemStyle(),r=c.getModel("label"),n=c.getModel(s),p=e.type,g="cartesian2d"===p?[a.mapDimension("x"),a.mapDimension("y"),a.mapDimension("value")]:[a.mapDimension("time"),a.mapDimension("value")],b=z;b<x;b++){if("cartesian2d"===p){if(isNaN(a.get(g[2],b)))continue;q=e.dataToPoint([a.get(g[0],b),a.get(g[1],b)]),d=new y({shape:{x:q[0]-m/2,y:q[1]-j/2,width:m,height:j},style:{fill:a.getItemVisual(b,"color"),opacity:a.getItemVisual(b,"opacity")}})}else{if(isNaN(a.get(g[1],b)))continue;d=new y({z2:1,shape:e.dataToRect([a.get(g[0],b)]).contentShape,style:{fill:a.getItemVisual(b,"color"),opacity:a.getItemVisual(b,"opacity")}})}h=a.getItemModel(b),a.hasItemOption&&(l=h.getModel("itemStyle").getItemStyle(["color"]),i=h.getModel(o).getItemStyle(),r=h.getModel("label"),n=h.getModel(s)),k=c.getRawValue(b),t="-",k&&null!=k[2]&&(t=k[2]),aI(l,i,r,n,{labelFetcher:c,labelDataIndex:b,defaultText:t,isRectText:!0}),d.setStyle(l),G(d,a.hasItemOption?i:f({},i)),(d.incremental=w)&&(d.useHoverLayer=!0),u.add(d),a.setItemGraphicEl(b,d)}},_renderOnGeo:function(i,e,a,m){var l=a.targetVisuals.inRange,o=a.targetVisuals.outOfRange,f=e.getData(),d=this._hmLayer||this._hmLayer||new xV,b,t,h,g,q,p,j,n,r,s,k,u,v;d.blurSize=e.get("blurSize"),d.pointSize=e.get("pointSize"),d.minOpacity=e.get("minOpacity"),d.maxOpacity=e.get("maxOpacity"),b=i.getViewRect().clone(),t=i.getRoamTransform(),b.applyTransform(t),h=Math.max(b.x,0),g=Math.max(b.y,0),q=Math.min(b.width+b.x,m.getWidth()),p=Math.min(b.height+b.y,m.getHeight()),j=q-h,n=p-g,r=[f.mapDimension("lng"),f.mapDimension("lat"),f.mapDimension("value")],s=f.mapArray(r,function(b,c,d){var a=i.dataToPoint([b,c]);return a[0]-=h,a[1]-=g,a.push(d),a}),k=a.getExtent(),u="visualMap.continuous"===a.type?function(b,a){var c=b[1]-b[0];return a=[(a[0]-b[0])/c,(a[1]-b[0])/c],function(b){return b>=a[0]&&b<=a[1]}}(k,a.option.range):function(a,b,g){var f=a[1]-a[0],e=(b=c(b,function(b){return{interval:[(b.interval[0]-a[0])/f,(b.interval[1]-a[0])/f]}})).length,d=0;return function(c){for(var a=d,f;a<e;a++)if((f=b[a].interval)[0]<=c&&c<=f[1]){d=a;break}if(a===e)for(a=d-1;0<=a;a--)if((f=b[a].interval)[0]<=c&&c<=f[1]){d=a;break}return 0<=a&&a<e&&g[a]}}(k,a.getPieceList(),a.option.selected),d.update(s,j,n,l.color.getNormalizer(),{inRange:l.color.getColorMapper(),outOfRange:o.color.getColorMapper()},u),v=new ad({style:{width:j,height:n,x:h,y:g,image:d.canvas},silent:!0}),this.group.add(v)},dispose:function(){}}),zN=rb.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(a){return a.stack=null,zN.superApply(this,"getInitialData",arguments)}}),zM=["itemStyle","borderWidth"],xY=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],oh=new bI,ay({type:"pictorialBar",render:function(f,j,i){var e=this.group,a=f.getData(),d=this._data,h=f.coordinateSystem,g=!!h.getBaseAxis().isHorizontal(),c=h.grid.getRect(),b={ecSize:{width:i.getWidth(),height:i.getHeight()},seriesModel:f,coordSys:h,coordSysExtent:[[c.x,c.x+c.width],[c.y,c.y+c.height]],isHorizontal:g,valueDim:xY[+g],categoryDim:xY[1-g]};return a.diff(d).add(function(c){if(a.hasValue(c)){var g=yf(a,c),f=x_(a,c,g,b),d=yj(a,b,f);a.setItemGraphicEl(c,d),e.add(d),yo(d,b,f)}}).update(function(f,h){var c=d.getItemGraphicEl(h),i,g,j;a.hasValue(f)?(i=yf(a,f),g=x_(a,f,i,b),j=yl(a,g),c&&j!==c.__pictorialShapeStr&&(e.remove(c),a.setItemGraphicEl(f,null),c=null),c?function(b,c,a){var d=a.animationModel,e=a.dataIndex;p(b.__pictorialBundle,{position:a.bundlePosition.slice()},d,e),a.symbolRepeat?yb(b,c,a,!0):yc(b,c,a,!0),yd(b,a,!0),ye(b,c,a,!0)}(c,b,g):c=yj(a,b,g,!0),a.setItemGraphicEl(f,c),c.__pictorialSymbolMeta=g,e.add(c),yo(c,b,g)):e.remove(c)}).remove(function(b){var a=d.getItemGraphicEl(b);a&&yk(d,b,a.__pictorialSymbolMeta.animationModel,a)}).execute(),this._data=a,this.group},dispose:aa,remove:function(b,d){var c=this.group,a=this._data;b.get("animation")?a&&a.eachItemGraphicEl(function(c){yk(a,c.dataIndex,b,c)}):c.removeAll()}});function x_(k,e,a,h){var i=k.getItemLayout(e),j=a.get("symbolRepeat"),p=a.get("symbolClip"),q=a.get("symbolPosition")||"start",m=(a.get("symbolRotate")||0)*Math.PI/180||0,n=a.get("symbolPatternSize")||2,o=a.isAnimationEnabled(),c={dataIndex:e,layout:i,itemModel:a,symbolType:k.getItemVisual(e,"symbol")||"circle",color:k.getItemVisual(e,"color"),symbolClip:p,symbolRepeat:j,symbolRepeatDirection:a.get("symbolRepeatDirection"),symbolPatternSize:n,rotation:m,animationModel:o?a:null,hoverAnimation:o&&a.get("hoverAnimation"),z2:a.getShallow("z",!0)||0},l,g;return!function(m,k,j,f,i){var d,e=f.valueDim,a=m.get("symbolBoundingData"),c=f.coordSys.getOtherAxis(f.coordSys.getBaseAxis()),g=c.toGlobalCoord(c.dataToCoord(0)),l=1-+(j[e.wh]<=0),h;b(a)?(h=[oo(c,a[0])-g,oo(c,a[1])-g],h[1]<h[0]&&h.reverse(),d=h[l]):d=null!=a?oo(c,a)-g:k?f.coordSysExtent[e.index][l]-g:j[e.wh],i.boundingLength=d,k&&(i.repeatCutLength=j[e.wh]),i.pxSign=0<d?1:d<0?-1:0}(a,j,i,h,c),function(o,n,m,l,p,k,j,i,f,h){var e=f.valueDim,c=f.categoryDim,g=Math.abs(m[c.wh]),a=o.getItemVisual(n,"symbolSize");a=b(a)?a.slice():(null==a&&(a="100%"),[a,a]),a[c.index]=d(a[c.index],g),a[e.index]=d(a[e.index],l?g:Math.abs(k)),h.symbolSize=a,(h.symbolScale=[a[0]/i,a[1]/i])[e.index]*=(f.isHorizontal?-1:1)*j}(k,e,i,j,0,c.boundingLength,c.pxSign,n,h,c),function(c,b,d,e,f){var a=c.get(zM)||0;a&&(oh.attr({scale:b.slice(),rotation:d}),oh.updateTransform(),a/=oh.getLineScale(),a*=b[e.valueDim.index]),f.valueLineWidth=a}(a,c.symbolScale,m,h,c),l=c.symbolSize,g=a.get("symbolOffset"),b(g)&&(g=[d(g[0],l[0]),d(g[1],l[1])]),function(D,B,e,o,E,q,z,C,s,w,p,g){var c=p.categoryDim,b=p.valueDim,t=g.pxSign,n=Math.max(B[b.index]+C,0),v=n,u,a,j,l,k,y,h,r,i,x,A,m;o&&(u=Math.abs(s),a=af(D.get("symbolMargin"),"15%")+"",j=!1,a.lastIndexOf("!")===a.length-1&&(j=!0,a=a.slice(0,a.length-1)),a=d(a,B[b.index]),l=Math.max(n+2*a,0),k=j?0:2*a,y=tQ(o),h=y?o:yp((u+k)/l),l=n+2*(a=(u-h*n)/2/(j?h:h-1)),k=j?0:2*a,y||"fixed"===o||(h=w?yp((Math.abs(w)+k)/l):0),v=h*l-k,g.repeatTimes=h,g.symbolMargin=a),r=t*(v/2),i=g.pathPosition=[],i[c.index]=e[c.wh]/2,i[b.index]="start"===z?r:"end"===z?s-r:s/2,q&&(i[0]+=q[0],i[1]+=q[1]),x=g.bundlePosition=[],x[c.index]=e[c.xy],x[b.index]=e[b.xy],A=g.barRectShape=f({},e),A[b.wh]=t*Math.max(Math.abs(e[b.wh]),Math.abs(i[b.index]+r)),A[c.wh]=e[c.wh],m=g.clipShape={},m[c.xy]=-e[c.xy],m[c.wh]=p.ecSize[c.wh],m[b.xy]=0,m[b.wh]=e[b.wh]}(a,l,i,j,0,g,q,c.valueLineWidth,c.boundingLength,c.repeatCutLength,h,c),c}function oo(a,b){return a.toGlobalCoord(a.dataToCoord(a.scale.parse(b)))}function ya(c){var a=c.symbolPatternSize,b=aQ(c.symbolType,-a/2,-a/2,a,a,c.color);return b.attr({culling:!0}),"image"!==b.type&&b.setStyle({strokeNoScale:!0}),b}function yb(e,h,a,g){var k=e.__pictorialBundle,o=a.symbolSize,n=a.valueLineWidth,j=a.pathPosition,l=h.valueDim,d=a.repeatTimes||0,b=0,m=o[h.valueDim.index]+n+2*a.symbolMargin,c,f;for(fw(e,function(c){c.__pictorialAnimationIndex=b,c.__pictorialRepeatTimes=d,b<d?eG(c,null,i(b),a,g):eG(c,null,{scale:[0,0]},a,g,function(){k.remove(c)}),ow(c,a),b++});b<d;b++)c=ya(a),c.__pictorialAnimationIndex=b,c.__pictorialRepeatTimes=d,k.add(c),f=i(b),eG(c,{position:f.position,scale:[0,0]},{scale:f.scale,rotation:f.rotation},a,g),c.on("mouseover",p).on("mouseout",q),ow(c,a);function i(b){var c=j.slice(),e=a.pxSign,f=b;return("start"===a.symbolRepeatDirection?0<e:e<0)&&(f=d-1-b),c[l.index]=m*(f-d/2+.5)+j[l.index],{position:c,scale:a.symbolScale.slice(),rotation:a.rotation}}function p(){fw(e,function(a){a.trigger("emphasis")})}function q(){fw(e,function(a){a.trigger("normal")})}}function yc(c,f,a,d){var e=c.__pictorialBundle,b=c.__pictorialMainPath;b?eG(b,null,{position:a.pathPosition.slice(),scale:a.symbolScale.slice(),rotation:a.rotation},a,d):(b=c.__pictorialMainPath=ya(a),e.add(b),eG(b,{position:a.pathPosition.slice(),scale:[0,0],rotation:a.rotation},{scale:a.symbolScale.slice()},a,d),b.on("mouseover",function(){this.trigger("emphasis")}).on("mouseout",function(){this.trigger("normal")})),ow(b,a)}function yd(b,c,e){var d=f({},c.barRectShape),a=b.__pictorialBarRect;a?eG(a,null,{shape:d},c,e):(a=b.__pictorialBarRect=new y({z2:2,shape:d,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),b.add(a))}function ye(h,j,b,k){var a,d,c,e,i,g;b.symbolClip&&(a=h.__pictorialClipPath,d=f({},b.clipShape),c=j.valueDim,e=b.animationModel,i=b.dataIndex,a?p(a,{shape:d},e,i):(d[c.wh]=0,a=new y({shape:d}),h.__pictorialBundle.setClipPath(a),h.__pictorialClipPath=a,g={},g[c.wh]=b.clipShape[c.wh],bY[k?"updateProps":"initProps"](a,{shape:g},e,i)))}function yf(b,c){var a=b.getItemModel(c);return a.getAnimationDelayParams=zL,a.isAnimationEnabled=zK,a}function zL(a){return{index:a.__pictorialAnimationIndex,count:a.__pictorialRepeatTimes}}function zK(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function ow(b,c){b.off("emphasis").off("normal");var a=c.symbolScale.slice();c.hoverAnimation&&b.on("emphasis",function(){this.animateTo({scale:[1.1*a[0],1.1*a[1]]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:a.slice()},400,"elasticOut")})}function yj(g,c,b,d){var a=new e,f=new e;return a.add(f),(a.__pictorialBundle=f).attr("position",b.bundlePosition.slice()),b.symbolRepeat?yb(a,c,b):yc(a,0,b),yd(a,b,d),ye(a,c,b,d),a.__pictorialShapeStr=yl(g,b),a.__pictorialSymbolMeta=b,a}function yk(g,d,e,b){var f=b.__pictorialBarRect,c;f&&(f.style.text=null),c=[],fw(b,function(a){c.push(a)}),b.__pictorialMainPath&&c.push(b.__pictorialMainPath),b.__pictorialClipPath&&(e=null),a(c,function(a){p(a,{scale:[0,0]},e,d,function(){b.parent&&b.parent.remove(b)})}),g.setItemGraphicEl(d,null)}function yl(b,a){return[b.getItemVisual(a.dataIndex,"symbol")||"none",!!a.symbolRepeat,!!a.symbolClip].join(":")}function fw(b,c,d){a(b.__pictorialBundle.children(),function(a){a!==b.__pictorialBarRect&&c.call(d,a)})}function eG(b,d,a,c,e,f){d&&b.attr(d),c.symbolClip&&!e?a&&b.attr(a):a&&bY[e?"updateProps":"initProps"](b,a,c.animationModel,c.dataIndex,f)}function yo(d,e,a){var c=a.color,l=a.dataIndex,b=a.itemModel,j=b.getModel("itemStyle").getItemStyle(["color"]),k=b.getModel("emphasis.itemStyle").getItemStyle(),h=b.getShallow("cursor"),i,f;fw(d,function(b){b.setColor(c),b.setStyle(g({fill:c,opacity:a.opacity},j)),G(b,k),h&&(b.cursor=h),b.z2=a.z2}),i={},f=(e.valueDim.posDesc[+(0<a.boundingLength)],d.__pictorialBarRect),rc(f.style,i,b,c,e.seriesModel,l),G(f,i)}function yp(a){var b=Math.round(a);return Math.abs(a-b)<1e-4?b:Math.ceil(a)}N(j(pG,"pictorialBar")),H(cY("pictorialBar","roundRect"));function hV(a,b,c,d,e){Q.call(this,a,b,c),this.type=d||"value",this.position=e||"bottom",this.orient=null}function oE(a,b,c){this.dimension="single",this.dimensions=["single"],this._axis=null,this._rect,this._init(a,b,c),this.model=a}function oF(d,h){var k,i,a,e,g,b,c,j,f;return h=h||{},k=d.coordinateSystem,i=d.axis,a={},e=i.position,g=i.orient,b=k.getRect(),c=[b.x,b.x+b.width,b.y,b.y+b.height],j={horizontal:{top:c[2],bottom:c[3]},vertical:{left:c[0],right:c[1]}},a.position=["vertical"===g?j.vertical[e]:c[0],"horizontal"===g?j.horizontal[e]:c[3]],a.rotation=Math.PI/2*{horizontal:0,vertical:1}[g],a.labelDirection=a.tickDirection=a.nameDirection={top:-1,bottom:1,right:1,left:-1}[e],d.get("axisTick.inside")&&(a.tickDirection=-a.tickDirection),af(h.labelInside,d.get("axisLabel.inside"))&&(a.labelDirection=-a.labelDirection),f=h.rotate,null==f&&(f=d.get("axisLabel.rotate")),a.labelRotation="top"===e?-f:f,a.z2=1,a}hV.prototype={constructor:hV,model:null,isHorizontal:function(){var a=this.position;return"top"===a||"bottom"===a},pointToData:function(a,b){return this.coordinateSystem.pointToData(a,b)[0]},toGlobalCoord:null,toLocalCoord:null},D(hV,Q),aq.register("single",{create:function(a,b){var c=[];return a.eachComponent("singleAxis",function(e,f){var d=new oE(e,a,b);d.name="single_"+f,d.resize(e,b),e.coordinateSystem=d,c.push(d)}),a.eachSeries(function(b){if("singleAxis"===b.get("coordinateSystem")){var c=a.queryComponents({mainType:"singleAxis",index:b.get("singleAxisIndex"),id:b.get("singleAxisId")})[0];b.coordinateSystem=c&&c.coordinateSystem}}),c},dimensions:(oE.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:oE,_init:function(a,e,f){var c=this.dimension,b=new hV(c,eH(a),[0,0],a.get("type"),a.get("position")),d="category"===b.type;b.onBand=d&&a.get("boundaryGap"),b.inverse=a.get("inverse"),b.orient=a.get("orient"),(a.axis=b).model=a,(b.coordinateSystem=this)._axis=b},update:function(b,c){b.eachSeries(function(b){if(b.coordinateSystem===this){var c=b.getData();a(c.mapDimension(this.dimension,!0),function(a){this._axis.scale.unionExtentFromData(c,a)},this),cJ(this._axis.scale,this._axis.model)}},this)},resize:function(a,b){this._rect=V({left:a.get("left"),top:a.get("top"),right:a.get("right"),bottom:a.get("bottom"),width:a.get("width"),height:a.get("height")},{width:b.getWidth(),height:b.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var a=this._rect,b=this._axis,c=b.isHorizontal(),d=c?[0,a.width]:[0,a.height],e=b.reverse?1:0;b.setExtent(d[e],d[1-e]),this._updateAxisTransform(b,c?a.x:a.y)},_updateAxisTransform:function(a,b){var c=a.getExtent(),d=c[0]+c[1],e=a.isHorizontal();a.toGlobalCoord=e?function(a){return a+b}:function(a){return d-a+b},a.toLocalCoord=e?function(a){return a-b}:function(a){return d-a+b}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(a){var b=this.getRect(),c=this.getAxis();return"horizontal"===c.orient?c.contain(c.toLocalCoord(a[0]))&&a[1]>=b.y&&a[1]<=b.y+b.height:c.contain(c.toLocalCoord(a[1]))&&a[0]>=b.y&&a[0]<=b.y+b.height},pointToData:function(b){var a=this.getAxis();return[a.coordToData(a.toLocalCoord(b["horizontal"===a.orient?0:1]))]},dataToPoint:function(a){var c=this.getAxis(),b=this.getRect(),d=[],e="horizontal"===c.orient?0:1;return a instanceof Array&&(a=a[0]),d[e]=c.toGlobalCoord(c.dataToCoord(+a)),d[1-e]=0==e?b.y+b.height/2:b.x+b.width/2,d}}).dimensions}),zJ=["axisLine","axisTickLabel","axisName"],yu="splitLine",zC=aE.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(b,e,f,g){var d=this.group,h,c;d.removeAll(),h=oF(b),c=new ax(b,h),a(zJ,c.add,c),d.add(c.getGroup()),b.get(yu+".show")&&this["_"+yu](b),zC.superCall(this,"render",b,e,f,g)},_splitLine:function(k){var g=k.axis,n,j,i,b,e,p,f,o,m,c,d,a,h,l;if(!g.scale.isBlank()){n=k.getModel("splitLine"),j=n.getModel("lineStyle"),i=j.get("width"),b=j.get("color"),b=b instanceof Array?b:[b];for(e=k.coordinateSystem.getRect(),p=g.isHorizontal(),f=[],o=0,m=g.getTicksCoords({tickModel:n}),c=[],d=[],a=0;a<m.length;++a)h=g.toGlobalCoord(m[a].coord),p?(c[0]=h,c[1]=e.y,d[0]=h,d[1]=e.y+e.height):(c[0]=e.x,c[1]=h,d[0]=e.x+e.width,d[1]=h),l=o++%b.length,f[l]=f[l]||[],f[l].push(new av({subPixelOptimize:!0,shape:{x1:c[0],y1:c[1],x2:d[0],y2:d[1]},style:{lineWidth:i},silent:!0}));for(a=0;a<f.length;++a)this.group.add(bS(f[a],{style:{stroke:b[a%b.length],lineDash:j.getLineDash(i),lineWidth:i},silent:!0}))}}}),yw=x.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}}),l(yw.prototype,dI),eQ("single",yw,function(b,a){return a.type||(a.data?"category":"value")},{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});function yx(k,l){var d,i=[],j=k.seriesIndex,g,a,f,h,e;return null==j||!(d=l.getSeriesByIndex(j))?{point:[]}:(g=d.getData(),a=iM(g,k),null==a||a<0||b(a))?{point:[]}:(f=g.getItemGraphicEl(a),h=d.coordinateSystem,d.getTooltipPosition?i=d.getTooltipPosition(a)||[]:h&&h.dataToPoint?i=h.dataToPoint(g.getValues(c(h.dimensions,function(a){return g.mapDimension(a)}),a,!0))||[]:f&&(e=f.getBoundingRect().clone(),e.applyTransform(f.transform),i=[e.x+e.width/2,e.y+e.height/2]),{point:i,el:f})}bt=a,yz=j,yA=au();function yB(a,b,i,j,d){var e=a.axis,g,h,c;!e.scale.isBlank()&&e.containData(b)&&(a.involveSeries?(g=function(a,e){var b=e.axis,h=b.dim,f=a,c=[],d=Number.MAX_VALUE,g=-1;return bt(e.seriesModels,function(e,o){var i,j,l=e.getData().mapDimension(h,!0),n,m,k;if(e.getAxisTooltipData)n=e.getAxisTooltipData(l,a,b),j=n.dataIndices,i=n.nestestValue;else{if(!(j=e.getData().indicesOfNearest(l[0],a,"category"===b.type?.5:null)).length)return;i=e.getData().get(l[0],j[0])}null!=i&&isFinite(i)&&(m=a-i,k=Math.abs(m),k<=d&&((k<d||0<=m&&g<0)&&(d=k,g=m,f=i,c.length=0),bt(j,function(a){c.push({seriesIndex:e.seriesIndex,dataIndexInside:a,dataIndex:e.getData().getRawIndex(a)})})))}),{payloadBatch:c,snapToValue:f}}(b,a),h=g.payloadBatch,c=g.snapToValue,h[0]&&null==d.seriesIndex&&f(d,h[0]),!j&&a.snap&&e.containData(c)&&null!=c&&(b=c),i.showPointer(a,b,h,d),i.showTooltip(a,g,c)):i.showPointer(a,b))}function zw(a,b,c,d){a[b.key]={value:c,payloadBatch:d}}function zv(d,b,j,k){var i=j.payloadBatch,g=b.axis,e=g.model,h=b.axisPointerModel,a,f,c;b.triggerTooltip&&i.length&&(a=b.coordSys.model,f=gE(a),c=d.map[f],c||(c=d.map[f]={coordSysId:a.id,coordSysIndex:a.componentIndex,coordSysType:a.type,coordSysMainType:a.mainType,dataByAxis:[]},d.list.push(c)),c.dataByAxis.push({axisDim:g.dim,axisIndex:e.componentIndex,axisType:e.type,axisId:e.id,value:k,valueLabelOpt:{precision:h.get("label.precision"),formatter:h.get("label.formatter")},seriesDataIndices:i.slice()}))}function yE(d){var b=d.axis.model,a={},c=a.axisDim=d.axis.dim;return a.axisIndex=a[c+"AxisIndex"]=b.componentIndex,a.axisName=a[c+"AxisName"]=b.name,a.axisId=a[c+"AxisId"]=b.id,a}function iu(a){return!a||null==a[0]||isNaN(a[0])||null==a[1]||isNaN(a[1])}aN({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}}),cd=au(),zu=a;function yI(b,c,d){if(!t.node){var a=c.getZr();cd(a).records||(cd(a).records={}),function(a,c){if(cd(a).initialized)return;function b(b,d){a.on(b,function(e){var b=function(c){var a={showTip:[],hideTip:[]},b=function(d){var e=a[d.type];e?e.push(d):(d.dispatchAction=b,c.dispatchAction(d))};return{dispatchAction:b,pendings:a}}(c);zu(cd(a).records,function(a){a&&d(a,e,b.dispatchAction)}),function(b,e){var a,c=b.showTip.length,d=b.hideTip.length;c?a=b.showTip[c-1]:d&&(a=b.hideTip[d-1]),a&&(a.dispatchAction=null,e.dispatchAction(a))}(b.pendings,c)})}cd(a).initialized=!0,b("click",j(yK,"click")),b("mousemove",j(yK,"mousemove")),b("globalout",zt)}(a,c),(cd(a).records[b]||(cd(a).records[b]={})).handler=d}}function zt(a,c,b){a.handler("leave",null,b)}function yK(a,b,c,d){b.handler(a,c,d)}function oL(a,c){if(!t.node){var b=c.getZr();(cd(b).records||{})[a]&&(cd(b).records[a]=null)}}yM=$({type:"axisPointer",render:function(c,d,e){var a=d.getComponent("tooltip"),b=c.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";yI("axisPointer",e,function(c,a,d){"none"!==b&&("leave"===c||0<=b.indexOf(c))&&d({type:"updateAxisPointer",currTrigger:c,x:a&&a.offsetX,y:a&&a.offsetY})})},remove:function(b,a){oL(a.getZr(),"axisPointer"),yM.superApply(this._model,"remove",arguments)},dispose:function(b,a){oL("axisPointer",a),yM.superApply(this._model,"dispose",arguments)}}),dN=au(),yO=i,oP=k;function fK(){}function yR(d,e,b,c){!function e(b,c){{if(m(b)&&m(c)){var d=!0;return a(c,function(a,c){d=d&&e(b[c],a)}),!!d}return b===c}}(dN(b).lastProp,c)&&(dN(b).lastProp=c,e?p(b,c,d):(b.stopAnimation(),b.attr(c)))}function yS(a,b){a[b.get("label.show")?"show":"hide"]()}function oX(a){return{position:a.position.slice(),rotation:a.rotation||0}}function yU(a,b,e){var c=b.get("z"),d=b.get("zlevel");a&&a.traverse(function(a){"group"!==a.type&&(null!=c&&(a.z=c),null!=d&&(a.zlevel=d),a.silent=e)})}function oY(c){var a,b=c.get("type"),d=c.getModel(b+"Style");return"line"===b?(a=d.getLineStyle()).fill=null:"shadow"===b&&((a=d.getAreaStyle()).stroke=null),a}function yW(p,i,d,o,h){var l=yX(d.get("value"),i.axis,i.ecModel,d.get("seriesDataIndices"),{precision:d.get("label.precision"),formatter:d.get("label.formatter")}),a=d.getModel("label"),c=dJ(a.get("padding")||0),j=a.getFont(),k=bn(l,j),b=h.position,f=k.width+c[1]+c[3],e=k.height+c[0]+c[2],n=h.align,m,g;"right"===n&&(b[0]-=f),"center"===n&&(b[0]-=f/2),m=h.verticalAlign,"bottom"===m&&(b[1]-=e),"middle"===m&&(b[1]-=e/2),function(a,b,c,d){var e=d.getWidth(),f=d.getHeight();a[0]=Math.min(a[0]+b,e)-b,a[1]=Math.min(a[1]+c,f)-c,a[0]=Math.max(a[0],0),a[1]=Math.max(a[1],0)}(b,f,e,o),g=a.get("backgroundColor"),g&&"auto"!==g||(g=i.get("axisLine.lineStyle.color")),p.label={shape:{x:0,y:0,width:f,height:e,r:a.get("borderRadius")},position:b.slice(),style:{text:l,textFont:j,textFill:a.getTextColor(),textPosition:"inside",textPadding:c,fill:g,stroke:a.get("borderColor")||"transparent",lineWidth:a.get("borderWidth")||0,shadowBlur:a.get("shadowBlur"),shadowColor:a.get("shadowColor"),shadowOffsetX:a.get("shadowOffsetX"),shadowOffsetY:a.get("shadowOffsetY")},z2:10}}function yX(e,c,h,i,g){var d,b,f;return e=c.scale.parse(e),d=c.scale.getLabel(e,{precision:g.precision}),b=g.formatter,b&&(f={value:oQ(c,e),axisDimension:c.dim,axisIndex:c.index,seriesData:[]},a(i,function(a){var b=h.getSeriesByIndex(a.seriesIndex),d=a.dataIndexInside,c=b&&b.getDataParams(d);c&&f.seriesData.push(c)}),E(b)?d=b.replace("{value}",d):ag(b)&&(d=b(f))),d}function pa(c,d,a){var b=aL();return cc(b,b,a.rotation),be(b,b,a.position),bH([c.dataToCoord(d),(a.labelOffset||0)+(a.labelDirection||1)*(a.labelMargin||0)],b)}function yZ(g,e,a,c,d,f){var b=ax.innerTextLayout(a.rotation,0,a.labelDirection);a.labelMargin=d.get("label.margin"),yW(e,c,d,f,{position:pa(c.axis,g,a),align:b.textAlign,verticalAlign:b.textVerticalAlign})}function pb(b,c,a){return{x1:b[a=a||0],y1:b[1-a],x2:c[a],y2:c[1-a]}}function y$(b,c,a){return{x:b[a=a||0],y:b[1-a],width:c[a],height:c[1-a]}}function za(a,b,c,d,e,f){return{cx:a,cy:b,r0:c,r:d,startAngle:e,endAngle:f,clockwise:!0}}fa((fK.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(d,b,i,m){var f=b.get("value"),g=b.get("status"),a,h,c,k,n,l;if(this._axisModel=d,this._axisPointerModel=b,this._api=i,m||this._lastValue!==f||this._lastStatus!==g){if(this._lastValue=f,this._lastStatus=g,a=this._group,h=this._handle,!g||"hide"===g)return a&&a.hide(),void(h&&h.hide());a&&a.show(),h&&h.show(),c={},this.makeElOption(c,f,d,b,i),k=c.graphicKey,k!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=k,n=this._moveAnimation=this.determineAnimation(d,b),a?(l=j(yR,b,n),this.updatePointerEl(a,c,l,b),this.updateLabelEl(a,c,l,b)):(a=this._group=new e,this.createPointerEl(a,c,d,b),this.createLabelEl(a,c,d,b),i.getZr().add(a)),yU(a,b,!0),this._renderHandle(f)}},remove:function(a){this.clear(a)},dispose:function(a){this.clear(a)},determineAnimation:function(c,d){var a=d.get("animation"),b=c.axis,e="category"===b.type,f=d.get("snap"),g,i,h;return!(!f&&!e)&&("auto"!==a&&null!=a?!0===a:!!(g=this.animationThreshold,e&&b.getBandWidth()>g)||(!!f&&(i=mA(c).seriesDataCount,h=b.getExtent(),Math.abs(h[0]-h[1])/i>g)))},makeElOption:function(a,b,c,d,e){},createPointerEl:function(a,b,e,f){var c=b.pointer,d;c&&(d=dN(a).pointerEl=new bY[c.type](yO(b.pointer)),a.add(d))},createLabelEl:function(a,b,e,d){if(b.label){var c=dN(a).labelEl=new y(yO(b.label));a.add(c),yS(c,d)}},updatePointerEl:function(c,a,d){var b=dN(c).pointerEl;b&&a.pointer&&(b.setStyle(a.pointer.style),d(b,{shape:a.pointer.shape}))},updateLabelEl:function(c,b,d,e){var a=dN(c).labelEl;a&&(a.setStyle(b.label.style),d(a,{shape:b.label.shape,position:b.label.position}),yS(a,e))},_renderHandle:function(i){var h,e,g,a,d,f,c;if(!this._dragging&&this.updateHandleTransform){if(e=this._axisPointerModel,g=this._api.getZr(),a=this._handle,d=e.getModel("handle"),f=e.get("status"),!d.get("show")||!f||"hide"===f)return a&&g.remove(a),void(this._handle=null);this._handle||(h=!0,a=this._handle=ff(d.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(a){cw(a.event)},onmousedown:oP(this._onHandleDragMove,this,0,0),drift:oP(this._onHandleDragMove,this),ondragend:oP(this._onHandleDragEnd,this)}),g.add(a)),yU(a,e,!1),a.setStyle(d.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"])),c=d.get("size"),b(c)||(c=[c,c]),a.attr("scale",[c[0]/2,c[1]/2]),gB(this,"_doDispatchAxisPointer",d.get("throttle")||0,"fixRate"),this._moveHandleToValue(i,h)}},_moveHandleToValue:function(a,b){yR(this._axisPointerModel,!b&&this._moveAnimation,this._handle,oX(this.getHandleTransform(a,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(c,d){var a=this._handle,b;a&&(this._dragging=!0,b=this.updateHandleTransform(oX(a),[c,d],this._axisModel,this._axisPointerModel),this._payloadInfo=b,a.stopAnimation(),a.attr(oX(b)),dN(a).lastProp=null,this._doDispatchAxisPointer())},_doDispatchAxisPointer:function(){if(this._handle){var a=this._payloadInfo,b=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:a.cursorPoint[0],y:a.cursorPoint[1],tooltipOption:a.tooltipOption,axesInfo:[{axisDim:b.axis.dim,axisIndex:b.componentIndex}]})}},_onHandleDragEnd:function(b){if(this._dragging=!1,this._handle){var a=this._axisPointerModel.get("value");this._moveHandleToValue(a),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(d){this._lastValue=null,this._lastStatus=null;var a=d.getZr(),b=this._group,c=this._handle;a&&b&&(this._lastGraphicKey=null,b&&a.remove(b),c&&a.remove(c),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(b,c,a){return{x:b[a=a||0],y:b[1-a],width:c[a],height:c[1-a]}}}).constructor=fK),zs=fK.extend({makeElOption:function(b,h,d,e,i){var a=d.axis,g=a.grid,c=e.get("type"),j=zc(g,a).getOtherAxis(a).getGlobalExtent(),k=a.toGlobalCoord(a.dataToCoord(h,!0)),l,f;c&&"none"!==c&&(l=oY(e),f=zn[c](a,k,j),f.style=l,b.graphicKey=f.type,b.pointer=f),yZ(h,b,mq(g.model,d),d,e,i)},getHandleTransform:function(c,b,d){var a=mq(b.axis.grid.model,b,{labelInside:!1});return a.labelMargin=d.get("handle.margin"),{position:pa(b.axis,c,a),rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(d,i,j,l){var c=j.axis,k=c.grid,g=c.getGlobalExtent(!0),e=zc(k,c).getOtherAxis(c).getGlobalExtent(),a="x"===c.dim?0:1,b=d.position,h,f;return b[a]+=i[a],b[a]=Math.min(g[1],b[a]),b[a]=Math.max(g[0],b[a]),h=(e[1]+e[0])/2,f=[h,h],f[a]=b[a],{position:b,rotation:d.rotation,cursorPoint:f,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][a]}}});function zc(c,a){var b={};return b[a.dim+"AxisIndex"]=a.index,c.getCartesian(b)}zn={line:function(c,a,b){return{type:"Line",subPixelOptimize:!0,shape:pb([a,b[0]],[a,b[1]],ze(c))}},shadow:function(b,d,a){var c=Math.max(1,b.getBandWidth()),e=a[1]-a[0];return{type:"Rect",shape:y$([d-c/2,a[0]],[c,e],ze(b))}}};function ze(a){return"x"===a.dim?0:1}aE.registerAxisPointerClass("CartesianAxisPointer",zs),aj(function(a){if(a){a.axisPointer&&0!==a.axisPointer.length||(a.axisPointer={});var c=a.axisPointer.link;c&&!b(c)&&(a.axisPointer.link=[c])}}),aH(bz.PROCESSOR.STATISTIC,function(a,b){a.getComponent("axisPointer").coordSysAxesInfo=aca(a,b)}),u({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},function(c,o,h){var s=c.currTrigger,b=[c.x,c.y],i=c,r=c.dispatchAction||k(h.dispatchAction,h),g=o.getComponent("axisPointer").coordSysAxesInfo,j,l,f,q,d,e,m,n,p;if(g)return iu(b)&&(b=yx({seriesIndex:i.seriesIndex,dataIndex:i.dataIndex},o).point),j=iu(b),l=i.axesInfo,f=g.axesInfo,q="leave"===s||iu(b),d={},e={},m={list:[],map:{}},n={showPointer:yz(zw,e),showTooltip:yz(zv,m)},bt(g.coordSysMap,function(a,c){var e=j||a.containPoint(b);bt(g.coordSysAxesInfo[c],function(c,h){var g=c.axis,f=function(c,d){for(var a=0,b;a<(c||[]).length;a++)if(b=c[a],d.axis.dim===b.axisDim&&d.axis.model.componentIndex===b.axisIndex)return b}(l,c),a;!q&&e&&(!l||f)&&(a=f&&f.value,null!=a||j||(a=g.pointToData(b)),null!=a&&yB(c,a,n,!1,d))})}),p={},bt(f,function(a,c){var b=a.linkGroup;b&&!e[c]&&bt(b.axesInfo,function(d,g){var f=e[g],c;d!==a&&f&&(c=f.value,b.mapper&&(c=a.axis.scale.parse(b.mapper(c,yE(d),yE(a)))),p[a.key]=c)})}),bt(p,function(a,b){yB(f[b],a,n,!0,d)}),function(a,b,c){var d=c.axesInfo=[];bt(b,function(c,f){var b=c.axisPointerModel.option,e=a[f];e?(c.useHandle||(b.status="show"),b.value=e.value,b.seriesDataIndices=(e.payloadBatch||[]).slice()):c.useHandle||(b.status="hide"),"show"===b.status&&d.push({axisDim:c.axis.dim,axisIndex:c.axis.model.componentIndex,value:b.value})})}(e,f,d),function(a,b,d,e){if(iu(b)||!a.list.length)return e({type:"hideTip"});var c=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};e({type:"showTip",escapeConnect:!0,x:b[0],y:b[1],tooltipOption:d.tooltipOption,position:d.position,dataIndexInside:c.dataIndexInside,dataIndex:c.dataIndex,seriesIndex:c.seriesIndex,dataByCoordSys:a.list})}(m,b,c,r),function(i,j,d){var f=d.getZr(),g="axisPointerLastHighlights",h=yA(f)[g]||{},b=yA(f)[g]={},c,e;bt(i,function(c,d){var a=c.axisPointerModel.option;"show"===a.status&&bt(a.seriesDataIndices,function(a){var c=a.seriesIndex+" | "+a.dataIndex;b[c]=a})}),c=[],e=[],a(h,function(a,c){b[c]||e.push(a)}),a(b,function(a,b){h[b]||c.push(a)}),e.length&&d.dispatchAction({type:"downplay",escapeConnect:!0,batch:e}),c.length&&d.dispatchAction({type:"highlight",escapeConnect:!0,batch:c})}(f,0,h),d}),zf=["x","y"],zm=["width","height"],zk=fK.extend({makeElOption:function(a,g,b,c,i){var d=b.axis,h=d.coordinateSystem,j=mf(h,1-hw(d)),k=h.dataToPoint(g)[0],e=c.get("type"),l,f;e&&"none"!==e&&(l=oY(c),f=zj[e](d,k,j),f.style=l,a.graphicKey=f.type,a.pointer=f),yZ(g,a,oF(b),b,c,i)},getHandleTransform:function(c,b,d){var a=oF(b,{labelInside:!1});return a.labelMargin=d.get("handle.margin"),{position:pa(b.axis,c,a),rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(g,j,k,l){var e=k.axis,f=e.coordinateSystem,a=hw(e),c=mf(f,a),b=g.position,d,h,i;return b[a]+=j[a],b[a]=Math.min(c[1],b[a]),b[a]=Math.max(c[0],b[a]),d=mf(f,1-a),h=(d[1]+d[0])/2,i=[h,h],i[a]=b[a],{position:b,rotation:g.rotation,cursorPoint:i,tooltipOption:{verticalAlign:"middle"}}}}),zj={line:function(c,a,b){return{type:"Line",subPixelOptimize:!0,shape:pb([a,b[0]],[a,b[1]],hw(c))}},shadow:function(b,d,a){var c=b.getBandWidth(),e=a[1]-a[0];return{type:"Rect",shape:y$([d-c/2,a[0]],[c,e],hw(b))}}};function hw(a){return a.isHorizontal()?0:1}function mf(c,a){var b=c.getRect();return[b[zf[a]],b[zf[a]]+b[zm[a]]]}aE.registerAxisPointerClass("SingleAxisPointer",zk),$({type:"single"}),zl=M.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(a){zl.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()}},fixData:function(b){var d=b.length,p=lS(b,function(a){return a[2]}),a=[],j,h,g,e,k,c,n,i,l,o,m,f;p.buckets.each(function(b,c){a.push({name:c,dataList:b})});for(j=a.length,h=-1,g=-1,e=0;e<j;++e)k=a[e].dataList.length,h<k&&(h=k,g=e);for(c=0;c<j;++c)if(c!==g)for(n=a[c].name,i=0;i<h;++i){for(l=a[g].dataList[i][0],o=a[c].dataList.length,m=-1,f=0;f<o;++f)if(a[c].dataList[f][0]===l){m=f;break}-1===m&&(b[d]=[],b[d][0]=l,b[d][1]=0,b[d][2]=n,d++)}return b},getInitialData:function(h,i){for(var j=i.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),f=W(h.data,function(a){return void 0!==a[2]}),a=this.fixData(f||[]),g=[],c=this.nameMap=n(),d=0,b=0,k,e;b<a.length;++b)g.push(a[b][2]),c.get(a[b][2])||(c.set(a[b][2],d),d++);return k=ed(a,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:ic(j)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),e=new ab(k,this),e.initData(a),e},getLayerSeries:function(){for(var a=this.getData(),f=a.count(),c=[],b=0,d,g,e;b<f;++b)c[b]=b;return d=a.mapDimension("single"),g=lS(c,function(b){return a.get("name",b)}),e=[],g.buckets.each(function(b,c){b.sort(function(b,c){return a.get(d,b)-a.get(d,c)}),e.push({name:c,indices:b})}),e},getAxisTooltipData:function(c,o,p){var g,l,d,i,n,a,f,h,m,e,j,k;b(c)||(c=c?[c]:[]);for(g,l=this.getData(),d=this.getLayerSeries(),i=[],n=d.length,a=0;a<n;++a){for(f=Number.MAX_VALUE,h=-1,m=d[a].indices.length,e=0;e<m;++e)j=l.get(c[0],d[a].indices[e]),k=Math.abs(j-o),k<=f&&(g=j,f=k,h=d[a].indices[e]);i.push(h)}return{dataIndices:i,nestestValue:g}},formatTooltip:function(c){var b=this.getData(),d=b.getName(c),a=b.get(b.mapDimension("value"),c);return!isNaN(a)&&null!=a||(a="-"),K(d+" : "+a)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}}),ay({type:"themeRiver",init:function(){this._layers=[]},render:function(a,o,r){var b=a.getData(),c=this.group,d=a.getLayerSeries(),i=b.getLayout("layoutInfo"),l=i.rect,m=i.boundaryGap,n,g;function j(a){return a.name}c.attr("position",[0,l.y+m[0]]),n=new cb(this._layersSeries||[],d,j,j),g={};function h(v,n,D){var B=this._layers,A,h,m,o,r,j,k,u,z,w,C,l,t,s,x,i,E,F;if("remove"!==v){for(A,h,m,o=[],r=[],j=d[n].indices,k=0;k<j.length;k++)u=b.getItemLayout(j[k]),z=u.x,w=u.y0,C=u.y,o.push([z,w]),r.push([z,w+C]),A=b.getItemVisual(j[k],"color");l=b.getItemLayout(j[0]),t=b.getItemModel(j[k-1]),s=t.getModel("label"),x=s.get("margin"),"add"===v?(i=g[n]=new e,h=new p$({shape:{points:o,stackedOnPoints:r,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),m=new q({style:{x:l.x-x,y:l.y0+l.y/2}}),i.add(h),i.add(m),c.add(i),h.setClipPath(function(a,c,d){var b=new y({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return ao(b,{shape:{width:a.width+20,height:a.height+20}},c,d),b}(h.getBoundingRect(),a,function(){h.removeClipPath()}))):(i=B[D],h=i.childAt(0),m=i.childAt(1),c.add(i),g[n]=i,p(h,{shape:{points:o,stackedOnPoints:r}},a),p(m,{style:{x:l.x-x,y:l.y0+l.y/2}},a)),E=t.getModel("emphasis.itemStyle"),F=t.getModel("itemStyle"),O(m.style,s,{text:s.get("show")?a.getFormattedLabel(j[k-1],"normal")||b.getName(j[k-1]):null,textVerticalAlign:"middle"}),h.setStyle(f({fill:A},F.getItemStyle(["color"]))),G(h,E.getItemStyle())}else c.remove(B[n])}n.add(k(h,this,"add")).update(k(h,this,"update")).remove(k(h,this,"remove")).execute(),this._layersSeries=d,this._layers=g},dispose:function(){}});function zg(e,k,q){var h,m,f,p,j,d,i,l,g,n,o,a,b;if(e.count())for(h,m=k.coordinateSystem,f=k.getLayerSeries(),p=e.mapDimension("single"),j=e.mapDimension("value"),d=c(f,function(a){return c(a.indices,function(a){var b=m.dataToPoint(e.get(p,a));return b[1]=e.get(j,a),b})}),i=function(e){for(var m=e.length,k=e[0].length,j=[],f=[],a=0,g={},h=0,i,d,c,b,l;h<k;++h){for(i=0,d=0;i<m;++i)d+=e[i][h][1];a<d&&(a=d),j.push(d)}for(c=0;c<k;++c)f[c]=(a-j[c])/2;for(b=a=0;b<k;++b)l=j[b]+f[b],a<l&&(a=l);return g.y0=f,g.max=a,g}(d),l=i.y0,g=q/i.max,n=f.length,o=f[0].indices.length,a=0;a<o;++a){h=l[a]*g,e.setItemLayout(f[0].indices[a],{layerIndex:0,x:d[0][a][0],y0:h,y:d[0][a][1]*g});for(b=1;b<n;++b)h+=d[b-1][a][1]*g,e.setItemLayout(f[b].indices[a],{layerIndex:b,x:d[b][a][0],y0:h,y:d[b][a][1]*g})}}N(function(a,b){a.eachSeriesByType("themeRiver",function(c){var e=c.getData(),g=c.coordinateSystem,f={},b=g.getRect(),a,h;f.rect=b,a=c.get("boundaryGap"),h=g.getAxis(),(f.boundaryGap=a,"horizontal"===h.orient)?(a[0]=d(a[0],b.height),a[1]=d(a[1],b.height),zg(e,c,b.height-a[0]-a[1])):(a[0]=d(a[0],b.width),a[1]=d(a[1],b.width),zg(e,c,b.width-a[0]-a[1])),e.setLayout("layoutInfo",f)})}),H(function(a){a.eachSeriesByType("themeRiver",function(a){var b=a.getData(),c=a.getRawData(),d=a.get("color"),e=n();b.each(function(a){e.set(b.getRawIndex(a),a)}),c.each(function(f){var i=c.getName(f),g=d[(a.nameMap.get(i)-1)%d.length],h;c.setItemVisual(f,"color",g),h=e.get(f),null!=h&&b.setItemVisual(h,"color",g)})})}),aH(fs("themeRiver")),M.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(c,g){var d={name:c.name,children:c.data},f,e;return!function f(d){var e=0,c;a(d.children,function(c){f(c);var a=c.value;b(a)&&(a=a[0]),e+=a}),c=d.value,b(c)&&(c=c[0]),null!=c&&!isNaN(c)||(c=e),c<0&&(c=0),b(d.value)?d.value[0]=c:d.value=c}(d),f=c.levels||[],e={},e.levels=f,dy.createTree(d,this,e).data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(b){var a=M.prototype.getDataParams.apply(this,arguments),c=this.getData().tree.getNodeByDataIndex(b);return a.treePathInfo=jJ(c,this),a},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0,emphasis:{}},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1,emphasis:{},highlight:{opacity:1},downplay:{opacity:.9}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(a){a?this._viewRoot=a:a=this._viewRoot;var b=this.getRawData().tree.root;a&&(a===b||b.contains(a))||(this._viewRoot=b)}}),zd="none",zo="ancestor",zp="self",zq=2,zr=4;function jp(c,d,h){var b,a;e.call(this),b=new bC({z2:zq}),b.seriesIndex=d.seriesIndex,a=new q({z2:zr,silent:c.getModel("label").get("silent")});function f(){a.ignore=a.hoverIgnore}function g(){a.ignore=a.normalIgnore}this.add(b),this.add(a),this.updateData(!0,c,"normal",d,h),this.on("emphasis",f).on("normal",g).on("mouseover",f).on("mouseout",g)}dC=jp.prototype,dC.updateData=function(q,d,n,c,k){var a,h,i,e,j,b,o,m,r;(this.node=d).piece=this,c=c||this._seriesModel,k=k||this._ecModel,a=this.childAt(0),a.dataIndex=d.dataIndex,h=d.getModel(),i=d.getLayout(),e=f({},i),e.label=null,j=function(a,g,c){var d=a.getVisual("color"),e=a.getVisual("visualMeta"),b,f;e&&0!==e.length||(d=null),b=a.getModel("itemStyle").get("color");{if(b)return b;if(d)return d;if(0===a.depth)return c.option.color[0];f=c.option.color.length,b=c.option.color[function(b){for(var a=b;1<a.depth;)a=a.parentNode;return v(b.getAncestors()[0].children,a)}(a)%f]}return b}(d,0,k),!function(a,b,c){b.getData().setItemVisual(a.dataIndex,"color",c)}(d,c,j),o=h.getModel("itemStyle").getItemStyle(),"normal"===n?b=o:b=l(h.getModel(n+".itemStyle").getItemStyle(),o),b=g({lineJoin:"bevel",fill:b.fill||j},b),q?(a.setShape(e),a.shape.r=i.r0,p(a,{shape:{r:i.r}},c,d.dataIndex),a.useStyle(b)):"object"==typeof b.fill&&b.fill.type||"object"==typeof a.style.fill&&a.style.fill.type?(p(a,{shape:e},c),a.useStyle(b)):p(a,{shape:e,style:b},c),this._updateLabel(c,j,n),m=h.getShallow("cursor"),(m&&a.attr("cursor",m),q)&&(r=c.getShallow("highlightPolicy"),this._initEvents(a,d,c,r)),this._seriesModel=c||this._seriesModel,this._ecModel=k||this._ecModel},dC.onEmphasis=function(a){var b=this;this.node.hostTree.root.eachNode(function(c){c.piece&&(b.node===c?c.piece.updateData(!1,c,"emphasis"):function(a,b,c){return c!==zd&&(c===zp?a===b:c===zo?a===b||a.isAncestorOf(b):a===b||a.isDescendantOf(b))}(c,b.node,a)?c.piece.childAt(0).trigger("highlight"):a!==zd&&c.piece.childAt(0).trigger("downplay"))})},dC.onNormal=function(){this.node.hostTree.root.eachNode(function(a){a.piece&&a.piece.updateData(!1,a,"normal")})},dC.onHighlight=function(){this.updateData(!1,this.node,"highlight")},dC.onDownplay=function(){this.updateData(!1,this.node,"downplay")},dC._updateLabel=function(x,w,k){var n=this.node.getModel(),l=n.getModel("label"),m="normal"===k||"emphasis"===k?l:n.getModel(k+".label"),v=n.getModel("emphasis.label"),i=af(x.getFormattedLabel(this.node.dataIndex,k,null,null,"label"),this.node.name),a,f,s,h,g,d,r,p,q,o,b,t,u,j,c;!1===e("show")&&(i=""),a=this.node.getLayout(),f=m.get("minAngle"),null==f&&(f=l.get("minAngle")),f=f/180*Math.PI,s=a.endAngle-a.startAngle,null!=f&&Math.abs(s)<f&&(i=""),h=this.childAt(1),aI(h.style,h.hoverStyle||{},l,v,{defaultText:m.getShallow("show")?i:null,autoColor:w,useInsideStyle:!0}),d=(a.startAngle+a.endAngle)/2,r=Math.cos(d),p=Math.sin(d),q=e("position"),o=e("distance")||0,b=e("align"),"outside"===q?(g=a.r+o,b=d>Math.PI/2?"right":"left"):b&&"center"!==b?"left"===b?(g=a.r0+o,d>Math.PI/2&&(b="right")):"right"===b&&(g=a.r-o,d>Math.PI/2&&(b="left")):(g=(a.r+a.r0)/2,b="center"),h.attr("style",{text:i,textAlign:b,textVerticalAlign:e("verticalAlign")||"middle",opacity:e("opacity")}),t=g*r+a.cx,u=g*p+a.cy,h.attr("position",[t,u]),j=e("rotate"),c=0;function e(a){var b=m.get(a);return null==b?l.get(a):b}"radial"===j?(c=-d)<-Math.PI/2&&(c+=Math.PI):"tangential"===j?(c=Math.PI/2-d)>Math.PI/2?c-=Math.PI:c<-Math.PI/2&&(c+=Math.PI):"number"==typeof j&&(c=j*Math.PI/180),h.attr("rotation",c)},dC._initEvents=function(d,g,e,f){d.off("mouseover").off("mouseout").off("emphasis").off("normal");function b(){a.onEmphasis(f)}function c(){a.onNormal()}var a=this;e.isAnimationEnabled()&&d.on("mouseover",b).on("mouseout",c).on("emphasis",b).on("normal",c).on("downplay",function(){a.onDownplay()}).on("highlight",function(){a.onHighlight()})},D(jp,e),ae.extend({type:"sunburst",init:function(){},render:function(b,e,l,c){var a=this,h,d,k,f,m,i,n,o,g;this.seriesModel=b,this.api=l,this.ecModel=e,h=b.getData(),d=h.tree.root,k=b.getViewRoot(),f=this.group,m=b.get("renderLabelForZeroData"),i=[],k.eachNode(function(a){i.push(a)}),n=this._oldChildren||[],(function(a,c){if(0===a.length&&0===c.length)return;function i(a){return a.getId()}function g(g,i){!function(a,c){if(m||!a||a.getValue()||(a=null),a!==d&&c!==d)if(c&&c.piece)a?(c.piece.updateData(!1,a,"normal",b,e),h.setItemGraphicEl(a.dataIndex,c.piece)):function(a){if(!a)return;a.piece&&(f.remove(a.piece),a.piece=null)}(c);else if(a){var g=new jp(a,b,e);f.add(g),h.setItemGraphicEl(a.dataIndex,g)}}(null==g?null:a[g],null==i?null:c[i])}new cb(c,a,i,i).add(g).update(g).remove(j(g,null)).execute()}(i,n),function(d,c){if(0<c.depth){a.virtualPiece?a.virtualPiece.updateData(!1,d,"normal",b,e):(a.virtualPiece=new jp(d,b,e),f.add(a.virtualPiece)),c.piece._onclickEvent&&c.piece.off("click",c.piece._onclickEvent);var g=function(b){a._rootToNode(c.parentNode)};c.piece._onclickEvent=g,a.virtualPiece.on("click",g)}else a.virtualPiece&&(f.remove(a.virtualPiece),a.virtualPiece=null)}(d,k),c&&c.highlight&&c.highlight.piece)?(o=b.getShallow("highlightPolicy"),c.highlight.piece.onEmphasis(o)):c&&c.unhighlight&&(g=this.virtualPiece,!g&&d.children.length&&(g=d.children[0].piece),g&&g.onNormal()),this._initEvents(),this._oldChildren=i},dispose:function(){},_initEvents:function(){function a(c){var a=!1;b.seriesModel.getViewRoot().eachNode(function(d){var e,f,g,h;!a&&d.piece&&d.piece.childAt(0)===c.target&&(e=d.getModel().get("nodeClick"),"rootToNode"===e?b._rootToNode(d):"link"===e&&(f=d.getModel(),g=f.get("link"),g&&(h=f.get("target",!0)||"_blank",window.open(g,h))),a=!0)})}var b=this;this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",a),this.group._onclickEvent=a},_rootToNode:function(a){a!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:a})},containPoint:function(b,f){var a=f.getData().getItemLayout(0),c,d,e;if(a)return c=b[0]-a.cx,d=b[1]-a.cy,e=Math.sqrt(c*c+d*d),e<=a.r&&e>=a.r0}}),yH="sunburstRootToNode",u({type:yH,update:"updateView"},function(a,b){b.eachComponent({mainType:"series",subType:"sunburst",query:a},function(b,e){var c=go(a,[yH],b),d;c&&(d=b.getViewRoot(),d&&(a.direction=jK(d,c.node)?"rollUp":"drillDown"),b.resetViewRoot(c.node))})}),yD="sunburstHighlight",u({type:yD,update:"updateView"},function(a,b){b.eachComponent({mainType:"series",subType:"sunburst",query:a},function(c,d){var b=go(a,[yD],c);b&&(a.highlight=b.node)})}),u({type:"sunburstUnhighlight",update:"updateView"},function(a,b){b.eachComponent({mainType:"series",subType:"sunburst",query:a},function(b,c){a.unhighlight=!0})}),yC=Math.PI/180;function zx(b,a){if("function"==typeof a)return b.sort(a);var c="asc"===a;return b.sort(function(a,b){var d=(a.getValue()-b.getValue())*(c?1:-1);return 0==d?(a.dataIndex-b.dataIndex)*(c?-1:1):d})}function zy(b,a){return a=a||[0,0],c(["x","y"],function(g,d){var c=this.getAxis(g),e=a[d],f=b[d]/2;return"category"===c.type?c.getBandWidth():Math.abs(c.dataToCoord(e-f)-c.dataToCoord(e+f))},this)}H(j(iP,"sunburst")),N(j(function(e,f,c,g){f.eachSeriesByType(e,function(e){var g=e.get("center"),h=e.get("radius"),x,y,j,s,p,i,D,l,q,r,f,G,t,u,v,w,k,A,m,n,B,C,o,E,F,z;b(h)||(h=[0,h]),b(g)||(g=[g,g]),x=c.getWidth(),y=c.getHeight(),j=Math.min(x,y),s=d(g[0],x),p=d(g[1],y),i=d(h[0],j/2),D=d(h[1],j/2),l=-e.get("startAngle")*yC,q=e.get("minAngle")*yC,r=e.getData().tree.root,f=e.getViewRoot(),G=f.depth,t=e.get("sort"),null!=t&&!function e(b,c){var d=b.children||[];b.children=zx(d,c),d.length&&a(b.children,function(a){e(a,c)})}(f,t),u=0,a(f.children,function(a){isNaN(a.getValue())||u++}),v=f.getValue(),w=Math.PI/(v||u)*2,k=0<f.depth,A=f.height-(k?-1:1),m=(D-i)/(A||1),n=e.get("clockwise"),B=e.get("stillShowZeroSum"),C=n?1:-1,o=function(b,c){var g,x,f,l,t,u,e,h;if(b)return g=c,b!==r&&(x=b.getValue(),f=0===v&&B?w:x*w,f<q&&(f=q),g=c+C*f,l=b.depth-G-(k?-1:1),t=i+m*l,u=i+m*(1+l),e=b.getModel(),null!=e.get("r0")&&(t=d(e.get("r0"),j/2)),null!=e.get("r")&&(u=d(e.get("r"),j/2)),b.setLayout({angle:f,startAngle:c,endAngle:g,clockwise:n,cx:s,cy:p,r0:t,r:u})),b.children&&b.children.length&&(h=0,a(b.children,function(a){h+=o(a,c+h)})),g-c},k&&(E=i,F=i+m,z=2*Math.PI,r.setLayout({angle:z,startAngle:l,endAngle:l+z,clockwise:n,cx:s,cy:p,r0:E,r:F})),o(f,l)})},"sunburst")),aH(j(fs,"sunburst"));function zz(b,a){return a=a||[0,0],c([0,1],function(c){var f=a[c],g=b[c]/2,d=[],e=[];return d[c]=f-g,e[c]=f+g,d[1-c]=e[1-c]=a[1-c],Math.abs(this.dataToPoint(d)[c]-this.dataToPoint(e)[c])},this)}function zA(b,c){var a=this.getAxis(),d=c instanceof Array?c[0]:c,e=(b instanceof Array?b[0]:b)/2;return"category"===a.type?a.getBandWidth():Math.abs(a.dataToCoord(d-e)-a.dataToCoord(d+e))}function zB(a,b){return c(["Radius","Angle"],function(d,f){var c=this["get"+d+"Axis"](),g=b[f],h=a[f]/2,i="dataTo"+d,e="category"===c.type?c.getBandWidth():Math.abs(c[i](g-h)-c[i](g+h));return"Angle"===d&&(e=e*Math.PI/180),e},this)}yv=uN,zD=["itemStyle"],zE=["emphasis","itemStyle"],zF=["label"],zG=["emphasis","label"],zH="e\0\0",zI={cartesian2d:function(b){var a=b.grid.getRect();return{coordSys:{type:"cartesian2d",x:a.x,y:a.y,width:a.width,height:a.height},api:{coord:function(a){return b.dataToPoint(a)},size:k(zy,b)}}},geo:function(a){var b=a.getBoundingRect();return{coordSys:{type:"geo",x:b.x,y:b.y,width:b.width,height:b.height,zoom:a.getZoom()},api:{coord:function(b){return a.dataToPoint(b)},size:k(zz,a)}}},singleAxis:function(b){var a=b.getRect();return{coordSys:{type:"singleAxis",x:a.x,y:a.y,width:a.width,height:a.height},api:{coord:function(a){return b.dataToPoint(a)},size:k(zA,b)}}},polar:function(a){var c=a.getRadiusAxis(),d=a.getAngleAxis(),b=c.getExtent();return b[0]>b[1]&&b.reverse(),{coordSys:{type:"polar",cx:a.cx,cy:a.cy,r:b[1],r0:b[0]},api:{coord:k(function(b){var e=c.dataToRadius(b[0]),f=d.dataToAngle(b[1]),g=a.coordToPoint([e,f]);return g.push(e,f*Math.PI/180),g}),size:k(zB,a)}}},calendar:function(a){var b=a.getRect(),c=a.getRangeInfo();return{coordSys:{type:"calendar",x:b.x,y:b.y,width:b.width,height:b.height,cellWidth:a.getCellWidth(),cellHeight:a.getCellHeight(),rangeInfo:{start:c.start,end:c.end,weeks:c.weeks,dayCount:c.allDay}},api:{coord:function(b,c){return a.dataToPoint(b,c)}}}}};function yt(a,c,b,d,e){null==b[a]||e||(c[a]=b[a],b[a]=d[a])}function yh(c,b,o,i){var n=c.get("renderItem"),d=c.coordinateSystem,j={},e,f,l,m,h,q,r,k;return d&&(j=d.prepareCustoms?d.prepareCustoms():zI[d.type](d)),q=g({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:function(c,a){return null==a&&(a=e),b.get(b.getDimension(c||0),a)},style:function(g,d){var a,i,j;return null==d&&(d=e),p(d),a=f.getModel(zD).getItemStyle(),null!=h&&(a.fill=h),i=b.getItemVisual(d,"opacity"),null!=i&&(a.opacity=i),j=g?xH(g,l):l,O(a,j,null,{autoColor:h,isRectText:!0}),a.text=j.getShallow("show")?R(c.getFormattedLabel(d,"normal"),hF(b,d)):null,g&&xF(a,g),a},styleEmphasis:function(d,a){null==a&&(a=e),p(a);var g=f.getModel(zE).getItemStyle(),h=d?xH(d,m):m;return O(g,h,null,{isRectText:!0},!0),g.text=h.getShallow("show")?dF(c.getFormattedLabel(a,"emphasis"),c.getFormattedLabel(a,"normal"),hF(b,a)):null,d&&xF(g,d),g},visual:function(c,a){return null==a&&(a=e),b.getItemVisual(a,c)},barLayout:function(a){if(d.getBaseAxis)return function(b){var f=[],d=b.axis,h,a,i,e,c;if("category"===d.type){for(h=d.getBandWidth(),a=0;a<b.count;a++)f.push(g({bandWidth:h,axisKey:"axis0",stackId:oi+a},b));i=pJ(f),e=[];for(a=0;a<b.count;a++)c=i.axis0[oi+a],c.offsetCenter=c.offset+c.width/2,e.push(c);return e}}(g({axis:d.getBaseAxis()},a))},currentSeriesIndices:function(){return o.getCurrentSeriesIndices()},font:function(a){return kE(a,o)}},j.api||{}),r={context:{},seriesId:c.id,seriesName:c.name,seriesIndex:c.seriesIndex,coordSys:j.coordSys,dataInsideLength:b.count(),encode:function(c){var b={};return a(c.dimensions,function(e,f){var a=c.getDimensionInfo(e),d;a.isExtraCoord||(d=a.coordDim,(b[d]=b[d]||[])[a.coordDimIndex]=f)}),b}(c.getData())},k=!0,function(a,c){return e=a,k=!0,n&&n(g({dataIndexInside:a,dataIndex:b.getRawIndex(a),actionType:c?c.type:null},r),q)};function p(a){null==a&&(a=e),k&&(f=b.getItemModel(a),l=f.getModel(zF),m=f.getModel(zG),h=b.getItemVisual(a,"color"),k=!1)}}function ot(a,b,d,e,f,c){return(a=oc(a,b,d,e,f,c,!0))&&c.setItemGraphicEl(b,a),a}function oc(b,h,c,k,l,m,n){var j=!c,d=(c=c||{}).type,f=c.shape,g=c.style,o;if(b&&(j||null!=d&&d!==b.__customGraphicType||"path"===d&&function(a){return a&&(a.hasOwnProperty("pathData")||a.hasOwnProperty("d"))}(f)&&xE(f)!==b.__customPathData||"image"===d&&xz(g,"image")&&g.image!==b.__customImagePath||"text"===d&&xz(f,"text")&&g.text!==b.__customText)&&(l.remove(b),b=null),!j)return o=!b,function(c,j,b,k,n,f,m){var e={},d=b.style||{},g,h,l;b.shape&&(e.shape=i(b.shape)),b.position&&(e.position=b.position.slice()),b.scale&&(e.scale=b.scale.slice()),b.origin&&(e.origin=b.origin.slice()),b.rotation&&(e.rotation=b.rotation),"image"===c.type&&b.style&&(g=e.style={},a(["x","y","width","height"],function(a){yt(a,g,d,c.style,f)})),"text"===c.type&&b.style&&(g=e.style={},a(["x","y"],function(a){yt(a,g,d,c.style,f)}),!d.hasOwnProperty("textFill")&&d.fill&&(d.textFill=d.fill),!d.hasOwnProperty("textStroke")&&d.stroke&&(d.textStroke=d.stroke)),"group"!==c.type&&(c.useStyle(d),f)&&(c.style.opacity=0,h=d.opacity,null==h&&(h=1),ao(c,{style:{opacity:h}},k,j)),f?c.attr(e):p(c,e,k,j),b.hasOwnProperty("z2")&&c.attr("z2",b.z2||0),b.hasOwnProperty("silent")&&c.attr("silent",b.silent),b.hasOwnProperty("invisible")&&c.attr("invisible",b.invisible),b.hasOwnProperty("ignore")&&c.attr("ignore",b.ignore),b.hasOwnProperty("info")&&c.attr("info",b.info),l=b.styleEmphasis,kO(c,l),m&&kK(c,!1!==l)}(b=b||function(d){var a,c=d.type,b,g,f;if("path"===c)b=d.shape,g=null!=b.width&&null!=b.height?{x:b.x||0,y:b.y||0,width:b.width,height:b.height}:null,f=xE(b),(a=fV(f,null,g,b.layout||"center")).__customPathData=f;else if("image"===c)(a=new ad({})).__customImagePath=d.style.image;else if("text"===c)(a=new q({})).__customText=d.style.text;else if("group"===c)a=new e;else{if("compoundPath"===c)throw new Error('"compoundPath" is not supported yet.');a=new(la(c))}return a.__customGraphicType=c,a.name=d.name,a}(c),h,c,k,0,o,n),"group"===d&&function(a,e,d,f,k){var c=d.children,g=c?c.length:0,h=d.$mergeChildren,i="byName"===h||d.diffChildrenByName,j=!1===h,b;if(!g&&!i&&!j)return;if(i)return function(a){new cb(a.oldChildren,a.newChildren,xW,xW,a).add(xU).update(xU).remove(zR).execute()}({oldChildren:a.children()||[],newChildren:c||[],dataIndex:e,animatableModel:f,group:a,data:k});j&&a.removeAll();for(b=0;b<g;b++)c[b]&&oc(a.childAt(b),e,c[b],f,a,k)}(b,h,c,k,m),l.add(b),b}function xW(a,c){var b=a&&a.name;return null!=b?b:zH+c}function xU(b,c){var a=this.context,d=null!=b?a.newChildren[b]:null;oc(null!=c?a.oldChildren[c]:null,a.dataIndex,d,a.animatableModel,a.group,a.data)}function xH(b,d){var c=new w({},d);return a(yv,function(a,d){b.hasOwnProperty(a)&&(c.option[d]=b[a])}),c}function xF(c,b){for(var a in b)!b.hasOwnProperty(a)&&yv.hasOwnProperty(a)||(c[a]=b[a])}function zR(c){var a=this.context,b=a.oldChildren[c];b&&a.group.remove(b)}function xE(a){return a&&(a.pathData||a.d)}function xz(a,b){return a&&a.hasOwnProperty(b)}function xy(a){return a.get("stack")||"__ec_stack_"+a.seriesIndex}function xx(a,b){return b.dim+a.model.componentIndex}function hf(a,b){Q.call(this,"radius",a,b),this.type="category"}M.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(a,b){return ca(this.getSource(),this)},getDataParams:function(c,d,a){var b=M.prototype.getDataParams.apply(this,arguments);return a&&(b.info=a.info),b}}),ae.extend({type:"custom",_data:null,render:function(a,h,i,g){var d=this._data,b=a.getData(),c=this.group,e=yh(a,b,h,i),f;b.diff(d).add(function(d){ot(null,d,e(d,g),a,c,b)}).update(function(f,h){ot(d.getItemGraphicEl(h),f,e(f,g),a,c,b)}).remove(function(b){var a=d.getItemGraphicEl(b);a&&c.remove(a)}).execute(),f=a.get("clip",!0)?gT(a.coordinateSystem,!1,a):null,f?c.setClipPath(f):c.removeClipPath(),this._data=b},incrementalPrepareRender:function(a,b,c){this.group.removeAll(),this._data=null},incrementalRender:function(c,b,i,e,f){var d=b.getData(),g=yh(b,d,i,e),a;function h(a){a.isGroup||(a.incremental=!0,a.useHoverLayer=!0)}for(a=c.start;a<c.end;a++)ot(null,a,g(a,f),b,this.group,d).traverse(h)},dispose:aa,filterForExposedEvent:function(d,c,a,e){var b=c.element;if(null==b||a.name===b)return!0;for(;(a=a.parent)&&a!==this.group;)if(a.name===b)return!0;return!1}}),hf.prototype={constructor:hf,pointToData:function(a,b){return this.polar.pointToData(a,b)["radius"===this.dim?0:1]},dataToRadius:Q.prototype.dataToCoord,radiusToData:Q.prototype.coordToData},D(hf,Q),zX=au();function hg(b,a){a=a||[0,360],Q.call(this,"angle",b,a),this.type="category"}hg.prototype={constructor:hg,pointToData:function(a,b){return this.polar.pointToData(a,b)["radius"===this.dim?0:1]},dataToAngle:Q.prototype.dataToCoord,angleToData:Q.prototype.coordToData,calculateCategoryInterval:function(){var m=this.getLabelModel(),i=this.scale,d=i.getExtent(),g=i.count(),e,l,j,k,f,a,b,c,h;return d[1]-d[0]<1?0:(e=d[0],l=this.dataToCoord(e+1)-this.dataToCoord(e),j=Math.abs(l),k=bn(e,m.getFont(),"center","top"),f=Math.max(k.height,7)/j,isNaN(f)&&(f=1/0),a=Math.max(0,Math.floor(f)),b=zX(this.model),c=b.lastAutoInterval,h=b.lastTickCount,null!=c&&null!=h&&Math.abs(c-a)<=1&&Math.abs(h-g)<=1&&a<c?a=c:(b.lastTickCount=g,b.lastAutoInterval=a),a)}},D(hg,Q);function hi(a){this.name=a||"",this.cx=0,this.cy=0,this._radiusAxis=new hf,this._angleAxis=new hg,this._radiusAxis.polar=this._angleAxis.polar=this}hi.prototype={type:"polar",axisPointerEnabled:!0,constructor:hi,dimensions:["radius","angle"],model:null,containPoint:function(b){var a=this.pointToCoord(b);return this._radiusAxis.contain(a[0])&&this._angleAxis.contain(a[1])},containData:function(a){return this._radiusAxis.containData(a[0])&&this._angleAxis.containData(a[1])},getAxis:function(a){return this["_"+a+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(b){var a=[],c=this._angleAxis,d=this._radiusAxis;return c.scale.type===b&&a.push(c),d.scale.type===b&&a.push(d),a},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(b){var a=this._angleAxis;return b===a?this._radiusAxis:a},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(a){var b=null!=a&&"auto"!==a?this.getAxis(a):this.getBaseAxis();return{baseAxes:[b],otherAxes:[this.getOtherAxis(b)]}},dataToPoint:function(a,b){return this.coordToPoint([this._radiusAxis.dataToRadius(a[0],b),this._angleAxis.dataToAngle(a[1],b)])},pointToData:function(c,a){var b=this.pointToCoord(c);return[this._radiusAxis.radiusToData(b[0],a),this._angleAxis.angleToData(b[1],a)]},pointToCoord:function(i){var b=i[0]-this.cx,e=i[1]-this.cy,h=this.getAngleAxis(),c=h.getExtent(),d=Math.min(c[0],c[1]),f=Math.max(c[0],c[1]),g,a,j;h.inverse?d=f-360:f=d+360,g=Math.sqrt(b*b+e*e),b/=g,e/=g;for(a=Math.atan2(-e,b)/Math.PI*180,j=a<d?1:-1;a<d||f<a;)a+=360*j;return[g,a]},coordToPoint:function(a){var b=a[0],c=a[1]/180*Math.PI;return[Math.cos(c)*b+this.cx,-Math.sin(c)*b+this.cy]},getArea:function(){var b=this.getAngleAxis(),a=this.getRadiusAxis().getExtent().slice(),c,d;return a[0]>a[1]&&a.reverse(),c=b.getExtent(),d=Math.PI/180,{cx:this.cx,cy:this.cy,r0:a[0],r:a[1],startAngle:-c[0]*d,endAngle:-c[1]*d,clockwise:b.inverse,contain:function(g,f){var b=g-this.cx,c=f-this.cy,d=b*b+c*c,e=this.r,a=this.r0;return d<=e*e&&a*a<=d}}}},nF=x.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}}),l(nF.prototype,dI),z$={splitNumber:5};function xm(b,a){return a.type||(a.data?"category":"value")}function aab(g,h){var e=this,b=e.getAngleAxis(),c=e.getRadiusAxis(),d,f;b.scale.setExtent(1/0,-1/0),c.scale.setExtent(1/0,-1/0),g.eachSeries(function(f){if(f.coordinateSystem===e){var d=f.getData();a(d.mapDimension("radius",!0),function(a){c.scale.unionExtentFromData(d,gp(d,a))}),a(d.mapDimension("angle",!0),function(a){b.scale.unionExtentFromData(d,gp(d,a))})}}),cJ(b.scale,b.model),cJ(c.scale,c.model),"category"===b.type&&!b.onBand&&(d=b.getExtent(),f=360/b.scale.count(),b.inverse?d[1]+=f:d[1]-=f,b.setExtent(d[0],d[1]))}function xk(a,b){if(a.type=b.get("type"),a.scale=eH(b),a.onBand=b.get("boundaryGap")&&"category"===a.type,a.inverse=b.get("inverse"),"angleAxis"===b.mainType){a.inverse^=b.get("clockwise");var c=b.get("startAngle");a.setExtent(c,c+(a.inverse?-360:360))}(b.axis=a).model=b}eQ("angle",nF,xm,{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}}),eQ("radius",nF,xm,z$),aN({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(b){var a;return this.ecModel.eachComponent(b,function(b){b.getCoordSysModel()===this&&(a=b)},this),a},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}}),aq.register("polar",{dimensions:hi.prototype.dimensions,create:function(a,e){var c=[];return a.eachComponent("polar",function(f,g){var a=new hi(g),h,i,j,k;a.update=aab,h=a.getRadiusAxis(),i=a.getAngleAxis(),j=f.findAxisModel("radiusAxis"),k=f.findAxisModel("angleAxis"),xk(h,j),xk(i,k),function(c,f,k){var g=f.get("center"),h=k.getWidth(),i=k.getHeight(),e,j,a;c.cx=d(g[0],h),c.cy=d(g[1],i),e=c.getRadiusAxis(),j=Math.min(h,i)/2,a=f.get("radius"),null==a?a=[0,"100%"]:b(a)||(a=[0,a]),a=[d(a[0],j),d(a[1],j)],e.inverse?e.setExtent(a[1],a[0]):e.setExtent(a[0],a[1])}(a,f,e),c.push(a),(f.coordinateSystem=a).model=f}),a.eachSeries(function(b){if("polar"===b.get("coordinateSystem")){var c=a.queryComponents({mainType:"polar",index:b.get("polarIndex"),id:b.get("polarId")})[0];b.coordinateSystem=c.coordinateSystem}}),c}}),aad=["axisLine","axisLabel","axisTick","splitLine","splitArea"];function xe(b,a,c){a[1]>a[0]&&(a=a.slice().reverse());var d=b.coordToPoint([a[0],c]),e=b.coordToPoint([a[1],c]);return{x1:d[0],y1:d[1],x2:e[0],y2:e[1]}}function nx(a){return a.getRadiusAxis().inverse?0:1}function xc(a){var b=a[0],c=a[a.length-1];b&&c&&Math.abs(Math.abs(b.coord-c.coord)-360)<1e-4&&a.pop()}aE.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(d,j){if(this.group.removeAll(),d.get("show")){var b=d.axis,e=b.polar,h=e.getRadiusAxis().getExtent(),f=b.getTicksCoords(),g=c(b.getViewLabels(),function(a){return(a=i(a)).coord=b.dataToCoord(a.tickValue),a});xc(g),xc(f),a(aad,function(a){!d.get(a+".show")||b.scale.isBlank()&&"axisLine"!==a||this["_"+a](d,e,f,h,g)},this)}},_axisLine:function(g,a,h,b){var d,e=g.getModel("axisLine.lineStyle"),c=nx(a),f=c?0:1;(d=0===b[f]?new bI({shape:{cx:a.cx,cy:a.cy,r:b[c]},style:e.getLineStyle(),z2:1,silent:!0}):new gH({shape:{cx:a.cx,cy:a.cy,r:b[c],r0:b[f]},style:e.getLineStyle(),z2:1,silent:!0})).style.fill=null,this.group.add(d)},_axisTick:function(b,d,f,h){var a=b.getModel("axisTick"),i=(a.get("inside")?-1:1)*a.get("length"),e=h[nx(d)],j=c(f,function(a){return new av({shape:xe(d,[e,e+i],a.coord)})});this.group.add(bS(j,{style:g(a.getModel("lineStyle").getLineStyle(),{stroke:b.get("axisLine.lineStyle.color")})}))},_axisLabel:function(b,c,j,g,h){var d=b.getCategories(!0),e=b.getModel("axisLabel"),i=e.get("margin"),f=b.get("triggerEvent");a(h,function(j,s){var k=e,l=j.tickValue,m=g[nx(c)],a=c.coordToPoint([m+i,j.coord]),o=c.cx,n=c.cy,p=Math.abs(a[0]-o)/m<.3?"center":a[0]>o?"left":"right",r=Math.abs(a[1]-n)/m<.3?"middle":a[1]>n?"top":"bottom",h;d&&d[l]&&d[l].textStyle&&(k=new w(d[l].textStyle,e,e.ecModel)),h=new q({silent:ax.isLabelSilent(b)}),this.group.add(h),O(h.style,k,{x:a[0],y:a[1],textFill:k.getTextColor()||b.get("axisLine.lineStyle.color"),text:j.formattedLabel,textAlign:p,textVerticalAlign:r}),f&&(h.eventData=ax.makeAxisEventDataBase(b),h.eventData.targetType="axisLabel",h.eventData.value=j.rawLabel)},this)},_splitLine:function(e,j,h,k){var f=e.getModel("splitLine").getModel("lineStyle"),b=f.get("color"),i=0,c,a,d;b=b instanceof Array?b:[b];for(c=[],a=0;a<h.length;a++)d=i++%b.length,c[d]=c[d]||[],c[d].push(new av({shape:xe(j,k,h[a].coord)}));for(a=0;a<c.length;a++)this.group.add(bS(c[a],{style:g({stroke:b[a%b.length]},f.getLineStyle()),silent:!0,z:e.get("z")}))},_splitArea:function(p,o,d,e){var i,b,k,c,f,j,l,m,n,a,h;if(d.length){i=p.getModel("splitArea").getModel("areaStyle"),b=i.get("color"),k=0,b=b instanceof Array?b:[b];for(c=[],f=Math.PI/180,j=-d[0].coord*f,l=Math.min(e[0],e[1]),m=Math.max(e[0],e[1]),n=p.get("clockwise"),a=1;a<d.length;a++)h=k++%b.length,c[h]=c[h]||[],c[h].push(new bC({shape:{cx:o.cx,cy:o.cy,r0:l,r:m,startAngle:j,endAngle:-d[a].coord*f,clockwise:n},silent:!0})),j=-d[a].coord*f;for(a=0;a<c.length;a++)this.group.add(bS(c[a],{style:g({fill:b[a%b.length]},i.getAreaStyle()),silent:!0}))}}}),aah=["axisLine","axisTickLabel","axisName"],aai=["splitLine","splitArea"],aE.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(b,k){if(this.group.removeAll(),b.get("show")){var c=b.axis,d=c.polar,h=d.getAngleAxis(),i=c.getTicksCoords(),f=h.getExtent()[0],g=c.getExtent(),j=function(a,b,c){return{position:[a.cx,a.cy],rotation:c/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:b.getModel("axisLabel").get("rotate"),z2:1}}(d,b,f),e=new ax(b,j);a(aah,e.add,e),this.group.add(e.getGroup()),a(aai,function(a){b.get(a+".show")&&!c.scale.isBlank()&&this["_"+a](b,d,f,g,i)},this)}},_splitLine:function(i,e,k,l,h){var f=i.getModel("splitLine").getModel("lineStyle"),b=f.get("color"),j=0,c,a,d;b=b instanceof Array?b:[b];for(c=[],a=0;a<h.length;a++)d=j++%b.length,c[d]=c[d]||[],c[d].push(new bI({shape:{cx:e.cx,cy:e.cy,r:h[a].coord},silent:!0}));for(a=0;a<c.length;a++)this.group.add(bS(c[a],{style:g({stroke:b[a%b.length],fill:null},f.getLineStyle()),silent:!0}))},_splitArea:function(k,i,l,m,d){var h,b,j,c,f,a,e;if(d.length){h=k.getModel("splitArea").getModel("areaStyle"),b=h.get("color"),j=0,b=b instanceof Array?b:[b];for(c=[],f=d[0].coord,a=1;a<d.length;a++)e=j++%b.length,c[e]=c[e]||[],c[e].push(new bC({shape:{cx:i.cx,cy:i.cy,r0:f,r:d[a].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),f=d[a].coord;for(a=0;a<c.length;a++)this.group.add(bS(c[a],{style:g({fill:b[a%b.length]},h.getAreaStyle()),silent:!0}))}}}),aaj=fK.extend({makeElOption:function(g,j,e,b,l){var a=e.axis,h,c,k,d,i,f,m;"angle"===a.dim&&(this.animationThreshold=Math.PI/18),c=a.polar,k=c.getOtherAxis(a).getExtent(),h=a["dataTo"+i_(a.dim)](j),d=b.get("type"),d&&"none"!==d&&(i=oY(b),f=aak[d](a,c,h,k,i),f.style=i,g.graphicKey=f.type,g.pointer=f),m=b.get("label.margin"),yW(g,e,b,l,function(q,m,r,b,k){var j=m.axis,i=j.dataToCoord(q),d=b.getAngleAxis().getExtent()[0],a,g,f,p,c,o,n,e,l,h;return d=d/180*Math.PI,p=b.getRadiusAxis().getExtent(),"radius"===j.dim?(c=aL(),cc(c,c,d),be(c,c,[b.cx,b.cy]),a=bH([i,-k],c),o=m.getModel("axisLabel").get("rotate")||0,n=ax.innerTextLayout(d,o*Math.PI/180,-1),g=n.textAlign,f=n.textVerticalAlign):(e=p[1],a=b.coordToPoint([e+k,i]),l=b.cx,h=b.cy,g=Math.abs(a[0]-l)/e<.3?"center":a[0]>l?"left":"right",f=Math.abs(a[1]-h)/e<.3?"middle":a[1]>h?"top":"bottom"),{position:a,align:g,verticalAlign:f}}(j,e,0,c,m))}}),aak={line:function(d,a,b,c,e){return"angle"===d.dim?{type:"Line",shape:pb(a.coordToPoint([c[0],b]),a.coordToPoint([c[1],b]))}:{type:"Circle",shape:{cx:a.cx,cy:a.cy,r:b}}},shadow:function(d,a,b,e,g){var c=Math.max(1,d.getBandWidth()),f=Math.PI/180;return"angle"===d.dim?{type:"Sector",shape:za(a.cx,a.cy,e[0],e[1],(-b-c/2)*f,(c/2-b)*f)}:{type:"Sector",shape:za(a.cx,a.cy,b-c/2,b+c/2,0,2*Math.PI)}}};function nw(c,b){b.update="updateView",u(b,function(b,e){var d={};return e.eachComponent({mainType:"geo",query:b},function(e){e[c](b.name),a(e.coordinateSystem.regions,function(a){d[a.name]=e.isSelected(a.name)||!1})}),{selected:d,name:b.name}})}aE.registerAxisPointerClass("PolarAxisPointer",aaj),N(j(function(e,c,g){var b={},f=function(e){var c={},b;return a(e,function(a,q){var p=a.getData(),l=a.coordinateSystem,h=l.getBaseAxis(),k=xx(l,h),j=h.getExtent(),i="category"===h.type?h.getBandWidth():Math.abs(j[1]-j[0])/p.count(),b=c[k]||{bandWidth:i,remainedWidth:i,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},f=b.stacks,e,g,m,n,o;c[k]=b,e=xy(a),f[e]||b.autoWidthCount++,f[e]=f[e]||{width:0,maxWidth:0},g=d(a.get("barWidth"),i),m=d(a.get("barMaxWidth"),i),n=a.get("barGap"),o=a.get("barCategoryGap"),g&&!f[e].width&&(g=Math.min(b.remainedWidth,g),f[e].width=g,b.remainedWidth-=g),m&&(f[e].maxWidth=m),null!=n&&(b.gap=n),null!=o&&(b.categoryGap=o)}),b={},a(c,function(e,l){var k,o,m,g,h,f,c,i,j,n;b[l]={},k=e.stacks,o=e.bandWidth,m=d(e.categoryGap,o),g=d(e.gap,1),h=e.remainedWidth,f=e.autoWidthCount,c=(h-m)/(f+(f-1)*g),c=Math.max(c,0),a(k,function(b,d){var a=b.maxWidth;a&&a<c&&(a=Math.min(a,h),b.width&&(a=Math.min(a,b.width)),h-=a,b.width=a,f--)}),c=(h-m)/(f+(f-1)*g),c=Math.max(c,0),j=0,a(k,function(a,b){a.width||(a.width=c),j+=(i=a).width*(1+g)}),i&&(j-=i.width*g),n=-j/2,a(k,function(a,c){b[l][c]=b[l][c]||{offset:n,width:a.width},n+=a.width*(1+g)})}),b}(W(c.getSeriesByType(e),function(a){return!c.isSeriesFiltered(a)&&a.coordinateSystem&&"polar"===a.coordinateSystem.type}));c.eachSeriesByType(e,function(a){var d,s,g,H,c,w,x,v,h,C,D,A,z,y,E,u,B,i,j,F,o,e,q,n,t,m,r,p,l,G,k,I;if("polar"===a.coordinateSystem.type){d=a.getData(),s=a.coordinateSystem,g=s.getBaseAxis(),H=xx(s,g),c=xy(a),w=f[H][c],x=w.offset,v=w.width,h=s.getOtherAxis(g),C=a.coordinateSystem.cx,D=a.coordinateSystem.cy,A=a.get("barMinHeight")||0,z=a.get("barMinAngle")||0,b[c]=b[c]||[];for(y=d.mapDimension(h.dim),E=d.mapDimension(g.dim),u=bX(d,y),B="radius"!==g.dim||!a.get("roundCap",!0),i=h.getExtent()[0],j=0,F=d.count();j<F;j++)o=d.get(y,j),e=d.get(E,j),isNaN(o)||(r=0<=o?"p":"n",p=i,(u&&(b[c][e]||(b[c][e]={p:i,n:i}),p=b[c][e][r]),"radius"===h.dim)?(l=h.dataToRadius(o)-i,G=g.dataToAngle(e),Math.abs(l)<A&&(l=(l<0?-1:1)*A),n=(q=p)+l,m=(t=G-x)-v,u&&(b[c][e][r]=n)):(k=h.dataToAngle(o,B)-i,I=g.dataToRadius(e),Math.abs(k)<z&&(k=(k<0?-1:1)*z),n=(q=I+x)+v,m=(t=p)+k,u&&(b[c][e][r]=m)),d.setItemLayout(j,{cx:C,cy:D,r0:q,r:n,startAngle:-t*Math.PI/180,endAngle:-m*Math.PI/180}))}},this)},"bar")),$({type:"polar"}),C(x.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(a){x.prototype.init.apply(this,arguments),dn(a,"label",["show"])},optionUpdated:function(){var a=this.option,b=this;a.regions=sO.getFilledRegions(a.regions,a.map,a.nameMap),this._optionModelMap=eD(a.regions||[],function(c,a){return a.name&&c.set(a.name,new w(a,b)),c},n()),this.updateSelectedMap(a.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(a){return this._optionModelMap.get(a)||new w(null,this,this.ecModel)},getFormattedLabel:function(a,c){var b=this.getRegionModel(a).get("label"+("normal"===c?".":c+".")+"formatter"),d={name:a};return"function"==typeof b?(d.status=c,b(d)):"string"==typeof b?b.replace("{a}",null!=a?a:""):void 0},setZoom:function(a){this.option.zoom=a},setCenter:function(a){this.option.center=a}}),mb),$({type:"geo",init:function(c,b){var a=new hD(b,!0);this._mapDraw=a,this.group.add(a.group)},render:function(b,c,d,a){if(!a||"geoToggleSelect"!==a.type||a.from!==this.uid){var e=this._mapDraw;b.get("show")?e.draw(b,c,d,this,a):this._mapDraw.group.removeAll(),this.group.silent=b.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}}),nw("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),nw("select",{type:"geoSelect",event:"geoselected"}),nw("unSelect",{type:"geoUnSelect",event:"geounselected"});function bJ(a,b,c){this._model=a}function wX(f,g,b,e){var c=b.calendarModel,d=b.seriesModel,a=c?c.coordinateSystem:d?d.coordinateSystem:null;return a===this?a[f](e):null}bJ.prototype={constructor:bJ,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(a){var d=(a=fl(a)).getFullYear(),b=a.getMonth()+1,c,e;return b=b<10?"0"+b:b,c=a.getDate(),c=c<10?"0"+c:c,e=a.getDay(),{y:d,m:b,d:c,day:e=Math.abs((e+7-this.getFirstDayOfWeek())%7),time:a.getTime(),formatedDate:d+"-"+b+"-"+c,date:a}},getNextNDay:function(a,b){return 0===(b=b||0)||(a=new Date(this.getDateInfo(a).time)).setDate(a.getDate()+b),this.getDateInfo(a)},update:function(k,g){var d,e,b,f,c,h,i;this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption()),d=this._rangeInfo.weeks||1,e=["width","height"],b=this._model.get("cellSize").slice(),f=this._model.getBoxLayoutParams(),c="horizontal"===this._orient?[d,7]:[7,d],a([0,1],function(a){j(b,a)&&(f[e[a]]=b[a]*c[a])}),h={width:g.getWidth(),height:g.getHeight()},i=this._rect=V(f,h);function j(a,b){return null!=a[b]&&"auto"!==a[b]}a([0,1],function(a){j(b,a)||(b[a]=i[e[a]]/c[a])}),this._sw=b[0],this._sh=b[1]},dataToPoint:function(c,e){var a,d,h,f,g;return b(c)&&(c=c[0]),null==e&&(e=!0),a=this.getDateInfo(c),d=this._rangeInfo,h=a.formatedDate,e&&!(a.time>=d.start.time&&a.time<d.end.time+864e5)?[NaN,NaN]:(f=a.day,g=this._getRangeInfo([d.start.time,h]).nthWeek,"vertical"===this._orient?[this._rect.x+f*this._sw+this._sw/2,this._rect.y+g*this._sh+this._sh/2]:[this._rect.x+g*this._sw+this._sw/2,this._rect.y+f*this._sh+this._sh/2])},pointToData:function(b){var a=this.pointToDate(b);return a&&a.time},dataToRect:function(b,c){var a=this.dataToPoint(b,c);return{contentShape:{x:a[0]-(this._sw-this._lineWidth)/2,y:a[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:a,tl:[a[0]-this._sw/2,a[1]-this._sh/2],tr:[a[0]+this._sw/2,a[1]-this._sh/2],br:[a[0]+this._sw/2,a[1]+this._sh/2],bl:[a[0]-this._sw/2,a[1]+this._sh/2]}},pointToDate:function(a){var b=Math.floor((a[0]-this._rect.x)/this._sw)+1,c=Math.floor((a[1]-this._rect.y)/this._sh)+1,d=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(c,b-1,d):this._getDateByWeeksAndDay(b,c-1,d)},convertToPixel:j(wX,"dataToPoint"),convertFromPixel:j(wX,"pointToData"),_initRangeOption:function(){var c=this._model.get("range"),a=c,e,d,g,f;return b(a)&&1===a.length&&(a=a[0]),/^\d{4}$/.test(a)&&(c=[a+"-01-01",a+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(a)&&(e=this.getDateInfo(a),d=e.date,d.setMonth(d.getMonth()+1),g=this.getNextNDay(d,-1),c=[e.formatedDate,g.formatedDate]),/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(a)&&(c=[a,a]),f=this._getRangeInfo(c),f.start.time>f.end.time&&c.reverse(),c},_getRangeInfo:function(a){var d,c,b,f,g,h,e,i;if((a=[this.getDateInfo(a[0]),this.getDateInfo(a[1])])[0].time>a[1].time&&(d=!0,a.reverse()),c=Math.floor(a[1].time/864e5)-Math.floor(a[0].time/864e5)+1,b=new Date(a[0].time),f=b.getDate(),g=a[1].date.getDate(),b.setDate(f+c-1),b.getDate()!==g)for(h=0<b.getTime()-a[1].time?1:-1;b.getDate()!==g&&0<(b.getTime()-a[1].time)*h;)c-=h,b.setDate(f+c-1);return e=Math.floor((c+a[0].day+6)/7),i=d?1-e:e-1,d&&a.reverse(),{range:[a[0].formatedDate,a[1].formatedDate],start:a[0],end:a[1],allDay:c,weeks:e,nthWeek:i,fweek:a[0].day,lweek:a[1].day}},_getDateByWeeksAndDay:function(b,c,e){var a=this._getRangeInfo(e),f,d;return!(b>a.weeks||0===b&&c<a.fweek||b===a.weeks&&c>a.lweek)&&(f=7*(b-1)-a.fweek+c,d=new Date(a.start.time),d.setDate(a.start.d+f),this.getDateInfo(d))}},bJ.dimensions=bJ.prototype.dimensions,bJ.getDimensionsInfo=bJ.prototype.getDimensionsInfo,bJ.create=function(a,c){var b=[];return a.eachComponent("calendar",function(d){var e=new bJ(d,a,c);b.push(e),d.coordinateSystem=e}),a.eachSeries(function(a){"calendar"===a.get("coordinateSystem")&&(a.coordinateSystem=b[a.get("calendarIndex")||0])}),b},aq.register("calendar",bJ),wW=x.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(a,c,d,e){var b=ec(a);wW.superApply(this,"init",arguments),wT(a,b)},mergeOption:function(a,b){wW.superApply(this,"mergeOption",arguments),wT(this.option,a)}});function wT(d,e){var a=d.cellSize,f;b(a)?1===a.length&&(a[1]=a[0]):a=d.cellSize=[a,a],f=c([0,1],function(b){return function(a,b){return null!=a[dL[b][0]]||null!=a[dL[b][1]]&&null!=a[dL[b][2]]}(e,b)&&(a[b]="auto"),null!=a[b]&&"auto"!==a[b]}),cR(d,e,{type:"box",ignoreSize:f})}aaq={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["","","","","","","","","","","",""]},aar={EN:["S","M","T","W","T","F","S"],CN:["","","","","","",""]},$({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(a,f,g){var b=this.group,e,c,d;b.removeAll(),e=a.coordinateSystem,c=e.getRangeInfo(),d=e.getOrient(),this._renderDayRect(a,c,b),this._renderLines(a,c,d,b),this._renderYearText(a,c,d,b),this._renderMonthText(a,d,b),this._renderWeekText(a,c,d,b)},_renderDayRect:function(c,e,i){for(var b=c.coordinateSystem,f=c.getModel("itemStyle").getItemStyle(),g=b.getCellWidth(),h=b.getCellHeight(),a=e.start.time,d,j;a<=e.end.time;a=b.getNextNDay(a,1).time)d=b.dataToRect([a],!1).tl,j=new y({shape:{x:d[0],y:d[1],width:g,height:h},cursor:"default",style:f}),i.add(j)},_renderLines:function(f,c,i,g){var a=this,b=f.coordinateSystem,e=f.getModel("splitLine.lineStyle").getLineStyle(),h=f.get("splitLine.show"),k=e.lineWidth,d,l,j;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(d=c.start,l=0;d.time<=c.end.time;l++)m(d.formatedDate),0===l&&(d=b.getDateInfo(c.start.y+"-"+c.start.m)),j=d.date,j.setMonth(j.getMonth()+1),d=b.getDateInfo(j);function m(d){a._firstDayOfMonth.push(b.getDateInfo(d)),a._firstDayPoints.push(b.dataToRect([d],!1).tl);var c=a._getLinePointsOfOneWeek(f,d,i);a._tlpoints.push(c[0]),a._blpoints.push(c[c.length-1]),h&&a._drawSplitline(c,e,g)}m(b.getNextNDay(c.end.time,1).formatedDate),h&&this._drawSplitline(a._getEdgesPoints(a._tlpoints,k,i),e,g),h&&this._drawSplitline(a._getEdgesPoints(a._blpoints,k,i),e,g)},_getEdgesPoints:function(c,d,e){var a=[c[0].slice(),c[c.length-1].slice()],b="horizontal"===e?0:1;return a[0][b]=a[0][b]-d/2,a[1][b]=a[1][b]+d/2,a},_drawSplitline:function(a,b,c){var d=new aZ({z2:20,shape:{points:a},style:b});c.add(d)},_getLinePointsOfOneWeek:function(h,b,g){var c=h.coordinateSystem,d,e,a,f;b=c.getDateInfo(b);for(d=[],e=0;e<7;e++)a=c.getNextNDay(b.time,e),f=c.dataToRect([a.time],!1),d[2*a.day]=f.tl,d[2*a.day+1]=f["horizontal"===g?"bl":"tr"];return d},_formatterLabel:function(a,b){return"string"==typeof a&&a?tO(a,b):"function"==typeof a?a(b):b.nameMap},_yearTextPositionControl:function(g,a,f,b,d){var c,e;return a=a.slice(),c=["center","bottom"],"bottom"===b?(a[1]+=d,c=["center","top"]):"left"===b?a[0]-=d:"right"===b?(a[0]+=d,c=["center","top"]):a[1]-=d,e=0,"left"!==b&&"right"!==b||(e=Math.PI/2),{rotation:e,position:a,style:{textAlign:c[0],textVerticalAlign:c[1]}}},_renderYearText:function(r,b,h,m){var c=r.getModel("yearLabel"),k,d,a,j,i,f,l,g,n,o,p,e;c.get("show")&&(k=c.get("margin"),d=c.get("position"),d=d||("horizontal"!==h?"top":"left"),a=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],j=(a[0][0]+a[1][0])/2,i=(a[0][1]+a[1][1])/2,f="horizontal"===h?0:1,l={top:[j,a[f][1]],bottom:[j,a[1-f][1]],left:[a[1-f][0],i],right:[a[f][0],i]},g=b.start.y,+b.end.y>+b.start.y&&(g=g+"-"+b.end.y),n=c.get("formatter"),o={start:b.start.y,end:b.end.y,nameMap:g},p=this._formatterLabel(n,o),e=new q({z2:30}),O(e.style,c,{text:p}),e.attr(this._yearTextPositionControl(e,l[d],h,d,k)),m.add(e))},_monthTextPositionControl:function(g,c,i,e,f){var b="left",a="top",h=g[0],d=g[1];return"horizontal"===i?(d+=f,c&&(b="center"),"start"===e&&(a="bottom")):(h+=f,c&&(a="middle"),"start"===e&&(b="right")),{x:h,y:d,textAlign:b,textVerticalAlign:a}},_renderMonthText:function(w,j,p){var a=w.getModel("monthLabel"),d,e,g,o,h,l,i,m,b,k,c,r,s,t,u,v,n;if(a.get("show")){d=a.get("nameMap"),e=a.get("margin"),g=a.get("position"),o=a.get("align"),h=[this._tlpoints,this._blpoints],E(d)&&(d=aaq[d.toUpperCase()]||[]),l="start"===g?0:1,i="horizontal"===j?0:1,e="start"===g?-e:e;for(m="center"===o,b=0;b<h[l].length-1;b++)k=h[l][b].slice(),c=this._firstDayOfMonth[b],m&&(r=this._firstDayPoints[b],k[i]=(r[i]+h[0][b+1][i])/2),s=a.get("formatter"),t=d[+c.m-1],u={yyyy:c.y,yy:(c.y+"").slice(2),MM:c.m,M:+c.m,nameMap:t},v=this._formatterLabel(s,u),n=new q({z2:30}),f(O(n.style,a,{text:v}),this._monthTextPositionControl(k,m,j,g,e)),p.add(n)}},_weekTextPositionControl:function(d,i,j,h,e){var f="center",g="middle",b=d[0],c=d[1],a="start"===j;return"horizontal"===i?(b=b+h+(a?1:-1)*e[0]/2,f=a?"right":"left"):(c=c+h+(a?1:-1)*e[1]/2,g=a?"bottom":"top"),{x:b,y:c,textAlign:f,textVerticalAlign:g}},_renderWeekText:function(n,e,k,r){var c=n.getModel("dayLabel"),a,j,h,b,p,m,i,g,l,s,t,o;if(c.get("show")){a=n.coordinateSystem,j=c.get("position"),h=c.get("nameMap"),b=c.get("margin"),p=a.getFirstDayOfWeek(),E(h)&&(h=aar[h.toUpperCase()]||[]),m=a.getNextNDay(e.end.time,7-e.lweek).time,i=[a.getCellWidth(),a.getCellHeight()],b=d(b,i["horizontal"===k?0:1]),"start"===j&&(m=a.getNextNDay(e.start.time,-(7+e.fweek)).time,b=-b);for(g=0;g<7;g++)s=a.getNextNDay(m,g),t=a.dataToRect([s.time],!1).center,l=Math.abs((g+p)%7),o=new q({z2:30}),f(O(o.style,c,{text:h[l]}),this._weekTextPositionControl(t,k,j,b,i)),r.add(o)}}}),wN={path:null,compoundPath:null,group:e,image:ad,text:q},aj(function(c){var a=c.graphic;b(a)?a[0]&&a[0].elements?c.graphic=[c.graphic[0]]:c.graphic=[{elements:a}]:a&&!a.elements&&(c.graphic=[{elements:[a]}])}),aat=aN({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(b){var a=this.option.elements;this.option.elements=null,aat.superApply(this,"mergeOption",arguments),this.option.elements=a},optionUpdated:function(j,g){var d=this.option,i=(g?d:j).elements,b=d.elements=g?[]:d.elements,h=[],e,k,c;this._flatten(i,h),e=lX(b,h),vN(e),k=this._elOptionsToUpdate=[],a(e,function(c,d){var a=c.option;a&&(k.push(a),function(c,a){var b=c.exist,d;a.id=c.keyInfo.id,!a.type&&b&&(a.type=b.type),null==a.parentId&&(d=a.parentOption,d?a.parentId=d.id:b&&(a.parentId=b.parentId)),a.parentOption=null}(c,a),function(b,c,e){var d=f({},e),a=b[c],g=e.$action||"merge";"merge"===g?a?(l(a,d,!0),cR(a,d,{ignoreSize:!0}),tK(e,a)):b[c]=d:"replace"===g?b[c]=d:"remove"===g&&a&&(b[c]=null)}(b,d,a),function(a,b){if(!a)return;a.hv=b.hv=[wF(b,["left","right"]),wF(b,["top","bottom"])],"group"===a.type&&(null==a.width&&(a.width=b.width=0),null==a.height&&(a.height=b.height=0))}(b[d],a))},this);for(c=b.length-1;0<=c;c--)null==b[c]?b.splice(c,1):delete b[c].$action},_flatten:function(d,b,c){a(d,function(a){if(a){c&&(a.parentOption=c),b.push(a);var d=a.children;"group"===a.type&&d&&this._flatten(d,b,a),delete a.children}},this)},useElOptionsToUpdate:function(){var a=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,a}});function wM(c,e,d,f){var a=d.type,b=new(wN.hasOwnProperty(a)?wN[a]:la(a))(d);e.add(b),f.set(c,b),b.__ecGraphicId=c}function iR(a,b){var c=a&&a.parent;c&&("group"===a.type&&a.traverse(function(a){iR(a,b)}),b.removeKey(a.__ecGraphicId),c.remove(a))}function wF(b,d){var c;return a(d,function(a){null!=b[a]&&"auto"!==b[a]&&(c=!0)}),c}$({type:"graphic",init:function(a,b){this._elMap=n(),this._lastGraphicModel},render:function(a,c,b){a!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=a,this._updateElements(a),this._relocate(a,b)},_updateElements:function(c){var d=c.useElOptionsToUpdate(),b,e;d&&(b=this._elMap,e=this.group,a(d,function(g){var h=g.$action,i=g.id,j=b.get(i),m=g.parentId,n=null!=m?b.get(m):e,d=g.style,l,k;"text"===g.type&&d&&(g.hv&&g.hv[1]&&(d.textVerticalAlign=d.textBaseline=null),!d.hasOwnProperty("textFill")&&d.fill&&(d.textFill=d.fill),!d.hasOwnProperty("textStroke")&&d.stroke&&(d.textStroke=d.stroke)),l=function(b){return b=f({},b),a(["id","parentId","$action","hv","bounding"].concat(tM),function(a){delete b[a]}),b}(g),h&&"merge"!==h?"replace"===h?(iR(j,b),wM(i,n,l,b)):"remove"===h&&iR(j,b):j?j.attr(l):wM(i,n,l,b),k=b.get(i),k&&(k.__ecGraphicWidthOption=g.width,k.__ecGraphicHeightOption=g.height,function(a,c){var b=a.eventData;a.silent||a.ignore||b||(b=a.eventData={componentType:"graphic",componentIndex:c.componentIndex,name:a.name}),b&&(b.info=a.info)}(k,c))}))},_relocate:function(m,i){for(var f=m.option.elements,h=this.group,k=this._elMap,l=i.getWidth(),g=i.getHeight(),b=0,c,j,a,e;b<f.length;b++)c=f[b],(a=k.get(c.id))&&a.isGroup&&(j=(e=a.parent)===h,a.__ecGraphicWidth=d(a.__ecGraphicWidthOption,j?l:e.__ecGraphicWidth)||0,a.__ecGraphicHeight=d(a.__ecGraphicHeightOption,j?g:e.__ecGraphicHeight)||0);for(b=f.length-1;0<=b;b--)c=f[b],(a=k.get(c.id))&&jh(a,c,(e=a.parent)===h?{width:l,height:g}:{width:e.__ecGraphicWidth,height:e.__ecGraphicHeight},null,{hv:c.hv,boundingMode:c.bounding})},_clear:function(){var a=this._elMap;a.each(function(b){iR(b,a)}),this._elMap=n()},dispose:function(){this._clear()}}),wE={};function em(a,b){wE[a]=b}function wo(a){return wE[a]}aaA=aN({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){aaA.superApply(this,"optionUpdated",arguments),a(this.option.feature,function(b,c){var a=wo(c);a&&l(b,a.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1}}});function vW(b,c){var a=dJ(c.get("padding")),d=c.getItemStyle(["color","opacity"]);return d.fill=c.get("backgroundColor"),b=new y({shape:{x:b.x-a[3],y:b.y-a[0],width:b.width+a[1]+a[3],height:b.height+a[0]+a[2],r:c.get("borderRadius")},style:d,silent:!0,z2:-1})}$({type:"toolbox",render:function(b,e,c,n){var d=this.group,g,l,m,h;d.removeAll(),b.get("show")&&(g=+b.get("itemSize"),l=b.get("feature")||{},m=this._features||(this._features={}),h=[],a(l,function(b,a){h.push(a)}),new cb(this._featureNames||[],h).add(i).update(i).remove(j(i,null)).execute(),this._featureNames=h,function(b,a,c){var d=a.getBoxLayoutParams(),e=a.get("padding"),f={width:c.getWidth(),height:c.getHeight()},g=V(d,f,e);dM(a.get("orient"),b,a.get("itemGap"),g.width,g.height),jh(b,d,f,e)}(d,b,c),d.add(vW(d.getBoundingRect(),b)),d.eachChild(function(b){var f=b.__title,a=b.hoverStyle,e,h,i,j;a&&f&&(e=bn(f,ww(a)),h=b.position[0]+d.position[0],i=!1,b.position[1]+d.position[1]+g+e.height>c.getHeight()&&(a.textPosition="top",i=!0),j=i?-5-e.height:g+8,h+e.width/2>c.getWidth()?(a.textPosition=["100%",j],a.textAlign="right"):h-e.width/2<0&&(a.textPosition=[0,j],a.textAlign="left"))}));function i(s,r){var i,j=h[s],p=h[r],o=new w(l[j],b,b.ecModel),q;if(j&&!p){if(function(a){return 0===a.indexOf("my")}(j))i={model:o,onclick:o.option.onclick,featureName:j};else{if(q=wo(j),!q)return;i=new q(o,e,c)}m[j]=i}else{if(!(i=m[p]))return;i.model=o,i.ecModel=e,i.api=c}j||!p?o.get("show")&&!i.unusable?(function(j,l,n){var o=j.getModel("iconStyle"),i=j.getModel("emphasis.iconStyle"),m=l.getIcons?l.getIcons():j.get("icon"),h=j.get("title")||{},p,q,r;"string"==typeof m&&(p=m,q=h,h={},(m={})[n]=p,h[n]=q),r=j.iconPaths={},a(m,function(p,m){var a=ff(p,{},{x:-g/2,y:-g/2,width:g,height:g}),n;a.setStyle(o.getItemStyle()),a.hoverStyle=i.getItemStyle(),a.setStyle({text:h[m],textAlign:i.get("textAlign"),textBorderRadius:i.get("textBorderRadius"),textPadding:i.get("textPadding"),textFill:null}),n=b.getModel("tooltip"),n&&n.get("show")&&a.attr("tooltip",f({content:h[m],formatter:n.get("formatter",!0)||function(){return h[m]},formatterParams:{componentType:"toolbox",name:m,title:h[m],$vars:["name","title"]},position:n.get("position",!0)||"bottom"},n.option)),G(a),b.get("showTitle")&&(a.__title=h[m],a.on("mouseover",function(){var c=i.getItemStyle(),d="vertical"===b.get("orient")?null==b.get("right")?"right":"left":null==b.get("bottom")?"bottom":"top";a.setStyle({textFill:i.get("textFill")||c.fill||c.stroke||"#000",textBackgroundColor:i.get("textBackgroundColor"),textPosition:i.get("textPosition")||d})}).on("mouseout",function(){a.setStyle({textFill:null,textBackgroundColor:null})})),a.trigger(j.get("iconStatus."+m)||"normal"),d.add(a),a.on("click",k(l.onclick,l,e,c,m)),r[m]=a})}(o,i,j),o.setIconStatus=function(a,c){var b=this.option,d=this.iconPaths;b.iconStatus=b.iconStatus||{},b.iconStatus[a]=c,d[a]&&d[a].trigger(c)},i.render&&i.render(o,e,c,n)):i.remove&&i.remove(e,c):i.dispose&&i.dispose(e,c)}},updateView:function(e,b,c,d){a(this._features,function(a){a.updateView&&a.updateView(a.model,b,c,d)})},remove:function(b,c){a(this._features,function(a){a.remove&&a.remove(b,c)}),this.group.removeAll()},dispose:function(b,c){a(this._features,function(a){a.dispose&&a.dispose(b,c)})}}),vU=bM.toolbox.saveAsImage;function iS(a){this.model=a}iS.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:vU.title,type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:vU.lang.slice()},iS.prototype.unusable=!t.canvasSupported,iS.prototype.onclick=function(f,m){var a=this.model,h=a.get("name")||f.get("title.0.text")||"echarts",e=a.get("type",!0)||"png",d=m.getConnectedDataURL({type:e,backgroundColor:a.get("backgroundColor",!0)||f.get("backgroundColor")||"#fff",connectedBackgroundColor:a.get("connectedBackgroundColor"),excludeComponents:a.get("excludeComponents"),pixelRatio:a.get("pixelRatio")}),g,c,i,k,j,l,b,n;if("function"!=typeof MouseEvent||t.browser.ie||t.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(g=atob(d.split(",")[1]),c=g.length,i=new Uint8Array(c);c--;)i[c]=g.charCodeAt(c);k=new Blob([i]),window.navigator.msSaveOrOpenBlob(k,h+"."+e)}else j=a.get("lang"),l='<body style="margin:0;"><img src="'+d+'" style="max-width:100%;" title="'+(j&&j[0]||"")+'" /></body>',window.open().document.write(l);else b=document.createElement("a"),b.download=h+"."+e,b.target="_blank",b.href=d,n=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}),b.dispatchEvent(n)},em("saveAsImage",iS),aaE=bM.toolbox.magicType;function lY(a){this.model=a}lY.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z",tiled:"M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z"},title:i(aaE.title),option:{},seriesIndex:{}},vQ=lY.prototype,vQ.getIcons=function(){var b=this.model,c=b.get("icon"),d={};return a(b.get("type"),function(a){c[a]&&(d[a]=c[a])}),d},vP={line:function(b,c,a,d){if("bar"===b)return l({id:c,type:"line",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},d.get("option.line")||{},!0)},bar:function(b,c,a,d){if("line"===b)return l({id:c,type:"bar",data:a.get("data"),stack:a.get("stack"),markPoint:a.get("markPoint"),markLine:a.get("markLine")},d.get("option.bar")||{},!0)},stack:function(a,b,d,c){if("line"===a||"bar"===a)return l({id:b,stack:"__ec_magicType_stack__"},c.get("option.stack")||{},!0)},tiled:function(a,b,d,c){if("line"===a||"bar"===a)return l({id:b,stack:""},c.get("option.tiled")||{},!0)}},aaI=[["line","bar"],["stack","tiled"]],vQ.onclick=function(e,h,b){var d=this.model,f=d.get("seriesIndex."+b),c;vP[b]&&(c={series:[]},a(aaI,function(c){0<=v(c,b)&&a(c,function(a){d.setIconStatus(a,"normal")})}),d.setIconStatus(b,"emphasis"),e.eachComponent({mainType:"series",query:null==f?null:{seriesIndex:f}},function(a){var m=a.subType,n=a.id,i=vP[b](m,n,a,d),j,l,f,h,k;if(i&&(g(i,a.option),c.series.push(i)),j=a.coordinateSystem,j&&"cartesian2d"===j.type&&("line"===b||"bar"===b))if(l=j.getAxesByScale("ordinal")[0],l){f=l.dim+"Axis",h=e.queryComponents({mainType:f,index:a.get(name+"Index"),id:a.get(name+"Id")})[0].componentIndex,c[f]=c[f]||[];for(k=0;k<=h;k++)c[f][h]=c[f][h]||{};c[f][h].boundaryGap="bar"===b}}),h.dispatchAction({type:"changeMagicType",currentType:b,newOption:c}))},u({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(a,b){b.mergeOption(a.newOption)}),em("magicType",lY),vO=bM.toolbox.dataView,iG=new Array(60).join("-"),eN="	";function aaM(d){var b=function(d){var a={},b=[],c=[];return d.eachRawSeries(function(f){var e=f.coordinateSystem,d,g;!e||"cartesian2d"!==e.type&&"polar"!==e.type?b.push(f):(d=e.getBaseAxis(),"category"===d.type?(g=d.dim+"_"+d.index,a[g]||(a[g]={categoryAxis:d,valueAxis:e.getOtherAxis(d),series:[]},c.push({axisDim:d.dim,axisIndex:d.index})),a[g].series.push(f)):b.push(f))}),{seriesGroupByCategoryAxis:a,other:b,meta:c}}(d);return{value:W([function(d){var b=[];return a(d,function(d,m){var k=d.categoryAxis,l=d.valueAxis.dim,j=[" "].concat(c(d.series,function(a){return a.name})),e=[k.model.getCategories()],i,f,h,g;a(d.series,function(a){e.push(a.getRawData().mapArray(l,function(a){return a}))});for(i=[j.join(eN)],f=0;f<e[0].length;f++){for(h=[],g=0;g<e.length;g++)h.push(e[g][f]);i.push(h.join(eN))}b.push(i.join("\n"))}),b.join("\n\n"+iG+"\n\n")}(b.seriesGroupByCategoryAxis),function(a){return c(a,function(b){var a=b.getRawData(),c=[b.name],d=[];return a.each(a.dimensions,function(){for(var e=arguments.length,g=arguments[e-1],f=a.getName(g),b=0;b<e-1;b++)d[b]=arguments[b];c.push((f?f+eN:"")+d.join(eN))}),c.join("\n")}).join("\n\n"+iG+"\n\n")}(b.other)],function(a){return a.replace(/[\n\t\s]/g,"")}).join("\n\n"+iG+"\n\n"),meta:b.meta}}function hY(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}lC=new RegExp("["+eN+"]+","g");function aaP(d,e){var f=d.split(new RegExp("\n*"+iG+"\n*","g")),b={series:[]};return a(f,function(d,h){if(function(a){if(0<=a.slice(0,a.indexOf("\n")).indexOf(eN))return!0}(d)){var a=function(h){for(var d=h.split(/\n+/g),g=[],e=c(hY(d.shift()).split(lC),function(a){return{name:a,data:[]}}),b=0,f,a;b<d.length;b++){f=hY(d[b]).split(lC),g.push(f.shift());for(a=0;a<f.length;a++)e[a]&&(e[a].data[b]=f[a])}return{series:e,categories:g}}(d),f=e[h],g=f.axisDim+"Axis";f&&(b[g]=b[g]||[],b[g][f.axisIndex]={data:a.categories},b.series=b.series.concat(a.series))}else a=function(i){for(var e=i.split(/\n+/g),j=hY(e.shift()),c=[],a=0,d,b,h,g,f;a<e.length;a++){b=hY(e[a]).split(lC),h="",g=!1,d=isNaN(b[0])?(g=!0,h=b[0],b=b.slice(1),c[a]={name:h,value:[]},c[a].value):c[a]=[];for(f=0;f<b.length;f++)d.push(+b[f]);1===d.length&&(g?c[a].value=d[0]:c[a]=d[0])}return{name:j,data:c}}(d),b.series.push(a)}),b}function fL(a){this._dom=null,this.model=a}fL.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:i(vO.title),lang:i(vO.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},fL.prototype.onclick=function(t,i){var h=i.getDom(),a=this.model,b,f,n,d,c,q,o,p,g,r,e,k,j,l,s;this._dom&&h.removeChild(this._dom),b=document.createElement("div"),b.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",b.style.backgroundColor=a.get("backgroundColor")||"#fff",f=document.createElement("h4"),n=a.get("lang")||[],f.innerHTML=n[0]||a.get("title"),f.style.cssText="margin: 10px 20px;",f.style.color=a.get("textColor"),d=document.createElement("div"),c=document.createElement("textarea"),d.style.cssText="display:block;width:100%;overflow:auto;",q=a.get("optionToContent"),o=a.get("contentToOption"),p=aaM(t),"function"==typeof q?(g=q(i.getOption()),"string"==typeof g?d.innerHTML=g:fi(g)&&d.appendChild(g)):(d.appendChild(c),c.readOnly=a.get("readOnly"),c.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",c.style.color=a.get("textColor"),c.style.borderColor=a.get("textareaBorderColor"),c.style.backgroundColor=a.get("textareaColor"),c.value=p.value),r=p.meta,e=document.createElement("div"),e.style.cssText="position:absolute;bottom:0;left:0;right:0;",k="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",j=document.createElement("div"),l=document.createElement("div"),k+=";background-color:"+a.get("buttonColor"),k+=";color:"+a.get("buttonTextColor"),s=this;function m(){h.removeChild(b),s._dom=null}ov(j,"click",m),ov(l,"click",function(){var a;try{a="function"==typeof o?o(d,i.getOption()):aaP(c.value,r)}catch(a){throw m(),new Error("Data view format error "+a)}a&&i.dispatchAction({type:"changeDataView",newOption:a}),m()}),j.innerHTML=n[1],l.innerHTML=n[2],l.style.cssText=k,j.style.cssText=k,a.get("readOnly")||e.appendChild(l),e.appendChild(j),b.appendChild(f),b.appendChild(d),b.appendChild(e),d.style.height=h.clientHeight-80+"px",h.appendChild(b),this._dom=b},fL.prototype.remove=function(b,a){this._dom&&a.getDom().removeChild(this._dom)},fL.prototype.dispose=function(a,b){this.remove(a,b)},em("dataView",fL),u({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,h){var d=[];a(e.newOption.series,function(a){var e=h.getSeriesByName(a.name)[0],i;e?(i=e.get("data"),d.push({name:a.name,data:function(d,a){return c(d,function(c,e){var d=a&&a[e];return m(d)&&!b(d)?(m(c)&&!b(c)&&(c=c.value),g({value:c},d)):c})}(a.data,i)})):d.push(f({type:"scatter"},a))}),h.mergeOption(g({series:d},e.newOption))}),cj=a,hp=v,hr=j,kJ=["dataToPoint","pointToData"],aaV=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function hL(b,c,a){var d=this._targetInfoList=[],e={},f=un(c,b);cj(aa_,function(b,c){a&&a.include&&!(0<=hp(a.include,c))||b(f,d,e)})}eF=hL.prototype;function kG(a){return a[0]>a[1]&&a.reverse(),a}function un(a,b){return iJ(a,b,{includeMainTypes:aaV})}eF.setOutputRanges=function(a,b){this.matchOutputRanges(a,b,function(a,b,d){if((a.coordRanges||(a.coordRanges=[])).push(b),!a.coordRange){a.coordRange=b;var c=kp[a.brushType](0,d,b);a.__rangeOffset={offset:ua[a.brushType](c.values,a.range,[1,1]),xyMinMax:c.xyMinMax}}})},eF.matchOutputRanges=function(c,b,d){cj(c,function(c){var e=this.findTargetInfo(c,b);e&&!0!==e&&a(e.coordSyses,function(a){var e=kp[c.brushType](1,a,c.range);d(c,e.values,a,b)})},this)},eF.setInputRanges=function(a,b){cj(a,function(a){var c=this.findTargetInfo(a,b),d,e;a.range=a.range||[],c&&!0!==c&&(a.panelId=c.panelId,d=kp[a.brushType](0,c.coordSys,a.coordRange),e=a.__rangeOffset,a.range=e?ua[a.brushType](d.values,e.offset,function(d,e){var b=tY(d),c=tY(e),a=[b[0]/c[0],b[1]/c[1]];return isNaN(a[0])&&(a[0]=1),isNaN(a[1])&&(a[1]=1),a}(d.xyMinMax,e.xyMinMax)):d.values)},this)},eF.makePanelOpts=function(b,a){return c(this._targetInfoList,function(c){var d=c.getPanelRect();return{panelId:c.panelId,defaultBrushType:a&&a(c),clipPath:wA(d),isTargetByCursor:wC(d,b,c.coordSysModel),getLinearBrushOtherExtent:wB(d)}})},eF.controlSeries=function(b,c,d){var a=this.findTargetInfo(b,d);return!0===a||a&&0<=hp(a.coordSyses,c.coordinateSystem)},eF.findTargetInfo=function(c,f){for(var d=this._targetInfoList,g=un(f,c),a=0,b,e;a<d.length;a++)if(b=d[a],e=c.panelId,e){if(b.panelId===e)return b}else for(a=0;a<um.length;a++)if(um[a](g,b))return b;return!0},aa_={grid:function(b,h){var d=b.xAxisModels,e=b.yAxisModels,g=b.gridModels,a=n(),f={},c={};(d||e||g)&&(cj(d,function(c){var b=c.axis.grid.model;a.set(b.id,b),f[b.id]=!0}),cj(e,function(d){var b=d.axis.grid.model;a.set(b.id,b),c[b.id]=!0}),cj(g,function(b){a.set(b.id,b),f[b.id]=!0,c[b.id]=!0}),a.each(function(a){var g=a.coordinateSystem,b=[];cj(g.getCartesians(),function(a,c){(0<=hp(d,a.getAxis("x").model)||0<=hp(e,a.getAxis("y").model))&&b.push(a)}),h.push({panelId:"grid--"+a.id,gridModel:a,coordSysModel:a,coordSys:b[0],coordSyses:b,getPanelRect:ug.grid,xAxisDeclared:f[a.id],yAxisDeclared:c[a.id]})}))},geo:function(a,b){cj(a.geoModels,function(a){var c=a.coordinateSystem;b.push({panelId:"geo--"+a.id,geoModel:a,coordSysModel:a,coordSys:c,coordSyses:[c],getPanelRect:ug.geo})})}},um=[function(b,e){var c=b.xAxisModel,d=b.yAxisModel,a=b.gridModel;return!a&&c&&(a=c.axis.grid.model),!a&&d&&(a=d.axis.grid.model),a&&a===e.gridModel},function(b,c){var a=b.geoModel;return a&&a===c.geoModel}],ug={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var a=this.coordSys,b=a.getBoundingRect().clone();return b.applyTransform(dt(a)),b}},kp={lineX:hr(ub,0),lineY:hr(ub,1),rect:function(b,c,a){var d=c[kJ[b]]([a[0][0],a[1][0]]),e=c[kJ[b]]([a[0][1],a[1][1]]),f=[kG([d[0],e[0]]),kG([d[1],e[1]])];return{values:f,xyMinMax:f}},polygon:function(b,d,e){var a=[[1/0,-1/0],[1/0,-1/0]];return{values:c(e,function(e){var c=d[kJ[b]](e);return a[0][0]=Math.min(a[0][0],c[0]),a[1][0]=Math.min(a[1][0],c[1]),a[0][1]=Math.max(a[0][1],c[0]),a[1][1]=Math.max(a[1][1],c[1]),c}),xyMinMax:a}}};function ub(b,g,h,e){var a=h.getAxis(["x","y"][b]),f=kG(c([0,1],function(b){return g?a.coordToData(a.toLocalCoord(e[b])):a.toGlobalCoord(a.dataToCoord(e[b]))})),d=[];return d[b]=f,d[1-b]=[NaN,NaN],{values:f,xyMinMax:d}}ua={lineX:hr(t_,0),lineY:hr(t_,1),rect:function(a,b,c){return[[a[0][0]-c[0]*b[0][0],a[0][1]-c[0]*b[0][1]],[a[1][0]-c[1]*b[1][0],a[1][1]-c[1]*b[1][1]]]},polygon:function(d,a,b){return c(d,function(c,d){return[c[0]-b[0]*a[d][0],c[1]-b[1]*a[d][1]]})}};function t_(a,b,c,d){return[b[0]-d[a]*c[0],b[1]-d[a]*c[1]]}function tY(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}tH=a,jG="\0_ec_hist_store";function jC(a){var b=a[jG];return b=b||(a[jG]=[{}])}x.registerSubTypeDefaulter("dataZoom",function(){return"slider"}),abj=["cartesian2d","polar","singleAxis"],tu=(gz=["axisIndex","axis","index","id"],tB=c(jB=(jB=["x","y","z","radius","angle","single"]).slice(),i_),tA=c(gz=(gz||[]).slice(),i_),function(b,c){a(jB,function(d,f){for(var e={name:d,capital:tB[f]},a=0;a<gz.length;a++)e[gz[a]]=d+tA[a];b.call(c,e)})});function abp(e,b,c){return function(h){var g,f={nodes:[],records:{}};if(b(function(a){f.records[a.name]={}}),!h)return f;for(d(h,f);g=!1,e(i),g;);function i(e){!function(a,b){return 0<=v(b.nodes,a)}(e,f)&&function(e,f){var d=!1;return b(function(b){a(c(e,b)||[],function(a){f.records[b.name][a]&&(d=!0)})}),d}(e,f)&&(d(e,f),g=!0)}return f};function d(d,e){e.nodes.push(d),b(function(b){a(c(d,b)||[],function(a){e.records[b.name][a]=!0})})}}function jR(a,b,c,d){this._dimName=a,this._axisIndex=b,this._valueWindow,this._percentWindow,this._dataExtent,this._minMaxSpan,this.ecModel=d,this._dataZoomModel=c}dG=a,tb=dD;function ta(b,f){var g=b.getAxisModel(),c=b._percentWindow,d=b._valueWindow,a,e;c&&(a=kf(d,[0,500]),a=Math.min(a,20),e=f||0===c[0]&&100===c[1],g.setRange(e?null:+d[0].toFixed(a),e?null:+d[1].toFixed(a)))}jR.prototype={constructor:jR,hostedBy:function(a){return this._dataZoomModel===a},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var a=[],b=this.ecModel;return b.eachSeries(function(c){if(function(a){return 0<=v(abj,a)}(c.get("coordinateSystem"))){var d=this._dimName,e=b.queryComponents({mainType:d+"Axis",index:c.get(d+"AxisIndex"),id:c.get(d+"AxisId")})[0];this._axisIndex===(e&&e.componentIndex)&&a.push(c)}},this),a},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var c,a,d,b=this._dimName,e=this.ecModel,f=this.getAxisModel();return c="x"===b||"y"===b?(a="gridIndex","x"===b?"y":"x"):(a="polarIndex","angle"===b?"radius":"angle"),e.eachComponent(c+"Axis",function(b){(b.get(a)||0)===(f.get(a)||0)&&(d=b)}),d},getMinMaxSpan:function(){return i(this._minMaxSpan)},calculateDataWindow:function(f){var g,c=this._dataExtent,e=this.getAxisModel().axis.scale,j=this._dataZoomModel.getRangePropMode(),d=[0,100],a=[],b=[],h;dG(["start","end"],function(l,h){var i=f[l],k=f[l+"Value"];"percent"===j[h]?(null==i&&(i=d[h]),k=e.parse(J(i,d,c))):(g=!0,i=J(k=null==k?c[h]:e.parse(k),c,d)),b[h]=k,a[h]=i}),tb(b),tb(a),h=this._minMaxSpan;function i(g,b,c,i,d){var f=d?"Span":"ValueSpan",a;cV(0,g,c,"all",h["min"+f],h["max"+f]);for(a=0;a<2;a++)b[a]=J(g[a],c,i,!0),d&&(b[a]=e.parse(b[a]))}return g?i(b,a,c,d,!1):i(a,b,d,c,!0),{valueWindow:b,percentWindow:a}},reset:function(b){var c,a;b===this._dataZoomModel&&(c=this.getTargetSeriesModels(),this._dataExtent=function(b,c,d){var a=[1/0,-1/0];return dG(d,function(d){var b=d.getData();b&&dG(b.mapDimension(c,!0),function(d){var c=b.getApproximateExtent(d);c[0]<a[0]&&(a[0]=c[0]),c[1]>a[1]&&(a[1]=c[1])})}),a[1]<a[0]&&(a=[NaN,NaN]),function(g,a){var b=g.getAxisModel(),d=b.getMin(!0),e="category"===b.get("type"),f=e&&b.getCategories().length,c;null!=d&&"dataMin"!==d&&"function"!=typeof d?a[0]=d:e&&(a[0]=0<f?0:NaN),c=b.getMax(!0),null!=c&&"dataMax"!==c&&"function"!=typeof c?a[1]=c:e&&(a[1]=0<f?f-1:NaN),b.get("scale",!0)||(0<a[0]&&(a[0]=0),a[1]<0&&(a[1]=0))}(b,a),a}(this,this._dimName,c),function(a){var c=a._minMaxSpan={},d=a._dataZoomModel,b=a._dataExtent;dG(["min","max"],function(f){var g=d.get(f+"Span"),e=d.get(f+"ValueSpan");null!=e&&(e=a.getAxisModel().axis.scale.parse(e)),null!=e?g=J(b[0]+e,b,[0,100],!0):null!=g&&(e=J(g,[0,100],b,!0)-b[0]),c[f+"Span"]=g,c[f+"ValueSpan"]=e})}(this),a=this.calculateDataWindow(b.settledOption),this._valueWindow=a.valueWindow,this._percentWindow=a.percentWindow,ta(this))},restore:function(a){a===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,ta(this,!0))},filterData:function(c,f){if(c===this._dataZoomModel){var d=this._dimName,e=this.getTargetSeriesModels(),b=c.get("filterMode"),a=this._valueWindow;"none"!==b&&dG(e,function(f){var c=f.getData(),e=c.mapDimension(d,!0);e.length&&("weakFilter"===b?c.filterSelf(function(l){for(var g,h,i,b=0,d,f,j,k;b<e.length;b++){if(d=c.get(e[b],l),f=!isNaN(d),j=d<a[0],k=d>a[1],f&&!j&&!k)return!0;f&&(i=!0),j&&(g=!0),k&&(h=!0)}return i&&g&&h}):dG(e,function(d){if("empty"===b)f.setData(c=c.map(d,function(b){return function(b){return b>=a[0]&&b<=a[1]}(b)?b:NaN}));else{var e={};e[d]=a,c.selectRange(e)}}),dG(e,function(b){c.setApproximateExtent(a,b)}))})}}},dA=a,dx=tu,ks=aN({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(a,d,c){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this.textStyleModel,this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var b=sU(a);this.settledOption=b,this.mergeDefaultAndTheme(a,c),this.doInit(b)},mergeOption:function(a){var b=sU(a);l(this.option,a,!0),l(this.settledOption,b,!0),this.doInit(b)},doInit:function(a){var b=this.option,c;t.canvasSupported||(b.realtime=!1),this._setDefaultThrottle(a),sT(this,a),c=this.settledOption,dA([["start","startValue"],["end","endValue"]],function(a,d){"value"===this._rangePropMode[d]&&(b[a[0]]=c[a[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var a=this._axisProxies;this.eachTargetAxis(function(b,c,g,e){var d=this.dependentModels[b.axis][c],f=d.__dzAxisProxy||(d.__dzAxisProxy=new jR(b.name,c,this,e));a[b.name+"_"+c]=f},this)},_resetTarget:function(){var a=this.option,b=this._judgeAutoMode();dx(function(c){var b=c.axisIndex;a[b]=al(a[b])},this),"axisIndex"===b?this._autoSetAxisIndex():"orient"===b&&this._autoSetOrient()},_judgeAutoMode:function(){var a=this.option,b=!1,c;return dx(function(c){null!=a[c.axisIndex]&&(b=!0)},this),c=a.orient,null==c&&b?"orient":b?void 0:(null==c&&(a.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var a=!0,c=this.get("orient",!0),b=this.option,d=this.dependentModels,e;a&&(e="vertical"===c?"y":"x",d[e+"Axis"].length?(b[e+"AxisIndex"]=[0],a=!1):dA(d.singleAxis,function(d){a&&d.get("orient",!0)===c&&(b.singleAxisIndex=[d.componentIndex],a=!1)})),a&&dx(function(f){var d,e,c,g;if(a){if(d=[],e=this.dependentModels[f.axis],e.length&&!d.length)for(c=0,g=e.length;c<g;c++)"category"===e[c].get("type")&&d.push(c);(b[f.axisIndex]=d).length&&(a=!1)}},this),a&&this.ecModel.eachSeries(function(a){this._isSeriesHasAllAxesTypeOf(a,"value")&&dx(function(c){var e=b[c.axisIndex],d=a.get(c.axisIndex),f=a.get(c.axisId);v(e,d=a.ecModel.queryComponents({mainType:c.axis,index:d,id:f})[0].componentIndex)<0&&e.push(d)})},this)},_autoSetOrient:function(){var a;this.eachTargetAxis(function(b){a=a||b.name},this),this.option.orient="y"===a?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(b,c){var a=!0;return dx(function(d){var f=b.get(d.axisIndex),e=this.dependentModels[d.axis][f];e&&e.get("type")===c||(a=!1)},this),a},_setDefaultThrottle:function(b){if(b.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var a=this.ecModel.option;this.option.throttle=a.animation&&0<a.animationDurationUpdate?100:20}},getFirstTargetAxisModel:function(){var a;return dx(function(b){if(null==a){var c=this.get(b.axisIndex);c.length&&(a=this.dependentModels[b.axis][c[0]])}},this),a},eachTargetAxis:function(a,b){var c=this.ecModel;dx(function(d){dA(this.get(d.axisIndex),function(e){a.call(b,d,e,this,c)},this)},this)},getAxisProxy:function(a,b){return this._axisProxies[a+"_"+b]},getAxisModel:function(b,c){var a=this.getAxisProxy(b,c);return a&&a.getAxisModel()},setRawRange:function(a){var b=this.option,c=this.settledOption;dA([["start","startValue"],["end","endValue"]],function(d){null==a[d[0]]&&null==a[d[1]]||(b[d[0]]=c[d[0]]=a[d[0]],b[d[1]]=c[d[1]]=a[d[1]])},this),sT(this,a)},setCalculatedRange:function(a){var b=this.option;dA(["start","startValue","end","endValue"],function(c){b[c]=a[c]})},getPercentRange:function(){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataPercentWindow()},getValueRange:function(a,b){if(null!=a||null!=b)return this.getAxisProxy(a,b).getDataValueWindow();var c=this.findRepresentativeAxisProxy();return c?c.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(c){var a,b;if(c)return c.__dzAxisProxy;a=this._axisProxies;for(b in a)if(a.hasOwnProperty(b)&&a[b].hostedBy(this))return a[b];for(b in a)if(a.hasOwnProperty(b)&&!a[b].hostedBy(this))return a[b]},getRangePropMode:function(){return this._rangePropMode.slice()}});function sU(a){var b={};return dA(["start","end","startValue","endValue","throttle"],function(c){a.hasOwnProperty(c)&&(b[c]=a[c])}),b}function sT(b,c){var a=b._rangePropMode,d=b.get("rangeMode");dA([["start","startValue"],["end","endValue"]],function(f,b){var e=null!=c[f[0]],g=null!=c[f[1]];e&&!g?a[b]="percent":!e&&g?a[b]="value":d?a[b]=d[b]:e&&(a[b]="percent")})}kP=by.extend({type:"dataZoom",render:function(a,b,c,d){this.dataZoomModel=a,this.ecModel=b,this.api=c},getTargetCoordInfo:function(){var b=this.dataZoomModel,c=this.ecModel,a={};return b.eachTargetAxis(function(e,f){var d=c.getComponent(e.axis,f),b;d&&(b=d.getCoordSysModel(),b&&function(d,e,a,f){for(var b,c=0;c<a.length;c++)if(a[c].model===d){b=a[c];break}b||a.push(b={model:d,axisModels:[],coordIndex:f}),b.axisModels.push(e)}(b,d,a[b.mainType]||(a[b.mainType]=[]),b.componentIndex))},this),a}}),ks.extend({type:"dataZoom.select"}),kP.extend({type:"dataZoom.select"}),aH({getTargetSeries:function(c){var b=n();return c.eachComponent("dataZoom",function(c){c.eachTargetAxis(function(c,d,e){a(e.getAxisProxy(c.name,d).getTargetSeriesModels(),function(a){b.set(a.uid,a)})})}),b},modifyOutputEnd:!0,overallReset:function(a,b){a.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(c,d,a){a.getAxisProxy(c.name,d).reset(a,b)}),a.eachTargetAxis(function(c,d,a){a.getAxisProxy(c.name,d).filterData(a,b)})}),a.eachComponent("dataZoom",function(a){var b=a.findRepresentativeAxisProxy(),c=b.getDataPercentWindow(),d=b.getDataValueWindow();a.setCalculatedRange({start:c[0],end:c[1],startValue:d[0],endValue:d[1]})})}}),u("dataZoom",function(b,c){var e=abp(k(c.eachComponent,c,"dataZoom"),tu,function(a,b){return a.get(b.axisIndex)}),d=[];c.eachComponent({mainType:"dataZoom",query:b},function(a,b){d.push.apply(d,e(a).nodes)}),a(d,function(a,c){a.setRawRange({start:b.start,end:b.end,startValue:b.startValue,endValue:b.endValue})})}),abA=bM.toolbox.dataZoom,sq=a;function kW(b,c,a){(this._brushController=new ek(a.getZr())).on("brush",k(this._onBrush,this)).mount(),this._isZoomActive}kW.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:i(abA.title)},ew=kW.prototype,ew.render=function(a,b,c,d){this.model=a,this.ecModel=b,this.api=c,function(d,e,c,a,f){var b=c._isZoomActive,g;a&&"takeGlobalCursor"===a.type&&(b="dataZoomSelect"===a.key&&a.dataZoomSelectActive),c._isZoomActive=b,d.setIconStatus("zoom",b?"emphasis":"normal"),g=new hL(sn(d.option),e,{include:["grid"]}),c._brushController.setPanels(g.makePanelOpts(f,function(a){return a.xAxisDeclared&&!a.yAxisDeclared?"lineX":!a.xAxisDeclared&&a.yAxisDeclared?"lineY":"rect"})).enableBrush(!!b&&{brushType:"auto",brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"}})}(a,b,this,d,c),function(a,b){a.setIconStatus("back",1<function(a){return jC(a).length}(b)?"emphasis":"normal")}(a,b)},ew.onclick=function(b,c,a){abE[a].call(this)},ew.remove=function(a,b){this._brushController.unmount()},ew.dispose=function(a,b){this._brushController.dispose()},abE={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(function(c){var a=jC(c),d=a[a.length-1],b;return 1<a.length&&a.pop(),b={},tH(d,function(d,e){for(var c=a.length-1;0<=c;c--)if(d=a[c][e]){b[e]=d;break}}),b}(this.ecModel))}};function sn(c){var b={};return a(["xAxisIndex","yAxisIndex"],function(a){b[a]=c[a],null==b[a]&&(b[a]="all"),!1!==b[a]&&"none"!==b[a]||(b[a]=[])}),b}ew._onBrush=function(d,e){if(e.isEnd&&d.length){var b={},a=this.ecModel;this._brushController.updateCovers([]),new hL(sn(this.model.option),a,{include:["grid"]}).matchOutputRanges(d,a,function(e,b,a){if("cartesian2d"===a.type){var d=e.brushType;"rect"===d?(c("x",a,b[0]),c("y",a,b[1])):c({lineX:"x",lineY:"y"}[d],a,b)}}),function(b,c){var a=jC(b);tH(c,function(g,c){for(var d=a.length-1,e,f;0<=d;d--)if(a[d][c])break;d<0&&(e=b.queryComponents({mainType:"dataZoom",subType:"select",id:c})[0],e&&(f=e.getPercentRange(),a[0][c]={dataZoomId:c,start:f[0],end:f[1]}))}),a.push(c)}(a,b),this._dispatchZoomAction(b)}function c(h,i,d){var f=i.getAxis(h),g=f.model,e=function(b,c,d){var a;return d.eachComponent({mainType:"dataZoom",subType:"select"},function(d){d.getAxisModel(b,c.componentIndex)&&(a=d)}),a}(h,g,a),c=e.findRepresentativeAxisProxy(g).getMinMaxSpan();null==c.minValueSpan&&null==c.maxValueSpan||(d=cV(0,d.slice(),f.scale.getExtent(),0,c.minValueSpan,c.maxValueSpan)),e&&(b[e.id]={dataZoomId:e.id,startValue:d[0],endValue:d[1]})}},ew._dispatchZoomAction=function(b){var a=[];sq(b,function(b,c){a.push(i(b))}),a.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:a})},em("dataZoom",kW),aj(function(c){var d,a,e;c&&(d=c.dataZoom||(c.dataZoom=[]),b(d)||(c.dataZoom=d=[d]),a=c.toolbox,a&&(b(a)&&(a=a[0]),a&&a.feature)&&(e=a.feature.dataZoom,f("xAxis",e),f("yAxis",e)));function f(e,f){if(f){var g=e+"Index",a=f[g];null==a||"all"===a||b(a)||(a=!1===a||"none"===a?[]:[a]),function(d,e){var a=c[d];b(a)||(a=a?[a]:[]),sq(a,e)}(e,function(h,b){if(null==a||"all"===a||-1!==v(a,b)){var c={type:"select",$fromToolbox:!0,filterMode:f.filterMode||"filter",id:"\0_ec_\0toolbox-dataZoom_"+e+b};c[g]=b,d.push(c)}})}}}),abG=bM.toolbox.restore;function kY(a){this.model=a}kY.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:abG.title},kY.prototype.onclick=function(a,b,c){!function(a){a[jG]=null}(a),b.dispatchAction({type:"restore",from:this.uid})},em("restore",kY),u({type:"restore",event:"restore",update:"prepareAndUpdate"},function(b,a){a.resetOption("recreate")}),aN({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}}),sb=a,abJ=tP,abK=["","-webkit-","-moz-","-o-"];function zP(b){var a=[],e=b.get("transitionDuration"),d=b.get("backgroundColor"),g=b.getModel("textStyle"),f=b.get("padding");return e&&a.push(function(a){var b="cubic-bezier(0.23, 1, 0.32, 1)",d="left "+a+"s "+b+",top "+a+"s "+b;return c(abK,function(a){return a+"transition:"+d}).join(";")}(e)),d&&(t.canvasSupported?a.push("background-Color:"+d):(a.push("background-Color:#"+nM(d)),a.push("filter:alpha(opacity=70)"))),sb(["width","color","radius"],function(c){var d="border-"+c,f=abJ(d),e=b.get(f);null!=e&&a.push(d+":"+e+("color"===c?"":"px"))}),a.push(function(b){var a=[],c=b.get("fontSize"),d=b.getTextColor();return d&&a.push("color:"+d),a.push("font:"+b.getFont()),c&&a.push("line-height:"+Math.round(3*c/2)+"px"),sb(["decoration","align"],function(c){var d=b.get(c);d&&a.push("text-"+c+":"+d)}),a.join(";")}(g)),null!=f&&a.push("padding:"+dJ(f).join("px ")+"px"),a.join(";")+";"}function ll(c,d){var b,e,a;if(t.wxa)return null;b=document.createElement("div"),e=this._zr=d.getZr(),this.el=b,this._x=d.getWidth()/2,this._y=d.getHeight()/2,c.appendChild(b),this._container=c,this._show=!1,this._hideTimeout,a=this,b.onmouseenter=function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0},b.onmousemove=function(b){if(b=b||window.event,!a._enterable){var d=e.handler;dp(c,b,!0),d.dispatch("mousemove",b)}},b.onmouseleave=function(){a._enterable&&a._show&&a.hideLater(a._hideDelay),a._inContent=!1}}function lm(a){this._zr=a.getZr(),this._show=!1,this._hideTimeout}ll.prototype={constructor:ll,_enterable:!0,update:function(){var a=this._container,c=a.currentStyle||document.defaultView.getComputedStyle(a),b=a.style;"absolute"!==b.position&&"absolute"!==c.position&&(b.position="relative")},show:function(b){clearTimeout(this._hideTimeout);var a=this.el;a.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+zP(b)+";left:"+this._x+"px;top:"+this._y+"px;"+(b.get("extraCssText")||""),a.style.display=a.innerHTML?"block":"none",a.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(a){this.el.innerHTML=null==a?"":a},setEnterable:function(a){this._enterable=a},getSize:function(){var a=this.el;return[a.clientWidth,a.clientHeight]},moveTo:function(a,b){var c,d=this._zr,e;d&&d.painter&&(c=d.painter.getViewportRootOffset())&&(a+=c.offsetLeft,b+=c.offsetTop),e=this.el.style,e.left=a+"px",e.top=b+"px",this._x=a,this._y=b},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(a){!this._show||this._inContent&&this._enterable||(a?(this._hideDelay=a,this._show=!1,this._hideTimeout=setTimeout(k(this.hide,this),a)):this.hide())},isShow:function(){return this._show},getOuterSize:function(){var b=this.el.clientWidth,c=this.el.clientHeight,a;return document.defaultView&&document.defaultView.getComputedStyle&&(a=document.defaultView.getComputedStyle(this.el),a&&(b+=parseInt(a.borderLeftWidth,10)+parseInt(a.borderRightWidth,10),c+=parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10))),{width:b,height:c}}},lm.prototype={constructor:lm,_enterable:!0,update:function(){},show:function(a){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(i,j,e){var g,c,f,d,h,b,a;this.el&&this._zr.remove(this.el);for(g={},c=i,f="{marker",d=c.indexOf(f);0<=d;)h=c.indexOf("|}"),b=c.substr(d+f.length,h-d-f.length),-1<b.indexOf("sub")?g["marker"+b]={textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:j[b],textOffset:[3,0]}:g["marker"+b]={textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:j[b]},d=(c=c.substr(h+1)).indexOf("{marker");this.el=new q({style:{rich:g,text:i,textLineHeight:20,textBackgroundColor:e.get("backgroundColor"),textBorderRadius:e.get("borderRadius"),textFill:e.get("textStyle.color"),textPadding:e.get("padding")},z:e.get("z")}),this._zr.add(this.el),a=this,this.el.on("mouseover",function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0}),this.el.on("mouseout",function(){a._enterable&&a._show&&a.hideLater(a._hideDelay),a._inContent=!1})},setEnterable:function(a){this._enterable=a},getSize:function(){var a=this.el.getBoundingRect();return[a.width,a.height]},moveTo:function(a,b){this.el&&this.el.attr("position",[a,b])},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(a){!this._show||this._inContent&&this._enterable||(a?(this._hideDelay=a,this._show=!1,this._hideTimeout=setTimeout(k(this.hide,this),a)):this.hide())},isShow:function(){return this._show},getOuterSize:function(){var a=this.getSize();return{width:a[0],height:a[1]}}},rS=k,fz=a,rG=d,abR=new y({shape:{x:-1,y:-1,width:2,height:2}});function lW(c){for(var b=c.pop(),a;c.length;)a=c.pop(),a&&(w.isInstance(a)&&(a=a.get("tooltip",!0)),"string"==typeof a&&(a={formatter:a}),b=new w(a,b,b.ecModel));return b}function rx(b,a){return b.dispatchAction||k(a.dispatchAction,a)}function rr(a){return"center"===a||"middle"===a}$({type:"tooltip",init:function(c,a){if(!t.node){var b,d=c.getComponent("tooltip").get("renderMode");this._renderMode=vL(d),"html"===this._renderMode?(b=new ll(a.getDom(),a),this._newLine="<br/>"):(b=new lm(a),this._newLine="\n"),this._tooltipContent=b}},render:function(a,c,d){if(!t.node){this.group.removeAll(),this._tooltipModel=a,this._ecModel=c,this._api=d,this._lastDataByCoordSys=null,this._alwaysShowContent=a.get("alwaysShowContent");var b=this._tooltipContent;b.update(),b.setEnterable(a.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var a=this._tooltipModel.get("triggerOn");yI("itemTooltip",this._api,rS(function(b,d,c){"none"!==a&&(0<=a.indexOf(b)?this._tryShow(d,c):"leave"===b&&this._hide(c))},this))},_keepShow:function(){var b=this._tooltipModel,d=this._ecModel,c=this._api,a;null!=this._lastX&&null!=this._lastY&&"none"!==b.get("triggerOn")&&(a=this,clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){c.isDisposed()||a.manuallyShowTip(b,d,c,{x:a._lastX,y:a._lastY})}))},manuallyShowTip:function(j,i,e,a){var c,h,b,d,f,g;if(a.from!==this.uid&&!t.node)if(c=rx(a,e),this._ticket="",h=a.dataByCoordSys,a.tooltip&&null!=a.x&&null!=a.y)b=abR,b.position=[a.x,a.y],b.update(),b.tooltip=a.tooltip,this._tryShow({offsetX:a.x,offsetY:a.y,target:b},c);else if(h)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,event:{},dataByCoordSys:a.dataByCoordSys,tooltipOption:a.tooltipOption},c);else if(null!=a.seriesIndex){if(this._manuallyAxisShowTip(j,i,e,a))return;d=yx(a,i),f=d.point[0],g=d.point[1],null!=f&&null!=g&&this._tryShow({offsetX:f,offsetY:g,position:a.position,target:d.el,event:{}},c)}else null!=a.x&&null!=a.y&&(e.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:e.getZr().findHover(a.x,a.y).target,event:{}},c))},manuallyHideTip:function(d,e,b,a){var c=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&c.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,a.from!==this.uid&&this._hide(rx(a,b))},_manuallyAxisShowTip:function(e,f,g,b){var c=b.seriesIndex,d=b.dataIndex,h=f.getComponent("axisPointer").coordSysAxesInfo,a;if(null!=c&&null!=d&&null!=h)if(a=f.getSeriesByIndex(c),a)if("axis"===(e=lW([a.getData().getItemModel(d),a,(a.coordinateSystem||{}).model,e])).get("trigger"))return g.dispatchAction({type:"updateAxisPointer",seriesIndex:c,dataIndex:d,position:b.position}),!0},_tryShow:function(a,c){var b=a.target,d;this._tooltipModel&&(this._lastX=a.offsetX,this._lastY=a.offsetY,d=a.dataByCoordSys,d&&d.length?this._showAxisTooltip(d,a):b&&null!=b.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(a,b,c)):b&&b.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(a,b,c)):(this._lastDataByCoordSys=null,this._hide(c)))},_showOrMove:function(c,a){var b=c.get("showDelay");a=k(a,this),clearTimeout(this._showTimout),0<b?this._showTimout=setTimeout(a,b):a()},_showAxisTooltip:function(i,c){var f=this._ecModel,o=this._tooltipModel,d=[c.offsetX,c.offsetY],b=[],e=[],h=lW([c.tooltipOption,o]),j=this._renderMode,g=this._newLine,k={},n;fz(i,function(c){fz(c.dataByAxis,function(c){var d=f.getComponent(c.axisDim+"Axis",c.axisIndex),h=c.value,i=[],n,o;d&&null!=h&&(n=yX(h,d.axis,f,c.seriesDataIndices,c.valueLabelOpt),a(c.seriesDataIndices,function(p){var g=f.getSeriesByIndex(p.seriesIndex),q=p.dataIndexInside,a=g&&g.getDataParams(q),o,b,r;a.axisDim=c.axisDim,a.axisIndex=c.axisIndex,a.axisType=c.axisType,a.axisId=c.axisId,a.axisValue=oQ(d.axis,h),a.axisValueLabel=n,a&&(e.push(a),b=g.formatTooltip(q,!0,null,j),m(b)?(o=b.html,r=b.markers,l(k,r)):o=b,i.push(o))}),o=n,"html"!==j?b.push(i.join(g)):b.push((o?K(o)+g:"")+i.join(g)))})},this),b.reverse(),b=b.join(this._newLine+this._newLine),n=c.position,this._showOrMove(h,function(){this._updateContentNotChangedOnAxis(i)?this._updatePosition(h,n,d[0],d[1],this._tooltipContent,e):this._showTooltipContent(h,b,e,Math.random(),d[0],d[1],n,void 0,k)})},_showSeriesItemTooltip:function(d,e,q){var o=this._ecModel,k=e.seriesIndex,h=o.getSeriesByIndex(k),b=e.dataModel||h,a=e.dataIndex,i=e.dataType,j=b.getData(),g=lW([j.getItemModel(a),b,h&&(h.coordinateSystem||{}).model,this._tooltipModel]),l=g.get("trigger"),f,n,p,c,r;(null==l||"item"===l)&&(p=b.getDataParams(a,i),c=b.formatTooltip(a,!1,i,this._renderMode),n=m(c)?(f=c.html,c.markers):(f=c,null),r="item_"+b.name+"_"+a,this._showOrMove(g,function(){this._showTooltipContent(g,f,p,r,d.offsetX,d.offsetY,d.position,d.target,n)}),q({type:"showTip",dataIndexInside:a,dataIndex:j.getRawIndex(a),seriesIndex:k,from:this.uid}))},_showComponentItemTooltip:function(c,d,e){var a=d.tooltip,b,f,g;"string"==typeof a&&(a={content:a,formatter:a}),b=new w(a,this._tooltipModel,this._ecModel),f=b.get("content"),g=Math.random(),this._showOrMove(b,function(){this._showTooltipContent(b,f,b.get("formatterParams")||{},g,c.offsetX,c.offsetY,c.position,d)}),e({type:"showTip",from:this.uid})},_showTooltipContent:function(a,m,e,k,j,g,f,h,i){var c,b,d,l;this._ticket="",a.get("showContent")&&a.get("show")&&(c=this._tooltipContent,b=a.get("formatter"),f=f||a.get("position"),d=m,b&&"string"==typeof b?d=jV(b,e,!0):"function"==typeof b&&(l=rS(function(b,d){b===this._ticket&&(c.setContent(d,i,a),this._updatePosition(a,f,j,g,c,e,h))},this),this._ticket=k,d=b(e,k,l)),c.setContent(d,i,a),c.show(a),this._updatePosition(a,f,j,g,c,e,h))},_updatePosition:function(n,a,c,d,k,q,h){var g=this._api.getWidth(),j=this._api.getHeight(),e,l,i,o,p,f;a=a||n.get("position"),e=k.getSize(),l=n.get("align"),i=n.get("verticalAlign"),o=h&&h.getBoundingRect().clone(),(h&&o.applyTransform(h.transform),"function"==typeof a&&(a=a([c,d],q,k.el,o,{viewSize:[g,j],contentSize:e.slice()})),b(a))?(c=rG(a[0],g),d=rG(a[1],j)):m(a)?(a.width=e[0],a.height=e[1],p=V(a,{width:g,height:j}),c=p.x,d=p.y,i=l=null):"string"==typeof a&&h?(c=(f=function(i,a,h){var e=h[0],f=h[1],c=0,b=0,g=a.width,d=a.height;switch(i){case"inside":c=a.x+g/2-e/2,b=a.y+d/2-f/2;break;case"top":c=a.x+g/2-e/2,b=a.y-f-5;break;case"bottom":c=a.x+g/2-e/2,b=a.y+d+5;break;case"left":c=a.x-e-5,b=a.y+d/2-f/2;break;case"right":c=a.x+g+5,b=a.y+d/2-f/2}return[c,b]}(a,o,e))[0],d=f[1]):(c=(f=function(a,b,i,j,h,c,d){var g=i.getOuterSize(),e=g.width,f=g.height;return null!=c&&(j<a+e+c?a-=e+c:a+=c),null!=d&&(h<b+f+d?b-=f+d:b+=d),[a,b]}(c,d,k,g,j,l?null:20,i?null:20))[0],d=f[1]),l&&(c-=rr(l)?e[0]/2:"right"===l?e[0]:0),i&&(d-=rr(i)?e[1]/2:"bottom"===i?e[1]:0),n.get("confine")&&(c=(f=function(a,b,f,g,h){var c=f.getOuterSize(),d=c.width,e=c.height;return a=Math.min(a+d,g)-d,b=Math.min(b+e,h)-e,a=Math.max(a,0),b=Math.max(b,0),[a,b]}(c,d,k,g,j))[0],d=f[1]),k.moveTo(c,d)},_updateContentNotChangedOnAxis:function(b){var c=this._lastDataByCoordSys,a=!!c&&c.length===b.length;return a&&fz(c,function(e,f){var c=e.dataByAxis||{},d=(b[f]||{}).dataByAxis||[];(a&=c.length===d.length)&&fz(c,function(b,g){var c=d[g]||{},e=b.seriesDataIndices||[],f=c.seriesDataIndices||[];(a&=b.value===c.value&&b.axisType===c.axisType&&b.axisId===c.axisId&&e.length===f.length)&&fz(e,function(b,d){var c=f[d];a&=b.seriesIndex===c.seriesIndex&&b.dataIndex===c.dataIndex})})}),this._lastDataByCoordSys=b,!!a},_hide:function(a){this._lastDataByCoordSys=null,a({type:"hideTip",from:this.uid})},dispose:function(b,a){t.node||(this._tooltipContent.hide(),oL("itemTooltip",a))}}),u({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),u({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){}),abV=["rect","polygon","keep","clear"],rh=a;function rg(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!0}function me(c,d,a){var b={};return rh(d,function(d){var e=b[d]=function(){function a(){}return a.prototype.__hidden=a.prototype,new a}();rh(c[d],function(f,c){if(B.isValidType(c)){var b={type:c,visual:f};a&&a(b,d),e[c]=new B(b),"opacity"===c&&((b=i(b)).type="colorAlpha",e.__hidden.__alphaForOpacity=new B(b))}})}),b}function re(c,b,d){var e;a(d,function(a){b.hasOwnProperty(a)&&rg(b[a])&&(e=!0)}),e&&a(d,function(a){b.hasOwnProperty(a)&&rg(b[a])?c[a]=i(b[a]):delete c[a]})}mk={lineX:q_(0),lineY:q_(1),rect:{point:function(a,c,b){return a&&b.boundingRect.contain(a[0],a[1])},rect:function(a,c,b){return a&&b.boundingRect.intersect(a)}},polygon:{point:function(a,c,b){return a&&b.boundingRect.contain(a[0],a[1])&&dl(b.range,a[0],a[1])},rect:function(d,i,h){var c=h.range,a,b,f,e,g;return!(!d||c.length<=1)&&(a=d.x,b=d.y,f=d.width,e=d.height,g=c[0],!!(dl(c,a,b)||dl(c,a+f,b)||dl(c,a,b+e)||dl(c,a+f,b+e)||r.create(d).contain(g[0],g[1])||fe(a,b,a+f,b,c)||fe(a,b,a,b+e,c)||fe(a+f,b,a+f,b+e,c)||fe(a,b+e,a+f,b+e,c))||void 0)}}};function q_(a){var b=["x","y"],c=["width","height"];return{point:function(b,e,c){if(b){var d=c.range;return gx(b[a],d)}},rect:function(e,h,g){if(e){var f=g.range,d=[e[b[a]],e[b[a]]+e[c[a]]];return d[1]<d[0]&&d.reverse(),gx(d[0],f)||gx(d[1],f)||gx(f[0],d)||gx(f[1],d)}}}}function gx(a,b){return b[0]<=a&&a<=b[1]}qC=["inBrush","outOfBrush"],no="__ecBrushSelect",nB="__ecInBrushSelectEvent",ql=bz.VISUAL.BRUSH;function acf(a,c){if(!a.isDisposed()){var b=a.getZr();b[nB]=!0,a.dispatchAction({type:"brushSelect",batch:c}),b[nB]=!1}}function qk(g,c,d,e){for(var b=0,f=c.length,a;b<f;b++)if(a=c[b],g[a.brushType](e,d,a.selectors,a))return!0}function qg(e){var b=e.brushSelector,c,d;return E(b)?(c=[],a(mk,function(a,d){c[d]=function(c,d,e,f){var g=d.getItemLayout(c);return a[b](g,e,f)}}),c):ag(b)?(d={},a(mk,function(c,a){d[a]=b}),d):b}N(ql,function(b,c,a){b.eachComponent({mainType:"brush"},function(c){a&&"takeGlobalCursor"===a.type&&c.setBrushOption("brush"===a.key?a.brushOption:{brushType:!1}),(c.brushTargetManager=new hL(c.option,b)).setInputRanges(c.areas,b)})}),H(ql,function(d,j,k){var e,f,h=[];d.eachComponent({mainType:"brush"},function(j,s){var r={brushId:j.id,brushIndex:s,brushName:j.name,areas:i(j.areas),selected:[]},m,n,t,o,q,l,u,w;h.push(r),m=j.option,n=m.brushLink,t=[],o=[],q=[],l=0,s||(e=m.throttleType,f=m.throttleDelay),u=c(j.areas,function(b){return function(b){var c=b.selectors={};return a(mk[b.brushType],function(a,d){c[d]=function(d){return a(d,c,b)}}),b}(g({boundingRect:aci[b.brushType](b)},b))}),w=me(j.option,qC,function(a){a.mappingMethod="fixed"});function k(a){return"all"===n||t[a]}function p(a){return!!a.length}b(n)&&a(n,function(a){t[a]=1}),d.eachSeries(function(c,e){var f=q[e]=[];"parallel"===c.subType?function(a,c){var b=a.coordinateSystem;l|=b.hasAxisBrushed(),k(c)&&b.eachActiveState(a.getData(),function(a,b){"active"===a&&(o[b]=1)})}(c,e):function(e,g,c){var f=qg(e),h;if(!f||function(d,c){var a=d.option.seriesIndex;return null!=a&&"all"!==a&&(b(a)?v(a,c)<0:c!==a)}(j,g))return;a(u,function(a){f[a.brushType]&&j.brushTargetManager.controlSeries(a,e,d)&&c.push(a),l|=p(c)}),k(g)&&p(c)&&(h=e.getData(),h.each(function(a){qk(f,c,h,a)&&(o[a]=1)}))}(c,e,f)}),d.eachSeries(function(b,c){var e={seriesId:b.id,seriesIndex:c,seriesName:b.name,dataIndex:[]},g,f,d,h;r.selected.push(e),g=qg(b),f=q[c],d=b.getData(),h=k(c)?function(a){return o[a]?(e.dataIndex.push(d.getRawIndex(a)),"inBrush"):"outOfBrush"}:function(a){return qk(g,f,d,a)?(e.dataIndex.push(d.getRawIndex(a)),"inBrush"):"outOfBrush"},(k(c)?l:p(f))&&function(i,e,b,h,l,d){var c,g={};function j(a){return b.getItemVisual(c,a)}function k(a,d){b.setItemVisual(c,a,d)}function f(o,r){var f,i,m,n,a,q,p;if(c=null==d?o:r,f=b.getRawDataItem(c),!f||!1!==f.visualMap)for(i=h.call(l,o),m=e[i],n=g[i],a=0,q=n.length;a<q;a++)p=n[a],m[p]&&m[p].applyVisual(o,j,k)}a(i,function(a){var b=B.prepareVisualTypes(e[a]);g[a]=b}),null==d?b.each(f):b.each([d],f)}(qC,w,d,h)})}),function(b,c,d,e,f){if(!f)return;var a=b.getZr();if(a[nB])return;a[no]||(a[no]=acf),gB(a,no,d,c)(b,e)}(j,e,f,h,k)}),aci={lineX:aa,lineY:aa,rect:function(a){return p_(a.range)},polygon:function(e){for(var a,d=e.range,c=0,f=d.length,b;c<f;c++)a=a||[[1/0,-1/0],[1/0,-1/0]],b=d[c],b[0]<a[0][0]&&(a[0][0]=b[0]),b[0]>a[0][1]&&(a[0][1]=b[0]),b[1]<a[1][0]&&(a[1][0]=b[1]),b[1]>a[1][1]&&(a[1][1]=b[1]);return a&&p_(a)}};function p_(a){return new r(a[0][0],a[1][0],a[0][1]-a[0][0],a[1][1]-a[1][0])}ack=["#ddd"],aN({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(c,d){var a=this.option,b;d||re(a,c,["inBrush","outOfBrush"]),b=a.inBrush=a.inBrush||{},a.outOfBrush=a.outOfBrush||{color:ack},b.hasOwnProperty("liftZ")||(b.liftZ=5)},setAreas:function(a){a&&(this.areas=c(a,function(a){return pI(this.option,a)},this))},setBrushOption:function(a){this.brushOption=pI(this.option,a),this.brushType=this.brushOption.brushType}});function pI(a,b){return l({brushType:a.brushType,brushMode:a.brushMode,transformable:a.transformable,brushStyle:new w(a.brushStyle).getItemStyle(),removeOnClick:a.removeOnClick,z:a.z},b,!0)}function op(a,d,c,b){b&&b.$from===a.id||this._brushController.setPanels(a.brushTargetManager.makePanelOpts(c)).enableBrush(a.brushOption).updateCovers(a.areas.slice())}$({type:"brush",init:function(b,a){this.ecModel=b,this.api=a,this.model,(this._brushController=new ek(a.getZr())).on("brush",k(this._onBrush,this)).mount()},render:function(a){return this.model=a,op.apply(this,arguments)},updateTransform:op,updateView:op,dispose:function(){this._brushController.dispose()},_onBrush:function(b,c){var a=this.model.id;this.model.brushTargetManager.setOutputRanges(b,this.ecModel),c.isEnd&&!c.removeOnClick||this.api.dispatchAction({type:"brush",brushId:a,areas:i(b),$from:a}),c.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:a,areas:i(b),$from:a})}}),u({type:"brush",event:"brush"},function(a,b){b.eachComponent({mainType:"brush",query:a},function(b){b.setAreas(a.areas)})}),u({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),u({type:"brushEnd",event:"brushEnd",update:"none"},function(){}),acn=bM.toolbox.brush;function oq(a,b,c){this.model=a,this.ecModel=b,this.api=c,this._brushType,this._brushMode}oq.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:i(acn.title)},hE=oq.prototype,hE.render=hE.updateView=function(d,f,g){var b,c,e;f.eachComponent({mainType:"brush"},function(a){b=a.brushType,c=a.brushOption.brushMode||"single",e|=a.areas.length}),this._brushType=b,this._brushMode=c,a(d.get("type",!0),function(a){d.setIconStatus(a,("keep"===a?"multiple"===c:"clear"===a?e:a===b)?"emphasis":"normal")})},hE.getIcons=function(){var b=this.model,c=b.get("icon",!0),d={};return a(b.get("type",!0),function(a){c[a]&&(d[a]=c[a])}),d},hE.onclick=function(e,b,a){var c=this._brushType,d=this._brushMode;"clear"===a?(b.dispatchAction({type:"axisAreaSelect",intervals:[]}),b.dispatchAction({type:"brush",command:"clear",areas:[]})):b.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===a?c:c!==a&&a,brushMode:"keep"===a?"multiple"===d?"single":"multiple":d}})},em("brush",oq),aj(function(f,j){var e=f&&f.brush,g,c,h,i,d;b(e)||(e=e?[e]:[]),e.length&&(g=[],a(e,function(a){var b=a.hasOwnProperty("toolbox")?a.toolbox:[];b instanceof Array&&(g=g.concat(b))}),c=f&&f.toolbox,b(c)&&(c=c[0]),c||(c={feature:{}},f.toolbox=[c]),h=c.feature||(c.feature={}),i=h.brush||(h.brush={}),d=i.type||(i.type=[]),d.push.apply(d,g),function(b){var c={};a(b,function(a){c[a]=1}),b.length=0,a(c,function(c,a){b.push(a)})}(d),j&&!d.length&&d.push.apply(d,abV))}),aN({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),$({type:"title",render:function(a,w,u){var f,p,o,g,c,e,t,r,i,k,l,m,d,j,b,n,h,s,v;this.group.removeAll(),a.get("show")&&(f=this.group,p=a.getModel("textStyle"),o=a.getModel("subtextStyle"),g=a.get("textAlign"),c=R(a.get("textBaseline"),a.get("textVerticalAlign")),e=new q({style:O({},p,{text:a.get("text"),textFill:p.getTextColor()},{disableBox:!0}),z2:10}),t=e.getBoundingRect(),r=a.get("subtext"),i=new q({style:O({},o,{text:r,textFill:o.getTextColor(),y:t.height+a.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),k=a.get("link"),l=a.get("sublink"),m=a.get("triggerEvent",!0),e.silent=!k&&!m,i.silent=!l&&!m,k&&e.on("click",function(){window.open(k,"_"+a.get("target"))}),l&&i.on("click",function(){window.open(l,"_"+a.get("subtarget"))}),e.eventData=i.eventData=m?{componentType:"title",componentIndex:a.componentIndex}:null,f.add(e),r&&f.add(i),d=f.getBoundingRect(),j=a.getBoxLayoutParams(),j.width=d.width,j.height=d.height,b=V(j,{width:u.getWidth(),height:u.getHeight()},a.get("padding")),g||("middle"===(g=a.get("left")||a.get("right"))&&(g="center"),"right"===g?b.x+=b.width:"center"===g&&(b.x+=b.width/2)),c||("center"===(c=a.get("top")||a.get("bottom"))&&(c="middle"),"bottom"===c?b.y+=b.height:"middle"===c&&(b.y+=b.height/2),c=c||"top"),f.attr("position",[b.x,b.y]),n={textAlign:g,textVerticalAlign:c},e.setStyle(n),i.setStyle(n),d=f.getBoundingRect(),h=b.margin,s=a.getItemStyle(["color","opacity"]),s.fill=a.get("backgroundColor"),v=new y({shape:{x:d.x-h[3],y:d.y-h[0],width:d.width+h[1]+h[3],height:d.height+h[0]+h[2],r:a.get("borderRadius")},style:s,subPixelOptimize:!0,silent:!0}),f.add(v))}});function pE(c){var e=c.itemStyle||(c.itemStyle={}),d=e.emphasis||(e.emphasis={}),b=c.label||c.label||{},f=b.normal||(b.normal={}),g={normal:1,emphasis:1};a(b,function(b,a){g[a]||c_(f,a)||(f[a]=b)}),d.label&&!c_(b,"emphasis")&&(b.emphasis=d.label,delete d.label)}function c_(a,b){return a.hasOwnProperty(b)}x.registerSubTypeDefaulter("timeline",function(){return"slider"}),u({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(b,c){var a=c.getComponent("timeline");return a&&null!=b.currentIndex&&(a.setCurrentIndex(b.currentIndex),!a.get("loop",!0)&&a.isIndexMax()&&a.setPlayState(!1)),c.resetOption("timeline"),g({currentIndex:a.option.currentIndex},b)}),u({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(a,c){var b=c.getComponent("timeline");b&&null!=a.playState&&b.setPlayState(a.playState)}),pB=x.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(a,c,b){this._data,this._names,this.mergeDefaultAndTheme(a,b),this._initData()},mergeOption:function(a){pB.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(a){null==a&&(a=this.option.currentIndex);var b=this._data.count();this.option.loop?a=(a%b+b)%b:(b<=a&&(a=b-1),a<0&&(a=0)),this.option.currentIndex=a},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(a){this.option.autoPlay=!!a},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var c=this.option,b=c.data||[],d=c.axisType,e=this._names=[],f,g;"category"===d&&(f=[],a(b,function(b,d){var c,a=fE(b);m(b)?(c=i(b)).value=d:c=d,f.push(c),E(a)||null!=a&&!isNaN(a)||(a=""),e.push(a+"")}),b=f),g={category:"ordinal",time:"time"}[d]||"number",(this._data=new ab([{name:"value",type:g}],this)).initData(b,e)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}}),C(pB.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}}),kD);function hZ(a,b,c,d){Q.call(this,a,b,c),this.type=d||"value",this.model=null}acu=by.extend({type:"timeline"}),hZ.prototype={constructor:hZ,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return"horizontal"===this.model.get("orient")}},D(hZ,Q),cH=k,oS=a,pc=Math.PI;function pf(e,h,j,c,a,f){var i=h.get("color"),m,b,g,k,n;return a?(a.setColor(i),j.add(a),f&&f.onUpdate(a)):((a=aQ(e.get("symbol"),-1,-1,2,2,i)).setStyle("strokeNoScale",!0),j.add(a),f&&f.onCreate(a)),m=h.getItemStyle(["color","symbol","symbolSize"]),a.setStyle(m),c=l({rectHover:!0,z2:100},c,!0),b=e.get("symbolSize"),(b=b instanceof Array?b.slice():[+b,+b])[0]/=2,b[1]/=2,c.scale=b,g=e.get("symbolOffset"),g&&(k=c.position=c.position||[0,0],k[0]+=d(g[0],b[0]),k[1]+=d(g[1],b[1])),n=e.get("symbolRotate"),c.rotation=(n||0)*Math.PI/180||0,a.attr(c),a.updateTransform(),a}function pg(a,e,f,c,g){if(!a.dragging){var b=c.getModel("checkpointStyle"),d=f.dataToCoord(c.getData().get(["value"],e));g||!b.get("animation",!0)?a.attr({position:[d,0]}):(a.stopAnimation(!0),a.animateTo({position:[d,0]},b.get("animationDuration",!0),b.get("animationEasing",!0)))}}acu.extend({type:"timeline.slider",init:function(b,a){this.api=a,this._axis,this._viewRect,this._timer,this._currentPointer,this._mainGroup,this._labelGroup},render:function(a,g,d,h){if(this.model=a,this.api=d,this.ecModel=g,this.group.removeAll(),a.get("show",!0)){var b=this._layout(a,d),e=this._createGroup("mainGroup"),f=this._createGroup("labelGroup"),c=this._axis=this._createAxis(b,a);a.formatTooltip=function(a){return K(c.scale.getLabel(a))},oS(["AxisLine","AxisTick","Control","CurrentPointer"],function(d){this["_render"+d](b,e,c,a)},this),this._renderAxisLabel(b,f,c,a),this._position(b,a)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(b,k){var a=b.get("label.position"),d=b.get("orient"),e=function(a,b){return V(a.getBoxLayoutParams(),{width:b.getWidth(),height:b.getHeight()},a.get("padding"))}(b,k),n,o,r,m,y,x,v,p,c,g,j,q,f,l,t,u,s,w,h,i;return null==a||"auto"===a?a="horizontal"===d?e.y+e.height/2<k.getHeight()/2?"-":"+":e.x+e.width/2<k.getWidth()/2?"+":"-":isNaN(a)&&(a={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[d][a]),y={horizontal:"center",vertical:0<=a||"+"===a?"left":"right"},x={horizontal:0<=a||"+"===a?"top":"bottom",vertical:"middle"},v={horizontal:0,vertical:pc/2},p="vertical"===d?e.height:e.width,c=b.getModel("controlStyle"),g=c.get("show",!0),j=g?c.get("itemSize"):0,q=g?c.get("itemGap"):0,f=j+q,l=b.get("label.rotate")||0,l=l*pc/180,t=c.get("position",!0),u=g&&c.get("showPlayBtn",!0),s=g&&c.get("showPrevBtn",!0),w=g&&c.get("showNextBtn",!0),h=0,i=p,"left"===t||"bottom"===t?(u&&(n=[0,0],h+=f),s&&(o=[h,0],h+=f)):(u&&(n=[i-j,0],i-=f),s&&(o=[0,0],h+=f)),w&&(r=[i-j,0],i-=f),m=[h,i],b.get("inverse")&&m.reverse(),{viewRect:e,mainLength:p,orient:d,rotation:v[d],labelRotation:l,labelPosOpt:a,labelAlign:b.get("label.align")||y[d],labelBaseline:b.get("label.verticalAlign")||b.get("label.baseline")||x[d],playPosition:n,prevBtnPosition:o,nextBtnPosition:r,axisExtent:m,controlSize:j,controlGap:q}},_position:function(h,r){var f=this._mainGroup,e=this._labelGroup,c=h.viewRect,a,n,m,b,p,q,d,i,k,g;"vertical"===h.orient&&(a=aL(),n=c.x,m=c.y+c.height,be(a,a,[-n,-m]),cc(a,a,-pc/2),be(a,a,[n,m]),(c=c.clone()).applyTransform(a)),b=j(c),p=j(f.getBoundingRect()),q=j(e.getBoundingRect()),d=f.position,i=e.position,i[0]=d[0]=b[0][0],g=h.labelPosOpt,isNaN(g)?(l(d,p,b,1,k="+"===g?0:1),l(i,q,b,1,1-k)):(l(d,p,b,1,k=0<=g?0:1),i[1]=d[1]+g);function o(a){var c=a.position;a.origin=[b[0][0]-c[0],b[1][0]-c[1]]}function j(a){return[[a.x,a.x+a.width],[a.y,a.y+a.height]]}function l(c,d,e,a,b){c[a]+=e[a][b]-d[a][b]}f.attr("position",d),e.attr("position",i),f.rotation=e.rotation=h.rotation,o(f),o(e)},_createAxis:function(g,a){var d=a.getData(),e=a.get("axisType"),b=eH(a,e),f,c;return b.getTicks=function(){return d.mapArray(["value"],function(a){return a})},f=d.getDataExtent("value"),b.setExtent(f[0],f[1]),b.niceTicks(),c=new hZ("value",b,g.axisExtent,e),c.model=a,c},_createGroup:function(b){var a=this["_"+b]=new e;return this.group.add(a),a},_renderAxisLine:function(e,c,d,a){var b=d.getExtent();a.get("lineStyle.show")&&c.add(new av({shape:{x1:b[0],y1:0,x2:b[1],y2:0},style:f({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(f,c,a,b){var d=b.getData(),e=a.scale.getTicks();oS(e,function(g){var h=a.dataToCoord(g),f=d.getItemModel(g),i=f.getModel("itemStyle"),j=f.getModel("emphasis.itemStyle"),k={position:[h,0],onclick:cH(this._changeTimeline,this,g)},e=pf(f,i,c,k);G(e,j.getItemStyle()),f.get("tooltip")?(e.dataIndex=g,e.dataModel=b):e.dataIndex=e.dataModel=null},this)},_renderAxisLabel:function(a,c,b,d){if(b.getLabelModel().get("show")){var e=d.getData(),f=b.getViewLabels();oS(f,function(d){var g=d.tickValue,h=e.getItemModel(g),i=h.getModel("label"),j=h.getModel("emphasis.label"),k=b.dataToCoord(d.tickValue),f=new q({position:[k,0],rotation:a.labelRotation-a.rotation,onclick:cH(this._changeTimeline,this,g),silent:!1});O(f.style,i,{text:d.formattedLabel,textAlign:a.labelAlign,textVerticalAlign:a.labelBaseline}),c.add(f),G(f,O({},j))},this)}},_renderControl:function(a,g,m,b){var c=a.controlSize,l=a.rotation,j=b.getModel("controlStyle").getItemStyle(),k=b.getModel("emphasis.controlStyle").getItemStyle(),h=[0,-c/2,c,c],e=b.getPlayState(),f=b.get("inverse",!0);function d(a,e,f,m){if(a){var d=function(b,c,a,d){return fV(b.get(c).replace(/^path:\/\//,""),i(d||{}),new r(a[0],a[1],a[2],a[3]),"center")}(b,e,h,{position:a,origin:[c/2,0],rotation:m?-l:0,rectHover:!0,style:j,onclick:f});g.add(d),G(d,k)}}d(a.nextBtnPosition,"controlStyle.nextIcon",cH(this._changeTimeline,this,f?"-":"+")),d(a.prevBtnPosition,"controlStyle.prevIcon",cH(this._changeTimeline,this,f?"+":"-")),d(a.playPosition,"controlStyle."+(e?"stopIcon":"playIcon"),cH(this._handlePlayClick,this,!e),!0)},_renderCurrentPointer:function(h,i,e,b){var f=b.getData(),c=b.getCurrentIndex(),d=f.getItemModel(c).getModel("checkpointStyle"),a=this,g={onCreate:function(d){d.draggable=!0,d.drift=cH(a._handlePointerDrag,a),d.ondragend=cH(a._handlePointerDragend,a),pg(d,c,e,b,!0)},onUpdate:function(a){pg(a,c,e,b)}};this._currentPointer=pf(d,d,this._mainGroup,{},this._currentPointer,g)},_handlePlayClick:function(a){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:a,from:this.uid})},_handlePointerDrag:function(b,c,a){this._clearTimer(),this._pointerChangeTimeline([a.offsetX,a.offsetY])},_handlePointerDragend:function(a){this._pointerChangeTimeline([a.offsetX,a.offsetY],!0)},_pointerChangeTimeline:function(e,f){var a=this._toAxisCoord(e)[0],b=dD(this._axis.getExtent().slice()),c,d;a>b[1]&&(a=b[1]),a<b[0]&&(a=b[0]),this._currentPointer.position[0]=a,this._currentPointer.dirty(),c=this._findNearestTick(a),d=this.model,(f||c!==d.getCurrentIndex()&&d.get("realtime"))&&this._changeTimeline(c)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(cH(function(){var a=this.model;this._changeTimeline(a.getCurrentIndex()+(a.get("rewind",!0)?-1:1))},this),this.model.get("playInterval")))},_toAxisCoord:function(a){return bH(a,this._mainGroup.getLocalTransform(),!0)},_findNearestTick:function(c){var a,d=this.model.getData(),b=1/0,e=this._axis;return d.each(["value"],function(f,g){var h=e.dataToCoord(f),d=Math.abs(h-c);d<b&&(b=d,a=g)}),a},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(a){var b=this.model.getCurrentIndex();"+"===a?a=b+1:"-"===a&&(a=b-1),this.api.dispatchAction({type:"timelineChange",currentIndex:a,from:this.uid})}}),aj(function(d){var c=d&&d.timeline;b(c)||(c=c?[c]:[]),a(c,function(c){c&&function(c){var e=c.type,f={number:"value",time:"time"},d;f[e]&&(c.axisType=f[e],delete c.type),(pE(c),c_(c,"controlPosition"))&&(d=c.controlStyle||(c.controlStyle={}),c_(d,"position")||(d.position=c.controlPosition),"none"!==d.position||c_(d,"show")||(d.show=!1,delete d.position),delete c.controlPosition),a(c.data||[],function(a){m(a)&&!b(a)&&(!c_(a,"value")&&c_(a,"name")&&(a.value=a.name),pE(a))})}(c)})}),pi=cN,o_=K;function jd(a){dn(a,"label",["show"])}i$=aN({type:"marker",dependencies:["series","grid","polar","geo"],init:function(a,c,b){this.mergeDefaultAndTheme(a,b),this._mergeOption(a,b,!1,!0)},isAnimationEnabled:function(){if(t.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},mergeOption:function(a,b){this._mergeOption(a,b,!1,!1)},_mergeOption:function(h,b,d,e){var g=this.constructor,c=this.mainType+"Model";d||b.eachSeries(function(d){var h=d.get(this.mainType,!0),i=d[c];h&&h.data?(i?i._mergeOption(h,b,!0):(e&&jd(h),a(h.data,function(a){a instanceof Array?(jd(a[0]),jd(a[1])):jd(a)}),f(i=new g(h,this,b),{mainType:this.mainType,seriesIndex:d.seriesIndex,name:d.name,createdBySelf:!0}),i.__hostSeries=d),d[c]=i):d[c]=null},this)},formatTooltip:function(f){var g=this.getData(),a=this.getRawValue(f),h=b(a)?c(a,pi).join(", "):pi(a),e=g.getName(f),d=o_(this.name);return null==a&&!e||(d+="<br />"),e&&(d+=o_(e),null!=a&&(d+=" : ")),null!=a&&(d+=o_(h)),d},getData:function(){return this._data},setData:function(a){this._data=a}}),C(i$,kD),i$.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}}),pj=v;function oV(i,a,h,c,k,e){var b=[],g=bX(a,c)?a.getCalculationInfo("stackResultDimension"):c,j=or(a,g,i),f=a.indicesOfNearest(g,j)[0],d;return b[k]=a.get(h,f),b[e]=a.get(c,f),d=tU(a.get(c,f)),0<=(d=Math.min(d,20))&&(b[e]=+b[e].toFixed(d)),b}oU=j,oH={min:oU(oV,"min"),max:oU(oV,"max"),average:oU(oV,"average")};function e_(g,a){var e=g.getData(),j=g.coordinateSystem,h,d,l,k,f,c;if(a&&!function(a){return!isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}(a)&&!b(a.coord)&&j)if(h=j.dimensions,d=pv(a,e,j,g),(a=i(a)).type&&oH[a.type]&&d.baseAxis&&d.valueAxis)l=pj(h,d.baseAxis.dim),k=pj(h,d.valueAxis.dim),a.coord=oH[a.type](e,d.baseDataDim,d.valueDataDim,l,k),a.value=a.coord[k];else{for(f=[null!=a.xAxis?a.xAxis:a.radiusAxis,null!=a.yAxis?a.yAxis:a.angleAxis],c=0;c<2;c++)oH[f[c]]&&(f[c]=or(e,e.mapDimension(h[c]),f[c]));a.coord=f}return a}function pv(b,c,d,e){var a={};return null!=b.valueIndex||null!=b.valueDim?(a.valueDataDim=null!=b.valueIndex?c.getDimension(b.valueIndex):b.valueDim,a.valueAxis=d.getAxis(function(f,a){var b=f.getData(),d=b.dimensions,c,e;a=b.getDimension(a);for(c=0;c<d.length;c++)if(e=b.getDimensionInfo(d[c]),e.name===a)return e.coordDim}(e,a.valueDataDim)),a.baseAxis=d.getOtherAxis(a.valueAxis),a.baseDataDim=c.mapDimension(a.baseAxis.dim)):(a.baseAxis=e.getBaseAxis(),a.valueAxis=d.getOtherAxis(a.baseAxis),a.baseDataDim=c.mapDimension(a.baseAxis.dim),a.valueDataDim=c.mapDimension(a.valueAxis.dim)),a}function fk(a,b){return!(a&&a.containData&&b.coord&&!function(a){return!(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}(b))||a.containData(b.coord)}function pA(a,c,d,b){return b<2?a.coord&&a.coord[b]:a.value}function or(a,b,c){if("average"!==c)return"median"===c?a.getMedian(b):a.getDataExtent(b,!0)["max"===c?1:0];var d=0,e=0;return a.each(b,function(a,b){isNaN(a)||(d+=a,e++)}),d/e}n_=$({type:"marker",init:function(){this.markerGroupMap=n()},render:function(e,a,c){var b=this.markerGroupMap,d;b.each(function(a){a.__keep=!1}),d=this.type+"Model",a.eachSeries(function(b){var e=b[d];e&&this.renderSeries(b,e,a,c)},this),b.each(function(a){a.__keep||this.group.remove(a.group)},this)},renderSeries:function(){}});function pZ(a,c,e){var b=c.coordinateSystem;a.each(function(g){var f,j=a.getItemModel(g),h=d(j.get("x"),e.getWidth()),i=d(j.get("y"),e.getHeight()),k,l;isNaN(h)||isNaN(i)?c.getMarkerPosition?f=c.getMarkerPosition(a.getValues(a.dimensions,g)):b&&(k=a.get(b.dimensions[0],g),l=a.get(b.dimensions[1],g),f=b.dataToPoint([k,l])):f=[h,i],isNaN(h)||(f[0]=h),isNaN(i)||(f[1]=i),a.setItemLayout(g,f)})}n_.extend({type:"markPoint",updateTransform:function(c,a,b){a.eachSeries(function(a){var c=a.markPointModel;c&&(pZ(c.getData(),a,b),this.markerGroupMap.get(a.id).updateLayout(c))},this)},renderSeries:function(b,a,m,l){var i=b.coordinateSystem,f=b.id,k=b.getData(),h=this.markerGroupMap,e=h.get(f)||h.set(f,new ez),d=function(a,b,e){var f=a?c(a&&a.dimensions,function(a){return g({name:a},b.getData().getDimensionInfo(b.getData().mapDimension(a))||{})}):[{name:"value",type:"float"}],h=new ab(f,e),d=c(e.get("data"),j(e_,b));return a&&(d=W(d,j(fk,a))),h.initData(d,null,a?pA:function(a){return a.value}),h}(i,b,a);a.setData(d),pZ(a.getData(),b,l),d.each(function(b){var f=d.getItemModel(b),c=f.getShallow("symbol"),e=f.getShallow("symbolSize"),g=ag(c),h=ag(e),i,j;(g||h)&&(i=a.getRawValue(b),j=a.getDataParams(b),g&&(c=c(i,j)),h&&(e=e(i,j))),d.setItemVisual(b,{symbol:c,symbolSize:e,color:f.get("itemStyle.color")||k.getVisual("color")})}),e.updateData(d),this.group.add(e.group),d.eachItemGraphicEl(function(b){b.traverse(function(b){b.dataModel=a})}),e.__keep=!0,e.group.silent=a.get("silent")||b.get("silent")}}),aj(function(a){a.markPoint=a.markPoint||{}}),i$.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end"},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}});function acP(h,p,r,a){var k=h.getData(),d=a.type,j,c,n,m,o,e,g,q;return!b(a)&&("min"===d||"max"===d||"average"===d||"median"===d||null!=a.xAxis||null!=a.yAxis)&&(null!=a.yAxis||null!=a.xAxis?(j=p.getAxis(null!=a.yAxis?"y":"x"),c=af(a.yAxis,a.xAxis)):(n=pv(a,k,p,h),j=n.valueAxis,c=or(k,gp(k,n.valueDataDim),d)),m="x"===j.dim?0:1,o=1-m,e=i(a),g={},e.type=null,e.coord=[],g.coord=[],e.coord[o]=-1/0,g.coord[o]=1/0,q=r.get("precision"),0<=q&&"number"==typeof c&&(c=+c.toFixed(Math.min(q,20))),e.coord[m]=g.coord[m]=c,a=[e,g,{type:d,valueIndex:a.valueIndex,value:c}]),(a=[e_(h,a[0]),e_(h,a[1]),f({},a[2])])[2].type=a[2].type||"",l(a[2],a[0]),l(a[2],a[1]),a}function gQ(a){return!isNaN(a)&&!isFinite(a)}function qn(a,b,c,d){var e=1-a,f=d.dimensions[a];return gQ(b[e])&&gQ(c[e])&&b[a]===c[a]&&d.getAxis(f).containData(b[a])}function acS(a,b){if("cartesian2d"===a.type){var c=b[0].coord,d=b[1].coord;if(c&&d&&(qn(1,c,d,a)||qn(0,c,d,a)))return!0}return fk(a,b[0])&&fk(a,b[1])}function nz(a,c,l,i,k){var b,e=i.coordinateSystem,j=a.getItemModel(c),h=d(j.get("x"),k.getWidth()),g=d(j.get("y"),k.getHeight()),f,p,o,m,n;isNaN(h)||isNaN(g)?(i.getMarkerPosition?b=i.getMarkerPosition(a.getValues(a.dimensions,c)):(f=e.dimensions,p=a.get(f[0],c),o=a.get(f[1],c),b=e.dataToPoint([p,o])),"cartesian2d"===e.type&&(m=e.getAxis("x"),n=e.getAxis("y"),f=e.dimensions,gQ(a.get(f[0],c))?b[0]=m.toGlobalCoord(m.getExtent()[l?0:1]):gQ(a.get(f[1],c))&&(b[1]=n.toGlobalCoord(n.getExtent()[l?0:1]))),isNaN(h)||(b[0]=h),isNaN(g)||(b[1]=g)):b=[h,g],a.setItemLayout(c,b)}n_.extend({type:"markLine",updateTransform:function(c,b,a){b.eachSeries(function(b){var c=b.markLineModel,e,d,f;c&&(e=c.getData(),d=c.__from,f=c.__to,d.each(function(c){nz(d,c,!0,b,a),nz(f,c,!1,b,a)}),e.each(function(a){e.setItemLayout(a,[d.getItemLayout(a),f.getItemLayout(a)])}),this.markerGroupMap.get(b.id).updateLayout())},this)},renderSeries:function(e,a,t,s){var r=e.coordinateSystem,o=e.id,q=e.getData(),n=this.markerGroupMap,m=n.get(o)||n.set(o,new hh),l,f,k,d,i,h;this.group.add(m.group),l=function(a,h,d){var e=a?c(a&&a.dimensions,function(a){return g({name:a},h.getData().getDimensionInfo(h.getData().mapDimension(a))||{})}):[{name:"value",type:"float"}],i=new ab(e,d),k=new ab(e,d),f=new ab([],d),b=c(d.get("data"),j(acP,h,a,d)),l;return a&&(b=W(b,j(acS,a))),l=a?pA:function(a){return a.value},i.initData(c(b,function(a){return a[0]}),null,l),k.initData(c(b,function(a){return a[1]}),null,l),f.initData(c(b,function(a){return a[2]})),f.hasItemOption=!0,{from:i,to:k,line:f}}(r,e,a),f=l.from,k=l.to,d=l.line,a.__from=f,a.__to=k,a.setData(d),i=a.get("symbol"),h=a.get("symbolSize");function p(a,b,c){var d=a.getItemModel(b);nz(a,b,c,e,s),a.setItemVisual(b,{symbolSize:d.get("symbolSize")||h[c?0:1],symbol:d.get("symbol",!0)||i[c?0:1],color:d.get("itemStyle.color")||q.getVisual("color")})}b(i)||(i=[i,i]),"number"==typeof h&&(h=[h,h]),l.from.each(function(a){p(f,a,!0),p(k,a,!1)}),d.each(function(a){var b=d.getItemModel(a).get("lineStyle.color");d.setItemVisual(a,{color:b||f.getItemVisual(a,"color")}),d.setItemLayout(a,[f.getItemLayout(a),k.getItemLayout(a)]),d.setItemVisual(a,{fromSymbolSize:f.getItemVisual(a,"symbolSize"),fromSymbol:f.getItemVisual(a,"symbol"),toSymbolSize:k.getItemVisual(a,"symbolSize"),toSymbol:k.getItemVisual(a,"symbol")})}),m.updateData(d),l.line.eachItemGraphicEl(function(b,c){b.traverse(function(b){b.dataModel=a})}),m.__keep=!0,m.group.silent=a.get("silent")||e.get("silent")}}),aj(function(a){a.markLine=a.markLine||{}}),i$.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});function acU(g,i,j,h){var b=e_(g,h[0]),c=e_(g,h[1]),d=af,e=b.coord,f=c.coord,a;return e[0]=d(e[0],-1/0),e[1]=d(e[1],-1/0),f[0]=d(f[0],1/0),f[1]=d(f[1],1/0),a=fJ([{},b,c]),a.coord=[b.coord,c.coord],a.x0=b.x,a.y0=b.y,a.x1=c.x,a.y1=c.y,a}function hq(a){return!isNaN(a)&&!isFinite(a)}function qo(b,c,d){var a=1-b;return hq(c[a])&&hq(d[a])}function acX(d,a){var b=a.coord[0],c=a.coord[1];return!("cartesian2d"!==d.type||!b||!c||!qo(1,b,c)&&!qo(0,b,c))||fk(d,{coord:b,x:a.x0,y:a.y0})||fk(d,{coord:c,x:a.x1,y:a.y1})}function qp(f,e,a,i,l){var b,c=i.coordinateSystem,k=f.getItemModel(e),h=d(k.get(a[0]),l.getWidth()),g=d(k.get(a[1]),l.getHeight()),j,m,n,o,p;return isNaN(h)||isNaN(g)?(i.getMarkerPosition?b=i.getMarkerPosition(f.getValues(a,e)):(j=[o=f.get(a[0],e),p=f.get(a[1],e)],c.clampData&&c.clampData(j,j),b=c.dataToPoint(j,!0)),"cartesian2d"===c.type&&(m=c.getAxis("x"),n=c.getAxis("y"),o=f.get(a[0],e),p=f.get(a[1],e),hq(o)?b[0]=m.toGlobalCoord(m.getExtent()["x0"===a[0]?0:1]):hq(p)&&(b[1]=n.toGlobalCoord(n.getExtent()["y0"===a[1]?0:1]))),isNaN(h)||(b[0]=h),isNaN(g)||(b[1]=g)):b=[h,g],b}qr=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],n_.extend({type:"markArea",updateTransform:function(d,a,b){a.eachSeries(function(d){var e=d.markAreaModel,a;e&&(a=e.getData(),a.each(function(e){var f=c(qr,function(c){return qp(a,e,c,d,b)});a.setItemLayout(e,f),a.getItemGraphicEl(e).setShape("points",f)}))},this)},renderSeries:function(d,f,n,m){var k=d.coordinateSystem,h=d.id,l=d.getData(),i=this.markerGroupMap,b=i.get(h)||i.set(h,{group:new e}),a;this.group.add(b.group),b.__keep=!0,a=function(a,h,b){var d=a?(e=c(a&&a.dimensions,function(a){var b=h.getData();return g({name:a},b.getDimensionInfo(b.mapDimension(a))||{})}),new ab(c(["x0","y0","x1","y1"],function(a,b){return{name:a,type:e[b%2].type}}),b)):new ab(e=[{name:"value",type:"float"}],b),f=c(b.get("data"),j(acU,h,a,b)),e,i;return a&&(f=W(f,j(acX,a))),i=a?function(b,c,d,a){return b.coord[Math.floor(a/2)][a%2]}:function(a){return a.value},d.initData(f,null,i),d.hasItemOption=!0,d}(k,d,f),f.setData(a),a.each(function(b){a.setItemLayout(b,c(qr,function(c){return qp(a,b,c,d,m)})),a.setItemVisual(b,{color:l.getVisual("color")})}),a.diff(b.__data).add(function(c){var d=new aF({shape:{points:a.getItemLayout(c)}});a.setItemGraphicEl(c,d),b.group.add(d)}).update(function(c,e){var d=b.__data.getItemGraphicEl(e);p(d,{shape:{points:a.getItemLayout(c)}},f,c),b.group.add(d),a.setItemGraphicEl(c,d)}).remove(function(a){var c=b.__data.getItemGraphicEl(a);b.group.remove(c)}).execute(),a.eachItemGraphicEl(function(b,c){var d=a.getItemModel(c),h=d.getModel("label"),i=d.getModel("emphasis.label"),e=a.getItemVisual(c,"color");b.useStyle(g(d.getModel("itemStyle").getItemStyle(),{fill:gZ(e,.4),stroke:e})),b.hoverStyle=d.getModel("emphasis.itemStyle").getItemStyle(),aI(b.style,b.hoverStyle,h,i,{labelFetcher:f,labelDataIndex:c,defaultText:a.getName(c)||"",isRectText:!0,autoColor:e}),G(b,{}),b.dataModel=f}),b.__data=a,b.group.silent=f.get("silent")||d.get("silent")}}),aj(function(a){a.markArea=a.markArea||{}}),qy=bM.legend.selector,ac$={all:{type:"all",title:i(qy.all)},inverse:{type:"inverse",title:i(qy.inverse)}},qF=aN({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(a,c,b){this.mergeDefaultAndTheme(a,b),a.selected=a.selected||{},this._updateSelector(a)},mergeOption:function(a){qF.superCall(this,"mergeOption",a),this._updateSelector(a)},_updateSelector:function(d){var c=d.selector;!0===c&&(c=d.selector=["all","inverse"]),b(c)&&a(c,function(a,b){E(a)&&(a={type:a}),c[b]=l(a,ac$[a.type])})},optionUpdated:function(){var a,c,b,d;if(this._updateData(this.ecModel),a=this._data,a[0]&&"single"===this.get("selectedMode")){for(c=!1,b=0;b<a.length;b++)if(d=a[b].get("name"),this.isSelected(d)){this.select(d),c=!0;break}c||this.select(a[0].get("name"))}},_updateData:function(d){var a=[],b=[],e;d.eachRawSeries(function(c){var e,h=c.name,g,f;b.push(h),c.legendDataProvider?(g=c.legendDataProvider(),f=g.mapArray(g.getName),d.isSeriesFiltered(c)||(b=b.concat(f)),f.length?a=a.concat(f):e=!0):e=!0,e&&lV(c)&&a.push(c.name)}),this._availableNames=b,e=c(this.get("data")||a,function(a){return"string"!=typeof a&&"number"!=typeof a||(a={name:a}),new w(a,this,this.ecModel)},this),this._data=e},getData:function(){return this._data},select:function(c){var b=this.option.selected;"single"===this.get("selectedMode")&&a(this._data,function(a){b[a.get("name")]=!1}),b[c]=!0},unSelect:function(a){"single"!==this.get("selectedMode")&&(this.option.selected[a]=!1)},toggleSelected:function(a){var b=this.option.selected;b.hasOwnProperty(a)||(b[a]=!0),this[b[a]?"unSelect":"select"](a)},allSelect:function(){var b=this._data,c=this.option.selected;a(b,function(a){c[a.get("name",!0)]=!0})},inverseSelect:function(){var c=this._data,b=this.option.selected;a(c,function(c){var a=c.get("name",!0);b.hasOwnProperty(a)||(b[a]=!0),b[a]=!b[a]})},isSelected:function(a){var b=this.option.selected;return!(b.hasOwnProperty(a)&&!b[a])&&0<=v(this._availableNames,a)},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}});function fP(b,d,f){var e,c={},g="toggleSelected"===b;return f.eachComponent("legend",function(f){g&&null!=e?f[e?"select":"unSelect"](d.name):"allSelect"===b||"inverseSelect"===b?f[b]():(f[b](d.name),e=f.isSelected(d.name)),a(f.getData(),function(d){var a=d.get("name"),b;"\n"!==a&&""!==a&&(b=f.isSelected(a),c.hasOwnProperty(a)?c[a]=c[a]&&b:c[a]=b)})}),"allSelect"===b||"inverseSelect"===b?{selected:c}:{name:d.name,selected:c}}u("legendToggleSelect","legendselectchanged",j(fP,"toggleSelected")),u("legendAllSelect","legendselectall",j(fP,"allSelect")),u("legendInverseSelect","legendinverseselect",j(fP,"inverseSelect")),u("legendSelect","legendselected",j(fP,"select")),u("legendUnSelect","legendunselected",j(fP,"unSelect")),dW=j,q$=a,jf=e,adf=$({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new jf),this._backgroundEl,this.group.add(this._selectorGroup=new jf),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(a,o,h){var m=this._isFirstRender,b,e,f,d,j,k,i,n,c,l;this._isFirstRender=!1,this.resetInner(),a.get("show",!0)&&(b=a.get("align"),e=a.get("orient"),b&&"auto"!==b||(b="right"===a.get("left")&&"vertical"===e?"right":"left"),f=a.get("selector",!0),d=a.get("selectorPosition",!0),!f||d&&"auto"!==d||(d="horizontal"===e?"end":"start"),this.renderInner(b,a,o,h,f,e,d),j=a.getBoxLayoutParams(),k={width:h.getWidth(),height:h.getHeight()},i=a.get("padding"),n=V(j,k,i),c=this.layoutInner(a,b,n,m,f,d),l=V(g({width:c.width,height:c.height},j),k,i),this.group.attr("position",[l.x-c.x,l.y-c.y]),this.group.add(this._backgroundEl=vW(c,a)))},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(f,b,e,a,h,i,j){var k=this.getContentGroup(),d=n(),g=b.get("selectedMode"),c=[];e.eachRawSeries(function(a){a.get("legendHoverLink")||c.push(a.id)}),q$(b.getData(),function(n,o){var h=n.get("name"),i,l,m,j,p,q;this.newlineDisabled||""!==h&&"\n"!==h?(i=e.getSeriesByName(h)[0],d.get(h)||(i?(l=i.getData(),m=l.getVisual("color"),j=l.getVisual("borderColor"),"function"==typeof m&&(m=m(i.getDataParams(0))),"function"==typeof j&&(j=j(i.getDataParams(0))),p=l.getVisual("legendSymbol")||"roundRect",q=l.getVisual("symbol"),this._createItem(h,o,n,b,p,q,f,m,j,g).on("click",dW(ru,h,a)).on("mouseover",dW(rw,i.name,null,a,c)).on("mouseout",dW(rC,i.name,null,a,c)),d.set(h,!0)):e.eachRawSeries(function(j){var e,i,k,l;if(!d.get(h)&&j.legendDataProvider){if(e=j.legendDataProvider(),i=e.indexOfName(h),i<0)return;k=e.getItemVisual(i,"color"),l=e.getItemVisual(i,"borderColor"),this._createItem(h,o,n,b,"roundRect",null,f,k,l,g).on("click",dW(ru,h,a)).on("mouseover",dW(rw,null,h,a,c)).on("mouseout",dW(rC,null,h,a,c)),d.set(h,!0)}},this))):k.add(new jf({newline:!0}))},this),h&&this._createSelector(h,b,a,i,j)},_createSelector:function(b,a,c,e,f){var d=this.getSelectorGroup();q$(b,function(b){!function(e){var f=e.type,b=new q({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){c.dispatchAction({type:"all"===f?"legendAllSelect":"legendInverseSelect"})}}),g,h;d.add(b),g=a.getModel("selectorLabel"),h=a.getModel("emphasis.selectorLabel"),aI(b.style,b.hoverStyle={},g,h,{defaultText:e.title,isRectText:!1}),G(b)}(b)})},_createItem:function(c,F,l,b,i,d,t,s,r,E){var o=b.get("itemWidth"),k=b.get("itemHeight"),n=b.get("inactiveColor"),w=b.get("inactiveBorderColor"),h=b.get("symbolKeepAspect"),x=b.getModel("itemStyle"),g=b.isSelected(c),a=new jf,u=l.getModel("textStyle"),v=l.get("icon"),p=l.getModel("tooltip"),H=p.parentModel,A=aQ(i=v||i,0,0,o,k,g?s:n,null==h||h),j,B,C,D,e,m,z;return a.add(ra(A,i,x,r,w,g)),!v&&d&&(d!==i||"none"===d)&&(j=.8*k,"none"===d&&(d="circle"),B=aQ(d,(o-j)/2,(k-j)/2,j,j,g?s:n,null==h||h),a.add(ra(B,d,x,r,w,g))),C="left"===t?o+5:-5,D=t,e=b.get("formatter"),m=c,"string"==typeof e&&e?m=e.replace("{name}",null!=c?c:""):"function"==typeof e&&(m=e(c)),a.add(new q({style:O({},u,{text:m,x:C,y:k/2,textFill:g?u.getTextColor():n,textAlign:D,textVerticalAlign:"middle"})})),z=new y({shape:a.getBoundingRect(),invisible:!0,tooltip:p.get("show")?f({content:c,formatter:H.get("formatter",!0)||function(){return c},formatterParams:{componentType:"legend",legendIndex:b.componentIndex,name:c,$vars:["name"]}},p.option):null}),a.add(z),a.eachChild(function(a){a.silent=!0}),z.silent=!E,this.getContentGroup().add(a),G(a),a.__legendDataIndex=F,a},layoutInner:function(f,r,n,q,p,o){var h=this.getContentGroup(),j=this.getSelectorGroup(),c,k,b,g,l,a,e,d,m,i;return dM(f.get("orient"),h,f.get("itemGap"),n.width,n.height),c=h.getBoundingRect(),k=[-c.x,-c.y],p?(dM("horizontal",j,f.get("selectorItemGap",!0)),b=j.getBoundingRect(),g=[-b.x,-b.y],l=f.get("selectorButtonGap",!0),a=f.getOrient().index,e=0===a?"width":"height",d=0===a?"height":"width",m=0===a?"y":"x","end"===o?g[a]+=c[e]+l:k[a]+=b[e]+l,g[1-a]+=c[d]/2-b[d]/2,j.attr("position",g),h.attr("position",k),i={x:0,y:0},i[e]=c[e]+l+b[e],i[d]=Math.max(c[d],b[d]),i[m]=Math.min(0,b[m]+g[1-a]),i):(h.attr("position",k),this.group.getBoundingRect())},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function ra(d,b,c,e,f,g){var a;return"line"!==b&&b.indexOf("empty")<0?(a=c.getItemStyle(),d.style.stroke=e,g||(a.stroke=f)):a=c.getItemStyle(["borderWidth","borderColor"]),d.setStyle(a)}function ru(a,b){b.dispatchAction({type:"legendToggleSelect",name:a})}function rw(c,d,a,e){var b=a.getZr().storage.getDisplayList()[0];b&&b.useHoverLayer||a.dispatchAction({type:"highlight",seriesName:c,name:d,excludeSeriesId:e})}function rC(c,d,a,e){var b=a.getZr().storage.getDisplayList()[0];b&&b.useHoverLayer||a.dispatchAction({type:"downplay",seriesName:c,name:d,excludeSeriesId:e})}aH(bz.PROCESSOR.SERIES_FILTER,function(b){var a=b.findComponents({mainType:"legend"});a&&a.length&&b.filterSeries(function(c){for(var b=0;b<a.length;b++)if(!a[b].isSelected(c.name))return!1;return!0})}),x.registerSubTypeDefaulter("legend",function(){return"plain"}),rD=qF.extend({type:"legend.scroll",setScrollDataIndex:function(a){this.option.scrollDataIndex=a},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(a,b,c,d){var e=ec(a);rD.superCall(this,"init",a,b,c,d),rI(this,a,e)},mergeOption:function(a,b){rD.superCall(this,"mergeOption",a,b),rI(this,this.option,a)}});function rI(b,c,d){var a=[1,1];a[b.getOrient().index]=0,cR(c,d,{type:"box",ignoreSize:a})}rM=e,lG=["width","height"],lE=["x","y"],lD=adf.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){lD.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new rM),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new rM),this._showController},resetInner:function(){lD.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(i,c,l,h,m,n,j){var g=this,d,a,e;lD.superCall(this,"renderInner",i,c,l,h,m,n,j),d=this._controllerGroup,a=c.get("pageIconSize",!0),b(a)||(a=[a,a]),f("pagePrev",0),e=c.getModel("pageTextStyle");function f(b,f){var i=b+"DataIndex",e=ff(c.get("pageIcons",!0)[c.getOrient().name][f],{onclick:k(g._pageGo,g,i,c,h)},{x:-a[0]/2,y:-a[1]/2,width:a[0],height:a[1]});e.name=b,d.add(e)}d.add(new q({name:"pageText",style:{textFill:e.getTextColor(),font:e.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),f("pageNext",1)},layoutInner:function(j,s,o,q,l,p){var k=this.getSelectorGroup(),b=j.getOrient().index,d=lG[b],r=lE[b],e=lG[1-b],f=lE[1-b],h,c,g,n,a,m;return l&&dM("horizontal",k,j.get("selectorItemGap",!0)),h=j.get("selectorButtonGap",!0),c=k.getBoundingRect(),g=[-c.x,-c.y],n=i(o),l&&(n[d]=o[d]-c[d]-h),a=this._layoutContentAndController(j,q,n,b,d,e,f),l&&("end"===p?g[b]+=a[d]+h:(m=c[d]+h,g[b]-=m,a[r]-=m),a[d]+=c[d]+h,g[1-b]+=a[f]+a[e]/2-c[e]/2,a[e]=Math.max(a[e],c[e]),a[f]=Math.min(a[f],c[f]+g[1-b]),k.attr("position",g)),a},_layoutContentAndController:function(b,u,e,d,a,f,s){var h=this.getContentGroup(),j=this._containerGroup,k=this._controllerGroup,g,c,m,t,q,n,r,i,l,o;return dM(b.get("orient"),h,b.get("itemGap"),d?e.width:null,d?null:e.height),dM("horizontal",k,b.get("pageButtonItemGap",!0)),g=h.getBoundingRect(),c=k.getBoundingRect(),m=this._showController=g[a]>e[a],t=[-g.x,-g.y],u||(t[d]=h.position[d]),q=[0,0],n=[-c.x,-c.y],r=R(b.get("pageButtonGap",!0),b.get("itemGap",!0)),m&&("end"===b.get("pageButtonPosition",!0)?n[d]+=e[a]-c[a]:q[d]+=c[a]+r),n[1-d]+=g[f]/2-c[f]/2,h.attr("position",t),j.attr("position",q),k.attr("position",n),i={x:0,y:0},(i[a]=m?e[a]:g[a],i[f]=Math.max(g[f],c[f]),i[s]=Math.min(0,c[s]+n[1-d]),j.__rectSize=e[a],m)?(l={x:0,y:0},l[a]=Math.max(e[a]-c[a]-r,0),l[f]=i[f],j.setClipPath(new y({shape:l})),j.__rectSize=l[a]):k.eachChild(function(a){a.attr({invisible:!0,silent:!0})}),o=this._getPageInfo(b),null!=o.pageIndex&&p(h,{position:o.contentPosition},m&&b),this._updatePageInfoView(b,o),i},_pageGo:function(c,a,d){var b=this._getPageInfo(a)[c];null!=b&&d.dispatchAction({type:"legendScroll",scrollDataIndex:b,legendId:a.id})},_updatePageInfoView:function(c,d){var e=this._controllerGroup,f,b,g,h,i;a(["pagePrev","pageNext"],function(b){var f=null!=d[b+"DataIndex"],a=e.childOfName(b);a&&(a.setStyle("fill",f?c.get("pageIconColor",!0):c.get("pageIconInactiveColor",!0)),a.cursor=f?"pointer":"default")}),f=e.childOfName("pageText"),b=c.get("pageFormatter"),g=d.pageIndex,h=null!=g?g+1:0,i=d.pageCount,f&&b&&f.setStyle("text",E(b)?b.replace("{current}",h).replace("{total}",i):b({current:h,total:i}))},_getPageInfo:function(k){var t=k.get("scrollDataIndex",!0),p=this.getContentGroup(),o=this._containerGroup.__rectSize,g=k.getOrient().index,s=lG[g],r=lE[g],j=this._findTargetItemIndex(t),h=p.children(),n=h[j],m=h.length,l=m?1:0,a={contentPosition:p.position.slice(),pageCount:l,pageIndex:l-1,pagePrevDataIndex:null,pageNextDataIndex:null},f,e,b,d,c;if(!n)return a;f=i(n),a.contentPosition[g]=-f.s;for(e=j+1,b=f,d=f,c=null;e<=m;++e)(!(c=i(h[e]))&&d.e>b.s+o||c&&!q(c,b.s))&&(b=d.i>b.i?d:c)&&(null==a.pageNextDataIndex&&(a.pageNextDataIndex=b.i),++a.pageCount),d=c;for(e=j-1,b=f,d=f,c=null;-1<=e;--e)(c=i(h[e]))&&q(d,c.s)||!(b.i<d.i)||(d=b,null==a.pagePrevDataIndex&&(a.pagePrevDataIndex=b.i),++a.pageCount,++a.pageIndex),b=c;return a;function i(a){if(a){var b=a.getBoundingRect(),c=b[r]+a.position[g];return{s:c,e:c+b[s],i:a.__legendDataIndex}}}function q(a,b){return a.e>=b&&a.s<=b+o}},_findTargetItemIndex:function(c){var a,b,d=this.getContentGroup();return this._showController&&d.eachChild(function(f,d){var e=f.__legendDataIndex;null==b&&null!=e&&(b=d),e===c&&(a=d)}),null!=a?a:b}}),u("legendScroll","legendscroll",function(a,c){var b=a.scrollDataIndex;null!=b&&c.eachComponent({mainType:"legend",subType:"scroll",query:a},function(a){a.setScrollDataIndex(b)})}),ks.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}}),hA=y,cX=J,lA=dD,bT=k,ly=a,gv="horizontal",r$="vertical",adx=["line","bar","candlestick","scatter"],li=kP.extend({type:"dataZoom.slider",init:function(b,a){this._displayables={},this._orient,this._range,this._handleEnds,this._size,this._handleWidth,this._handleHeight,this._location,this._dragging,this._dataShadowInfo,this.api=a},render:function(b,c,d,a){li.superApply(this,"render",arguments),gB(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=b.get("orient"),!1!==this.dataZoomModel.get("show")?(a&&"dataZoom"===a.type&&a.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){li.superApply(this,"remove",arguments),rY(this,"_dispatchZoomAction")},dispose:function(){li.superApply(this,"dispose",arguments),rY(this,"_dispatchZoomAction")},_buildView:function(){var a=this.group,b;a.removeAll(),this._resetLocation(),this._resetInterval(),b=this._displayables.barGroup=new e,this._renderBackground(),this._renderHandle(),this._renderDataShadow(),a.add(b),this._positionGroup()},_resetLocation:function(){var g=this.dataZoomModel,f=this.api,b=this._findCoordRect(),d={width:f.getWidth(),height:f.getHeight()},h=this._orient===gv?{right:d.width-b.x-b.width,top:d.height-30-7,width:b.width,height:30}:{right:7,top:b.y,width:30,height:b.height},e=ec(g.option),c;a(["right","top","width","height"],function(a){"ph"===e[a]&&(e[a]=h[a])}),c=V(e,d,g.padding),this._location={x:c.x,y:c.y},this._size=[c.width,c.height],this._orient===r$&&this._size.reverse()},_positionGroup:function(){var g=this.group,d=this._location,b=this._orient,e=this.dataZoomModel.getFirstTargetAxisModel(),c=e&&e.get("inverse"),f=this._displayables.barGroup,a=(this._dataShadowInfo||{}).otherAxisInverse,h;f.attr(b!==gv||c?b===gv&&c?{scale:a?[-1,1]:[-1,-1]}:b!==r$||c?{scale:a?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:a?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:a?[1,1]:[1,-1]}),h=g.getBoundingRect([f]),g.attr("position",[d.x-h.x,d.y-h.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var c=this.dataZoomModel,a=this._size,b=this._displayables.barGroup;b.add(new hA({silent:!0,shape:{x:0,y:0,width:a[0],height:a[1]},style:{fill:c.get("backgroundColor")},z2:-40})),b.add(new hA({shape:{x:0,y:0,width:a[0],height:a[1]},style:{fill:"transparent"},z2:0,onclick:k(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var k=this._dataShadowInfo=this._prepareDataShadowInfo(),e,h,f,i,c,n,j,q,p,a,b,m,d,o,l;k&&(e=this._size,h=k.series,f=h.getRawData(),i=h.getShadowDim?h.getShadowDim():k.otherDim,null!=i&&(c=f.getDataExtent(i),n=.3*(c[1]-c[0]),c=[c[0]-n,c[1]+n],q=[0,e[1]],p=[0,e[0]],a=[[e[0],0],[0,0]],b=[],m=p[1]/(f.count()-1),d=0,o=Math.round(f.count()/e[0]),f.each([i],function(e,g){if(0<o&&g%o)d+=m;else{var f=null==e||isNaN(e)||""===e,h=f?0:cX(e,c,q,!0);f&&!j&&g?(a.push([a[a.length-1][0],0]),b.push([b[b.length-1][0],0])):!f&&j&&(a.push([d,0]),b.push([d,0])),a.push([d,h]),b.push([d,h]),d+=m,j=f}}),l=this.dataZoomModel,this._displayables.barGroup.add(new aF({shape:{points:a},style:g({fill:l.get("dataBackgroundColor")},l.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new aZ({shape:{points:b},style:l.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))))},_prepareDataShadowInfo:function(){var b=this.dataZoomModel,d=b.get("showDataShadow"),c,e;if(!1!==d)return e=this.ecModel,b.eachTargetAxis(function(f,g){a(b.getAxisProxy(f.name,g).getTargetSeriesModels(),function(a){if(!(c||!0!==d&&v(adx,a.get("type"))<0)){var h,i=e.getComponent(f.axis,g).axis,b=function(a){return{x:"y",y:"x",radius:"angle",angle:"radius"}[a]}(f.name),j=a.coordinateSystem;null!=b&&j.getOtherAxis&&(h=j.getOtherAxis(i).inverse),b=a.getData().mapDimension(b),c={thisAxis:i,series:a,thisDim:f.name,otherDim:b,otherAxisInverse:h}}},this)},this),c},_renderHandle:function(){var b=this._displayables,f=b.handles=[],g=b.handleLabels=[],c=this._displayables.barGroup,e=this._size,a=this.dataZoomModel;c.add(b.filler=new hA({draggable:!0,cursor:sc(this._orient),drift:bT(this._onDragMove,this,"all"),onmousemove:function(a){cw(a.event)},ondragstart:bT(this._showDataInfo,this,!0),ondragend:bT(this._onDragEnd,this),onmouseover:bT(this._showDataInfo,this,!0),onmouseout:bT(this._showDataInfo,this,!1),style:{fill:a.get("fillerColor"),textPosition:"inside"}})),c.add(new hA({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{stroke:a.get("dataBackgroundColor")||a.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),ly([0,1],function(e){var b=ff(a.get("handleIcon"),{cursor:sc(this._orient),draggable:!0,drift:bT(this._onDragMove,this,e),onmousemove:function(a){cw(a.event)},ondragend:bT(this._onDragEnd,this),onmouseover:bT(this._showDataInfo,this,!0),onmouseout:bT(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),h=b.getBoundingRect(),i,j;this._handleHeight=d(a.get("handleSize"),this._size[1]),this._handleWidth=h.width/h.height*this._handleHeight,b.setStyle(a.getModel("handleStyle").getItemStyle()),i=a.get("handleColor"),null!=i&&(b.style.fill=i),c.add(f[e]=b),j=a.textStyleModel,this.group.add(g[e]=new q({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:j.getTextColor(),textFont:j.getFont()},z2:10}))},this)},_resetInterval:function(){var a=this._range=this.dataZoomModel.getPercentRange(),b=this._getViewExtent();this._handleEnds=[cX(a[0],[0,100],b,!0),cX(a[1],[0,100],b,!0)]},_updateInterval:function(h,i){var f=this.dataZoomModel,e=this._handleEnds,a=this._getViewExtent(),c=f.findRepresentativeAxisProxy().getMinMaxSpan(),b=[0,100],d,g;return cV(i,e,a,f.get("zoomLock")?"all":h,null!=c.minSpan?cX(c.minSpan,b,a,!0):null,null!=c.maxSpan?cX(c.maxSpan,b,a,!0):null),d=this._range,g=this._range=lA([cX(e[0],a,b,!0),cX(e[1],a,b,!0)]),!d||d[0]!==g[0]||d[1]!==g[1]},_updateView:function(e){var b=this._displayables,c=this._handleEnds,a=lA(c.slice()),d=this._size;ly([0,1],function(e){var f=b.handles[e],a=this._handleHeight;f.attr({scale:[a/2,a/2],position:[c[e],d[1]/2-a/2]})},this),b.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:d[1]}),this._updateDataInfo(e)},_updateDataInfo:function(j){var b=this.dataZoomModel,c=this._displayables,k=c.handleLabels,e=this._orient,f=["",""],a,g,h,d,l;b.get("showDetail")&&(a=b.findRepresentativeAxisProxy(),a&&(g=a.getAxisModel().axis,h=this._range,d=j?a.calculateDataWindow({start:h[0],end:h[1]}).valueWindow:a.getDataValueWindow(),f=[this._formatLabel(d[0],g),this._formatLabel(d[1],g)])),l=lA(this._handleEnds.slice());function i(a){var b=dt(c.handles[a].parent,this.group),d=ky(0===a?"right":"left",b),g=this._handleWidth/2+5,h=bH([l[a]+(0===a?-g:g),this._size[1]/2],b);k[a].setStyle({x:h[0],y:h[1],textVerticalAlign:e===gv?"middle":d,textAlign:e===gv?d:"center",text:f[a]})}i.call(this,0),i.call(this,1)},_formatLabel:function(a,b){var f=this.dataZoomModel,c=f.get("labelFormatter"),d=f.get("labelPrecision"),e;return null!=d&&"auto"!==d||(d=b.getPixelPrecision()),e=null==a||isNaN(a)?"":"category"===b.type||"time"===b.type?b.scale.getLabel(Math.round(a)):a.toFixed(Math.min(d,20)),ag(c)?c(a,e):E(c)?c.replace("{value}",e):e},_showDataInfo:function(a){a=this._dragging||a;var b=this._displayables.handleLabels;b[0].attr("invisible",!a),b[1].attr("invisible",!a)},_onDragMove:function(b,c,d){this._dragging=!0;var e=bH([c,d],this._displayables.barGroup.getLocalTransform(),!0),f=this._updateInterval(b,e[0]),a=this.dataZoomModel.get("realtime");this._updateView(!a),f&&a&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),this.dataZoomModel.get("realtime")||this._dispatchZoomAction()},_onClickPanelClick:function(b){var c=this._size,a=this._displayables.barGroup.transformCoordToLocal(b.offsetX,b.offsetY),d,e,f;a[0]<0||a[0]>c[0]||a[1]<0||a[1]>c[1]||(d=this._handleEnds,e=(d[0]+d[1])/2,f=this._updateInterval("all",a[0]-e),this._updateView(),f&&this._dispatchZoomAction())},_dispatchZoomAction:function(){var a=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:a[0],end:a[1]})},_findCoordRect:function(){var a,b,c;return ly(this.getTargetCoordInfo(),function(b){if(!a&&b.length){var c=b[0].model.coordinateSystem;a=c.getRect&&c.getRect()}}),!a&&(b=this.api.getWidth(),c=this.api.getHeight(),a={x:.2*b,y:.2*c,width:.6*b,height:.6*c}),a}});function sc(a){return"vertical"===a?"ns-resize":"ew-resize"}ks.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}}),sk="\0_ec_dataZoom_roams";function adB(g,c){var d=sp(g),e=c.dataZoomId,f=c.coordId,b,h;a(d,function(a,d){var b=a.dataZoomInfos;b[e]&&v(c.allCoordIds,f)<0&&(delete b[e],a.count--)}),sr(d),b=d[f],b||((b=d[f]={coordId:f,dataZoomInfos:{},count:0}).controller=function(d,b){var c=new ep(d.getZr());return a(["pan","zoom","scrollMove"],function(d){c.on(d,function(e){var c=[];a(b.dataZoomInfos,function(a){if(e.isAvailableBehavior(a.dataZoomModel.option)){var g=(a.getRange||{})[d],f=g&&g(b.controller,e);!a.dataZoomModel.get("disabled",!0)&&f&&c.push({dataZoomId:a.dataZoomId,start:f[0],end:f[1]})}}),c.length&&b.dispatchAction(c)})}),c}(g,b),b.dispatchAction=j(adF,g)),b.dataZoomInfos[e]||b.count++,b.dataZoomInfos[e]=c,h=function(e){var b,c={type_true:2,type_move:1,type_false:0,type_undefined:-1},d=!0;return a(e,function(f){var a=f.dataZoomModel,e=!a.get("disabled",!0)&&(!a.get("zoomLock",!0)||"move");c["type_"+b]<c["type_"+e]&&(b=e),d&=a.get("preventDefaultMouseMove",!0)}),{controlType:b,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!d}}}(b.dataZoomInfos),b.controller.enable(h.controlType,h.opt),b.controller.setPointerChecker(c.containsPoint),gB(b,"dispatchAction",c.dataZoomModel.get("throttle",!0),"fixRate")}function sm(a){return a.type+"\0_"+a.id}function sp(b){var a=b.getZr();return a[sk]||(a[sk]={})}function sr(b){a(b,function(a,c){a.count||(a.controller.dispose(),delete b[c])})}function adF(a,b){a.dispatchAction({type:"dataZoom",batch:b})}adG=k,st=kP.extend({type:"dataZoom.inside",init:function(a,b){this._range},render:function(b,e,d,f){st.superApply(this,"render",arguments),this._range=b.getPercentRange(),a(this.getTargetCoordInfo(),function(e,f){var g=c(e,function(a){return sm(a.model)});a(e,function(c){var e=c.model,h={};a(["pan","zoom","scrollMove"],function(a){h[a]=adG(adI[a],this,c,f)},this),adB(d,{coordId:sm(e),allCoordIds:g,containsPoint:function(c,a,b){return e.coordinateSystem.containPoint([a,b])},dataZoomId:b.id,dataZoomModel:b,getRange:h})},this)},this)},dispose:function(){!function(d,b){var c=sp(d);a(c,function(a){a.controller.dispose();var c=a.dataZoomInfos;c[b]&&(delete c[b],a.count--)}),sr(c)}(this.api,this.dataZoomModel.id),st.superApply(this,"dispose",arguments),this._range=null}}),adI={zoom:function(f,j,k,d){var e=this._range,a=e.slice(),g=f.axisModels[0],b,c,h,i;if(g)return b=kC[j](null,[d.originX,d.originY],g,k,f),c=(0<b.signal?b.pixelStart+b.pixelLength-b.pixel:b.pixel-b.pixelStart)/b.pixelLength*(a[1]-a[0])+a[0],h=Math.max(1/d.scale,0),a[0]=(a[0]-c)*h+c,a[1]=(a[1]-c)*h+c,i=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan(),cV(0,a,[0,100],0,i.minSpan,i.maxSpan),this._range=a,e[0]!==a[0]||e[1]!==a[1]?a:void 0},pan:sw(function(c,d,e,f,g,a){var b=kC[f]([a.oldX,a.oldY],[a.newX,a.newY],d,g,e);return b.signal*(c[1]-c[0])*b.pixel/b.pixelLength}),scrollMove:sw(function(b,c,d,e,f,a){return kC[e]([0,0],[a.scrollDelta,a.scrollDelta],c,f,d).signal*(b[1]-b[0])*a.scrollDelta})};function sw(a){return function(d,f,g,h){var c=this._range,b=c.slice(),e=d.axisModels[0],i;if(e)return i=a(b,e,d,f,g,h),cV(i,b,[0,100],"all"),this._range=b,c[0]!==b[0]||c[1]!==b[1]?b:void 0}}function sx(c){var a=c&&c.visualMap;b(a)||(a=a?[a]:[]),sQ(a,function(a){if(a){eP(a,"splitList")&&!eP(a,"pieces")&&(a.pieces=a.splitList,delete a.splitList);var c=a.pieces;c&&b(c)&&sQ(c,function(a){m(a)&&(eP(a,"start")&&!eP(a,"min")&&(a.min=a.start),eP(a,"end")&&!eP(a,"max")&&(a.max=a.end))})}})}kC={grid:function(c,e,f,h,g){var d=f.axis,a={},b=g.model.coordinateSystem.getRect();return c=c||[0,0],"x"===d.dim?(a.pixel=e[0]-c[0],a.pixelLength=b.width,a.pixelStart=b.x,a.signal=d.inverse?1:-1):(a.pixel=e[1]-c[1],a.pixelLength=b.height,a.pixelStart=b.y,a.signal=d.inverse?-1:1),a},polar:function(b,c,h,j,i){var g=h.axis,a={},d=i.model.coordinateSystem,e=d.getRadiusAxis().getExtent(),f=d.getAngleAxis().getExtent();return b=b?d.pointToCoord(b):[0,0],c=d.pointToCoord(c),"radiusAxis"===h.mainType?(a.pixel=c[0]-b[0],a.pixelLength=e[1]-e[0],a.pixelStart=e[0],a.signal=g.inverse?1:-1):(a.pixel=c[1]-b[1],a.pixelLength=f[1]-f[0],a.pixelStart=f[0],a.signal=g.inverse?-1:1),a},singleAxis:function(b,e,f,h,g){var d=f.axis,c=g.model.coordinateSystem.getRect(),a={};return b=b||[0,0],"horizontal"===d.orient?(a.pixel=e[0]-b[0],a.pixelLength=c.width,a.pixelStart=c.x,a.signal=d.inverse?1:-1):(a.pixel=e[1]-b[1],a.pixelLength=c.height,a.pixelStart=c.y,a.signal=d.inverse?-1:1),a}},sQ=a;function eP(a,b){return a&&a.hasOwnProperty&&a.hasOwnProperty(b)}x.registerSubTypeDefaulter("visualMap",function(a){return a.categories||(a.pieces?0<a.pieces.length:0<a.splitNumber)&&!a.calculable?"piecewise":"continuous"}),sY=bz.VISUAL.COMPONENT;function adP(g,k,j,h){for(var e=k.targetVisuals[h],f=B.prepareVisualTypes(e),a={color:g.getData().getVisual("color")},b=0,i=f.length,d,c;b<i;b++)d=f[b],c=e["opacity"===d?"__alphaForOpacity":d],c&&c.applyVisual(j,l,m);return a.color;function l(b){return a[b]}function m(b,c){a[b]=c}}H(sY,{createOnAllSeries:!0,reset:function(b,d){var c=[];return d.eachComponent("visualMap",function(d){var e=b.pipelineContext;!d.isTargetSeries(b)||e&&e.large||c.push(function(e,c,f,b){var d={};return a(e,function(a){var b=B.prepareVisualTypes(c[a]);d[a]=b}),{progress:function(q,e){var a,j,k,l,m,i,g,n,h;function p(b){return e.getItemVisual(a,b)}function o(b,c){e.setItemVisual(a,b,c)}for(null!=b&&(b=e.getDimension(b));null!=(a=q.next());)if(j=e.getRawDataItem(a),!j||!1!==j.visualMap)for(k=null!=b?e.get(b,a,!0):a,l=f(k),m=c[l],i=d[l],g=0,n=i.length;g<n;g++)h=i[g],m[h]&&m[h].applyVisual(k,p,o)}}}(d.stateList,d.targetVisuals,k(d.getValueState,d),d.getDataDimension(b.getData())))}),c}}),H(sY,{createOnAllSeries:!0,reset:function(a,d){var b=a.getData(),c=[];d.eachComponent("visualMap",function(d){if(d.isTargetSeries(a)){var e=d.getVisualMeta(k(adP,null,a,d))||{stops:[],outerColors:[]},g=d.getDataDimension(b),f=b.getDimensionInfo(g);null!=f&&(e.dimension=f.index,c.push(e))}}),a.getData().setVisual("visualMeta",c)}}),km=function(c,d,e){var a=i((adR[c]||{})[d]);return e&&b(a)?a[a.length-1]:a},adR={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},s_=B.mapVisual,adT=B.eachVisual,adU=b,kj=a,adW=dD,adX=J,iK=aN({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(a,c,b){this._dataExtent,this.targetVisuals={},this.controllerVisuals={},this.textStyleModel,this.itemSize,this.mergeDefaultAndTheme(a,b)},optionUpdated:function(b,c){var a=this.option;t.canvasSupported||(a.realtime=!1),c||re(a,b,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(a){var b=this.stateList;a=k(a,this),this.controllerVisuals=me(this.option.controller,b,a),this.targetVisuals=me(this.option.target,b,a)},getTargetSeriesIndices:function(){var a=this.option.seriesIndex,b=[];return null==a||"all"===a?this.ecModel.eachSeries(function(c,a){b.push(a)}):b=al(a),b},eachTargetSeries:function(b,c){a(this.getTargetSeriesIndices(),function(a){b.call(c,this.ecModel.getSeriesByIndex(a))},this)},isTargetSeries:function(b){var a=!1;return this.eachTargetSeries(function(c){c===b&&(a=!0)}),a},formatValueText:function(a,k,g){var d,c,i=this.option,j=i.precision,f=this.dataBound,e=i.formatter;return g=g||["<",">"],b(a)&&(a=a.slice(),d=!0),c=k?a:d?[h(a[0]),h(a[1])]:h(a),E(e)?e.replace("{value}",d?c[0]:c).replace("{value2}",d?c[1]:c):ag(e)?d?e(a[0],a[1]):e(a):d?a[0]===f[0]?g[0]+" "+c[1]:a[1]===f[1]?g[1]+" "+c[0]:c[0]+" - "+c[1]:c;function h(a){return a===f[0]?"min":a===f[1]?"max":(+a).toFixed(Math.min(j,20))}},resetExtent:function(){var a=this.option,b=adW([a.min,a.max]);this._dataExtent=b},getDataDimension:function(a){var b=this.option.dimension,f=a.dimensions,d,c,e;if(null!=b||f.length){if(null!=b)return a.getDimension(b);for(d=a.dimensions,c=d.length-1;0<=c;c--)if(e=d[c],!a.getDimensionInfo(e).isCalculationCoord)return e}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var g=this.ecModel,a=this.option,f={inRange:a.inRange,outOfRange:a.outOfRange},c=a.target||(a.target={}),d=a.controller||(a.controller={}),b;l(c,f),l(d,f),b=this.isCategory();function e(c){adU(a.color)&&!c.inRange&&(c.inRange={color:a.color.slice().reverse()}),c.inRange=c.inRange||{color:g.get("gradientColor")},kj(this.stateList,function(a){var d=c[a],e;E(d)&&(e=km(d,"active",b),e?(c[a]={},c[a][d]=e):delete c[a])},this)}e.call(this,c),e.call(this,d),function(c,f,d){var e=c[f],a=c[d];e&&!a&&(a=c[d]={},kj(e,function(e,c){if(B.isValidType(c)){var d=km(c,"inactive",b);null!=d&&(a[c]=d,"color"!==c||a.hasOwnProperty("opacity")||a.hasOwnProperty("colorAlpha")||(a.opacity=[0,0]))}}))}.call(this,c,"inRange","outOfRange"),function(a){var c=(a.inRange||{}).symbol||(a.outOfRange||{}).symbol,d=(a.inRange||{}).symbolSize||(a.outOfRange||{}).symbolSize,e=this.get("inactiveColor");kj(this.stateList,function(k){var g=this.itemSize,f=a[k],h,j;null==(f=f||(a[k]={color:b?e:[e]})).symbol&&(f.symbol=c&&i(c)||(b?"roundRect":["roundRect"])),null==f.symbolSize&&(f.symbolSize=d&&i(d)||(b?g[0]:[g[0],g[0]])),f.symbol=s_(f.symbol,function(a){return"none"===a||"square"===a?"roundRect":a}),h=f.symbolSize,null!=h&&(j=-1/0,adT(h,function(a){j<a&&(j=a)}),f.symbolSize=s_(h,function(a){return adX(a,[0,j],[0,g[0]],!0)}))},this)}.call(this,d)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:aa,getValueState:aa,getVisualMeta:aa}),tf=[20,140],tm=iK.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(a,b){tm.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(a){a.mappingMethod="linear",a.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){tm.superApply(this,"resetItemSize",arguments);var a=this.itemSize;"horizontal"===this._orient&&a.reverse(),null!=a[0]&&!isNaN(a[0])||(a[0]=tf[0]),null!=a[1]&&!isNaN(a[1])||(a[1]=tf[1])},_resetRange:function(){var c=this.getExtent(),a=this.option.range;!a||a.auto?(c.auto=1,this.option.range=c):b(a)&&(a[0]>a[1]&&a.reverse(),a[0]=Math.max(a[0],c[0]),a[1]=Math.min(a[1],c[1]))},completeVisualOption:function(){iK.prototype.completeVisualOption.apply(this,arguments),a(this.stateList,function(b){var a=this.option.controller[b].symbolSize;a&&a[0]!==a[1]&&(a[0]=0)},this)},setSelected:function(a){this.option.range=a.slice(),this._resetRange()},getSelected:function(){var b=this.getExtent(),a=dD((this.get("range")||[]).slice());return a[0]>b[1]&&(a[0]=b[1]),a[1]>b[1]&&(a[1]=b[1]),a[0]<b[0]&&(a[0]=b[0]),a[1]<b[0]&&(a[1]=b[0]),a},getValueState:function(b){var a=this.option.range,c=this.getExtent();return(a[0]<=c[0]||a[0]<=b)&&(a[1]>=c[1]||b<=a[1])?"inRange":"outOfRange"},findTargetDataIndices:function(a){var b=[];return this.eachTargetSeries(function(c){var d=[],e=c.getData();e.each(this.getDataDimension(e),function(b,c){a[0]<=b&&b<=a[1]&&d.push(c)},this),b.push({seriesId:c.id,dataIndex:d})},this),b},getVisualMeta:function(j){var d=tz(this,"outOfRange",this.getExtent()),b=tz(this,"inRange",this.option.range.slice()),c=[],f,a,k,i,g,h;function e(a,b){c.push({value:a,color:j(a,b)})}for(f=0,a=0,k=b.length,i=d.length;a<i&&(!b.length||d[a]<=b[0]);a++)d[a]<b[f]&&e(d[a],"outOfRange");for(g=1;f<k;f++,g=0)g&&c.length&&e(b[f],"outOfRange"),e(b[f],"inRange");for(g=1;a<i;a++)(!b.length||b[b.length-1]<d[a])&&(g&&(c.length&&e(c[c.length-1].value,"outOfRange"),g=0),e(d[a],"outOfRange"));return h=c.length,{stops:c,outerColors:[h?c[0].color:"transparent",h?c[h-1].color:"transparent"]}}});function tz(g,f,a){if(a[0]===a[1])return a.slice();for(var e=(a[1]-a[0])/200,b=a[0],c=[],d=0;d<=200&&b<a[1];d++)c.push(b),b+=e;return c.push(a[1]),c}tD=$({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(a,b){this.ecModel=a,this.api=b,this.visualMapModel},render:function(a,b,c,d){!1!==(this.visualMapModel=a).get("show")?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(d){var b=this.visualMapModel,a=dJ(b.get("padding")||0),c=d.getBoundingRect();d.add(new y({z2:-1,silent:!0,shape:{x:c.x-a[3],y:c.y-a[0],width:c.width+a[3]+a[1],height:c.height+a[0]+a[2]},style:{fill:b.get("backgroundColor"),stroke:b.get("borderColor"),lineWidth:b.get("borderWidth")}}))},getControllerVisual:function(g,c,e){var k=(e=e||{}).forceState,d=this.visualMapModel,b={},h,f;"symbol"===c&&(b.symbol=d.get("itemSymbol")),"color"===c&&(h=d.get("contentColor"),b.color=h);function i(a){return b[a]}function j(a,c){b[a]=c}return f=d.controllerVisuals[k||d.getValueState(g)],a(B.prepareVisualTypes(f),function(a){var b=f[a];e.convertOpacityToAlpha&&"opacity"===a&&(a="colorAlpha",b=f.__alphaForOpacity),B.dependsOn(a,c)&&b&&b.applyVisual(g,i,j)}),b[c]},positionGroup:function(b){var c=this.visualMapModel,a=this.api;jh(b,c.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})},doRender:aa});function tG(n,k,m){var c=n.option,f=c.align,j,g,i,d,l,e,a,b,h;if(null!=f&&"auto"!==f)return f;for(j={width:k.getWidth(),height:k.getHeight()},g="horizontal"===c.orient?1:0,i=[["left","right","width"],["top","bottom","height"]],d=i[g],l=[0,null,10],e={},a=0;a<3;a++)e[i[1-g][a]]=l[a],e[d[a]]=2===a?m[0]:c[d[a]];return b=[["x","width",3],["y","height",0]][g],h=V(e,j,c.padding),d[(h.margin[b[2]]||0)+h[b[0]]+.5*h[b[1]]<.5*j[b[1]]?0:1]}function ja(b,c){return a(b||[],function(a){null!=a.dataIndex&&(a.dataIndexInside=a.dataIndex,a.dataIndex=null),a.highlightKey="visualMap"+(c?c.componentIndex:"")}),b}bQ=J,aee=a,iQ=Math.min,fx=Math.max,aeh=tD.extend({type:"visualMap.continuous",init:function(){aeh.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._orient,this._useHandle,this._hoverLinkDataIndices=[],this._dragging,this._hovering},doRender:function(b,c,d,a){a&&"selectDataRange"===a.type&&a.from===this.uid||this._buildView()},_buildView:function(){var b,a,c;this.group.removeAll(),b=this.visualMapModel,a=this.group,this._orient=b.get("orient"),this._useHandle=b.get("calculable"),this._resetInterval(),this._renderBar(a),c=b.get("text"),this._renderEndsText(a,c,0),this._renderEndsText(a,c,1),this._updateView(!0),this.renderBackground(a),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(a)},_renderEndsText:function(l,k,d){var a,e,f,b,c,g,h,i,j;k&&(a=k[1-d],a=null!=a?a+"":"",e=this.visualMapModel,f=e.get("textGap"),b=e.itemSize,c=this._shapes.barGroup,g=this._applyTransform([b[0]/2,0===d?-f:b[1]+f],c),h=this._applyTransform(0===d?"bottom":"top",c),i=this._orient,j=this.visualMapModel.textStyleModel,this.group.add(new q({style:{x:g[0],y:g[1],textVerticalAlign:"horizontal"===i?"middle":h,textAlign:"horizontal"===i?h:"center",text:a,textFont:j.getFont(),textFill:j.getTextColor()}})))},_renderBar:function(j){var f=this.visualMapModel,b=this._shapes,c=f.itemSize,e=this._orient,h=this._useHandle,d=tG(f,this.api,c),a=b.barGroup=this._createBarGroup(d),i,g;a.add(b.outOfRange=iF()),a.add(b.inRange=iF(null,h?ud(this._orient):null,k(this._dragHandle,this,"all",!1),k(this._dragHandle,this,"all",!0))),i=f.textStyleModel.getTextRect(""),g=fx(i.width,i.height),h&&(b.handleThumbs=[],b.handleLabels=[],b.handleLabelPoints=[],this._createHandle(a,0,c,g,e,d),this._createHandle(a,1,c,g,e,d)),this._createIndicator(a,c,g,e),j.add(a)},_createHandle:function(j,a,l,b,g){var i=k(this._dragHandle,this,a,!1),e=k(this._dragHandle,this,a,!0),d=iF(function(b,a){return 0===b?[[0,0],[a,0],[a,-a]]:[[0,0],[a,0],[a,a]]}(a,b),ud(this._orient),i,e),f,h,m,c;d.position[0]=l[0],j.add(d),f=this.visualMapModel.textStyleModel,h=new q({draggable:!0,drift:i,onmousemove:function(a){cw(a.event)},ondragend:e,style:{x:0,y:0,text:"",textFont:f.getFont(),textFill:f.getTextColor()}}),this.group.add(h),m=["horizontal"===g?b/2:1.5*b,"horizontal"===g?0===a?-1.5*b:1.5*b:0===a?-b/2:b/2],c=this._shapes,c.handleThumbs[a]=d,c.handleLabelPoints[a]=m,c.handleLabels[a]=h},_createIndicator:function(g,e,i,f){var a=iF([[0,0]],"move"),d,c,h,b;a.position[0]=e[0],a.attr({invisible:!0,silent:!0}),g.add(a),d=this.visualMapModel.textStyleModel,c=new q({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:d.getFont(),textFill:d.getTextColor()}}),this.group.add(c),h=["horizontal"===f?i/2:9,0],b=this._shapes,b.indicator=a,b.indicatorLabel=c,b.indicatorLabelPoint=h},_dragHandle:function(b,a,c,d){if(this._useHandle){if(this._dragging=!a,!a){var e=this._applyTransform([c,d],this._shapes.barGroup,!0);this._updateInterval(b,e[1]),this._updateView()}a===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),a?this._hovering||this._clearHoverLinkToSeries():tW(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[b],!1)}},_resetInterval:function(){var a=this.visualMapModel,b=this._dataInterval=a.getSelected(),c=a.getExtent(),d=[0,a.itemSize[1]];this._handleEnds=[bQ(b[0],c,d,!0),bQ(b[1],c,d,!0)]},_updateInterval:function(f,c){var d,a,b,e;c=c||0,d=this.visualMapModel,a=this._handleEnds,b=[0,d.itemSize[1]],cV(c,a,b,f,0),e=d.getExtent(),this._dataInterval=[bQ(a[0],b,e,!0),bQ(a[1],b,e,!0)]},_updateView:function(h){var g=this.visualMapModel,c=g.getExtent(),d=this._shapes,e=[0,g.itemSize[1]],f=h?e:this._handleEnds,a=this._createBarVisual(this._dataInterval,c,f,"inRange"),b=this._createBarVisual(c,c,e,"outOfRange");d.inRange.setStyle({fill:a.barColor,opacity:a.opacity}).setShape("points",a.barPoints),d.outOfRange.setStyle({fill:b.barColor,opacity:b.opacity}).setShape("points",b.barPoints),this._updateHandle(f,a)},_createBarVisual:function(b,h,e,f){var c={forceState:f,convertOpacityToAlpha:!0},a=this._makeColorGradient(b,c),g=[this.getControllerVisual(b[0],"symbolSize",c),this.getControllerVisual(b[1],"symbolSize",c)],d=this._createBarPoints(e,g);return{barColor:new dh(0,0,0,1,a),barPoints:d,handlesColor:[a[0].color,a[a.length-1].color]}},_makeColorGradient:function(a,d){var b=[],f=(a[1]-a[0])/100,c,e;b.push({color:this.getControllerVisual(a[0],"color",d),offset:0});for(c=1;c<100;c++){if(e=a[0]+f*c,e>a[1])break;b.push({color:this.getControllerVisual(e,"color",d),offset:c/100})}return b.push({color:this.getControllerVisual(a[1],"color",d),offset:1}),b},_createBarPoints:function(a,c){var b=this.visualMapModel.itemSize;return[[b[0]-c[0],a[0]],[b[0],a[0]],[b[0],a[1]],[b[0]-c[1],a[1]]]},_createBarGroup:function(a){var b=this._orient,c=this.visualMapModel.get("inverse");return new e("horizontal"!==b||c?"horizontal"===b&&c?{scale:"bottom"===a?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==b||c?{scale:"left"===a?[1,1]:[-1,1]}:{scale:"left"===a?[1,-1]:[-1,-1]}:{scale:"bottom"===a?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(b,c){if(this._useHandle){var a=this._shapes,d=this.visualMapModel,e=a.handleThumbs,f=a.handleLabels;aee([0,1],function(g){var h=e[g],i;h.setStyle("fill",c.handlesColor[g]),h.position[1]=b[g],i=bH(a.handleLabelPoints[g],dt(h,this.group)),f[g].setStyle({x:i[0],y:i[1],text:d.formatValueText(this._dataInterval[g]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===g?"bottom":"top":"left",a.barGroup)})},this)}},_showIndicator:function(j,p,d,o){var c=this.visualMapModel,n=c.getExtent(),g=c.itemSize,l=[0,g[1]],i=bQ(j,n,l,!0),b=this._shapes,a=b.indicator,m,f,e,h,k;a&&(a.position[1]=i,a.attr("invisible",!1),a.setShape("points",function(c,a,b,d){return c?[[0,-iQ(a,fx(b,0))],[6,0],[0,iQ(a,fx(d-b,0))]]:[[0,0],[5,-5],[5,5]]}(!!d,o,i,g[1])),m=this.getControllerVisual(j,"color",{convertOpacityToAlpha:!0}),a.setStyle("fill",m),f=bH(b.indicatorLabelPoint,dt(a,this.group)),e=b.indicatorLabel,e.attr("invisible",!1),h=this._applyTransform("left",b.barGroup),k=this._orient,e.setStyle({text:(d||"")+c.formatValueText(p),textVerticalAlign:"horizontal"===k?h:"middle",textAlign:"horizontal"===k?"center":h,x:f[0],y:f[1]}))},_enableHoverLinkToSeries:function(){var a=this;this._shapes.barGroup.on("mousemove",function(c){if(a._hovering=!0,!a._dragging){var d=a.visualMapModel.itemSize,b=a._applyTransform([c.offsetX,c.offsetY],a._shapes.barGroup,!0,!0);b[1]=iQ(fx(0,b[1]),d[1]),a._doHoverLinkToSeries(b[1],0<=b[0]&&b[0]<=d[0])}}).on("mouseout",function(){a._hovering=!1,a._dragging||a._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var a=this.api.getZr();this.visualMapModel.option.hoverLink?(a.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),a.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(e,j){var b=this.visualMapModel,m=b.itemSize,a,f,d,g,h,c,l,k,i;b.option.hoverLink&&(a=[0,m[1]],f=b.getExtent(),e=iQ(fx(a[0],e),a[1]),d=function(c,d,e){var a=6,b=c.get("hoverLinkDataSize");return b&&(a=bQ(b,d,e,!0)/2),a}(b,f,a),g=[e-d,e+d],h=bQ(e,a,f,!0),c=[bQ(g[0],a,f,!0),bQ(g[1],a,f,!0)],g[0]<a[0]&&(c[0]=-1/0),a[1]<g[1]&&(c[1]=1/0),j&&(c[0]===-1/0?this._showIndicator(h,c[1],"< ",d):c[1]===1/0?this._showIndicator(h,c[0],"> ",d):this._showIndicator(h,h," ",d)),l=this._hoverLinkDataIndices,k=[],(j||tW(b))&&(k=this._hoverLinkDataIndices=b.findTargetDataIndices(c)),i=function(e,f){var a={},c={};return d(e||[],a),d(f||[],c,a),[b(a),b(c)];function d(b,h,i){for(var a=0,k=b.length,f,g,c,d,j,e;a<k;a++)for(f=b[a].seriesId,g=al(b[a].dataIndex),c=i&&i[f],d=0,j=g.length;d<j;d++)e=g[d],c&&c[e]?c[e]=null:(h[f]||(h[f]={}))[e]=1}function b(c,f){var d=[],a,e;for(a in c)c.hasOwnProperty(a)&&null!=c[a]&&(f?d.push(+a):(e=b(c[a],!0),e.length&&d.push({seriesId:a,dataIndex:e})));return d}}(l,k),this._dispatchHighDown("downplay",ja(i[0],b)),this._dispatchHighDown("highlight",ja(i[1],b)))},_hoverLinkFromSeriesMouseOver:function(f){var a=f.target,c=this.visualMapModel,d,e,b;a&&null!=a.dataIndex&&(d=this.ecModel.getSeriesByIndex(a.seriesIndex),c.isTargetSeries(d)&&(e=d.getData(a.dataType),b=e.get(c.getDataDimension(e),a.dataIndex,!0),isNaN(b)||this._showIndicator(b,b)))},_hideIndicator:function(){var a=this._shapes;a.indicator&&a.indicator.attr("invisible",!0),a.indicatorLabel&&a.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var a=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",ja(a,this.visualMapModel)),a.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var a=this.api.getZr();a.off("mouseover",this._hoverLinkFromSeriesMouseOver),a.off("mouseout",this._hideIndicator)},_applyTransform:function(a,c,d,e){var f=dt(c,e?null:this.group);return bY[b(a)?"applyTransform":"transformDirection"](a,f,d)},_dispatchHighDown:function(b,a){a&&a.length&&this.api.dispatchAction({type:b,batch:a})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function iF(b,c,a,d){return new aF({shape:{points:b},draggable:!!a,cursor:c,drift:a,onmousemove:function(a){cw(a.event)},ondragend:d})}function tW(a){var b=a.get("hoverLinkOnHandle");return!!(null==b?a.get("realtime"):b)}function ud(a){return"vertical"===a?"ns-resize":"ew-resize"}u({type:"selectDataRange",event:"dataRangeSelected",update:"update"},function(a,b){b.eachComponent({mainType:"visualMap",query:a},function(b){b.setSelected(a.selected)})}),aj(sx),ael=iK.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(d,e){var a,b;ael.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent(),a=this._mode=this._determineMode(),aem[this._mode].call(this),this._resetSelected(d,e),b=this.option.categories,this.resetVisual(function(d,e){"categories"===a?(d.mappingMethod="category",d.categories=i(b)):(d.dataExtent=this.getExtent(),d.mappingMethod="piecewise",d.pieceList=c(this._pieceList,function(a){return a=i(a),"inRange"!==e&&(a.visual=null),a}))})},completeVisualOption:function(){var b=this.option,c={},e=B.listVisualTypes(),f=this.isCategory();function d(a,b,c){return a&&a[b]&&(m(a[b])?a[b].hasOwnProperty(c):a[b]===c)}a(b.pieces,function(b){a(e,function(a){b.hasOwnProperty(a)&&(c[a]=1)})}),a(c,function(g,c){var e=0;a(this.stateList,function(a){e|=d(b,a,c)||d(b.target,a,c)},this),e||a(this.stateList,function(a){(b[a]||(b[a]={}))[c]=km(c,"inRange"===a?"active":"inactive",f)})},this),iK.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(f,g){var c=this.option,d=this._pieceList,b=(g?c:f).selected||{},e;c.selected=b,a(d,function(c,d){var a=this.getSelectedMapKey(c);b.hasOwnProperty(a)||(b[a]=!0)},this),"single"===c.selectedMode&&(e=!1,a(d,function(c,d){var a=this.getSelectedMapKey(c);b[a]&&(e?b[a]=!1:e=!0)},this))},getSelectedMapKey:function(a){return"categories"===this._mode?a.value+"":a.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var a=this.option;return a.pieces&&0<a.pieces.length?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(a){this.option.selected=i(a)},getValueState:function(b){var a=B.findPieceIndex(b,this._pieceList);return null!=a&&this.option.selected[this.getSelectedMapKey(this._pieceList[a])]?"inRange":"outOfRange"},findTargetDataIndices:function(b){var a=[];return this.eachTargetSeries(function(c){var d=[],e=c.getData();e.each(this.getDataDimension(e),function(a,c){B.findPieceIndex(a,this._pieceList)===b&&d.push(c)},this),a.push({seriesId:c.id,dataIndex:d})},this),a},getRepresentValue:function(a){var b,c;return this.isCategory()?b=a.value:null!=a.value?b=a.value:(c=a.interval||[],b=c[0]===-1/0&&c[1]===1/0?0:(c[0]+c[1])/2),b},getVisualMeta:function(i){var f,e,g,b,c,d;if(!this.isCategory())return f=[],e=[],g=this,b=this._pieceList.slice(),b.length?(c=b[0].interval[0],c!==-1/0&&b.unshift({interval:[-1/0,c]}),(c=b[b.length-1].interval[1])!==1/0&&b.push({interval:[c,1/0]})):b.push({interval:[-1/0,1/0]}),d=-1/0,a(b,function(b){var a=b.interval;a&&(a[0]>d&&h([d,a[0]],"outOfRange"),h(a.slice()),d=a[1])},this),{stops:f,outerColors:e};function h(a,c){var d=g.getRepresentValue({interval:a}),b;c=c||g.getValueState(d),b=i(d,c),a[0]===-1/0?e[0]=b:a[1]===1/0?e[1]=b:f.push({value:a[0],color:b},{value:a[1],color:b})}}}),aem={splitNumber:function(){var b=this.option,g=this._pieceList,h=Math.min(b.precision,20),c=this.getExtent(),d=b.splitNumber,e,f,i,j,k;d=Math.max(parseInt(d,10),1),b.splitNumber=d;for(e=(c[1]-c[0])/d;+e.toFixed(h)!==e&&h<5;)h++;b.precision=h,e=+e.toFixed(h),f=0,b.minOpen&&g.push({index:f++,interval:[-1/0,c[0]],close:[0,0]});for(i=c[0],j=f+d;f<j;i+=e)k=f===d-1?c[1]:i+e,g.push({index:f++,interval:[i,k],close:[1,1]});b.maxOpen&&g.push({index:f++,interval:[c[1],1/0],close:[0,0]}),j_(g),a(g,function(a){a.text=this.formatValueText(a.interval)},this)},categories:function(){var b=this.option;a(b.categories,function(a){this._pieceList.push({text:this.formatValueText(a,!0),value:a})},this),ue(b,this._pieceList)},pieces:function(){var c=this.option,b=this._pieceList;a(c.pieces,function(e,n){var c,i,d,f,k,j,h,a,l,g;if(m(e)||(e={value:e}),c={text:"",index:n},null!=e.label&&(c.text=e.label),e.hasOwnProperty("value"))i=c.value=e.value,c.interval=[i,i],c.close=[1,1];else{for(d=c.interval=[],f=c.close=[0,0],k=[1,0,1],j=[-1/0,1/0],h=[],a=0;a<2;a++){for(l=[["gte","gt","min"],["lte","lt","max"]][a],g=0;g<3&&null==d[a];g++)d[a]=e[l[g]],f[a]=k[g],h[a]=2===g;null==d[a]&&(d[a]=j[a])}h[0]&&d[1]===1/0&&(f[0]=0),h[1]&&d[0]===-1/0&&(f[1]=0),d[0]===d[1]&&f[0]&&f[1]&&(c.value=d[0])}c.visual=B.retrieveVisuals(e),b.push(c)},this),ue(c,b),j_(b),a(b,function(a){var b=a.close,c=[["<",""][b[1]],[">",""][b[0]]];a.text=a.text||this.formatValueText(null!=a.value?a.value:a.interval,!1,c)},this)}};function ue(a,c){var b=a.inverse;("vertical"===a.orient?!b:b)&&c.reverse()}tD.extend({type:"visualMap.piecewise",doRender:function(){var b=this.group,c,i,l,n,m,g,d,j,f,h;b.removeAll(),c=this.visualMapModel,i=c.get("textGap"),l=c.textStyleModel,n=l.getFont(),m=l.getTextColor(),g=this._getItemAlign(),d=c.itemSize,j=this._getViewData(),f=j.endsText,h=af(c.get("showLabel",!0),!f),f&&this._renderEndsText(b,f[0],d,h,g),a(j.viewPieceList,function(j){var f=j.piece,a=new e,l,o;a.onclick=k(this._onItemClick,this,f),this._enableHoverLink(a,j.indexInModelPieceList),l=c.getRepresentValue(f),(this._createItemSymbol(a,l,[0,0,d[0],d[1]]),h)&&(o=this.visualMapModel.getValueState(l),a.add(new q({style:{x:"right"===g?-i:d[0]+i,y:d[1]/2,text:f.text,textVerticalAlign:"middle",textAlign:g,textFont:n,textFill:m,opacity:"outOfRange"===o?.5:1}}))),b.add(a)},this),f&&this._renderEndsText(b,f[1],d,h,g),dM(c.get("orient"),b,c.get("itemGap")),this.renderBackground(b),this.positionGroup(b)},_enableHoverLink:function(b,c){function a(b){var a=this.visualMapModel;a.option.hoverLink&&this.api.dispatchAction({type:b,batch:ja(a.findTargetDataIndices(c),a)})}b.on("mouseover",k(a,this,"highlight")).on("mouseout",k(a,this,"downplay"))},_getItemAlign:function(){var b=this.visualMapModel,c=b.option,a;return"vertical"===c.orient?tG(b,this.api,b.itemSize):(a=c.align,a&&"auto"!==a||(a="left"),a)},_renderEndsText:function(h,c,a,d,f){if(c){var g=new e,b=this.visualMapModel.textStyleModel;g.add(new q({style:{x:d?"right"===f?a[0]:0:a[0]/2,y:a[1]/2,textVerticalAlign:"middle",textAlign:d?f:"center",text:c,textFont:b.getFont(),textFill:b.getTextColor()}})),h.add(g)}},_getViewData:function(){var a=this.visualMapModel,d=c(a.getPieceList(),function(a,b){return{piece:a,indexInModelPieceList:b}}),b=a.get("text"),f=a.get("orient"),e=a.get("inverse");return("horizontal"===f?e:!e)?d.reverse():b=b&&b.slice().reverse(),{viewPieceList:d,endsText:b}},_createItemSymbol:function(c,b,a){c.add(aQ(this.getControllerVisual(b,"symbol"),a[0],a[1],a[2],a[3],this.getControllerVisual(b,"color")))},_onItemClick:function(f){var d=this.visualMapModel,e=d.option,b=i(e.selected),c=d.getSelectedMapKey(f);"single"===e.selectedMode?(b[c]=!0,a(b,function(d,a){b[a]=a===c})):b[c]=!b[c],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:b})}}),aj(sx),uf="urn:schemas-microsoft-com:vml",uv="undefined"==typeof window?null:window,uw=!1,aR=uv&&uv.document;function kN(a){return kr(a)}if(aR&&!t.canvasSupported)try{aR.namespaces.zrvml||aR.namespaces.add("zrvml",uf),kr=function(a){return aR.createElement("<zrvml:"+a+' class="zrvml">')}}catch(a){kr=function(a){return aR.createElement("<"+a+' xmlns="'+uf+'" class="zrvml">')}}if(de=aB.CMD,z=Math.round,gq=Math.sqrt,aey=Math.abs,vb=Math.cos,ve=Math.sin,ls=Math.max,!t.canvasSupported){S=",",lv="progid:DXImageTransform.Microsoft",_=21600,aw=_/2,lw=function(a){a.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",a.coordsize=_+","+_,a.coordorigin="0,0"},vo=function(a,b,c){return"rgb("+[a,b,c].join(",")+")"},bB=function(a,b){b&&a&&b.parentNode!==a&&a.appendChild(b)},fD=function(a,b){b&&a&&b.parentNode===a&&a.removeChild(b)},lN=function(a,b,c){return 1e5*(parseFloat(a)||0)+1e3*(parseFloat(b)||0)+c},vJ=mx,vK=function(c,d,a){var b=aG(d);a=+a,isNaN(a)&&(a=1),b&&(c.color=vo(b[0],b[1],b[2]),c.opacity=a*b[3])},ir=function(b,c,d,f){var e="fill"===c,a=b.getElementsByTagName(c)[0];null!=d[c]&&"none"!==d[c]&&(e||!e&&d.lineWidth)?(b[e?"filled":"stroked"]="true",d[c]instanceof bq&&fD(b,a),a=a||kN(c),e?function(b,j,o){var y,f,a=j.fill,i,g,u,p,z,k,l,m,d,c,n,C,D,v,q,t,w,s,r,e,A,h,B,x,E,G,H,I;if(null!=a)if(a instanceof bq){g=0,u=[0,0],p=0,z=1,k=o.getBoundingRect(),l=k.width,m=k.height,"linear"===a.type?(i="gradient",d=o.transform,c=[a.x*l,a.y*m],n=[a.x2*l,a.y2*m],d&&(F(c,c,d),F(n,n,d)),C=n[0]-c[0],D=n[1]-c[1],(g=180*Math.atan2(C,D)/Math.PI)<0&&(g+=360),g<1e-6&&(g=0)):(i="gradientradial",c=[a.x*l,a.y*m],d=o.transform,v=o.scale,q=l,t=m,u=[(c[0]-k.x)/q,(c[1]-k.y)/t],d&&F(c,c,d),q/=v[0]*_,t/=v[1]*_,w=ls(q,t),p=0/w,z=2*a.r/w-p),s=a.colorStops.slice(),s.sort(function(a,b){return a.offset-b.offset});for(r=s.length,e=[],A=[],h=0;h<r;h++)B=s[h],x=(y=B.color,void 0,f=aG(y),[vo(f[0],f[1],f[2]),f[3]]),A.push(B.offset*z+p+" "+x[0]),0!==h&&h!==r-1||e.push(x);2<=r&&(E=e[0][0],G=e[1][0],H=e[0][1]*j.opacity,I=e[1][1]*j.opacity,b.type=i,b.method="none",b.focus="100%",b.angle=g,b.color=E,b.color2=G,b.colors=A.join(","),b.opacity=I,b.opacity2=H),"radial"===i&&(b.focusposition=u.join(","))}else vK(b,a,j.opacity)}(a,d,f):function(b,a){a.lineDash&&(b.dashstyle=a.lineDash.join(" ")),null==a.stroke||a.stroke instanceof bq||vK(b,a.stroke,a.opacity)}(a,d),bB(b,a)):(b[e?"filled":"stroked"]="false",fD(b,a))},aP=[[],[],[]],s.prototype.brushVML=function(e){var b=this.style,a=this._vmlEl,c,h,f,g,i,d;a||(a=kN("shape"),lw(a),this._vmlEl=a),ir(a,"fill",b,this),ir(a,"stroke",b,this),c=this.transform,h=null!=c,f=a.getElementsByTagName("stroke")[0],f&&(g=b.lineWidth,h&&!b.strokeNoScale&&(i=c[0]*c[3]-c[1]*c[2],g*=gq(aey(i))),f.weight=g+"px"),d=this.path||(this.path=new aB),this.__dirtyPath&&(d.beginPath(),d.subPixelOptimize=!1,this.buildPath(d,this.shape),d.toStatic(),this.__dirtyPath=!1),a.path=function(J,c){var k,s,K,a,i,h,P=de.M,O=de.C,M=de.L,Q=de.A,I=de.Q,n=[],b=J.data,L=J.len(),E,D,f,g,H,C,q,t,p,o,B,l,j,x,A,y,G,m,r,u,N,d,e,v,w;for(a=0;a<L;){switch(s="",k=0,K=b[a++]){case P:s=" m ",k=1,i=b[a++],h=b[a++],aP[0][0]=i,aP[0][1]=h;break;case M:s=" l ",k=1,i=b[a++],h=b[a++],aP[0][0]=i,aP[0][1]=h;break;case I:case O:s=" c ",k=3,f=b[a++],g=b[a++],H=b[a++],C=b[a++],K===I?(H=((E=H)+2*f)/3,C=((D=C)+2*g)/3,f=(i+2*f)/3,g=(h+2*g)/3):(E=b[a++],D=b[a++]),aP[0][0]=f,aP[0][1]=g,aP[1][0]=H,aP[1][1]=C,i=aP[2][0]=E,h=aP[2][1]=D;break;case Q:q=0,t=0,p=1,o=1,B=0,c&&(q=c[4],t=c[5],p=gq(c[0]*c[0]+c[1]*c[1]),o=gq(c[2]*c[2]+c[3]*c[3]),B=Math.atan2(-c[1]/o,c[0]/p)),l=b[a++],j=b[a++],x=b[a++],A=b[a++],y=b[a++]+B,G=b[a++]+y+B,a++,m=b[a++],r=l+vb(y)*x,u=j+ve(y)*A,N=(f=l+vb(G)*x,g=j+ve(G)*A,m?" wa ":" at "),Math.abs(r-f)<1e-4&&(.01<Math.abs(G-y)?m&&(r+=.0125):Math.abs(u-j)<1e-4?m&&r<l||!m&&l<r?g-=.0125:g+=.0125:m&&u<j||!m&&j<u?f+=.0125:f-=.0125),n.push(N,z(((l-x)*p+q)*_-aw),S,z(((j-A)*o+t)*_-aw),S,z(((l+x)*p+q)*_-aw),S,z(((j+A)*o+t)*_-aw),S,z((r*p+q)*_-aw),S,z((u*o+t)*_-aw),S,z((f*p+q)*_-aw),S,z((g*o+t)*_-aw)),i=f,h=g;break;case de.R:d=aP[0],e=aP[1],d[0]=b[a++],d[1]=b[a++],e[0]=d[0]+b[a++],e[1]=d[1]+b[a++],c&&(F(d,d,c),F(e,e,c)),d[0]=z(d[0]*_-aw),e[0]=z(e[0]*_-aw),d[1]=z(d[1]*_-aw),e[1]=z(e[1]*_-aw),n.push(" m ",d[0],S,d[1]," l ",e[0],S,d[1]," l ",e[0],S,e[1]," l ",d[0],S,e[1]);break;case de.Z:n.push(" x ")}if(0<k){n.push(s);for(v=0;v<k;v++)w=aP[v],c&&F(w,w,c),n.push(z(w[0]*_-aw),S,z(w[1]*_-aw),v<k-1?S:"")}}return n.join("")}(d,this.transform),a.style.zIndex=lN(this.zlevel,this.z,this.z2),bB(e,a),null!=b.text?this.drawRectText(e,this.getBoundingRect()):this.removeRectText(e)},s.prototype.onRemove=function(a){fD(a,this._vmlEl),this.removeRectText(a)},s.prototype.onAdd=function(a){bB(a,this._vmlEl),this.appendRectText(a)},ad.prototype.brushVML=function(I){var h,i,c=this.style,d=c.image,C,p,N,M,k,l,m,j,s,r,D,H,L,g,a,q,E,f,e,w,v,x,u,K,O,G,o,b,n,t,B,A,y,J;(function(a){return"object"==typeof a&&a.tagName&&"IMG"===a.tagName.toUpperCase()})(d)?(C=d.src,C===this._imageSrc?(h=this._imageWidth,i=this._imageHeight):(p=d.runtimeStyle,N=p.width,M=p.height,p.width="auto",p.height="auto",h=d.width,i=d.height,p.width=N,p.height=M,this._imageSrc=C,this._imageWidth=h,this._imageHeight=i),d=C):d===this._imageSrc&&(h=this._imageWidth,i=this._imageHeight),d&&(k=c.x||0,l=c.y||0,m=c.width,j=c.height,s=c.sWidth,r=c.sHeight,D=c.sx||0,H=c.sy||0,L=s&&r,g=this._vmlEl,g||(g=aR.createElement("div"),lw(g),this._vmlEl=g),q=g.style,E=!1,f=1,e=1,(this.transform&&(a=this.transform,f=gq(a[0]*a[0]+a[1]*a[1]),e=gq(a[2]*a[2]+a[3]*a[3]),E=a[1]||a[2]),E)?(w=[k,l],v=[k+m,l],x=[k,l+j],u=[k+m,l+j],F(w,w,a),F(v,v,a),F(x,x,a),F(u,u,a),K=ls(w[0],v[0],x[0],u[0]),O=ls(w[1],v[1],x[1],u[1]),G=[],G.push("M11=",a[0]/f,S,"M12=",a[2]/e,S,"M21=",a[1]/f,S,"M22=",a[3]/e,S,"Dx=",z(k*f+a[4]),S,"Dy=",z(l*e+a[5])),q.padding="0 "+z(K)+"px "+z(O)+"px 0",q.filter=lv+".Matrix("+G.join("")+", SizingMethod=clip)"):(a&&(k=k*f+a[4],l=l*e+a[5]),q.filter="",q.left=z(k)+"px",q.top=z(l)+"px"),o=this._imageEl,b=this._cropEl,o||(o=aR.createElement("div"),this._imageEl=o),n=o.style,L?(h&&i?(n.width=z(f*h*m/s)+"px",n.height=z(e*i*j/r)+"px"):(t=new Image,B=this,t.onload=function(){t.onload=null,h=t.width,i=t.height,n.width=z(f*h*m/s)+"px",n.height=z(e*i*j/r)+"px",B._imageWidth=h,B._imageHeight=i,B._imageSrc=d},t.src=d),b||((b=aR.createElement("div")).style.overflow="hidden",this._cropEl=b),A=b.style,A.width=z((m+D*m/s)*f),A.height=z((j+H*j/r)*e),A.filter=lv+".Matrix(Dx="+-D*m/s*f+",Dy="+-H*j/r*e+")",b.parentNode||g.appendChild(b),o.parentNode!==b&&b.appendChild(o)):(n.width=z(f*m)+"px",n.height=z(e*j)+"px",g.appendChild(o),b&&b.parentNode&&(g.removeChild(b),this._cropEl=null)),y="",J=c.opacity,J<1&&(y+=".Alpha(opacity="+z(100*J)+") "),y+=lv+".AlphaImageLoader(src="+d+", SizingMethod=scale)",n.filter=y,g.style.zIndex=lN(this.zlevel,this.z,this.z2),bB(I,g),null!=c.text&&this.drawRectText(I,this.getBoundingRect()))},ad.prototype.onRemove=function(a){fD(a,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(a)},ad.prototype.onAdd=function(a){bB(a,this._vmlEl),this.appendRectText(a)},lO="normal",lP={},lU=0,aeT=document.createElement("div"),uQ=function(b,c){var a=aR;cW||((cW=a.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",aR.body.appendChild(cW));try{cW.style.font=c}catch(a){}return cW.innerHTML="",cW.appendChild(a.createTextNode(b)),{width:cW.offsetWidth}},nb.measureText=uQ;for(l_=new r,aeV=function(B,c,k,t){var a=this.style,d,y,v,x,w,u,i,e,j,p,l,A,g,s,q,n,h,f,o,b,m,r;if(this.__dirty&&gl(a),d=a.text,null!=d&&(d+=""),d){if(a.rich){y=mV(d,a),d=[];for(v=0;v<y.lines.length;v++){for(x=y.lines[v].tokens,w=[],u=0;u<x.length;u++)w.push(x[u].text);d.push(w.join(""))}d=d.join("\n")}j=a.textAlign,p=a.textVerticalAlign,l=function(c){var b=lP[c],d,a;if(!b){100<lU&&(lU=0,lP={}),a=aeT.style;try{a.font=c,d=a.fontFamily.split(",")[0]}catch(a){}b={style:a.fontStyle||lO,variant:a.fontVariant||lO,weight:a.fontWeight||lO,size:0|parseFloat(a.fontSize||12),family:d||"Microsoft YaHei"},lP[c]=b,lU++}return b}(a.font),A=l.style+" "+l.variant+" "+l.weight+" "+l.size+'px "'+l.family+'"',k=k||bn(d,A,j,p,a.textPadding,a.textLineHeight),g=this.transform,(g&&!t&&(l_.copy(c),l_.applyTransform(g),c=l_),t)?(i=c.x,e=c.y):(s=a.textPosition,s instanceof Array?(i=c.x+vJ(s[0],c.width),e=c.y+vJ(s[1],c.height),j=j||"left"):(q=this.calculateTextPosition?this.calculateTextPosition({},a,c):na({},a,c),i=q.x,e=q.y,j=j||q.textAlign,p=p||q.textVerticalAlign)),i=ft(i,k.width,j),e=ey(e,k.height,p),e+=k.height/2,o=kN,b=this._textVmlEl,b?h=(n=(f=b.firstChild).nextSibling).nextSibling:(b=o("line"),n=o("path"),h=o("textpath"),f=o("skew"),h.style["v-text-align"]="left",lw(b),n.textpathok=!0,h.on=!0,b.from="0 0",b.to="1000 0.05",bB(b,f),bB(b,n),bB(b,h),this._textVmlEl=b),m=[i,e],r=b.style,g&&t?(F(m,m,g),f.on=!0,f.matrix=g[0].toFixed(3)+S+g[2].toFixed(3)+S+g[1].toFixed(3)+S+g[3].toFixed(3)+",0,0",f.offset=(z(m[0])||0)+","+(z(m[1])||0),f.origin="0 0",r.left="0px",r.top="0px"):(f.on=!1,r.left=z(i)+"px",r.top=z(e)+"px"),h.string=function(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}(d);try{h.style.font=A}catch(a){}ir(b,"fill",{fill:a.textFill,opacity:a.opacity},this),ir(b,"stroke",{stroke:a.textStroke,opacity:a.opacity,lineDash:a.lineDash||null},this),b.style.zIndex=lN(this.zlevel,this.z,this.z2),bB(B,b)}},aeW=function(a){fD(a,this._textVmlEl),this._textVmlEl=null},aeX=function(a){bB(a,this._textVmlEl)},vV=[jv,aC,ad,s,q],md=0;md<vV.length;md++)mo=vV[md].prototype,mo.drawRectText=aeV,mo.removeRectText=aeW,mo.appendRectText=aeX;q.prototype.brushVML=function(b){var a=this.style;null!=a.text?this.drawRectText(b,{x:a.x||0,y:a.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(b)},q.prototype.onRemove=function(a){this.removeRectText(a)},q.prototype.onAdd=function(a){this.appendRectText(a)}}function dS(a){return parseInt(a,10)}function jg(d,a){var c,b,e,f;!function(){if(!uw&&aR){uw=!0;var a=aR.styleSheets;a.length<31?aR.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):a[0].addRule(".zrvml","behavior:url(#default#VML)")}}(),this.root=d,this.storage=a,c=document.createElement("div"),b=document.createElement("div"),c.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",b.style.cssText="position:absolute;left:0;top:0;",d.appendChild(c),this._vmlRoot=b,this._vmlViewport=c,this.resize(),e=a.delFromStorage,f=a.addToStorage,a.delFromStorage=function(c){e.call(a,c),c&&c.onRemove&&c.onRemove(b)},a.addToStorage=function(c){c.onAdd&&c.onAdd(b),f.call(a,c)},this._firstPaint=!0}jg.prototype={constructor:jg,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var a=this.getViewportRoot();if(a)return{offsetLeft:a.offsetLeft||0,offsetTop:a.offsetTop||0}},refresh:function(){var a=this.storage.getDisplayList(!0,!0);this._paintList(a)},_paintList:function(d){for(var b=this._vmlRoot,c=0,a;c<d.length;c++)a=d[c],a.invisible||a.ignore?(a.__alreadyNotVisible||a.onRemove(b),a.__alreadyNotVisible=!0):(a.__alreadyNotVisible&&a.onAdd(b),a.__alreadyNotVisible=!1,a.__dirty&&(a.beforeBrush&&a.beforeBrush(),(a.brushVML||a.brush).call(a,b),a.afterBrush&&a.afterBrush())),a.__dirty=!1;this._firstPaint&&(this._vmlViewport.appendChild(b),this._firstPaint=!1)},resize:function(a,b){if(a=null==a?this._getWidth():a,b=null==b?this._getHeight():b,this._width!==a||this._height!==b){this._width=a,this._height=b;var c=this._vmlViewport.style;c.width=a+"px",c.height=b+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var b=this.root,a=b.currentStyle;return(b.clientWidth||dS(a.width))-dS(a.paddingLeft)-dS(a.paddingRight)|0},_getHeight:function(){var b=this.root,a=b.currentStyle;return(b.clientHeight||dS(a.height))-dS(a.paddingTop)-dS(a.paddingBottom)|0}},a(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(a){jg.prototype[a]=function(a){return function(){cm('In IE8.0 VML mode painter not support method "'+a+'"')}}(a)}),ma("vml",jg);function dz(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}dr=aB.CMD,afd=Array.prototype.join,eM="none",ne=Math.round,wO=Math.sin,wR=Math.cos,wS=Math.PI,cP=2*Math.PI,afk=180/wS,wV=1e-4;function bk(a){return ne(1e4*a)/1e4}function xd(a){return a<wV&&-wV<a}function nA(b,a){a&&L(b,"transform","matrix("+afd.call(a,",")+")")}function L(b,c,a){a&&("linear"===a.type||"radial"===a.type)||b.setAttribute(c,a)}function xt(b,a,c,f){var d,e;(function(a,c){var b=c?a.textFill:a.fill;return null!=b&&b!==eM})(a,c)?(d=c?a.textFill:a.fill,L(b,"fill",d="transparent"===d?eM:d),L(b,"fill-opacity",null!=a.fillOpacity?a.fillOpacity*a.opacity:a.opacity)):L(b,"fill",eM),function(a,c){var b=c?a.textStroke:a.stroke;return null!=b&&b!==eM}(a,c)?(e=c?a.textStroke:a.stroke,L(b,"stroke",e="transparent"===e?eM:e),L(b,"stroke-width",(c?a.textStrokeWidth:a.lineWidth)/(!c&&a.strokeNoScale?f.getLineScale():1)),L(b,"paint-order",c?"stroke":"fill"),L(b,"stroke-opacity",null!=a.strokeOpacity?a.strokeOpacity:a.opacity),a.lineDash?(L(b,"stroke-dasharray",a.lineDash.join(",")),L(b,"stroke-dashoffset",ne(a.lineDashOffset||0))):L(b,"stroke-dasharray",""),a.lineCap&&L(b,"stroke-linecap",a.lineCap),a.lineJoin&&L(b,"stroke-linejoin",a.lineJoin),a.miterLimit&&L(b,"stroke-miterlimit",a.miterLimit)):L(b,"stroke",eM)}ga={},ga.brush=function(a){var d=a.style,b=a.__svgEl,c,e;b||(b=dz("path"),a.__svgEl=b),a.path||a.createPathProxy(),c=a.path,a.__dirtyPath&&(c.beginPath(),c.subPixelOptimize=!1,a.buildPath(c,a.shape),a.__dirtyPath=!1,e=function(u){for(var g=[],b=u.data,y=u.len(),a=0,f,h,n,s,l,k,i,c,z,j,p,q,x,m,w,v,d,e,r,o,t;a<y;){switch(f="",h=0,b[a++]){case dr.M:f="M",h=2;break;case dr.L:f="L",h=2;break;case dr.Q:f="Q",h=4;break;case dr.C:f="C",h=6;break;case dr.A:n=b[a++],s=b[a++],l=b[a++],k=b[a++],i=b[a++],c=b[a++],z=b[a++],j=b[a++],p=Math.abs(c),q=xd(p-cP)||(j?cP<=c:cP<=-c),x=0<c?c%cP:c%cP+cP,m=!1,m=!!q||!xd(p)&&wS<=x==!!j,w=bk(n+l*wR(i)),v=bk(s+k*wO(i)),q&&(c=j?cP-1e-4:1e-4-cP,m=!0,9===a&&g.push("M",w,v)),d=bk(n+l*wR(i+c)),e=bk(s+k*wO(i+c)),g.push("A",bk(l),bk(k),ne(z*afk),+m,+j,d,e);break;case dr.Z:f="Z";break;case dr.R:d=bk(b[a++]),e=bk(b[a++]),r=bk(b[a++]),o=bk(b[a++]),g.push("M",d,e,"L",d+r,e,"L",d+r,e+o,"L",d,e+o,"L",d,e)}f&&g.push(f);for(t=0;t<h;t++)g.push(bk(b[a++]))}return g.join(" ")}(c),e.indexOf("NaN")<0&&L(b,"d",e)),xt(b,d,!1,a),nA(b,a.transform),null!=d.text&&hm(a,a.getBoundingRect())},xC={brush:function(b){var d=b.style,c=d.image,e,f,g,h,a;c instanceof HTMLImageElement&&(c=c.src),c&&(e=d.x||0,f=d.y||0,g=d.width,h=d.height,a=b.__svgEl,a||(a=dz("image"),b.__svgEl=a),c!==b.__imageSrc&&(function(a,b,c){a.setAttributeNS("http://www.w3.org/1999/xlink",b,c)}(a,"href",c),b.__imageSrc=c),L(a,"width",g),L(a,"height",h),L(a,"x",e),L(a,"y",f),nA(a,b.transform),null!=d.text&&hm(b,b.getBoundingRect()))}},g_={},nL=new r,gk={},cf=[],afx={left:"start",right:"end",center:"middle",middle:"middle"},hm=function(a,i){var d=a.style,o=a.transform,A=a instanceof q||d.transformText,f,c,w,u,y,l,D,g,C,s,p,v,m,B,r,j,x,h,k,b,z,n,e,t;if(a.__dirty&&gl(d),f=d.text,null!=f&&(f+=""),mv(f,d))if(null==f&&(f=""),!A&&o&&(nL.copy(i),nL.applyTransform(o),i=nL),c=a.__textSvgEl,c||(c=dz("text"),a.__textSvgEl=c),w=c.style,u=d.font||iI,y=c.__computedFont,u!==c.__styleFont&&(w.font=c.__styleFont=u,y=c.__computedFont=w.font),l=d.textPadding,D=d.textLineHeight,g=a.__textCotentBlock,g&&!a.__dirtyText||(g=a.__textCotentBlock=mW(f,y,l,D,d.truncate)),C=g.outerHeight,s=g.lineHeight,mB(gk,a,d,i),p=gk.baseX,v=gk.baseY,m=gk.textAlign||"left",B=gk.textVerticalAlign,!function(h,i,g,f,a,d,c){var e,b;el(cf),i&&g&&fY(cf,g),e=f.textRotation,a&&e&&(b=f.textOrigin,"center"===b?(d=a.width/2+a.x,c=a.height/2+a.y):b&&(d=b[0]+a.x,c=b[1]+a.y),cf[4]-=d,cf[5]-=c,cc(cf,cf,e),cf[4]+=d,cf[5]+=c),nA(h,cf)}(c,A,o,d,i,p,v),r=p,j=ey(v,C,B),l&&(r=function(b,c,a){return"right"===c?b-a[1]:"center"===c?b+a[3]/2-a[1]/2:b+a[3]}(p,m,l),j+=l[0]),j+=s/2,xt(c,d,!0,a),x=g.canCacheByTextString,h=a.__tspanList||(a.__tspanList=[]),k=h.length,x&&a.__canCacheByTextString&&a.__text===f){if(a.__dirtyText&&k)for(b=0;b<k;++b)xQ(h[b],m,r,j+b*s)}else{a.__text=f,a.__canCacheByTextString=x,z=g.lines,n=z.length;for(b=0;b<n;b++)e=h[b],t=z[b],e?e.__zrText!==t&&(e.innerHTML="",e.appendChild(document.createTextNode(t))):(e=h[b]=dz("tspan"),c.appendChild(e),e.appendChild(document.createTextNode(t))),xQ(e,m,r,j+b*s);if(n<k){for(;b<k;b++)c.removeChild(h[b]);h.length=n}}};function xQ(a,b,c,d){L(a,"dominant-baseline","middle"),L(a,"text-anchor",afx[b]),L(a,"x",c),L(a,"y",d)}function xS(){}function afB(i,f){for(var g=0,h=f.length,e=0,d=0,a,c,b;g<h;g++)if(a=f[g],a.removed){for(c=[],b=d;b<d+a.count;b++)c.push(b);a.indices=c,d+=a.count}else{for(c=[],b=e;b<e+a.count;b++)c.push(b);a.indices=c,e+=a.count,a.added||(d+=a.count)}return f}g_.drawRectText=hm,g_.brush=function(a){null!=a.style.text&&hm(a,!1)},xS.prototype={diff:function(c,b,j){var d,e,f,g,m,a,l,k,h,i;if(j=j||function(a,b){return a===b},this.equals=j,d=this,c=c.slice(),e=(b=b.slice()).length,f=c.length,g=1,m=e+f,a=[{newPos:-1,components:[]}],l=this.extractCommon(a[0],b,c,0),a[0].newPos+1>=e&&f<=l+1){for(k=[],h=0;h<b.length;h++)k.push(h);return[{indices:k,count:b.length}]}function n(){for(var h=-1*g,i,j,k,l,m,n,o;h<=g;h+=2)if(j=a[h-1],k=a[h+1],l=(k?k.newPos:0)-h,j&&(a[h-1]=void 0),m=j&&j.newPos+1<e,n=k&&0<=l&&l<f,m||n){if(!m||n&&j.newPos<k.newPos?(i={newPos:(o=k).newPos,components:o.components.slice(0)},d.pushComponent(i.components,void 0,!0)):((i=j).newPos++,d.pushComponent(i.components,!0,void 0)),l=d.extractCommon(i,b,c,h),i.newPos+1>=e&&f<=l+1)return afB(d,i.components,b,c);a[h]=i}else a[h]=void 0;g++}for(;g<=m;)if(i=n(),i)return i},pushComponent:function(a,c,d){var b=a[a.length-1];b&&b.added===c&&b.removed===d?a[a.length-1]={count:b.count+1,added:c,removed:d}:a.push({count:1,added:c,removed:d})},extractCommon:function(d,e,f,g){for(var h=e.length,i=f.length,a=d.newPos,b=a-g,c=0;a+1<h&&b+1<i&&this.equals(e[a+1],f[b+1]);)a++,b++,c++;return c&&d.components.push({count:c}),d.newPos=a,b},tokenize:function(a){return a.slice()},join:function(a){return a.slice()}},afC=new xS;function I(b,c,a,d,e){this._zrId=b,this._svgRoot=c,this._tagNames="string"==typeof a?[a]:a,this._markLabel=d,this._domName=e||"_dom",this.nextId=0}function dq(a,b){I.call(this,a,b,["linearGradient","radialGradient"],"__gradient_in_use__")}function fu(a,b){I.call(this,a,b,"clipPath","__clippath_in_use__")}function cB(a,b){I.call(this,a,b,["filter"],"__filter_in_use__","_shadowDom")}function yy(a){return a&&(a.shadowBlur||a.shadowOffsetX||a.shadowOffsetY||a.textShadowBlur||a.textShadowOffsetX||a.textShadowOffsetY)}function im(a){return parseInt(a,10)}function yJ(a,b){return b&&a&&b.parentNode!==a}function iV(a,b,c){if(yJ(a,b)&&c){var d=c.nextSibling;d?a.insertBefore(b,d):a.appendChild(b)}}function yT(a,b){if(yJ(a,b)){var c=a.firstChild;c?a.insertBefore(b,c):a.appendChild(b)}}function yV(a,b){b&&a&&b.parentNode===a&&a.removeChild(b)}function f$(a){return a.__textSvgEl}function gA(a){return a.__svgEl}I.prototype.createElement=dz,I.prototype.getDefs=function(c){var b=this._svgRoot,a=this._svgRoot.getElementsByTagName("defs");return 0===a.length?c?((a=b.insertBefore(this.createElement("defs"),b.firstChild)).contains||(a.contains=function(d){var b=a.children,c;if(!b)return!1;for(c=b.length-1;0<=c;--c)if(b[c]===d)return!0;return!1}),a):null:a[0]},I.prototype.update=function(a,c){var d,b;a&&(d=this.getDefs(!1),a[this._domName]&&d.contains(a[this._domName])?"function"==typeof c&&c(a):(b=this.add(a),b&&(a[this._domName]=b)))},I.prototype.addDom=function(a){this.getDefs(!0).appendChild(a)},I.prototype.removeDom=function(a){var b=this.getDefs(!1);b&&a[this._domName]&&(b.removeChild(a[this._domName]),a[this._domName]=null)},I.prototype.getDoms=function(){var c=this.getDefs(!1),b;return c?(b=[],a(this._tagNames,function(a){var d=c.getElementsByTagName(a);b=b.concat([].slice.call(d))}),b):[]},I.prototype.markAllUnused=function(){var b=this.getDoms(),c=this;a(b,function(a){a[c._markLabel]="0"})},I.prototype.markUsed=function(a){a&&(a[this._markLabel]="1")},I.prototype.removeUnused=function(){var b=this.getDefs(!1),c,d;b&&(c=this.getDoms(),d=this,a(c,function(a){"1"!==a[d._markLabel]&&b.removeChild(a)}))},I.prototype.getSvgProxy=function(a){return a instanceof s?ga:a instanceof ad?xC:a instanceof q?g_:ga},I.prototype.getTextSvgElement=function(a){return a.__textSvgEl},I.prototype.getSvgElement=function(a){return a.__svgEl},D(dq,I),dq.prototype.addWithoutUpdate=function(d,b){if(b&&b.style){var c=this;a(["fill","stroke"],function(a){var e,f,g,h;b.style[a]&&("linear"===b.style[a].type||"radial"===b.style[a].type)&&(f=b.style[a],g=c.getDefs(!0),f._dom?(e=f._dom,g.contains(f._dom)||c.addDom(e)):e=c.add(f),c.markUsed(b),h=e.getAttribute("id"),d.setAttribute(a,"url(#"+h+")"))})}},dq.prototype.add=function(a){var b;if("linear"===a.type)b=this.createElement("linearGradient");else{if("radial"!==a.type)return cm("Illegal gradient type."),null;b=this.createElement("radialGradient")}return a.id=a.id||this.nextId++,b.setAttribute("id","zr"+this._zrId+"-gradient-"+a.id),this.updateDom(a,b),this.addDom(b),b},dq.prototype.update=function(a){var b=this;I.prototype.update.call(this,a,function(){var c=a.type,d=a._dom.tagName;"linear"===c&&"linearGradient"===d||"radial"===c&&"radialGradient"===d?b.updateDom(a,a._dom):(b.removeDom(a),b.add(a))})},dq.prototype.updateDom=function(a,b){var e,c,g,d,f,h,i;if("linear"===a.type)b.setAttribute("x1",a.x),b.setAttribute("y1",a.y),b.setAttribute("x2",a.x2),b.setAttribute("y2",a.y2);else{if("radial"!==a.type)return void cm("Illegal gradient type.");b.setAttribute("cx",a.x),b.setAttribute("cy",a.y),b.setAttribute("r",a.r)}a.global?b.setAttribute("gradientUnits","userSpaceOnUse"):b.setAttribute("gradientUnits","objectBoundingBox"),b.innerHTML="";for(e=a.colorStops,c=0,g=e.length;c<g;++c)d=this.createElement("stop"),d.setAttribute("offset",100*e[c].offset+"%"),f=e[c].color,f.indexOf(!1)?(h=aG(f)[3],i=nM(f),d.setAttribute("stop-color","#"+i),d.setAttribute("stop-opacity",h)):d.setAttribute("stop-color",e[c].color),b.appendChild(d);a._dom=b},dq.prototype.markUsed=function(b){if(b.style){var a=b.style.fill;a&&a._dom&&I.prototype.markUsed.call(this,a._dom),(a=b.style.stroke)&&a._dom&&I.prototype.markUsed.call(this,a._dom)}},D(fu,I),fu.prototype.update=function(a){var b=this.getSvgElement(a),c;b&&this.updateDom(b,a.__clipPaths,!1),c=this.getTextSvgElement(a),c&&this.updateDom(c,a.__clipPaths,!0),this.markUsed(a)},fu.prototype.updateDom=function(h,c,g){var b,d,f,a,e,i,j,k;c&&0<c.length?(f=this.getDefs(!0),a=c[0],e=g?"_textDom":"_dom",a[e]?(d=a[e].getAttribute("id"),b=a[e],f.contains(b)||f.appendChild(b)):(d="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(b=this.createElement("clipPath")).setAttribute("id",d),f.appendChild(b),a[e]=b),i=this.getSvgProxy(a),a.transform&&a.parent.invTransform&&!g?(j=Array.prototype.slice.call(a.transform),cu(a.transform,a.parent.invTransform,a.transform),i.brush(a),a.transform=j):i.brush(a),k=this.getSvgElement(a),b.innerHTML="",b.appendChild(k.cloneNode()),h.setAttribute("clip-path","url(#"+d+")"),1<c.length&&this.updateDom(b,c.slice(1),g)):h&&h.setAttribute("clip-path","none")},fu.prototype.markUsed=function(b){var c=this;b.__clipPaths&&a(b.__clipPaths,function(a){a._dom&&I.prototype.markUsed.call(c,a._dom),a._textDom&&I.prototype.markUsed.call(c,a._textDom)})},D(cB,I),cB.prototype.addWithoutUpdate=function(d,a){var b,c;a&&yy(a.style)&&(a._shadowDom?(b=a._shadowDom,this.getDefs(!0).contains(a._shadowDom)||this.addDom(b)):b=this.add(a),this.markUsed(a),c=b.getAttribute("id"),d.style.filter="url(#"+c+")")},cB.prototype.add=function(a){var b=this.createElement("filter");return a._shadowDomId=a._shadowDomId||this.nextId++,b.setAttribute("id","zr"+this._zrId+"-shadow-"+a._shadowDomId),this.updateDom(a,b),this.addDom(b),b},cB.prototype.update=function(b,a){if(yy(a.style)){var c=this;I.prototype.update.call(this,a,function(){c.updateDom(a,a._shadowDom)})}else this.remove(b,a)},cB.prototype.remove=function(a,b){null!=b._shadowDomId&&(this.removeDom(a),a.style.filter="")},cB.prototype.updateDom=function(d,c){var b=c.getElementsByTagName("feDropShadow"),f,g,e,h,a,i,j,k;if(b=0===b.length?this.createElement("feDropShadow"):b[0],a=d.style,i=d.scale&&d.scale[0]||1,j=d.scale&&d.scale[1]||1,a.shadowBlur||a.shadowOffsetX||a.shadowOffsetY)f=a.shadowOffsetX||0,g=a.shadowOffsetY||0,e=a.shadowBlur,h=a.shadowColor;else{if(!a.textShadowBlur)return void this.removeDom(c,a);f=a.textShadowOffsetX||0,g=a.textShadowOffsetY||0,e=a.textShadowBlur,h=a.textShadowColor}b.setAttribute("dx",f/i),b.setAttribute("dy",g/j),b.setAttribute("flood-color",h),k=e/2/i+" "+e/2/j,b.setAttribute("stdDeviation",k),c.setAttribute("x","-100%"),c.setAttribute("y","-100%"),c.setAttribute("width",Math.ceil(e/2*200)+"%"),c.setAttribute("height",Math.ceil(e/2*200)+"%"),c.appendChild(b),d._shadowDom=c},cB.prototype.markUsed=function(a){a._shadowDom&&I.prototype.markUsed.call(this,a._shadowDom)};function gN(e,g,c,d){var a,b;this.root=e,this.storage=g,this._opts=c=f({},c||{}),a=dz("svg"),a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.setAttribute("version","1.1"),a.setAttribute("baseProfile","full"),a.style.cssText="user-select:none;position:absolute;left:0;top:0;",this.gradientManager=new dq(d,a),this.clipPathManager=new fu(d,a),this.shadowManager=new cB(d,a),b=document.createElement("div"),b.style.cssText="overflow:hidden;position:relative",this._svgRoot=a,this._viewport=b,e.appendChild(b),b.appendChild(a),this.resize(c.width,c.height),this._visibleList=[]}gN.prototype={constructor:gN,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getViewportRootOffset:function(){var a=this.getViewportRoot();if(a)return{offsetLeft:a.offsetLeft||0,offsetTop:a.offsetTop||0}},refresh:function(){var a=this.storage.getDisplayList(!0);this._paintList(a)},setBackgroundColor:function(a){this._viewport.style.background=a},_paintList:function(o){var c,k,g,m,n,i,a,l,b,h,j,e,d,f;this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused(),g=this._svgRoot,m=this._visibleList,n=o.length,i=[];for(c=0;c<n;c++)a=o[c],l=(k=a)instanceof s?ga:k instanceof ad?xC:k instanceof q?g_:ga,b=gA(a)||f$(a),a.invisible||(a.__dirty&&(l&&l.brush(a),this.clipPathManager.update(a),a.style&&(this.gradientManager.update(a.style.fill),this.gradientManager.update(a.style.stroke),this.shadowManager.update(b,a)),a.__dirty=!1),i.push(a));j=function(a,b,c){return afC.diff(a,b,c)}(m,i);for(c=0;c<j.length;c++)if((f=j[c]).removed)for(e=0;e<f.count;e++)b=gA(a=m[f.indices[e]]),d=f$(a),yV(g,b),yV(g,d);for(c=0;c<j.length;c++)if((f=j[c]).added)for(e=0;e<f.count;e++)b=gA(a=i[f.indices[e]]),d=f$(a),h?iV(g,b,h):yT(g,b),b?iV(g,d,b):h?iV(g,d,h):yT(g,d),iV(g,d,b),h=d||b||h,this.gradientManager.addWithoutUpdate(b||d,a),this.shadowManager.addWithoutUpdate(b||d,a),this.clipPathManager.markUsed(a);else if(!f.removed)for(e=0;e<f.count;e++)h=f$(a=i[f.indices[e]])||gA(a)||h,b=gA(a),d=f$(a),this.gradientManager.markUsed(a),this.gradientManager.addWithoutUpdate(b||d,a),this.shadowManager.markUsed(a),this.shadowManager.addWithoutUpdate(b||d,a),this.clipPathManager.markUsed(a);this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=i},_getDefs:function(c){var a,b=this._svgRoot;return 0!==(a=this._svgRoot.getElementsByTagName("defs")).length?a[0]:c?((a=b.insertBefore(dz("defs"),b.firstChild)).contains||(a.contains=function(d){var b=a.children,c;if(!b)return!1;for(c=b.length-1;0<=c;--c)if(b[c]===d)return!0;return!1}),a):null},resize:function(a,b){var c=this._viewport,d,e,f;c.style.display="none",d=this._opts,(null!=a&&(d.width=a),null!=b&&(d.height=b),a=this._getSize(0),b=this._getSize(1),c.style.display="",this._width!==a||this._height!==b)&&(this._width=a,this._height=b,e=c.style,e.width=a+"px",e.height=b+"px",f=this._svgRoot,f.setAttribute("width",a),f.setAttribute("height",b))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(b){var c=this._opts,a=["width","height"][b],f=["clientWidth","clientHeight"][b],g=["paddingLeft","paddingTop"][b],h=["paddingRight","paddingBottom"][b],d,e;return null!=c[a]&&"auto"!==c[a]?parseFloat(c[a]):(d=this.root,e=document.defaultView.getComputedStyle(d),(d[f]||im(e[a])||im(d.style[a]))-(im(e[g])||0)-(im(e[h])||0)|0)},dispose:function(){this.root.innerHTML="",this._svgRoot=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},pathToDataUrl:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+this._svgRoot.outerHTML}},a(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(a){gN.prototype[a]=function(a){return function(){cm('In SVG mode painter not support method "'+a+'"')}}(a)}),ma("svg",gN),o.version="4.5.0",o.dependencies={zrender:"4.1.2"},o.PRIORITY=bz,o.init=function(b,d,e){var c=m_(b),a;return c||(a=new gt(b,d,e),a.id="ec_"+adb++,dw[a.id]=a,vM(b,mX,a.id),function(a){var b="__connectUpdateStatus";function c(c,d){for(var a=0;a<c.length;a++)c[a][b]=d}ac(jj,function(e,d){a._messageCenter.on(d,function(e){if(iY[a.group]&&0!==a[b]){if(e&&e.escapeConnect)return;var f=a.makeActionFromEvent(e),d=[];ac(dw,function(b){b!==a&&b.group===a.group&&d.push(b)}),c(d,0),ac(d,function(a){1!==a[b]&&a.dispatchAction(f)}),c(d,2)}})})}(a),a)},o.connect=function(a){if(b(a)){var c=a;a=null,ac(c,function(b){null!=b.group&&(a=b.group)}),a=a||"g_"+ada++,ac(c,function(b){b.group=a})}return iY[a]=!0,a},o.disConnect=qz,o.disconnect=ac_,o.dispose=function(a){"string"==typeof a?a=dw[a]:a instanceof gt||(a=m_(a)),a instanceof gt&&!a.isDisposed()&&a.dispose()},o.getInstanceByDom=m_,o.getInstanceById=function(a){return dw[a]},o.registerTheme=m$,o.registerPreprocessor=aj,o.registerProcessor=aH,o.registerPostUpdate=function(a){qL.push(a)},o.registerAction=u,o.registerCoordinateSystem=nd,o.getCoordinateSystemDimensions=function(b){var a=aq.get(b);if(a)return a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice()},o.registerLayout=N,o.registerVisual=H,o.registerLoading=qx,o.extendComponentModel=aN,o.extendComponentView=$,o.extendSeriesModel=iq,o.extendChartView=ay,o.setCanvasCreator=function(a){yQ("createCanvas",a)},o.registerMap=function(a,b,c){jx.registerMap(a,b,c)},o.getMap=function(b){var a=jx.retrieveMap(b);return a&&a[0]&&{geoJson:a[0].geoJSON,specialAreas:a[0].specialAreas}},o.dataTool={},o.zrender=aeY,o.number=aeg,o.format=aec,o.throttle=gG,o.helper=acy,o.matrix=afw,o.vector=afG,o.color=aft,o.parseGeoJSON=o$,o.parseGeoJson=act,o.util=pw,o.graphic=rX,o.List=ab,o.Model=w,o.Axis=Q,o.env=t})