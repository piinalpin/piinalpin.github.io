<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Create Simple Microservice With gRPC | PiinAlpin</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noodp" />
<meta name="Description" content="My Personal Blog">
<link rel="prev" href="https://blog.piinalpin.com/2021/01/consume-graphql-react/" />
<link rel="canonical" href="https://blog.piinalpin.com/2021/01/create-simple-microservice-with-grpc/" />
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Create Simple Microservice With gRPC"/>
<meta name="twitter:description" content=""/>
<script type="application/ld+json">
    {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Create Simple Microservice With gRPC",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https:\/\/blog.piinalpin.com\/2021\/01\/create-simple-microservice-with-grpc\/"
    },
    
        "image": {
            "@type": "ImageObject",
            "url": "https:\/\/blog.piinalpin.com\/cover.png",
            "width":  800 ,
            "height":  600 
        },
    
    "genre": "posts",
    
        "keywords": "Java, Spring Boot, Python, gRPC, gRPC Client, gRPCServer, Microservices",
    
    "wordcount":  2483 ,
    "url": "https:\/\/blog.piinalpin.com\/2021\/01\/create-simple-microservice-with-grpc\/",
    
        "datePublished": "2021-01-30T16:21:21\x2b07:00",
    
    
        "dateModified": "2021-01-30T16:21:21\x2b07:00",
    
    
        "license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.",
    
    
        "publisher": {
            "@type": "Organization",
            "name": "Alvinditya Saputra",
            "logo": {
            "@type": "ImageObject",
            "url": "https:\/\/blog.piinalpin.com\/logo.png",
            "width":  127 ,
            "height":  40 
            }
        },
    
    
    "description": ""
    }
    </script>
<link rel="stylesheet" href="/css/style.min.css">
<link rel="stylesheet" href="/css/lib/fontawesome-free/all.min.min.css">

<link rel="stylesheet" href="/css/lib/animate/animate.min.min.css">


<script>
  if('serviceWorker' in navigator) {
      navigator.serviceWorker
          .register('/service-worker.js', { scope: '/' })
          .then(function(registration) {
              
          });

      navigator.serviceWorker
          .ready
          .then(function(registration) {
              
          });
  }
</script>
    </head>
    <body>
        <script>
            window.localStorage.getItem('theme') === 'dark';
            document.body.classList.add('dark-theme');
        </script>
        <div class="wrapper">
            <nav class="navbar">
    <div class="navbar-container">
        <div class="navbar-header animated bounceIn">
            <a href="https://blog.piinalpin.com/">PiinAlpin</a>
        </div>
        <div class="navbar-menu">
            
            
                <a class="menu-item" href="https://blog.piinalpin.com/posts" title="">Posts</a>
            
                <a class="menu-item" href="https://blog.piinalpin.com/tags" title="">Tags</a>
            
                <a class="menu-item" href="https://blog.piinalpin.com/categories" title="">Categories</a>
            
                <a class="menu-item" href="https://blog.piinalpin.com/about" title="">About</a>
            
        </div>
    </div>
</nav>
<nav class="navbar-mobile">
     <div class="navbar-container">
        <div class="navbar-header">
            <div class="navbar-header-title animated bounceIn">
                <a href="https://blog.piinalpin.com/">PiinAlpin</a>
            </div>
            <div class="menu-toggle" id="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
    </div>
</nav><main class="main">
                <div class="container">
                    
    
    
    

    <article class="post-warp">
        <h1 class="post-title animated flipInX">Create Simple Microservice With gRPC</h1>

        <div class="post-meta">
            <div class="post-meta-main">
                <a class="author" href="https://blog.piinalpin.com/" rel="author"><i class="fas fa-user-circle fa-fw"></i>piinalpin&nbsp;</a>
                <span class="post-category">
                        included in
                        <i class="far fa-folder fa-fw"></i><a href="https://blog.piinalpin.com/categories/documentation/">Documentation</a>
                            
                    </span>
            </div>
            <div class="post-meta-other">
                <i class="far fa-calendar-alt fa-fw"></i><time datetime=2021-01-30>2021-01-30</time>&nbsp;
                <i class="fas fa-pencil-alt fa-fw"></i>about 2483 words&nbsp;
                <i class="far fa-clock fa-fw"></i>12 min&nbsp;</div>
        </div>

        

        <div class="post-toc" id="post-toc">
                <h2 class="post-toc-title">Table of Contents</h2>
                <div class="post-toc-content">
                    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#prerequisites">Prerequisites</a></li>
        <li><a href="#what-is-grpc">What is gRPC?</a></li>
        <li><a href="#grpc-server-and-client-with-java-spring-boot">gRPC Server and Client with Java (Spring Boot)</a></li>
        <li><a href="#grpc-client-with-python">gRPC Client with Python</a></li>
        <li><a href="#clone-or-download">Clone or Download</a></li>
        <li><a href="#thankyou">Thankyou</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
            </div>
            <div class="post-toc-mobile" id="post-toc-mobile">
                <details>
                    <summary><div class="post-toc-title"><span>Table of Contents</span><span><i class="details icon fas fa-angle-down"></i></span></div></summary>
                    <div class="post-toc-content">
                        
                        
                        <nav id="TableOfContentsMobile">
  <ul>
    <li>
      <ul>
        <li><a href="#prerequisites">Prerequisites</a></li>
        <li><a href="#what-is-grpc">What is gRPC?</a></li>
        <li><a href="#grpc-server-and-client-with-java-spring-boot">gRPC Server and Client with Java (Spring Boot)</a></li>
        <li><a href="#grpc-client-with-python">gRPC Client with Python</a></li>
        <li><a href="#clone-or-download">Clone or Download</a></li>
        <li><a href="#thankyou">Thankyou</a></li>
      </ul>
    </li>
  </ul>
</nav>
                    </div>
                </details>
            </div>

        <div class="post-content">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <a class="post-dummy-target" id="prerequisites"></a><h3>Prerequisites</h3>
<ul>
<li><a href="https://start.spring.io/">Spring Initializr</a></li>
<li><a href="https://mvnrepository.com/artifact/net.devh/grpc-spring-boot-starter/2.5.1.RELEASE">gRPC Server</a></li>
<li><a href="https://mvnrepository.com/artifact/net.devh/grpc-client-spring-boot-autoconfigure/2.5.1.RELEASE">gRPC Client</a></li>
<li><a href="https://mvnrepository.com/artifact/org.projectlombok/lombok/1.18.16">Lombok Annotation</a></li>
</ul>
<a class="post-dummy-target" id="what-is-grpc"></a><h3>What is gRPC?</h3>
<p><img src="/images/gRPC-model.svg" alt="gRPC Modelling"></p>
<p>In gRPC, a client application can directly call a method on a server application on a different machine as if it were a local object, making it easier for you to create distributed applications and services. As in many RPC systems, gRPC is based around the idea of defining a service, specifying the methods that can be called remotely with their parameters and return types. On the server side, the server implements this interface and runs a gRPC server to handle client calls. On the client side, the client has a stub (referred to as just a client in some languages) that provides the same methods as the server.</p>
<a class="post-dummy-target" id="grpc-server-and-client-with-java-spring-boot"></a><h3>gRPC Server and Client with Java (Spring Boot)</h3>
<p><strong>Start with spring initializr</strong></p>
<p>I'm depending <a href="https://start.spring.io/">Spring Initializr</a> for this as it is much easier. And we have to create two spring boot projects and started with maven project also use Lombok plugins.</p>
<ul>
<li>gRPC Server-One</li>
<li>gRPC Server-Two</li>
</ul>
<p><strong>gRPC Server One as a Server</strong></p>
<p>Add below dependencies on your <code>pom.xml</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="c">&lt;!--</span><span class="c"> For the gRPC server </span><span class="c">--&gt;</span>
<span class="nt">&lt;dependency</span><span class="nt">&gt;</span>
	<span class="nt">&lt;groupId</span><span class="nt">&gt;</span>net.devh<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>grpc-server-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version</span><span class="nt">&gt;</span>2.5.1.RELEASE<span class="nt">&lt;/version&gt;</span>
	<span class="nt">&lt;exclusions</span><span class="nt">&gt;</span>
		<span class="nt">&lt;exclusion</span><span class="nt">&gt;</span>
			<span class="nt">&lt;groupId</span><span class="nt">&gt;</span>io.grpc<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>grpc-netty-shaded<span class="nt">&lt;/artifactId&gt;</span>
		<span class="nt">&lt;/exclusion&gt;</span>
	<span class="nt">&lt;/exclusions&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="c">&lt;!--</span><span class="c"> For the gRPC client </span><span class="c">--&gt;</span>
<span class="nt">&lt;dependency</span><span class="nt">&gt;</span>
	<span class="nt">&lt;groupId</span><span class="nt">&gt;</span>net.devh<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>grpc-client-spring-boot-autoconfigure<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version</span><span class="nt">&gt;</span>2.5.1.RELEASE<span class="nt">&lt;/version&gt;</span>
	<span class="nt">&lt;type</span><span class="nt">&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="c">&lt;!--</span><span class="c"> https://mvnrepository.com/artifact/org.projectlombok/lombok </span><span class="c">--&gt;</span>
<span class="nt">&lt;dependency</span><span class="nt">&gt;</span>
	<span class="nt">&lt;groupId</span><span class="nt">&gt;</span>org.projectlombok<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>lombok<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version</span><span class="nt">&gt;</span>1.18.16<span class="nt">&lt;/version&gt;</span>
	<span class="nt">&lt;scope</span><span class="nt">&gt;</span>provided<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>Add below extension and plugins into build section</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;extensions</span><span class="nt">&gt;</span>
	<span class="nt">&lt;extension</span><span class="nt">&gt;</span>
		<span class="nt">&lt;groupId</span><span class="nt">&gt;</span>kr.motd.maven<span class="nt">&lt;/groupId&gt;</span>
		<span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>os-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
		<span class="nt">&lt;version</span><span class="nt">&gt;</span>1.6.1<span class="nt">&lt;/version&gt;</span>
	<span class="nt">&lt;/extension&gt;</span>
<span class="nt">&lt;/extensions&gt;</span>
<span class="nt">&lt;plugins</span><span class="nt">&gt;</span>
	<span class="nt">&lt;plugin</span><span class="nt">&gt;</span>
		<span class="nt">&lt;groupId</span><span class="nt">&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
		<span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>spring-boot-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;/plugin&gt;</span>
	<span class="nt">&lt;plugin</span><span class="nt">&gt;</span>
		<span class="nt">&lt;groupId</span><span class="nt">&gt;</span>org.xolstice.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
		<span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>protobuf-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
		<span class="nt">&lt;version</span><span class="nt">&gt;</span>0.6.1<span class="nt">&lt;/version&gt;</span>
		<span class="nt">&lt;configuration</span><span class="nt">&gt;</span>
			<span class="nt">&lt;protocArtifact</span><span class="nt">&gt;</span>
				com.google.protobuf:protoc:3.3.0:exe:${os.detected.classifier}
			<span class="nt">&lt;/protocArtifact&gt;</span>
			<span class="nt">&lt;pluginId</span><span class="nt">&gt;</span>grpc-java<span class="nt">&lt;/pluginId&gt;</span>
			<span class="nt">&lt;pluginArtifact</span><span class="nt">&gt;</span>
				io.grpc:protoc-gen-grpc-java:1.4.0:exe:${os.detected.classifier}
			<span class="nt">&lt;/pluginArtifact&gt;</span>
			<span class="nt">&lt;protoSourceRoot</span><span class="nt">&gt;</span>src/main/proto<span class="nt">&lt;/protoSourceRoot&gt;</span>
		<span class="nt">&lt;/configuration&gt;</span>
		<span class="nt">&lt;executions</span><span class="nt">&gt;</span>
			<span class="nt">&lt;execution</span><span class="nt">&gt;</span>
				<span class="nt">&lt;goals</span><span class="nt">&gt;</span>
					<span class="nt">&lt;goal</span><span class="nt">&gt;</span>compile<span class="nt">&lt;/goal&gt;</span>
					<span class="nt">&lt;goal</span><span class="nt">&gt;</span>compile-custom<span class="nt">&lt;/goal&gt;</span>
				<span class="nt">&lt;/goals&gt;</span>
			<span class="nt">&lt;/execution&gt;</span>
		<span class="nt">&lt;/executions&gt;</span>
	<span class="nt">&lt;/plugin&gt;</span>
<span class="nt">&lt;/plugins&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>Add configuration server port and gRPC port number. Create <code>project/application.yml</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">server</span><span class="o">:</span>
  <span class="nx">port</span><span class="o">:</span> <span class="mi">8080</span>
<span class="nx">grpc</span><span class="o">:</span>
  <span class="nx">server</span><span class="o">:</span>
    <span class="nx">port</span><span class="o">:</span> <span class="mi">9090</span>
<span class="nx">grpcServerTwo</span><span class="o">:</span>
  <span class="nx">host</span><span class="o">:</span> <span class="nx">localhost</span>
  <span class="nx">port</span><span class="o">:</span> <span class="mi">9091</span>
</code></pre></td></tr></table>
</div>
</div><p>The line of <code>grpcServerTwo</code> used to communication channel from <code>gRPC Server-One</code> into <code>gRPC Server-Two</code>.</p>
<p>Then create a protocol buffers on gRPC Server-One <code>src/main/proto/HelloServiceServerOne.proto</code> file like below.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">syntax</span> <span class="p">=</span> <span class="s">&#34;proto3&#34;</span><span class="p">;</span>
<span class="nx">option</span> <span class="nx">java_multiple_files</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="kn">package</span> <span class="nx">com</span><span class="p">.</span><span class="nx">example</span><span class="p">.</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">serverone</span><span class="p">.</span><span class="nx">server</span><span class="p">;</span>

<span class="nx">message</span> <span class="nx">HelloRequest</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="nx">firstName</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="nx">lastName</span> <span class="p">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">message</span> <span class="nx">HelloResponse</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="nx">greeting</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">service</span> <span class="nx">HelloServiceServerOne</span> <span class="p">{</span>
    <span class="nx">rpc</span> <span class="nf">hello</span><span class="p">(</span><span class="nx">HelloRequest</span><span class="p">)</span> <span class="nf">returns</span> <span class="p">(</span><span class="nx">HelloResponse</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Once the proto file is created, we should package the project. It will generated the classes inside the target folder.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">mvn clean package -Dmaven.test.skip<span class="o">=</span><span class="nb">true</span>
</code></pre></td></tr></table>
</div>
</div><p>Create an implementation class <code>com.example.grpc.serverone.server.HelloServiceServerOneImpl</code> for the proto service.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@GrpcService</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloServiceServerOneImpl</span> <span class="kd">extends</span> <span class="n">HelloServiceServerOneGrpc</span><span class="o">.</span><span class="na">HelloServiceServerOneImplBase</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">hello</span><span class="o">(</span><span class="n">HelloRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">HelloResponse</span><span class="o">&gt;</span> <span class="n">responseObserver</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">greeting</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">(</span><span class="o">)</span>
                <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;Hello, &#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getFirstName</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34; &#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getLastName</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;. This response from server one.&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

        <span class="n">HelloResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">HelloResponse</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">(</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setGreeting</span><span class="o">(</span><span class="n">greeting</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

        <span class="n">responseObserver</span><span class="o">.</span><span class="na">onNext</span><span class="o">(</span><span class="n">response</span><span class="o">)</span><span class="o">;</span>
        <span class="n">responseObserver</span><span class="o">.</span><span class="na">onCompleted</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Update project main application like below.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServerOneApplication</span> <span class="kd">extends</span> <span class="n">SpringBootServletInitializer</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[</span><span class="o">]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">ServerOneApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">)</span><span class="o">;</span>
	<span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Try to run by typing <code>mvn spring-boot:run</code> to run the gRPC Server-One.</p>
<p><strong>gRPC Server Two as a Client</strong></p>
<p>Add below dependencies on your <code>pom.xml</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="c">&lt;!--</span><span class="c"> For the gRPC server </span><span class="c">--&gt;</span>
<span class="nt">&lt;dependency</span><span class="nt">&gt;</span>
	<span class="nt">&lt;groupId</span><span class="nt">&gt;</span>net.devh<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>grpc-server-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version</span><span class="nt">&gt;</span>2.5.1.RELEASE<span class="nt">&lt;/version&gt;</span>
	<span class="nt">&lt;exclusions</span><span class="nt">&gt;</span>
		<span class="nt">&lt;exclusion</span><span class="nt">&gt;</span>
			<span class="nt">&lt;groupId</span><span class="nt">&gt;</span>io.grpc<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>grpc-netty-shaded<span class="nt">&lt;/artifactId&gt;</span>
		<span class="nt">&lt;/exclusion&gt;</span>
	<span class="nt">&lt;/exclusions&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="c">&lt;!--</span><span class="c"> For the gRPC client </span><span class="c">--&gt;</span>
<span class="nt">&lt;dependency</span><span class="nt">&gt;</span>
	<span class="nt">&lt;groupId</span><span class="nt">&gt;</span>net.devh<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>grpc-client-spring-boot-autoconfigure<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version</span><span class="nt">&gt;</span>2.5.1.RELEASE<span class="nt">&lt;/version&gt;</span>
	<span class="nt">&lt;type</span><span class="nt">&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="c">&lt;!--</span><span class="c"> https://mvnrepository.com/artifact/org.projectlombok/lombok </span><span class="c">--&gt;</span>
<span class="nt">&lt;dependency</span><span class="nt">&gt;</span>
	<span class="nt">&lt;groupId</span><span class="nt">&gt;</span>org.projectlombok<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>lombok<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version</span><span class="nt">&gt;</span>1.18.16<span class="nt">&lt;/version&gt;</span>
	<span class="nt">&lt;scope</span><span class="nt">&gt;</span>provided<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>Add below extension and plugins into build section</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;extensions</span><span class="nt">&gt;</span>
	<span class="nt">&lt;extension</span><span class="nt">&gt;</span>
		<span class="nt">&lt;groupId</span><span class="nt">&gt;</span>kr.motd.maven<span class="nt">&lt;/groupId&gt;</span>
		<span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>os-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
		<span class="nt">&lt;version</span><span class="nt">&gt;</span>1.6.1<span class="nt">&lt;/version&gt;</span>
	<span class="nt">&lt;/extension&gt;</span>
<span class="nt">&lt;/extensions&gt;</span>
<span class="nt">&lt;plugins</span><span class="nt">&gt;</span>
	<span class="nt">&lt;plugin</span><span class="nt">&gt;</span>
		<span class="nt">&lt;groupId</span><span class="nt">&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
		<span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>spring-boot-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;/plugin&gt;</span>
	<span class="nt">&lt;plugin</span><span class="nt">&gt;</span>
		<span class="nt">&lt;groupId</span><span class="nt">&gt;</span>org.xolstice.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
		<span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>protobuf-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
		<span class="nt">&lt;version</span><span class="nt">&gt;</span>0.6.1<span class="nt">&lt;/version&gt;</span>
		<span class="nt">&lt;configuration</span><span class="nt">&gt;</span>
			<span class="nt">&lt;protocArtifact</span><span class="nt">&gt;</span>
				com.google.protobuf:protoc:3.3.0:exe:${os.detected.classifier}
			<span class="nt">&lt;/protocArtifact&gt;</span>
			<span class="nt">&lt;pluginId</span><span class="nt">&gt;</span>grpc-java<span class="nt">&lt;/pluginId&gt;</span>
			<span class="nt">&lt;pluginArtifact</span><span class="nt">&gt;</span>
				io.grpc:protoc-gen-grpc-java:1.4.0:exe:${os.detected.classifier}
			<span class="nt">&lt;/pluginArtifact&gt;</span>
			<span class="nt">&lt;protoSourceRoot</span><span class="nt">&gt;</span>src/main/proto<span class="nt">&lt;/protoSourceRoot&gt;</span>
		<span class="nt">&lt;/configuration&gt;</span>
		<span class="nt">&lt;executions</span><span class="nt">&gt;</span>
			<span class="nt">&lt;execution</span><span class="nt">&gt;</span>
				<span class="nt">&lt;goals</span><span class="nt">&gt;</span>
					<span class="nt">&lt;goal</span><span class="nt">&gt;</span>compile<span class="nt">&lt;/goal&gt;</span>
					<span class="nt">&lt;goal</span><span class="nt">&gt;</span>compile-custom<span class="nt">&lt;/goal&gt;</span>
				<span class="nt">&lt;/goals&gt;</span>
			<span class="nt">&lt;/execution&gt;</span>
		<span class="nt">&lt;/executions&gt;</span>
	<span class="nt">&lt;/plugin&gt;</span>
<span class="nt">&lt;/plugins&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>Add configuration server port and gRPC port number. Create <code>project/application.yml</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="nx">server</span><span class="o">:</span>
  <span class="nx">port</span><span class="o">:</span> <span class="mi">8081</span>
<span class="nx">grpc</span><span class="o">:</span>
  <span class="nx">server</span><span class="o">:</span>
    <span class="nx">port</span><span class="o">:</span> <span class="mi">9091</span>
<span class="nx">grpcServerOne</span><span class="o">:</span>
  <span class="nx">host</span><span class="o">:</span> <span class="nx">localhost</span>
  <span class="nx">port</span><span class="o">:</span> <span class="mi">9090</span>
</code></pre></td></tr></table>
</div>
</div><p>The line of <code>grpcServerOne</code> used to communication channel from <code>gRPC Server-Two</code> into <code>gRPC Server-One</code>.</p>
<p>Then create a protocol buffers on gRPC Server-Two <code>src/main/proto/HelloServiceServerOne.proto</code> file like below.</p>
<p><strong>Note:</strong> It should be same for protocol buffers on gRPC Server One because we need a stub service from server one.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">syntax</span> <span class="p">=</span> <span class="s">&#34;proto3&#34;</span><span class="p">;</span>
<span class="nx">option</span> <span class="nx">java_multiple_files</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="kn">package</span> <span class="nx">com</span><span class="p">.</span><span class="nx">example</span><span class="p">.</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">serverone</span><span class="p">.</span><span class="nx">server</span><span class="p">;</span>

<span class="nx">message</span> <span class="nx">HelloRequest</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="nx">firstName</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="nx">lastName</span> <span class="p">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">message</span> <span class="nx">HelloResponse</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="nx">greeting</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">service</span> <span class="nx">HelloServiceServerOne</span> <span class="p">{</span>
    <span class="nx">rpc</span> <span class="nf">hello</span><span class="p">(</span><span class="nx">HelloRequest</span><span class="p">)</span> <span class="nf">returns</span> <span class="p">(</span><span class="nx">HelloResponse</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Once the proto file is created, we should package the project. It will generated the classes inside the target folder.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">mvn clean package -Dmaven.test.skip<span class="o">=</span><span class="nb">true</span>
</code></pre></td></tr></table>
</div>
</div><p>Create a service class <code>com.example.grpc.servertwo.client.GRPCClientService</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GRPCClientService</span> <span class="o">{</span>

    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;${grpcServerOne.port:9090}&#34;</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">grpcServerOnePort</span><span class="o">;</span>

    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;${grpcServerOne.host:localhost}&#34;</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">grpcServerOneHost</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">Logger</span> <span class="n">log</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">GRPCClientService</span><span class="o">.</span><span class="na">class</span><span class="o">)</span><span class="o">;</span>

    <span class="kd">public</span> <span class="n">HelloResponse</span> <span class="nf">getGreetingFromServerOne</span><span class="o">(</span><span class="n">HelloClientRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;### Start execute GRPCClientService from server two&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;## grpcServerOneHost::%s and grpcServerPort::%s&#34;</span><span class="o">,</span> <span class="n">grpcServerOneHost</span><span class="o">,</span> <span class="n">grpcServerOnePort</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>
        <span class="n">ManagedChannel</span> <span class="n">channel</span> <span class="o">=</span> <span class="n">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="n">grpcServerOneHost</span><span class="o">,</span> <span class="n">grpcServerOnePort</span><span class="o">)</span><span class="o">.</span><span class="na">usePlaintext</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="n">HelloServiceServerOneGrpc</span><span class="o">.</span><span class="na">HelloServiceServerOneBlockingStub</span> <span class="n">stub</span> <span class="o">=</span> <span class="n">HelloServiceServerOneGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">)</span><span class="o">;</span>

        <span class="n">HelloResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">hello</span><span class="o">(</span><span class="n">HelloRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">(</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setFirstName</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getFirstName</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setLastName</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getLastName</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>

        <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

        <span class="k">return</span> <span class="n">response</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Lets make a rest service that we can request from postman to get response from gRPC Server-One.</p>
<p>Create a request <code>com.example.grpc.servertwo.rest.dto.HelloClientRequest</code> we will use <code>dto</code> package (Data Transfer Object).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Data</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloClientRequest</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">lastName</span><span class="o">;</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Create a response <code>com.example.grpc.servertwo.rest.dto.HelloClientResponse</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloClientResponse</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">greeting</span><span class="o">;</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>After that, we will create a rest controller</p>
<p><code>com.example.grpc.servertwo.rest.controller.ServerTwoController</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@RestController</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServerTwoController</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">GRPCClientService</span> <span class="n">grpcClientService</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">Logger</span> <span class="n">log</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">ServerTwoController</span><span class="o">.</span><span class="na">class</span><span class="o">)</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="nf">ServerTwoController</span><span class="o">(</span><span class="n">GRPCClientService</span> <span class="n">grpcClientService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">grpcClientService</span> <span class="o">=</span> <span class="n">grpcClientService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">&#34;/greeting&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">HelloClientResponse</span> <span class="nf">greeting</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">HelloClientRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">HelloResponse</span> <span class="n">grpcResponse</span> <span class="o">=</span> <span class="n">grpcClientService</span><span class="o">.</span><span class="na">getGreetingFromServerOne</span><span class="o">(</span><span class="n">request</span><span class="o">)</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">HelloClientResponse</span><span class="o">.</span><span class="na">builder</span><span class="o">(</span><span class="o">)</span>
                <span class="o">.</span><span class="na">greeting</span><span class="o">(</span><span class="n">grpcResponse</span><span class="o">.</span><span class="na">getGreeting</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Update project main application like below.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@SpringBootApplication</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServerTwoApplication</span> <span class="kd">extends</span> <span class="n">SpringBootServletInitializer</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[</span><span class="o">]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">ServerTwoApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">)</span><span class="o">;</span>
	<span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Try to run by typing <code>mvn spring-boot:run</code> to run the gRPC Server-Two.</p>
<p><strong>Lets try hello request from Postman</strong></p>
<p><code>URL: http://localhost:8081/greeting (POST)</code></p>
<p>Request</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
    <span class="s2">&#34;firstName&#34;</span><span class="o">:</span> <span class="s2">&#34;Maverick&#34;</span><span class="p">,</span>
    <span class="s2">&#34;lastName&#34;</span><span class="o">:</span> <span class="s2">&#34;Johnson&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Response</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
    <span class="s2">&#34;greeting&#34;</span><span class="o">:</span> <span class="s2">&#34;Hello, Maverick Johnson. This response from server one.&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>And the log is</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">2021-01-30 18:01:02.702  INFO <span class="m">53068</span> --- <span class="o">[</span>nio-8081-exec-1<span class="o">]</span> c.e.g.s.client.GRPCClientService         : <span class="c1">### Start execute GRPCClientService from server two</span>
2021-01-30 18:01:02.702  INFO <span class="m">53068</span> --- <span class="o">[</span>nio-8081-exec-1<span class="o">]</span> c.e.g.s.client.GRPCClientService         : <span class="c1">## grpcServerOneHost::localhost and grpcServerOnePort::9090</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>gRPC Server Two as a Server</strong></p>
<p>Create a protocol buffers on gRPC Server-Two <code>src/main/proto/UserServiceServerTwo.proto</code> file like below.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">syntax</span> <span class="p">=</span> <span class="s">&#34;proto3&#34;</span><span class="p">;</span>
<span class="nx">option</span> <span class="nx">java_multiple_files</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="kn">package</span> <span class="nx">com</span><span class="p">.</span><span class="nx">example</span><span class="p">.</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">servertwo</span><span class="p">.</span><span class="nx">server</span><span class="p">;</span>

<span class="nx">message</span> <span class="nx">UserRequest</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="nx">username</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="nx">password</span> <span class="p">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">string</span> <span class="nx">fullName</span> <span class="p">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">message</span> <span class="nx">User</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="nx">username</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="nx">password</span> <span class="p">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">string</span> <span class="nx">fullName</span> <span class="p">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="kt">string</span> <span class="nx">status</span> <span class="p">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="kt">string</span> <span class="nx">createdAt</span> <span class="p">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">message</span> <span class="nx">UserResponse</span> <span class="p">{</span>
    <span class="nx">repeated</span> <span class="nx">User</span> <span class="nx">user</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">service</span> <span class="nx">UserServiceServerTwo</span> <span class="p">{</span>
    <span class="nx">rpc</span> <span class="nf">createUser</span><span class="p">(</span><span class="nx">UserRequest</span><span class="p">)</span> <span class="nf">returns</span> <span class="p">(</span><span class="nx">User</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">rpc</span> <span class="nf">getAll</span><span class="p">(</span><span class="nx">UserRequest</span><span class="p">)</span> <span class="nf">returns</span> <span class="p">(</span><span class="nx">UserResponse</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Once the proto file is created, we should package the project. It will generated the classes inside the target folder.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">mvn clean package -Dmaven.test.skip<span class="o">=</span><span class="nb">true</span>
</code></pre></td></tr></table>
</div>
</div><p>Create an implementation class <code>com.example.grpc.servertwo.server.UserServiceServerTwoImpl</code> for the proto service.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@GrpcService</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserServiceServerTwoImpl</span> <span class="kd">extends</span> <span class="n">UserServiceServerTwoGrpc</span><span class="o">.</span><span class="na">UserServiceServerTwoImplBase</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">Logger</span> <span class="n">log</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">UserServiceServerTwoImpl</span><span class="o">.</span><span class="na">class</span><span class="o">)</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">ALL_USERS</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
            <span class="n">User</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">(</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">&#34;maverick&#34;</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">&#34;12824834&#34;</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setFullName</span><span class="o">(</span><span class="s">&#34;Maverick Johnson&#34;</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setCreatedAt</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="s">&#34;active&#34;</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="o">)</span><span class="o">,</span>
            <span class="n">User</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">(</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">&#34;admin&#34;</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="s">&#34;2348324274&#34;</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setFullName</span><span class="o">(</span><span class="s">&#34;Administrator&#34;</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setCreatedAt</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="s">&#34;active&#34;</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="o">)</span>
    <span class="o">)</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">getAll</span><span class="o">(</span><span class="n">UserRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">UserResponse</span><span class="o">&gt;</span> <span class="n">responseObserver</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;### START executing UserServiceServerTwoImpl.getAll()&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">UserResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">UserResponse</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">(</span><span class="o">)</span>
                <span class="o">.</span><span class="na">addAllUser</span><span class="o">(</span><span class="n">ALL_USERS</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

        <span class="n">responseObserver</span><span class="o">.</span><span class="na">onNext</span><span class="o">(</span><span class="n">response</span><span class="o">)</span><span class="o">;</span>
        <span class="n">responseObserver</span><span class="o">.</span><span class="na">onCompleted</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;### END executing UserServiceServerTwoImpl.getAll()&#34;</span><span class="o">)</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createUser</span><span class="o">(</span><span class="n">UserRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">StreamObserver</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">responseObserver</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;### START executing UserServiceServerTwoImpl.createUser()&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">(</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getUsername</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getPassword</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setFullName</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getFullName</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="s">&#34;active&#34;</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setCreatedAt</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

        <span class="n">responseObserver</span><span class="o">.</span><span class="na">onNext</span><span class="o">(</span><span class="n">user</span><span class="o">)</span><span class="o">;</span>
        <span class="n">responseObserver</span><span class="o">.</span><span class="na">onCompleted</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;### END executing UserServiceServerTwoImpl.createUser()&#34;</span><span class="o">)</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Try to run by typing <code>mvn spring-boot:run</code> to run the gRPC Server-Two.</p>
<p><strong>gRPC Server One as a Client</strong></p>
<p>Then create a protocol buffers on gRPC Server-One <code>src/main/proto/UserServiceServerTwo.proto</code> file like below.</p>
<p><strong>Note:</strong> It should be same for protocol buffers on gRPC Server Two because we need a stub service from server two.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">syntax</span> <span class="p">=</span> <span class="s">&#34;proto3&#34;</span><span class="p">;</span>
<span class="nx">option</span> <span class="nx">java_multiple_files</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="kn">package</span> <span class="nx">com</span><span class="p">.</span><span class="nx">example</span><span class="p">.</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">servertwo</span><span class="p">.</span><span class="nx">server</span><span class="p">;</span>

<span class="nx">message</span> <span class="nx">UserRequest</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="nx">username</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="nx">password</span> <span class="p">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">string</span> <span class="nx">fullName</span> <span class="p">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">message</span> <span class="nx">User</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="nx">username</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="nx">password</span> <span class="p">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kt">string</span> <span class="nx">fullName</span> <span class="p">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="kt">string</span> <span class="nx">status</span> <span class="p">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="kt">string</span> <span class="nx">createdAt</span> <span class="p">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">message</span> <span class="nx">UserResponse</span> <span class="p">{</span>
    <span class="nx">repeated</span> <span class="nx">User</span> <span class="nx">user</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">service</span> <span class="nx">UserServiceServerTwo</span> <span class="p">{</span>
    <span class="nx">rpc</span> <span class="nf">createUser</span><span class="p">(</span><span class="nx">UserRequest</span><span class="p">)</span> <span class="nf">returns</span> <span class="p">(</span><span class="nx">User</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">rpc</span> <span class="nf">getAll</span><span class="p">(</span><span class="nx">UserRequest</span><span class="p">)</span> <span class="nf">returns</span> <span class="p">(</span><span class="nx">UserResponse</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Once the proto file is created, we should package the project. It will generated the classes inside the target folder.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">mvn clean package -Dmaven.test.skip<span class="o">=</span><span class="nb">true</span>
</code></pre></td></tr></table>
</div>
</div><p>Create a service class <code>com.example.grpc.servertwo.client.GRPCClientService</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GRPCClientService</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">Logger</span> <span class="n">log</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">GRPCClientService</span><span class="o">.</span><span class="na">class</span><span class="o">)</span><span class="o">;</span>

    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;${grpcServerTwo.port:9091}&#34;</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">grpcServerTwoPort</span><span class="o">;</span>

    <span class="nd">@Value</span><span class="o">(</span><span class="s">&#34;${grpcServerTwo.host:localhost}&#34;</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">grpcServerTwoHost</span><span class="o">;</span>

    <span class="kd">public</span> <span class="n">User</span> <span class="nf">createUser</span><span class="o">(</span><span class="n">UserClientRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;### START execute GRPCClientService from server one&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;## grpcServerOneHost::%s and grpcServerPort::%s&#34;</span><span class="o">,</span> <span class="n">grpcServerTwoHost</span><span class="o">,</span> <span class="n">grpcServerTwoPort</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>
        <span class="n">ManagedChannel</span> <span class="n">channel</span> <span class="o">=</span> <span class="n">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="n">grpcServerTwoHost</span><span class="o">,</span> <span class="n">grpcServerTwoPort</span><span class="o">)</span><span class="o">.</span><span class="na">usePlaintext</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="n">UserServiceServerTwoGrpc</span><span class="o">.</span><span class="na">UserServiceServerTwoBlockingStub</span> <span class="n">stub</span> <span class="o">=</span> <span class="n">UserServiceServerTwoGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">)</span><span class="o">;</span>

        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="n">UserRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">(</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getUsername</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getPassword</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setFullName</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getFullName</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>

        <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;### END execute GRPCClientService from server one&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">user</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">UserClientResponse</span><span class="o">&gt;</span> <span class="nf">getAllUser</span><span class="o">(</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;### START execute GRPCClientService from server one&#34;</span><span class="o">)</span><span class="o">;</span>
        <span class="n">ManagedChannel</span> <span class="n">channel</span> <span class="o">=</span> <span class="n">ManagedChannelBuilder</span><span class="o">.</span><span class="na">forAddress</span><span class="o">(</span><span class="n">grpcServerTwoHost</span><span class="o">,</span> <span class="n">grpcServerTwoPort</span><span class="o">)</span><span class="o">.</span><span class="na">usePlaintext</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="n">UserServiceServerTwoGrpc</span><span class="o">.</span><span class="na">UserServiceServerTwoBlockingStub</span> <span class="n">stub</span> <span class="o">=</span> <span class="n">UserServiceServerTwoGrpc</span><span class="o">.</span><span class="na">newBlockingStub</span><span class="o">(</span><span class="n">channel</span><span class="o">)</span><span class="o">;</span>

        <span class="n">List</span><span class="o">&lt;</span><span class="n">UserClientResponse</span><span class="o">&gt;</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="o">&gt;</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

        <span class="n">UserResponse</span> <span class="n">grpcResponse</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="na">getAll</span><span class="o">(</span><span class="n">UserRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>
        <span class="n">channel</span><span class="o">.</span><span class="na">shutdown</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

        <span class="k">for</span> <span class="o">(</span><span class="n">User</span> <span class="n">user</span> <span class="o">:</span> <span class="n">grpcResponse</span><span class="o">.</span><span class="na">getUserList</span><span class="o">(</span><span class="o">)</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">UserClientResponse</span> <span class="n">userResponse</span> <span class="o">=</span> <span class="n">UserClientResponse</span><span class="o">.</span><span class="na">builder</span><span class="o">(</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">createdAt</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getCreatedAt</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">fullName</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getFullName</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">password</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getPassword</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getStatus</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">username</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
            <span class="n">response</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">userResponse</span><span class="o">)</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;### END execute GRPCClientService from server one&#34;</span><span class="o">)</span><span class="o">;</span>

        <span class="k">return</span> <span class="n">response</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Lets make a rest service that we can request from postman to get response from gRPC Server-Two.</p>
<p>Create a request <code>com.example.grpc.serverone.rest.dto.UserClientRequest</code> we will use <code>dto</code> package (Data Transfer Object).</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Data</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserClientRequest</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">username</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">password</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">fullName</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Create a response <code>com.example.grpc.serverone.rest.dto.UserClientResponse</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@Data</span>
<span class="nd">@Builder</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserClientResponse</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">username</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">password</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">fullName</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">status</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">createdAt</span><span class="o">;</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>After that, we will create a rest controller</p>
<p><code>com.example.grpc.serverone.rest.controller.ServerOneController</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="nd">@RestController</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServerOneController</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">GRPCClientService</span> <span class="n">grpcClientService</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">public</span> <span class="nf">ServerOneController</span><span class="o">(</span><span class="n">GRPCClientService</span> <span class="n">grpcClientService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">grpcClientService</span> <span class="o">=</span> <span class="n">grpcClientService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">&#34;/createUser&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">UserClientResponse</span> <span class="nf">createUser</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">UserClientRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">grpcClientService</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="n">request</span><span class="o">)</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">UserClientResponse</span><span class="o">.</span><span class="na">builder</span><span class="o">(</span><span class="o">)</span>
                <span class="o">.</span><span class="na">username</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">password</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getPassword</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">fullName</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getFullName</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">createdAt</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getCreatedAt</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getStatus</span><span class="o">(</span><span class="o">)</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/getAllUser&#34;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">UserClientResponse</span><span class="o">&gt;</span> <span class="nf">getAllUser</span><span class="o">(</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">grpcClientService</span><span class="o">.</span><span class="na">getAllUser</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Try to run by typing <code>mvn spring-boot:run</code> to run the gRPC Server-One.</p>
<p><strong>Lets try user request from Postman</strong></p>
<p><code>URL: http://localhost:8080/getAllUser (GET)</code></p>
<p>Response</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&#34;username&#34;</span><span class="o">:</span> <span class="s2">&#34;maverick&#34;</span><span class="p">,</span>
        <span class="s2">&#34;password&#34;</span><span class="o">:</span> <span class="s2">&#34;12824834&#34;</span><span class="p">,</span>
        <span class="s2">&#34;fullName&#34;</span><span class="o">:</span> <span class="s2">&#34;Maverick Johnson&#34;</span><span class="p">,</span>
        <span class="s2">&#34;status&#34;</span><span class="o">:</span> <span class="s2">&#34;active&#34;</span><span class="p">,</span>
        <span class="s2">&#34;createdAt&#34;</span><span class="o">:</span> <span class="s2">&#34;Sat Jan 30 17:42:24 WIB 2021&#34;</span>
    <span class="p">}</span><span class="p">,</span>
    <span class="p">{</span>
        <span class="s2">&#34;username&#34;</span><span class="o">:</span> <span class="s2">&#34;admin&#34;</span><span class="p">,</span>
        <span class="s2">&#34;password&#34;</span><span class="o">:</span> <span class="s2">&#34;2348324274&#34;</span><span class="p">,</span>
        <span class="s2">&#34;fullName&#34;</span><span class="o">:</span> <span class="s2">&#34;Administrator&#34;</span><span class="p">,</span>
        <span class="s2">&#34;status&#34;</span><span class="o">:</span> <span class="s2">&#34;active&#34;</span><span class="p">,</span>
        <span class="s2">&#34;createdAt&#34;</span><span class="o">:</span> <span class="s2">&#34;Sat Jan 30 17:42:24 WIB 2021&#34;</span>
    <span class="p">}</span>
<span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>And the log is</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">2021-01-30 18:00:31.317  INFO <span class="m">53038</span> --- <span class="o">[</span>nio-8080-exec-2<span class="o">]</span> c.e.g.s.client.GRPCClientService         : <span class="c1">### START execute GRPCClientService from server one</span>
2021-01-30 18:00:31.318  INFO <span class="m">53038</span> --- <span class="o">[</span>nio-8080-exec-2<span class="o">]</span> c.e.g.s.client.GRPCClientService         : <span class="c1">## grpcServerTwoHost::localhost and grpcServerTwoPort::9091</span>
2021-01-30 18:00:31.967  INFO <span class="m">53038</span> --- <span class="o">[</span>nio-8080-exec-2<span class="o">]</span> c.e.g.s.client.GRPCClientService         : <span class="c1">### END execute GRPCClientService from server one</span>
</code></pre></td></tr></table>
</div>
</div><p><code>URL: http://localhost:8080/createUser (POST)</code></p>
<p>Request</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
    <span class="s2">&#34;username&#34;</span><span class="o">:</span> <span class="s2">&#34;johndoe&#34;</span><span class="p">,</span>
    <span class="s2">&#34;password&#34;</span><span class="o">:</span> <span class="s2">&#34;johndoe123&#34;</span><span class="p">,</span>
    <span class="s2">&#34;fullName&#34;</span><span class="o">:</span> <span class="s2">&#34;John Doe&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Response</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
    <span class="s2">&#34;username&#34;</span><span class="o">:</span> <span class="s2">&#34;johndoe&#34;</span><span class="p">,</span>
    <span class="s2">&#34;password&#34;</span><span class="o">:</span> <span class="s2">&#34;johndoe123&#34;</span><span class="p">,</span>
    <span class="s2">&#34;fullName&#34;</span><span class="o">:</span> <span class="s2">&#34;John Doe&#34;</span><span class="p">,</span>
    <span class="s2">&#34;status&#34;</span><span class="o">:</span> <span class="s2">&#34;active&#34;</span><span class="p">,</span>
    <span class="s2">&#34;createdAt&#34;</span><span class="o">:</span> <span class="s2">&#34;Sat Jan 30 18:01:59 WIB 2021&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><a class="post-dummy-target" id="grpc-client-with-python"></a><h3>gRPC Client with Python</h3>
<p>This section is optional, because I curious for another programming language.</p>
<p>Set up protocol buffers <code>project/HelloServiceServerOne.proto</code>.</p>
<p><strong>Note:</strong> It should be same for protocol buffers on gRPC Server One because we need a stub service from server one.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">syntax</span> <span class="p">=</span> <span class="s">&#34;proto3&#34;</span><span class="p">;</span>
<span class="nx">option</span> <span class="nx">java_multiple_files</span> <span class="p">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="kn">package</span> <span class="nx">com</span><span class="p">.</span><span class="nx">example</span><span class="p">.</span><span class="nx">grpc</span><span class="p">.</span><span class="nx">serverone</span><span class="p">.</span><span class="nx">server</span><span class="p">;</span>

<span class="nx">message</span> <span class="nx">HelloRequest</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="nx">firstName</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">string</span> <span class="nx">lastName</span> <span class="p">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">message</span> <span class="nx">HelloResponse</span> <span class="p">{</span>
    <span class="kt">string</span> <span class="nx">greeting</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">service</span> <span class="nx">HelloServiceServerOne</span> <span class="p">{</span>
    <span class="nx">rpc</span> <span class="nf">hello</span><span class="p">(</span><span class="nx">HelloRequest</span><span class="p">)</span> <span class="nf">returns</span> <span class="p">(</span><span class="nx">HelloResponse</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Generate gRPC classes for Python</p>
<p>We need some dependencies for gRPC.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$ pip install grpcio grpcio-tools
$ python -m grpc_tools.protoc -I. --python_out<span class="o">=</span>. --grpc_python_out<span class="o">=</span>. HelloServiceServerOne.proto
</code></pre></td></tr></table>
</div>
</div><p>The files generated will be as follows:</p>
<ul>
<li><code>HelloServiceServerOne_pb2.py</code> contains message classes.</li>
<li><code>HelloServiceServerOne_pb2_grpc.py</code> contains server and client classes</li>
</ul>
<p>Create a gRPC Client</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">grpc</span>

<span class="c1">## Import generated classes</span>
<span class="kn">import</span> <span class="nn">HelloServiceServerOne_pb2</span><span class="o">,</span> <span class="nn">HelloServiceServerOne_pb2_grpc</span>


<span class="c1"># Open a gRPC channel</span>
<span class="n">channel</span> <span class="o">=</span> <span class="n">grpc</span><span class="o">.</span><span class="n">insecure_channel</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;</span><span class="s1">localhost:9090</span><span class="s1">&#39;</span><span class="p">)</span>


<span class="c1"># Create a stub for gRPC client</span>
<span class="n">stub</span> <span class="o">=</span> <span class="n">HelloServiceServerOne_pb2_grpc</span><span class="o">.</span><span class="n">HelloServiceServerOneStub</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>

<span class="c1"># Create a valid request</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">HelloServiceServerOne_pb2</span><span class="o">.</span><span class="n">HelloRequest</span><span class="p">(</span><span class="n">firstName</span><span class="o">=</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">Maverick</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">lastName</span><span class="o">=</span><span class="sa"></span><span class="s2">&#34;</span><span class="s2">John Doe</span><span class="s2">&#34;</span><span class="p">)</span>

<span class="c1"># Make the call</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">stub</span><span class="o">.</span><span class="n">hello</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>

<span class="c1"># Output response</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">greeting</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>Thats it!</p>
<p>With the server already listening, we simply run our client.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$ python client.py
Hello, Maverick John Doe. This response from server one.
</code></pre></td></tr></table>
</div>
</div><a class="post-dummy-target" id="clone-or-download"></a><h3>Clone or Download</h3>
<p>You can clone or download this project</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">https://github.com/piinalpin/gRPC-example.git
</code></pre></td></tr></table>
</div>
</div><a class="post-dummy-target" id="thankyou"></a><h3>Thankyou</h3>
<p><a href="https://medium.com/@sajeerzeji44/grpc-for-spring-boot-microservices-bd9b79569772">Medium</a> - GRPC for Spring Boot Microservices</p>
<p><a href="https://www.semantics3.com/blog/a-simplified-guide-to-grpc-in-python-6c4e25f0c506/">Semantics3</a> - A simplified guide to gRPC in Python</p>
        </div>

        <div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>This article is updated with 2021-01-30</span>
            </div>
            <div class="post-info-license">
                
            </div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md">
                
                    
                        <span><a class="link-to-markdown" href="https://blog.piinalpin.com/2021/01/create-simple-microservice-with-grpc/index.md" target="_blank"></a></span>
                    
                
            </div>
            <div class="post-info-share">
                
                    <span>
    
        <a href="//twitter.com/share?url=https%3a%2f%2fblog.piinalpin.com%2f2021%2f01%2fcreate-simple-microservice-with-grpc%2f&amp;text=Create%20Simple%20Microservice%20With%20gRPC&amp;via=piinalpin" target="_blank" title="Share on Twitter">
            <i class="fab fa-twitter fa-fw"></i>
        </a>
    
    
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.piinalpin.com%2f2021%2f01%2fcreate-simple-microservice-with-grpc%2f" target="_blank" title="Share on Facebook">
            <i class="fab fa-facebook-square fa-fw"></i>
        </a>
    
    
        <a href="//reddit.com/submit?url=https%3a%2f%2fblog.piinalpin.com%2f2021%2f01%2fcreate-simple-microservice-with-grpc%2f&amp;title=Create%20Simple%20Microservice%20With%20gRPC" target="_blank" title="Share on Reddit">
            <i class="fab fa-reddit fa-fw"></i>
        </a>
    
    
    
    
    
    
    
    
</span>
                
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section>
            
                
                    <span class="tag">
                        <a href="https://blog.piinalpin.com/tags/java/"><i class="fas fa-tag fa-fw"></i>Java</a>
                    </span>
                
                    <span class="tag">
                        <a href="https://blog.piinalpin.com/tags/spring-boot/"><i class="fas fa-tag fa-fw"></i>Spring Boot</a>
                    </span>
                
                    <span class="tag">
                        <a href="https://blog.piinalpin.com/tags/python/"><i class="fas fa-tag fa-fw"></i>Python</a>
                    </span>
                
                    <span class="tag">
                        <a href="https://blog.piinalpin.com/tags/grpc/"><i class="fas fa-tag fa-fw"></i>gRPC</a>
                    </span>
                
                    <span class="tag">
                        <a href="https://blog.piinalpin.com/tags/grpc-client/"><i class="fas fa-tag fa-fw"></i>gRPC Client</a>
                    </span>
                
                    <span class="tag">
                        <a href="https://blog.piinalpin.com/tags/grpcserver/"><i class="fas fa-tag fa-fw"></i>gRPCServer</a>
                    </span>
                
                    <span class="tag">
                        <a href="https://blog.piinalpin.com/tags/microservices/"><i class="fas fa-tag fa-fw"></i>Microservices</a>
                    </span>
                
            
        </section>
        <section>
            <span><a href="javascript:window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="https://blog.piinalpin.com/">Home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
            <a href="https://blog.piinalpin.com/2021/01/consume-graphql-react/" class="prev" rel="prev" title="GraphQL Client using React"><i class="fas fa-angle-left fa-fw"></i>GraphQL Client using React</a>
        
        
    </div>
</div>

        <div class="post-comment">
            
            

            
        </div>
    </article></div>
            </main>
            <footer class="footer">
    <div class="copyright">
        <div class="copyright-line">
            Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreffer">Hugo</a>&nbsp;|&nbsp;Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="external nofollow noopener noreffer">LoveIt<i class="far fa-heart fa-fw"></i></a>
        </div>
        <div class="copyright-line">
            <i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://blog.piinalpin.com/">piinalpin</a></span><span class="license">&nbsp;|&nbsp;<a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
    </div>
</footer>


    
    




    
    




    
    





    
    



    
    



    
    





    
    





    
    



    
    





    
    




    
    




    
    



    
    





    
    


<script src="/js/lib/jquery/jquery.slim.min.min.js"></script>
<script src="/js/lib/lazysizes/lazysizes.min.min.js"></script>
<script src="/js/lib/smooth-scroll/smooth-scroll.polyfills.min.min.js"></script><script>window.scroll = new SmoothScroll('[data-scroll]', {speed: 300, speedAsDuration: true});</script>


    
    

    

    
        <link rel="stylesheet" href="/css/lib/katex/katex.min.min.css"><script src="/js/lib/katex/katex.min.min.js"></script><script defer src="/js/lib/katex/auto-render.min.min.js" onload="renderMathInElement(document.body);"></script>
    

    

    






<script src="/js/blog.min.js"></script>


    
</div>
        <a href="#" class="dynamic-to-top" id="dynamic-to-top" data-scroll><span>&nbsp;</span></a>
    </body>
</html>