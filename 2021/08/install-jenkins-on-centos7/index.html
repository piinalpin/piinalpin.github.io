<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Install Jenkins on Centos7 | PiinAlpin</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noodp" />
<meta name="Description" content="Jenkins project offers a public community-driven roadmap. It aggregates key initiatives in all areas: features, infrastructure, documentation, community, etc.">
<link rel="prev" href="https://blog.piinalpin.com/2021/07/why-should-learn-ansible/" />
<link rel="next" href="https://blog.piinalpin.com/2021/08/docker-compose-collection/" />
<link rel="canonical" href="https://blog.piinalpin.com/2021/08/install-jenkins-on-centos7/" />
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Install Jenkins on Centos7"/>
<meta name="twitter:description" content="Jenkins project offers a public community-driven roadmap. It aggregates key initiatives in all areas: features, infrastructure, documentation, community, etc."/>
<script type="application/ld+json">
    {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Install Jenkins on Centos7",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https:\/\/blog.piinalpin.com\/2021\/08\/install-jenkins-on-centos7\/"
    },
    
        "image": {
            "@type": "ImageObject",
            "url": "https:\/\/blog.piinalpin.com\/cover.png",
            "width":  800 ,
            "height":  600 
        },
    
    "genre": "posts",
    
        "keywords": "Jenkins, DevOps, CI\/CD, Continous Integration, Centos7, Centos",
    
    "wordcount":  1084 ,
    "url": "https:\/\/blog.piinalpin.com\/2021\/08\/install-jenkins-on-centos7\/",
    
        "datePublished": "2021-08-01T09:38:14\u002b07:00",
    
    
        "dateModified": "2021-08-01T09:38:14\u002b07:00",
    
    
        "license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.",
    
    
        "publisher": {
            "@type": "Organization",
            "name": "Alvinditya Saputra",
            "logo": {
            "@type": "ImageObject",
            "url": "https:\/\/blog.piinalpin.com\/logo.png",
            "width":  127 ,
            "height":  40 
            }
        },
    
    
    "description": "Jenkins project offers a public community-driven roadmap. It aggregates key initiatives in all areas: features, infrastructure, documentation, community, etc."
    }
    </script>
<link rel="stylesheet" href="/css/style.min.css">
<link rel="stylesheet" href="/css/lib/fontawesome-free/all.min.min.css">

<link rel="stylesheet" href="/css/lib/animate/animate.min.min.css">


<script>
  if('serviceWorker' in navigator) {
      navigator.serviceWorker
          .register('/service-worker.js', { scope: '/' })
          .then(function(registration) {
              
          });

      navigator.serviceWorker
          .ready
          .then(function(registration) {
              
          });
  }
</script>
    </head>
    <body>
        <script>
            window.localStorage.getItem('theme') === 'dark';
            document.body.classList.add('dark-theme');
        </script>
        <div class="wrapper">
            <nav class="navbar">
    <div class="navbar-container">
        <div class="navbar-header animated bounceIn">
            <a href="https://blog.piinalpin.com/">PiinAlpin</a>
        </div>
        <div class="navbar-menu">
            
            
                <a class="menu-item" href="https://blog.piinalpin.com/posts" title="">Posts</a>
            
                <a class="menu-item" href="https://blog.piinalpin.com/tags" title="">Tags</a>
            
                <a class="menu-item" href="https://blog.piinalpin.com/categories" title="">Categories</a>
            
                <a class="menu-item" href="https://blog.piinalpin.com/about" title="">About</a>
            
        </div>
    </div>
</nav>
<nav class="navbar-mobile">
     <div class="navbar-container">
        <div class="navbar-header">
            <div class="navbar-header-title animated bounceIn">
                <a href="https://blog.piinalpin.com/">PiinAlpin</a>
            </div>
            <div class="menu-toggle" id="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
    </div>
</nav><main class="main">
                <div class="container">
                    
    
    
    

    <article class="post-warp">
        <h1 class="post-title animated flipInX">Install Jenkins on Centos7</h1>

        <div class="post-meta">
            <div class="post-meta-main">
                <a class="author" href="https://blog.piinalpin.com/" rel="author"><i class="fas fa-user-circle fa-fw"></i>piinalpin&nbsp;</a>
                <span class="post-category">
                        included in
                        <i class="far fa-folder fa-fw"></i><a href="https://blog.piinalpin.com/categories/documentation/">Documentation</a>
                            
                    </span>
            </div>
            <div class="post-meta-other">
                <i class="far fa-calendar-alt fa-fw"></i><time datetime=2021-08-01>2021-08-01</time>&nbsp;
                <i class="fas fa-pencil-alt fa-fw"></i>about 1084 words&nbsp;
                <i class="far fa-clock fa-fw"></i>6 min&nbsp;</div>
        </div>

        

        <div class="post-toc" id="post-toc">
                <h2 class="post-toc-title">Table of Contents</h2>
                <div class="post-toc-content">
                    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#overview">Overview</a></li>
        <li><a href="#prerequisites">Prerequisites</a></li>
        <li><a href="#install-jenkins">Install Jenkins</a></li>
        <li><a href="#setup-jenkins-ui">Setup Jenkins UI</a></li>
        <li><a href="#agent-installation">Agent Installation</a></li>
        <li><a href="#connect-agent-to-jenkins">Connect Agent to Jenkins</a></li>
        <li><a href="#create-test-job-pipeline">Create Test Job (Pipeline)</a></li>
        <li><a href="#references">References</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
            </div>
            <div class="post-toc-mobile" id="post-toc-mobile">
                <details>
                    <summary><div class="post-toc-title"><span>Table of Contents</span><span><i class="details icon fas fa-angle-down"></i></span></div></summary>
                    <div class="post-toc-content">
                        
                        
                        <nav id="TableOfContentsMobile">
  <ul>
    <li>
      <ul>
        <li><a href="#overview">Overview</a></li>
        <li><a href="#prerequisites">Prerequisites</a></li>
        <li><a href="#install-jenkins">Install Jenkins</a></li>
        <li><a href="#setup-jenkins-ui">Setup Jenkins UI</a></li>
        <li><a href="#agent-installation">Agent Installation</a></li>
        <li><a href="#connect-agent-to-jenkins">Connect Agent to Jenkins</a></li>
        <li><a href="#create-test-job-pipeline">Create Test Job (Pipeline)</a></li>
        <li><a href="#references">References</a></li>
      </ul>
    </li>
  </ul>
</nav>
                    </div>
                </details>
            </div>

        <div class="post-content">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <a class="post-dummy-target" id="overview"></a><h3>Overview</h3>
<p><img src="/images/jenkins.png" alt="Jenkins.io"></p>
<p>Jenkins is a self-contained, open source automation server which can be used to automate all sorts of tasks related to building, testing, and delivering or deploying software.</p>
<p>Jenkins can be installed through native system packages, Docker, or even run standalone by any machine with a Java Runtime Environment (JRE) installed (<a href="https://www.jenkins.io/doc/">Jenkins.io</a>).</p>
<a class="post-dummy-target" id="prerequisites"></a><h3>Prerequisites</h3>
<ul>
<li>Vagrant, see how to install Vagrant <strong><a href="https://blog.piinalpin.com/2021/07/why-should-learn-ansible/#prerequisites">here</a></strong></li>
<li>Add the following host entries on local device <code>/etc/hosts</code> :
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">192.168.0.1 jenkins.local
192.168.1.1 agent.local
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p><strong>Startup Vagrant</strong></p>
<p>Create Vagrantfile and fill the following code.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">Vagrant.configure<span class="o">(</span>2<span class="o">)</span> <span class="k">do</span> <span class="p">|</span>config<span class="p">|</span>
    config.vm.box <span class="o">=</span> <span class="s2">&#34;bento/centos-7&#34;</span>
  
    config.vm.define <span class="s2">&#34;jenkins&#34;</span> <span class="k">do</span> <span class="p">|</span>jenkins<span class="p">|</span>
      jenkins.vm.network <span class="s2">&#34;private_network&#34;</span>, ip: <span class="s2">&#34;192.168.0.1&#34;</span>, name: <span class="s1">&#39;vboxnet0&#39;</span>
      jenkins.vm.hostname <span class="o">=</span> <span class="s2">&#34;jenkins.local&#34;</span>
      jenkins.vm.network :forwarded_port, guest: 22, host: 2222, id: <span class="s2">&#34;ssh&#34;</span>, disabled: <span class="nb">true</span>
      jenkins.vm.network :forwarded_port, guest: 22, host: 2230, auto_correct: <span class="nb">true</span>
      jenkins.vm.network :forwarded_port, guest: 8080, host: 8080, auto_correct: <span class="nb">true</span>
      jenkins.ssh.port <span class="o">=</span> <span class="m">2230</span>
      jenkins.vm.provider <span class="s2">&#34;jenkins&#34;</span> <span class="k">do</span> <span class="p">|</span>vb<span class="p">|</span>
        vb.cpus <span class="o">=</span> <span class="m">1</span>
        vb.memory <span class="o">=</span> <span class="m">1024</span>
      end
    end

    config.vm.define <span class="s2">&#34;agent&#34;</span> <span class="k">do</span> <span class="p">|</span>agent<span class="p">|</span>
      agent.vm.network <span class="s2">&#34;private_network&#34;</span>, ip: <span class="s2">&#34;192.168.1.1&#34;</span>, name: <span class="s1">&#39;vboxnet1&#39;</span>
      agent.vm.hostname <span class="o">=</span> <span class="s2">&#34;agent.local&#34;</span>
      agent.vm.network :forwarded_port, guest: 22, host: 2222, id: <span class="s2">&#34;ssh&#34;</span>, disabled: <span class="nb">true</span>
      agent.vm.network :forwarded_port, guest: 22, host: 2231, auto_correct: <span class="nb">true</span>
      agent.ssh.port <span class="o">=</span> <span class="m">2231</span>
      agent.vm.provider <span class="s2">&#34;agent&#34;</span> <span class="k">do</span> <span class="p">|</span>vb<span class="p">|</span>
        vb.cpus <span class="o">=</span> <span class="m">1</span>
        vb.memory <span class="o">=</span> <span class="m">1024</span>
      end
    end
  end
</code></pre></td></tr></table>
</div>
</div><p>And start vagrant by typing <code>vagrant up</code> on your terminal.</p>
<a class="post-dummy-target" id="install-jenkins"></a><h3>Install Jenkins</h3>
<p>SSH into jenkins machine, you can use <code>vagrant ssh jenkins</code> or ssh from host <code>ssh -p 2230 vagrant@jenkins.local -i .vagrant/machines/jenkins/virtualbox/private_key</code></p>
<p>Login as root <code>sudo su -</code></p>
<p>Install wget <code>yum install -y wget</code></p>
<p>Create jenkins limit file <code>/etc/security/limits.d/30-jenkins.conf</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">jenkins soft core unlimited
jenkins hard core unlimited
jenkins soft fsize unlimited
jenkins hard fsize unlimited
jenkins soft nofile <span class="m">4096</span>
jenkins hard nofile <span class="m">8192</span>
jenkins soft nproc <span class="m">30654</span>
jenkins hard nproc <span class="m">30654</span>
</code></pre></td></tr></table>
</div>
</div><p>Setup firewall</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">systemctl start firewalld

firewall-cmd --permanent --add-port<span class="o">=</span>22/tcp
firewall-cmd --permanent --add-port<span class="o">=</span>8080/tcp

firewall-cmd --reload
firewall-cmd --list-all
</code></pre></td></tr></table>
</div>
</div><p>We should get an outuput</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">public <span class="o">(</span>active<span class="o">)</span>
  target: default
  icmp-block-inversion: no
  interfaces: eth0 eth1
  sources: 
  services: dhcpv6-client ssh
  ports: 22/tcp 8080/tcp
  protocols: 
  masquerade: no
  forward-ports: 
  source-ports: 
  icmp-blocks: 
  rich rules:
</code></pre></td></tr></table>
</div>
</div><p>Add the following entries to <code>/etc/hosts</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">192.168.0.1 jenkins.local
192.168.1.1 agent.local
</code></pre></td></tr></table>
</div>
</div><p>Add AdoptOpenJDK repository</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">cat <span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/yum.repos.d/adoptopenjdk.repo
</span><span class="s">[AdoptOpenJDK]
</span><span class="s">name=AdoptOpenJDK
</span><span class="s">baseurl=http://adoptopenjdk.jfrog.io/adoptopenjdk/rpm/centos/$releasever/$basearch
</span><span class="s">enabled=1
</span><span class="s">gpgcheck=1
</span><span class="s">gpgkey=https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public
</span><span class="s">EOF</span>
</code></pre></td></tr></table>
</div>
</div><p>Add repository to get latest Git</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">yum -y install https://packages.endpoint.com/rhel/7/os/x86_64/endpoint-repo-1.9-1.x86_64.rpm
</code></pre></td></tr></table>
</div>
</div><p>Add jenkins repository</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo
rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key
</code></pre></td></tr></table>
</div>
</div><p>Create directory</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">mkdir -p /var/cache/jenkins/tmp
mkdir -p /var/cache/jenkins/heapdumps
</code></pre></td></tr></table>
</div>
</div><p>Uninstall old Git by typing <code>yum remove git*</code> on your terminal</p>
<p>Install AdoptOpenJDK, Git, Jenkins and Fontconfig</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">yum -y install adoptopenjdk-11-hotspot git jenkins fontconfig
</code></pre></td></tr></table>
</div>
</div><p>Edit the <code>/etc/sysconfig/jenkins</code> file</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">JENKINS_JAVA_OPTIONS</span><span class="o">=</span><span class="s2">&#34;-Djava.awt.headless=true -Djava.io.tmpdir=/var/cache/jenkins/tmp -Dorg.apache.commons.jelly.tags.fmt.timeZone=Asia/Jakarta -Duser.timezone=Asia/Jakarta&#34;</span>

<span class="nv">JENKINS_ARGS</span><span class="o">=</span><span class="s2">&#34;--pluginroot=/var/cache/jenkins/plugins&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>Change owner jenkins config file <code>chown -R jenkins:jenkins /var/cache/jenkins</code></p>
<p>Start jenkins by typing <code>systemctl start jenkins</code> and get status <code>systemctl -l status jenkins</code></p>
<p>We should get an output status.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">● jenkins.service - LSB: Jenkins Automation Server
   Loaded: loaded <span class="o">(</span>/etc/rc.d/init.d/jenkins<span class="p">;</span> bad<span class="p">;</span> vendor preset: disabled<span class="o">)</span>
   Active: active <span class="o">(</span>running<span class="o">)</span> since Sun 2021-08-01 01:06:57 UTC<span class="p">;</span> 16s ago
     Docs: man:systemd-sysv-generator<span class="o">(</span>8<span class="o">)</span>
  Process: <span class="m">3697</span> <span class="nv">ExecStart</span><span class="o">=</span>/etc/rc.d/init.d/jenkins start <span class="o">(</span><span class="nv">code</span><span class="o">=</span>exited, <span class="nv">status</span><span class="o">=</span>0/SUCCESS<span class="o">)</span>
   CGroup: /system.slice/jenkins.service
           └─3718 /etc/alternatives/java -Dcom.sun.akuma.Daemon<span class="o">=</span>daemonized -Djava.awt.headless<span class="o">=</span><span class="nb">true</span> -Djava.io.tmpdir<span class="o">=</span>/var/cache/jenkins/tmp -Dorg.apache.commons.jelly.tags.fmt.timeZone<span class="o">=</span>Asia/Jakarta -Duser.timezone<span class="o">=</span>Asia/Jakarta -DJENKINS_HOME<span class="o">=</span>/var/lib/jenkins -jar /usr/lib/jenkins/jenkins.war --logfile<span class="o">=</span>/var/log/jenkins/jenkins.log --webroot<span class="o">=</span>/var/cache/jenkins/war --daemon --httpPort<span class="o">=</span><span class="m">8080</span> --debug<span class="o">=</span><span class="m">5</span> --handlerCountMax<span class="o">=</span><span class="m">100</span> --handlerCountMaxIdle<span class="o">=</span><span class="m">20</span> --pluginroot<span class="o">=</span>/var/cache/jenkins/plugins
</code></pre></td></tr></table>
</div>
</div><a class="post-dummy-target" id="setup-jenkins-ui"></a><h3>Setup Jenkins UI</h3>
<p>Access <code>http://jenkins.local:8080</code> on your host and should be like below.</p>
<p><img src="/images/jenkins.local-ui-1.png" alt="Unlock Jenkins"></p>
<p>Type <code>sudo cat /var/lib/jenkins/secrets/initialAdminPassword</code> to get password and paste it on field then continue.</p>
<p>Install <strong>suggested plugin</strong></p>
<p><img src="/images/jenkins.local-ui-2.png" alt="Suggested Plugin Jenkins"></p>
<p>Create first admin user.</p>
<p><img src="/images/jenkins.local-ui-3.png" alt="Admin User Jenkins"></p>
<p>Setup jenkins url and click start using jenkins.</p>
<p><img src="/images/jenkins.local-ui-4.png" alt="Jenkins URL"></p>
<p>And restart jenkins then login with admin user <code>http://jenkins.local:8080/restart</code></p>
<a class="post-dummy-target" id="agent-installation"></a><h3>Agent Installation</h3>
<p>SSH into jenkins machine, you can use <code>vagrant ssh agent</code> or ssh from host <code>ssh -p 2231 vagrant@agent.local -i .vagrant/machines/agent/virtualbox/private_key</code></p>
<p>Login as root <code>sudo su -</code></p>
<p>Setup firewall</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">systemctl start firewalld

firewall-cmd --permanent --add-port<span class="o">=</span>22/tcp

firewall-cmd --reload
firewall-cmd --list-all
</code></pre></td></tr></table>
</div>
</div><p>We should get an outuput</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">public <span class="o">(</span>active<span class="o">)</span>
  target: default
  icmp-block-inversion: no
  interfaces: eth0 eth1
  sources: 
  services: dhcpv6-client ssh
  ports: 22/tcp 8080/tcp
  protocols: 
  masquerade: no
  forward-ports: 
  source-ports: 
  icmp-blocks: 
  rich rules:
</code></pre></td></tr></table>
</div>
</div><p>Add the following entries to <code>/etc/hosts</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">192.168.0.1 jenkins.local
192.168.1.1 agent.local
</code></pre></td></tr></table>
</div>
</div><p>Add AdoptOpenJDK repository</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">cat <span class="s">&lt;&lt;&#39;EOF&#39; &gt; /etc/yum.repos.d/adoptopenjdk.repo
</span><span class="s">[AdoptOpenJDK]
</span><span class="s">name=AdoptOpenJDK
</span><span class="s">baseurl=http://adoptopenjdk.jfrog.io/adoptopenjdk/rpm/centos/$releasever/$basearch
</span><span class="s">enabled=1
</span><span class="s">gpgcheck=1
</span><span class="s">gpgkey=https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public
</span><span class="s">EOF</span>
</code></pre></td></tr></table>
</div>
</div><p>Add repository to get latest Git</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">yum -y install https://packages.endpoint.com/rhel/7/os/x86_64/endpoint-repo-1.9-1.x86_64.rpm
</code></pre></td></tr></table>
</div>
</div><p>Uninstall old Git by typing <code>yum remove git*</code> on your terminal</p>
<p>Install AdoptOpenJDK, Git, Fontconfig and Wget</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">yum -y install adoptopenjdk-11-hotspot git fontconfig wget
</code></pre></td></tr></table>
</div>
</div><p>Install docker and unzip from <a href="https://docs.docker.com/engine/install/centos/">Install Docker Engine on CentOS</a></p>
<ul>
<li>Remove old docker if any <code>yum remove docker docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-engine</code></li>
<li><code>yum -y install yum-utils</code></li>
<li><code>yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</code></li>
<li><code>yum -y install docker-ce docker-ce-cli containerd.io unzip</code></li>
<li><code>systemctl enable docker</code></li>
<li><code>systemctl start docker</code></li>
<li><code>groupadd docker</code></li>
<li><code>systemctl -l status docker</code></li>
<li><code>exit</code></li>
<li><code>sudo usermod -aG docker $USER</code></li>
<li><code>exit</code></li>
</ul>
<p>SSH again to vagrant agent</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">ssh -p <span class="m">2231</span> vagrant@agent.local -i .vagrant/machines/agent/virtualbox/private_key
</code></pre></td></tr></table>
</div>
</div><p>Try running container by typing <code>docker run hello-world</code> on your terminal.</p>
<p>Installing maven</p>
<ul>
<li><code>sudo su -</code></li>
<li><code>mkdir -p /opt/tools/maven</code></li>
<li><code>cd /opt/tools/maven</code></li>
<li><code>wget https://downloads.apache.org/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz</code></li>
<li><code>tar zxvf apache-maven-3.6.3-bin.tar.gz</code></li>
<li><code>rm -f apache-maven-3.6.3-bin.tar.gz </code></li>
<li><code>ln -s apache-maven-3.6.3 latest</code></li>
</ul>
<p>Installing gradle</p>
<ul>
<li><code>mkdir -p /opt/tools/gradle</code></li>
<li><code>cd /opt/tools/gradle</code></li>
<li><code>wget https://services.gradle.org/distributions/gradle-7.1.1-bin.zip</code></li>
<li><code>unzip gradle-7.1.1-bin.zip</code></li>
<li><code>rm -f gradle-7.1.1-bin.zip</code></li>
<li><code>ln -s gradle-7.1.1 latest</code></li>
</ul>
<p>Export maven and gradle to profile</p>
<ul>
<li><code>echo &quot;PATH=/opt/tools/gradle/latest/bin:\$PATH&quot; &gt; /etc/profile.d/gradle.sh</code></li>
<li><code>echo &quot;PATH=/opt/tools/maven/latest/bin:\$PATH&quot; &gt; /etc/profile.d/maven.sh</code></li>
<li><code>chown -R vagrant:vagrant /opt/tools</code></li>
<li><code>exit</code></li>
<li><code>exit</code></li>
</ul>
<p>Verify that maven and gradle has already installed on your machine.</p>
<ul>
<li><code>ssh -p 2231 vagrant@agent.local -i .vagrant/machines/agent/virtualbox/private_key</code></li>
<li><code>mvn --version</code></li>
<li><code>gradle --version</code></li>
</ul>
<a class="post-dummy-target" id="connect-agent-to-jenkins"></a><h3>Connect Agent to Jenkins</h3>
<p>Manage jenkins at system configuration.</p>
<p><img src="/images/jenkins.local-ui-5.png" alt="Jenkins System Configuration"></p>
<p>And fill field like below</p>
<p><img src="/images/jenkins.local-ui-6.png" alt="Jenkins Configuration"></p>
<p>Add nodes and fill like below</p>
<p><img src="/images/jenkins.local-ui-7.png" alt="Jenkins Nodes 1"></p>
<p><img src="/images/jenkins.local-ui-8.png" alt="Jenkins Nodes 2"></p>
<p>Add credential</p>
<p><img src="/images/jenkins.local-ui-9.png" alt="Jenkins Nodes Credential"></p>
<p>Click advanced and set port to <code>2231</code> then click save.</p>
<p><img src="/images/jenkins.local-ui-10.png" alt="Jenkins SSH Port"></p>
<a class="post-dummy-target" id="create-test-job-pipeline"></a><h3>Create Test Job (Pipeline)</h3>
<p>Create new pipeline then save</p>
<p><img src="/images/jenkins.local-ui-11.png" alt="Jenkins Pipeline"></p>
<p>Create build script to running jobs.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">pipeline <span class="o">{</span>
  agent <span class="o">{</span>label <span class="s2">&#34;linux&#34;</span><span class="o">}</span>
  stages <span class="o">{</span>
    stage<span class="o">(</span><span class="s2">&#34;Hello&#34;</span><span class="o">)</span> <span class="o">{</span>
      steps <span class="o">{</span>
        sh <span class="s2">&#34;&#34;&#34;
</span><span class="s2">          mvn --version
</span><span class="s2">          gradle --version
</span><span class="s2">          docker info
</span><span class="s2">        &#34;&#34;&#34;</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>You can see my example on <strong><a href="https://github.com/piinalpin/learning-ansible/tree/master/02-install-jenkins-centos8">Github</a></strong></p>
<a class="post-dummy-target" id="references"></a><h3>References</h3>
<p><a href="https://www.jenkins.io/doc/">Jenkins.io</a> - Jenkins User Documentation</p>
<p><a href="https://www.youtube.com/watch?v=g7CnQnDQwuU">CloudBeesTV</a> - How To Install Jenkins on CentOS 7</p>
<p><a href="https://www.redhat.com/en/blog/continuous-delivery-jboss-eap-and-openshift-cloudbees-jenkins-platform">RedHat</a> - Continuous Delivery to JBoss EAP and OpenShift with the CloudBees Jenkins Platform</p>
<p><a href="https://support.cloudbees.com/hc/en-us/articles/222446987-Prepare-Jenkins-for-Support">CloudBees</a> - Prepare Jenkins for Support</p>
<p><a href="https://pkg.jenkins.io/redhat-stable/">Jenkins</a> - Jenkins Redhat Packages</p>
<p><a href="https://docs.docker.com/engine/install/centos/">Docker</a> - Install Docker Engine on CentOS</p>
<p><a href="https://docs.docker.com/engine/install/linux-postinstall/">Docker</a> - Post-installation steps for Linux</p>
<p><a href="https://adoptopenjdk.net/installation.html#linux-pkg">AdoptOpenJDK</a> - Installation</p>

        </div>

        <div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>This article is updated with 2021-08-01</span>
            </div>
            <div class="post-info-license">
                
            </div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md">
                
                    
                        <span><a class="link-to-markdown" href="https://blog.piinalpin.com/2021/08/install-jenkins-on-centos7/index.md" target="_blank"></a></span>
                    
                
            </div>
            <div class="post-info-share">
                
                    <span>
    
        <a href="//twitter.com/share?url=https%3a%2f%2fblog.piinalpin.com%2f2021%2f08%2finstall-jenkins-on-centos7%2f&amp;text=Install%20Jenkins%20on%20Centos7&amp;via=piinalpin" target="_blank" title="Share on Twitter">
            <i class="fab fa-twitter fa-fw"></i>
        </a>
    
    
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.piinalpin.com%2f2021%2f08%2finstall-jenkins-on-centos7%2f" target="_blank" title="Share on Facebook">
            <i class="fab fa-facebook-square fa-fw"></i>
        </a>
    
    
        <a href="//reddit.com/submit?url=https%3a%2f%2fblog.piinalpin.com%2f2021%2f08%2finstall-jenkins-on-centos7%2f&amp;title=Install%20Jenkins%20on%20Centos7" target="_blank" title="Share on Reddit">
            <i class="fab fa-reddit fa-fw"></i>
        </a>
    
    
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fblog.piinalpin.com%2f2021%2f08%2finstall-jenkins-on-centos7%2f&amp;title=Install%20Jenkins%20on%20Centos7" target="_blank" title="Share on LinkedIn">
            <i class="fab fa-linkedin fa-fw"></i>
        </a>
    
    
    
    
    
    
    
</span>
                
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section>
            
                
                    <span class="tag">
                        <a href="https://blog.piinalpin.com/tags/jenkins/"><i class="fas fa-tag fa-fw"></i>Jenkins</a>
                    </span>
                
                    <span class="tag">
                        <a href="https://blog.piinalpin.com/tags/devops/"><i class="fas fa-tag fa-fw"></i>DevOps</a>
                    </span>
                
                    <span class="tag">
                        <a href="https://blog.piinalpin.com/tags/ci/cd/"><i class="fas fa-tag fa-fw"></i>CI/CD</a>
                    </span>
                
                    <span class="tag">
                        <a href="https://blog.piinalpin.com/tags/continous-integration/"><i class="fas fa-tag fa-fw"></i>Continous Integration</a>
                    </span>
                
                    <span class="tag">
                        <a href="https://blog.piinalpin.com/tags/centos7/"><i class="fas fa-tag fa-fw"></i>Centos7</a>
                    </span>
                
                    <span class="tag">
                        <a href="https://blog.piinalpin.com/tags/centos/"><i class="fas fa-tag fa-fw"></i>Centos</a>
                    </span>
                
            
        </section>
        <section>
            <span><a href="javascript:window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="https://blog.piinalpin.com/">Home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
            <a href="https://blog.piinalpin.com/2021/07/why-should-learn-ansible/" class="prev" rel="prev" title="Why Should Learn Ansible - Linux Automation"><i class="fas fa-angle-left fa-fw"></i>Why Should Learn Ansible - Linux Automation</a>
        
        
            <a href="https://blog.piinalpin.com/2021/08/docker-compose-collection/" class="next" rel="next" title="My Docker Compose Collection">My Docker Compose Collection<i class="fas fa-angle-right fa-fw"></i></a>
        
    </div>
</div>

        <div class="post-comment">
            
            

            
        </div>
    </article></div>
            </main>
            <footer class="footer">
    <div class="copyright">
        <div class="copyright-line">
            Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreffer">Hugo</a>&nbsp;|&nbsp;Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="external nofollow noopener noreffer">LoveIt<i class="far fa-heart fa-fw"></i></a>
        </div>
        <div class="copyright-line">
            <i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://blog.piinalpin.com/">piinalpin</a></span><span class="license">&nbsp;|&nbsp;<a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
    </div>
</footer>


    
    




    
    




    
    





    
    



    
    



    
    





    
    





    
    



    
    





    
    




    
    




    
    



    
    





    
    


<script src="/js/lib/jquery/jquery.slim.min.min.js"></script>
<script src="/js/lib/lazysizes/lazysizes.min.min.js"></script>
<script src="/js/lib/smooth-scroll/smooth-scroll.polyfills.min.min.js"></script><script>window.scroll = new SmoothScroll('[data-scroll]', {speed: 300, speedAsDuration: true});</script>


    
    

    

    
        <link rel="stylesheet" href="/css/lib/katex/katex.min.min.css"><script src="/js/lib/katex/katex.min.min.js"></script><script defer src="/js/lib/katex/auto-render.min.min.js" onload="renderMathInElement(document.body);"></script>
    

    

    






<script src="/js/blog.min.js"></script>


    
</div>
        <a href="#" class="dynamic-to-top" id="dynamic-to-top" data-scroll><span>&nbsp;</span></a>
    </body>
</html>